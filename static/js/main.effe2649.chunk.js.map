{"version":3,"sources":["../node_modules/@ionic/core/dist/esm-es5 lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm/legacy lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","data/dbStore.ts","util/logger.ts","util/KeyedCollection.ts","api/environment.ts","enums/DeviceOperatingSystem.ts","api/OrbitalApiHelper.ts","api/PushNotificationsAPI.ts","util/push-notifications-controller.ts","context/ApplicationUserContext.tsx","hooks/useDialogBox.tsx","orbital-interfaces/authorized-items.ts","components/ToggleListEx.tsx","components/NotificationSettingsModal.tsx","components/Menu.tsx","api/UserAPI.ts","context/AuthorizedItemsContext.tsx","pages/Login.tsx","util/time-helper.ts","enums/EventType.ts","api/ScheduleEventsAPI.ts","orbital-interfaces/EventFilter.ts","components/SchedulePageComponents/WeekChooser.tsx","enums/EventStatus.ts","components/EditEvent/EditEventAuthorization.ts","util/authitems-helper.ts","enums/EventGroup.ts","components/SchedulePageComponents/EventCard.tsx","components/SchedulePageComponents/DailyNoteCard.tsx","components/SchedulePageComponents/EventListSection.tsx","components/SchedulePageComponents/EventList.tsx","util/event-helper.ts","util/array-helper.ts","components/SchedulePageComponents/ScheduleFilterModal.tsx","hooks/useIonicRefresher.tsx","enums/RecurrenceType.ts","components/EditEvent/editor/EventTypeStatusEditor.tsx","components/EditEvent/editor/EventPositionEditor.tsx","api/EmployeesAPI.ts","components/EditEvent/editor/EventEmployeeEditor.tsx","components/EditEvent/editor/EventStartEndEditor.tsx","components/EditEvent/editor/AddBreakModal.tsx","components/EditEvent/editor/EventBreakEditor.tsx","components/EditEvent/editor/EventTagEditor.tsx","components/EditEvent/editor/EventConfirmEditor.tsx","components/EditEvent/editor/EventIsClockedInEditor.tsx","components/EditEvent/EditEventModalState.ts","enums/RecurrenceUpdateType.ts","components/EditEvent/editor/EventNotesEditor.tsx","components/EditEvent/editor/EventClockoutValueEditor.tsx","api/RequestsAPI.ts","components/EditEvent/editor/EventRequestModal.tsx","components/EditEvent/editor/EventRequestEditor.tsx","components/EditEvent/editor/WeekdayList.tsx","components/EditEvent/editor/RecurringEventSection.tsx","components/EditEvent/RecurrenceUpdateTypeSelector.tsx","hooks/useOrbitalDialogBox.tsx","components/EditEvent/EditEventModal.tsx","hooks/useSimpleToast.tsx","enums/ClockInRequirement.ts","components/SchedulePageComponents/EventCardSkeleton.tsx","components/SchedulePageComponents/NoEventsToShow.tsx","pages/SchedulePage.tsx","components/ClockPageComponents/BreakSelectorModal.tsx","enums/StartBreakResponseCode.ts","enums/EndBreakResponseCode.ts","api/TimeClockAPI.ts","components/ClockPageComponents/ClockoutModal.tsx","components/ClockPageComponents/SwitchPositionOrTagButton.tsx","components/ClockPageComponents/ClockPanel.tsx","components/ClockPageComponents/PayrollPeriodChooser.tsx","api/PayrollPeriodAPI.ts","components/ClockPageComponents/PayrollOrbitalTimeItem.tsx","components/ClockPageComponents/PayrollDetailModal.tsx","components/ClockPageComponents/PayrollDetailRow.tsx","components/ClockPageComponents/PayrollDetailList.tsx","components/ClockPageComponents/PayrollPeriodsTab.tsx","components/TodayDailyNoteCard.tsx","components/TodayEventCard.tsx","components/TodayEventCardSkeleton.tsx","components/ClockPageComponents/ClockTodayTab.tsx","pages/ClockPage.tsx","components/MessagesPageComponents/MessageItem.tsx","components/MessagesPageComponents/MessagesFilterModal.tsx","orbital-interfaces/MessageTypes.ts","api/MessageAPI.ts","hooks/useYesOrCancelDialogBox.tsx","components/MessagesPageComponents/ViewMessageModal.tsx","pages/MessagesPage.tsx","pages/MainTabs.tsx","components/AuthGate.tsx","pages/Logout.tsx","App.tsx","index.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","getKeyStore","openDB","upgrade","db","createObjectStore","putUserState","state","a","async","put","getUserState","get","getAccessToken","access_token","undefined","putAuthItems","auth","getAuthItems","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","log","eventName","eventParams","firebase","logEvent","KeyedCollection","items","count","key","this","hasOwnProperty","value","val","keySet","prop","push","values","environments","name","url","et","Add","DeviceOperatingSystem","settings","env","versionName","versionCode","revisionHash","appVersionString","hasCapacitor","isPlatform","platform","getApiUrl","user","endpoint","Item","environment","getUserAndEnvironmentFromInput","input","length","username","envKey","toLowerCase","substring","baseUrl","data","options","method","headers","body","JSON","stringify","fetch","response","json","results","appVersion","console","error","contentType","indexOf","dataString","token","operatingSystem","iOS","Android","apiHelper","TokenId","OperatingSystem","typeIds","PushNotifications","Plugins","pushEnabled","showMessage","history","createBrowserHistory","forceRefresh","register","addListener","pushApi","notification","MessageId","title","goForward","messageId","INITIAL_APPLICATION_USER","isLoggedin","darkMode","loading","latitude","longitude","lastLocationUpdate","isPushEnabled","INITIAL_APPLICATION_USER_CONTEXT","logout","userLoggedIn","u","at","refreshGeoLocation","ApplicationUserContext","React","createContext","ApplicationUserContextProvider","props","useState","userState","internalSetUserState","useEffect","mounted","all","newState","PushController","enabled","Provider","currentState","Geolocation","getCurrentPosition","position","coords","message","children","useDialogBox","Role","isOpen","setIsOpen","header","onDismiss","alertData","setAlertData","showAlert","alertBoxJsx","onDidDismiss","buttons","ToggleListEx","list","selected","selectionChanged","isItemChecked","i","mode","checked","onClick","slice","onAllChanged","toggle","item","n","includes","newList","newlist","filter","r","itemToggle","NotificationSettingsModal","onDismissModal","useContext","notifications","setNotifications","selectedNotifications","setSelectedNotifications","isSubscribed","responses","slot","icon","arrowRoundBack","class","newSelected","Menu","disableMenu","userName","substr","dlg","showNotificationsModal","setShowNotificationsModal","type","disabled","contentId","className","toUpperCase","auto-hide","button","routerLink","routerDirection","mail","logOut","authenticateUser","password","error_description","loggedIn","err","getHomePageData","getAuthorizedItems","result","TimeFormat","ClockOutValueType","AdminAuthorization","UnscheduledBreakOptions","BreakType","EmployeeSort","initialHomePageData","locations","tags","payrollEvents","employeeId","role","Employee","currentEvents","nextEvent","dailyNotes","INITIAL_AUTHORIZED_ITEMS","INITIAL_AUTHITEMS_CONTEXT","refreshAuth","force","newUser","clearAuth","authLoading","AuthorizedItemsContext","currentAuth","authFromStore","UserAPI","authFromApi","AuthorizedItemsContextProvider","internalSetAuth","setLoading","newAuth","res","validate","Login","showLoading","setShowLoading","setUsername","setPassword","usernameErrors","passwordErrors","loginEnabled","setLoginEnabled","useIonViewWillEnter","direction","src","alt","spinner","duration","onChange","newUsername","target","color","newPassword","envUser","msg","expand","noEndTime","Date","getDurationFromTimeSpan","timespan","hrs","min","tok","split","hrTok","parseInt","getDurationStringFromTimeSpan","getDateString","date","format","getBreakStartEnd","brk","start","parseISO","BreakStart","replace","BreakEnd","end","getEventBreakStartEndString","getWeekStart","weekStartsOn","dayStart","dayStartMinutes","newDate","setHours","counter","addDays","formatDateTimeAsMvcString","d","getFullYear","padZeroes","getMonth","getDate","getHours","getMinutes","formatDecimal","num","digits","decimals","Number","toFixed","toString","negative","s","Math","max","digitCount","EventType","getScheduleEvent","scheduleEventId","getScheduleEventsByFilter","filterToSend","getDailyNotesByFilter","updateScheduleEvent","eventValues","recurrenceUpdateType","eventType","eventStatus","isConfirmed","positionId","employee","eventStart","eventEnd","tagId","tag","eventBreaks","isClockedIn","breakStart","breakDuration","clockOutValue","clockoutValue","absentTime","absentTimeMinutes","notes","sendMessage","recurrenceId","recurrenceStart","recurrenceEnd","recurrenceType","repeatInterval","repeatWeekdays","createScheduleEvent","sceduleEventId","deleteScheduleEvent","initialEventFilter","settingsLocId","dnLocIds","filterByEmployee","filterByPosition","positionIds","eventTypeId","eventStatusId","WeekChooser","startDate","setStartDate","arrowBack","displayFormat","pickerFormat","toISOString","onIonChange","detail","arrowDropdown","arrowForward","thisDate","isTodayClass","isToday","EventStatus","EventEditEnum","locationId","loc","foundDepartment","flatMap","l","departments","positions","p","Shift","Cover","Clock","Absent","departmentId","adminAuth","CanEditSchedules","Admin","hasPosition","dept","Approved","Request","RequestDenied","locId","posId","location","locPosId","depPosId","posPosId","EventGroup","getEventEditAuthorization","eventEmployeeId","eventLocationId","eventDepartmentId","eventPositionId","eventConfirmed","selectedPosition","authHelper","eventStatusOptions","getEventStatusOptionsList","eventTypeOptions","getEventTypeOptionsList","retVal","buttonText","enableConfirm","isReadonly","text","usage","None","eventTypeOptionList","eventStatusOptionList","BusinessAdmin","LocationAdmin","endOfEvent","now","afterEnd","isAfter","employeeEvent","CanEditOwnClockEvents","CanEditEmployeeClockEvents","CreateCoverRequest","DeleteShiftRequest","UndoCoverRequest","Delete","CreateShiftRequest","locSettings","ShowUnavailableEventType","Unavailable","ShowVacationEventType","Vacation","ShowAbsentEventType","peTypes","pe","startsWith","concat","isEditingExistingEvent","es","colorMap","1","2","3","4","6","7","statusTimeColor","EventCard","event","multiLocation","showEmployeeName","onEdit","displayNameStyle","display","eventStartDate","EventStart","multiDepartment","posDisplay","AbbreviatedLocationName","AbbreviatedDepartmentName","PositionName","eventTypeBorder","borderLeft","EventTypeId","timeColor","EventStatusId","eventEditAuth","EmployeeId","EventEnd","LocationId","DepartmentId","PositionId","IsConfirmed","onUserClick","style","IsClockedIn","time","ev","getEventInformationStartEnd","EventDuration","FirstName","LastName","Tag","note","noteDate","deptName","DepartmentName","Notes","EventListSection","events","showEmployeeNames","DailyNoteId","ScheduleEventId","getSegmentsForMy","locationSettings","hoursPerDay","segments","weekStart","DayWeekStartsOn","DayStartTime","notesStart","isBefore","weekEnd","minutes","str","floor","getDurationString","h","reduce","prev","cur","EventList","listType","getSegmentsForRequests","ContainsKey","thisDatesNotes","getSegmentsForAll","Keys","seg","showTotalDuration","getEventTypeOptions","unshift","p2l","some","sort","p1","p2","arrayHelper","areEqual","a1","a2","contains","arr","containsAny","arr1","arr2","unique","newArr","uniqueObject","filt","found","ScheduleFilterModal","onCancelModal","myFilter","setMyFilter","showCustomEventTypes","setShowCustomEventTypes","ClockAndSched","eventGroup","setEventGroup","eventTypeList","setEventTypeList","locationIds","setLocationIds","departmentIds","setDepartmentIds","setPositionIds","isDirty","setIsDirty","getDefaultFilter","onEventGroupSelect","f","group","Custom","interface","Scheduled","DontWork","All","multiple","locIds","deptIds","abbr","posIds","pos","selectedPositionIds","defaultFilter","returnedFilter","filterApplied","useIonicRefresher","RecurrenceType","doRefresh","ionRefresherRef","useRef","ionicRefresherJsx","ref","onIonRefresh","pullingText","refreshingSpinner","refreshingText","backgroundColor","EventTypeStatusEditor","editorValues","update","eventTypes","eventStatuses","selectedEventTypeId","setSelectedEventTypeId","eventStatusList","setEventStatusList","selectedEventStatusId","setSelectedEventStatusId","absentHoursPlaceholderText","setAbsentHoursPlaceholderText","setLocSettings","absentTimeString","setAbsentTimeString","absentId","HoursMinutes","hours","TimeFormatDigits","TimeFormatDecimals","getTimeStringFromMinutes","newLocSettings","onAbsentTimeChange","test","round","parseFloat","getMinutesFromTimeString","size","newEventType","newAbsentMinutes","onEventTypeChange","newEventStatus","placeholder","onIonBlur","EventPositionEditor","setSelectedPosition","positionList","setPositionList","selPos","isMultiLoc","isMultiDep","createPositionList","updatePosition","EventEmployeeEditor","employeeList","setEmployeeList","isLoading","setIsLoading","selectedEmployeeId","setSelectedEmployeeId","getEmployees","employeeAPI","employees","empIds","thisEmp","FullName","newSelectedEmployeeId","emp","EventStartEndEditor","minuteValues","newEventStart","newEventEnd","hasOverlap","breaks","startA","endA","startB","addMinutes","endB","AddBreakModal","onCancel","onAdd","currentBreaks","setMinutes","endDate","setEndDate","isRestricted","setIsRestricted","isPaid","setIsPaid","errorMessage","setErrorMessage","isValid","setIsValid","alert","newStart","newStartDate","onStartUpdate","newEnd","newEndDate","onEndUpdate","width","borderBottom","EventBreakEditor","breakList","setBreakList","showBreakModal","setShowBreakModal","marginBottom","add","IsPaidBreak","logoUsd","b","IsRestricted","lock","showRestricted","newBreakList","onDeleteBreak","trash","cssClass","EventTagEditor","selectedTagId","setSelectedTagId","tagList","setTagList","t","tagIds","onUpdateTag","EventConfirmEditor","setIsConfirmed","showConfirmed","setShowConfirmed","isConfirmable","EventIsClockedInEditor","setIsClockedIn","showIsClockedIn","setShowIsClockedIn","paddingRight","marginLeft","RecurrenceUpdateType","getLocationById","getPositionById","getValidStartEnd","startStr","endStr","isEqual","isClockoutValueValid","ClockOutValueLabel","isAllValid","v","validEventStartEnd","validEmployee","validTag","validEventTypeStatus","validClockoutValue","validRecurrenceStartEnd","validRepeatInterval","validRepeatWeekdays","INITIAL_EDITOR_VAUES","isUpdating","valid","absentName","editorValueReducer","action","getIsClockedIn","ConfirmedBy","TagId","EventBreaks","AbsentName","AbsentId","AbsentTimeMinutes","ClockOutValue","EventRecurrenceId","EventRecurrenceStart","EventRecurrenceEnd","RepeatType","RepeatInterval","RepeatWeekdays","newTypeStatusState","newClockoutValueState","newStartState","newEndState","newTagState","newConfirmState","newClockedInState","newRepeatState","repeatWeekDays","Weekly","EventNotesEditor","maxlength","rows","newNote","EventClockoutValueEditor","isVisible","setIsVisible","newValue","businessId","broadCastMessage","coverMessage","toEmployeeId","BusinessId","BroadcastCoverRequestMessage","CoverMessage","DirectToEmployeeId","recUpdateType","RecUpdateType","isDirectCoverList","directCoverList","EventRequestModal","onOk","setNotes","coverList","setCoverList","requestAPI","hidden","EnableDirectCoverRequest","cover","EventRequestEditor","cancelEditModal","setUsageText","showRequestModal","setShowRequestModal","onComplete","reqApi","WeekdayList","checkList","setCheckList","dayOfWeek","getDay","newCheckState","isChecked","onCheckboxChecked","RecurringEventSection","setIsChecked","paddingLeft","height","calendar","textAlign","refresh","MonthlyByDayOfMonth","MonthlyByDayOfWeek","borderTop","RecurrenceUpdateTypeSelector","onSelect","updateType","onButtonClick","choice","titleText","UpdateSingleEvent","UpdateEntireSeries","UpdateSeriesForward","useOrbitalDialogBox","selection","dialogData","setDialogData","showDialog","dialogOptions","dialogBoxJsx","opt","EditEventModal","useReducer","updateEditorValues","scheduleEvent","setScheduleEvent","setRecurrenceUpdateType","showRecurrenceUpdateTypeSelector","setShowRecurrenceUpdateTypeSelector","buttonClicked","setButtonClicked","isEditing","dialog","scheduleEventApi","createOrUpdate","deleteEvent","skipPrompt","goDelete","onRecurrenceUpdateTypeSelect","useSimpleToast","ClockInRequirement","toastData","setToastData","showToast","simpleToastJsx","EventCardSkeleton","threeRows","padding","NoEventsToShow","initialEvents","initialDailyNotes","SchedulePage","match","toast","filterAppliedClass","setFilterAppliedClass","refresher","setRefreshing","getScheduleEvents","segment","startOfDay","myScheduleEvents","setMyScheduleEvents","myDailyNotes","setMyDailyNotes","myHoursPerDay","setMyHoursPerDay","requestScheduleEvents","setRequestScheduleEvents","requestDailyNotes","setRequestDailyNotes","requestHoursPerDay","setRequestHoursPerDay","allScheduleEvents","setAllScheduleEvents","allDailyNotes","setAllDailyNotes","allHoursPerDay","setAllHoursPerDay","setSegment","showFilterModal","setShowFilterModal","refreshing","showEventModal","setShowEventModal","editEventId","setEditEventId","setEventEditAuth","setFilter","newFilter","params","curSegment","actualFilter1","getScheduleEventsByFilterInternal","actualFilter2","actualFilter3","actualFilter4","actualFilter5","actualFilter6","actualFilter7","complete","ScheduleEventsAPI","onEventClick","newEventEditAuth","onSegmentChange","segmentName","hasPositionFound","j","k","initialStatus","getEventNewAuthorization","funnel","marginTop","toastMessage","onEventUpdated","StartBreakResponseCode","EndBreakResponseCode","BreakSelectionModal","tcData","cancelOption","breakType","UnscheduledUnpaid","ClockedInScheduleEvent","ScheduleEventsForClockIn","Both","UnscheduledPaid","Paid","Unpaid","clockoutDataModel","TimeClockBreak","clockEvent","shiftEvent","breakStartOptions","clockEventId","shiftEventId","shiftBreakStart","ClockoutModal","setClockoutValue","autoCorrect","clearInput","SwitchPositionOrTagButton","selectedPosId","onSwitch","setDisabled","hiddenJsx","UserClockedIn","curPosId","curTagId","ClockInWithDifferentTag","EnablePositionChangeForEmployeePosition","ClockPanel","onUpdate","refreshToggle","posList","setPosList","setSelectedPosId","tagSwitchingEnabled","setTagSwitchingEnabled","breakSetting","setBreakSetting","showBreakSelectorModal","setShowBreakSelectorModal","loadingMessage","setLoadingMessage","setToastMessage","setShowToast","show","showAlertData","setShowAlertData","setTCData","showClockoutModal","setShowClockoutModal","updateTimeClockData","ShowTimeClock","plist","uniqueLocationIds","PositionsToClockInto","uniqueDeptIds","PositionNameWithLocAndDeptAbbreviation","PositionNameWithDeptAbbreviation","curLocId","EnableEnhancedBreakManagement","CurrentEventBreak","setTags","timeClockApi","currentPositionId","TagsPerPosition","TagName","clockout","ClockOutResponseCode","ClockOutEvent","Message","newVal","UserMayClockOut","UserMayClockIn","MatchingShift","AllowedToSwitchPositions","AllowedToSwitchTags","ClockInMessage","ClockOutMessage","ClockInResponseCode","ClockInEvent","Success","cafe","BreakSelectorModal","PayrollPeriodChooser","onNextPayPeriod","onPrevPayPeriod","payPeriodDateText","getPayPeriodDateForEmployee","dateStr","getHoursString","locsettings","ActualTime","dayHourTok","ActualHours","getTimeStringFromOrbitalTime","PayrollOrbitalTimeItem","fontColor","displayColor","PayrollDetailModal","onClose","regular","dailyOvertime","weeklyOvertime","special","timePerAbsent","hpa","getAbsentName","ColumnEnum","PayrollDetailRow","payrollRow","colsToDisplay","colSize","showDetailModal","setShowDetailModal","fontSize","border","outline","Regular","DailyOvertime","WeeklyOvertime","Special","absent","PayrollDetailList","payrollData","setColsToDisplay","setColSize","cols","totalDailyOvertime","totalWeeklyOvertime","totalSpecial","totalAbsent","getColumnsToDisplay","x","row","fontWeight","totalRegular","PayrollPeriodsTab","currentDate","setCurrentDate","setPayrollData","getData","PayrollPeriodAPI","TodayNoteCard","authItems","oneLine","dailyNote","getDeptName","TodayEventCard","onClock","onBreak","displayIcon","rangeDisplay","getEventStartEnd","thisLocation","LocationAbbreviation","DepartmentAbbreviation","getPosition","TodayEventCardSkeleton","ClockTodayTab","homePageData","setHomePageData","lines","ClockPage","setRefreshToggle","refreshTimeClockToggle","setRefreshTimeClockToggle","MessageItem","onMessageClick","fontWeightForSubject","isViewed","isPinned","bookmark","subject","differenceInDays","isSameYear","messageDateString","deliveryDateTime","previewLine","MessagesFilterModal","filterData","msgTypeIds","msgTypes","mt","messageTypeId","filterResult","setFilterResult","description","newSelection","messageTypes","typeName","msgId","useYesOrCancelDialogBox","onYes","dialogJsx","handler","ViewMessagetModal","onCloseModal","updateMessages","yesCancelDlg","readCount","setReadCount","usageText","pinned","setPinned","scheduleEventAPI","messageAPI","newReadCount","newPinValue","onPinnedClick","fromEmployeeFirstName","fromEmployeeLastName","dangerouslySetInnerHTML","__html","messageText","initialMessages","messagesReducer","m","MessagesPage","refreshMessages","isLoadingMessages","setIsLoadingMessages","messages","filteredMessages","setFilteredMessages","setFilterData","viewMessage","setViewMessage","filterMessages","messageApi","msgs","fromEmployeeId","y","String","margin","updatedFilter","MainTabs","exact","path","to","render","routeProps","tab","href","clock","chatboxes","AuthGate","Logout","useIonViewDidEnter","setTimeout","MyApp","ScreenOrientation","ORIENTATIONS","PORTRAIT","vers","App","ReactDOM","document","getElementById"],"mappings":"6JAAA,IAAIA,EAAM,CACT,2CAA4C,CAC3C,IACA,IAED,kCAAmC,CAClC,IACA,IAED,iCAAkC,CACjC,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,iCAAkC,CACjC,IACA,IAED,gCAAiC,CAChC,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,gCAAiC,CAChC,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,qBAAsB,CACrB,IACA,IAED,uCAAwC,CACvC,IACA,IAED,sCAAuC,CACtC,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,mCAAoC,CACnC,IACA,IAED,kCAAmC,CAClC,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,kCAAmC,CAClC,IACA,IAED,iCAAkC,CACjC,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,iCAAkC,CACjC,IACA,IAED,gCAAiC,CAChC,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,gCAAiC,CAChC,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,gCAAiC,CAChC,IACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAOR,EAAoBK,EAAEG,EAAI,IAAIJ,MAAK,WACzC,OAAOJ,EAAoBS,MAG7BX,EAAoBY,KAAO,WAC1B,OAAOC,OAAOD,KAAKb,IAEpBC,EAAoBW,GAAK,IACzBG,EAAOC,QAAUf,G,oBC5UjB,IAAID,EAAM,CACT,sBAAuB,CACtB,IACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAOR,EAAoBK,EAAEG,EAAI,IAAIJ,MAAK,WACzC,OAAOJ,EAAoBS,MAG7BX,EAAoBY,KAAO,WAC1B,OAAOC,OAAOD,KAAKb,IAEpBC,EAAoBW,GAAK,IACzBG,EAAOC,QAAUf,G,kxBCLXgB,EAAc,WAClB,OAAQC,YAhBM,aACG,EAe+B,CAC9CC,QAD8C,SACtCC,GACNA,EAAGC,kBAAkB,aACrBD,EAAGC,kBAAkB,iBAoCZ,GACbJ,cACAK,aAhCmB,SAAOC,GAAP,eAAAC,EAAAC,OAAA,kEAAAD,EAAA,MACFP,KADE,cACbG,EADa,kBAAAI,EAAA,MAEbJ,EAAGM,IAAI,YAAaH,EAAO,SAFd,sCAiCnBI,aA3BmB,0BAAAH,EAAAC,OAAA,kEAAAD,EAAA,MACFP,KADE,cACbG,EADa,kBAAAI,EAAA,MAENJ,EAAGQ,IAAI,YAAa,SAFd,8EA4BnBC,eAtBqB,0BAAAL,EAAAC,OAAA,kEAAAD,EAAA,MACJP,KADI,cACfG,EADe,kBAAAI,EAAA,MAERJ,EAAGQ,IAAI,YAAa,QAAQrB,MAAK,SAAAgB,GAC5C,OAAQA,EAASA,EAAMO,kBAAeC,MAHnB,8EAuBrBC,aAfmB,SAAOC,GAAP,eAAAT,EAAAC,OAAA,kEAAAD,EAAA,MACFP,KADE,cACbG,EADa,kBAAAI,EAAA,MAEbJ,EAAGM,IAAI,YAAaO,EAAM,cAFb,sCAgBnBC,aAXmB,0BAAAV,EAAAC,OAAA,kEAAAD,EAAA,MACFP,KADE,cACbG,EADa,yBAEZA,EAAGQ,IAAI,YAAa,cAFR,uC,gBCnDfO,G,OAAiB,CACrBC,OAAQ,0CACRC,WAAY,+CACZC,YAAa,sDACbC,UAAW,+BACXC,cAAe,2CACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAUV,SAASC,EAAIC,EAAmBC,GACrCC,cAAqBC,SAASH,EAAWC,G,mBCX9BG,EAAb,iDACUC,MAAgC,GAD1C,KAGUC,MAAgB,EAH1B,wDAKqBC,GACf,OAAOC,KAAKH,MAAMI,eAAeF,KANvC,8BAUM,OAAOC,KAAKF,QAVlB,0BAaaC,EAAaG,GAChBF,KAAKH,MAAMI,eAAeF,IACzBC,KAAKF,QAEVE,KAAKH,MAAME,GAAOG,IAjBxB,6BAoBgBH,GACV,IAAII,EAAMH,KAAKH,MAAME,GAGrB,cAFOC,KAAKH,MAAME,GAClBC,KAAKF,QACEK,IAxBb,2BA2BcJ,GACR,OAAOC,KAAKH,MAAME,KA5BxB,6BAgCM,IAAIK,EAAmB,GAEvB,IAAK,IAAIC,KAAQL,KAAKH,MACdG,KAAKH,MAAMI,eAAeI,IAC1BD,EAAOE,KAAKD,GAIpB,OAAOD,IAxCb,+BA4CM,IAAIG,EAAc,GAElB,IAAK,IAAIF,KAAQL,KAAKH,MACdG,KAAKH,MAAMI,eAAeI,IAC1BE,EAAOD,KAAKN,KAAKH,MAAMQ,IAI/B,OAAOE,MApDb,KCOMC,EAAe,IAAIZ,EARW,CAClC,CAAEG,IAAK,OAAQU,KAAM,aAAeC,IAAK,iCACzC,CAAEX,IAAK,MAAQU,KAAM,UAAeC,IAAK,wCACzC,CAAEX,IAAK,MAAQU,KAAM,QAAeC,IAAK,2BACzC,CAAEX,IAAK,MAAQU,KAAM,cAAeC,IAAK,0BACzC,CAAEX,IAAK,MAAQU,KAAM,aAAeC,IAAK,4BAIlC/D,KAAI,SAAAgE,GAAE,OAAIH,EAAaI,IAAID,EAAGZ,IAAKY,MAM5C,ICzBYE,EDyBNC,EAAW,CACfC,IAAKP,EACLQ,YAAa,QACbC,YAAa,OACbC,aAAc,UACdC,iBAAiB,uBACjBC,aAAcC,YAAW,aACzBC,SAAUD,YAAW,OAAS,MAAQA,YAAW,WAAa,UAAY,SA8B7D,GACbP,WACAS,UA5BgB,SAACC,EAAuBC,GACxC,OAAOX,EAASC,IAAIW,KAAKF,EAAKG,aAAajB,IAAMe,GA4BjDG,+BAxBqC,SAACC,GACtC,GAAIA,EAAMC,OAAS,EACjB,MAAO,CAACC,SAAUF,EAAOd,IAAKD,EAASC,IAAIW,KAAK,SAGlD,IAAMM,EAASH,EAAMI,cAAcC,UAAU,EAAG,GAC1CH,EAAWF,EAAMK,UAAU,GACjC,OAAQF,GACN,IAAK,OACH,MAAO,CAACD,WAAUhB,IAAKD,EAASC,IAAIW,KAAK,QAC3C,IAAK,OACH,MAAO,CAACK,WAAUhB,IAAKD,EAASC,IAAIW,KAAK,QAC3C,IAAK,OACH,MAAO,CAACK,WAAUhB,IAAKD,EAASC,IAAIW,KAAK,QAC3C,IAAK,OACH,MAAO,CAACK,WAAUhB,IAAKD,EAASC,IAAIW,KAAK,QAC3C,QACE,MAAO,CAACK,SAAUF,EAAOd,IAAKD,EAASC,IAAIW,KAAK,YEyGvC,EAhGH,SAAOF,EAAuBW,EAAiBC,GAA/C,qBAAAjE,EAAAC,OAAA,uDACJsC,EAAOK,EAAIQ,UAAUC,EAAMW,GADvB,SAIJE,EAAU,CACZC,OAAQ,MACRC,QAAS,CACP,eAAgB,mBAChB,cAAgB,UAAhB,OAA2Bf,EAAK/C,cAChC,WAAcsC,EAAID,SAASK,kBAG7BqB,KAAM,MAGJJ,IACFC,EAAQG,KAAOC,KAAKC,UAAUN,IAhBxB,WAAAjE,EAAA,MAmBewE,MAAMjC,EAAK2B,IAnB1B,cAmBFO,EAnBE,kBAAAzE,EAAA,MAoBcyE,EAASC,QApBvB,cAoBFC,EApBE,OAqBRvD,EAAI,gBAAiB,CAAE+C,OAAQ,MAAOH,UAASJ,SAAUP,EAAKO,WArBtD,kBAsBDe,GAtBC,wCAwBRvD,EAAI,UAAW,CAAE+C,OAAQ,MAAOH,UAASJ,SAAQ,OAAEP,QAAF,IAAEA,OAAF,EAAEA,EAAMO,SAAUgB,WAAYhC,EAAID,SAASK,mBAC5F6B,QAAQC,MAAM,kCAAoCd,EAAU,KAA9C,MAzBN,+DAgGG,EA9JF,SAAMX,EAAuBW,EAAiBC,GAA9C,qBAAAjE,EAAAC,OAAA,uDACLsC,EAAMK,EAAIQ,UAAUC,EAAMW,GADrB,oBAAAhE,EAAA,MAIcwE,MAAMjC,EAAK,CAChC4B,OAAQ,OACRE,KAAMC,KAAKC,UAAUN,GACrBG,QAAS,CACP,eAAgB,mBAChB,cAAgB,UAAhB,OAA2Bf,EAAK/C,cAChC,WAAcsC,EAAID,SAASK,qBAVtB,UAIHyB,EAJG,SAcHM,EAAcN,EAASL,QAAQhE,IAAI,mBACuB,IAA7C2E,EAAYC,QAAQ,oBAf9B,mCAAAhF,EAAA,MAgBeyE,EAASC,QAhBxB,cAgBDC,EAhBC,OAiBPvD,EAAI,gBAAiB,CAAE+C,OAAQ,OAAQH,UAASJ,SAAUP,EAAKO,WAjBxD,kBAkBAe,GAlBA,QAqBTvD,EAAI,gBAAiB,CAAE+C,OAAQ,OAAQH,UAASJ,SAAUP,EAAKO,WArBtD,wDAuBTxC,EAAI,UAAD,aAAc+C,OAAQ,OAAQH,UAASJ,SAAQ,OAAEP,QAAF,IAAEA,OAAF,EAAEA,EAAMO,UAAaK,EAApE,CAA0EW,WAAYhC,EAAID,SAASK,oBACtG6B,QAAQC,MAAM,mCAAqCd,EAAU,KAA/C,MAxBL,+DA8JE,EAjEH,SAAOX,EAAuBW,EAAiBC,GAA/C,uBAAAjE,EAAAC,OAAA,uDACJsC,EAAOK,EAAIQ,UAAUC,EAAMW,GAC7BE,EAAU,CACZC,OAAQ,MACRC,QAAS,CACP,eAAgB,mBAChB,cAAgB,UAAhB,OAA2Bf,EAAK/C,cAChC,WAAcsC,EAAID,SAASK,mBAI3BiB,IACFC,EAAQG,KAAOC,KAAKC,UAAUN,IAZtB,oBAAAjE,EAAA,MAgBewE,MAAMjC,EAAK2B,IAhB1B,UAgBFO,EAhBE,SAiBFM,EAAcN,EAASL,QAAQhE,IAAI,mBACuB,IAA7C2E,EAAYC,QAAQ,oBAlB/B,oCAAAhF,EAAA,MAmBgByE,EAASC,QAnBzB,eAmBAC,EAnBA,OAoBNvD,EAAI,gBAAiB,CAAE+C,OAAQ,MAAOH,UAASJ,SAAUP,EAAKO,WApBxD,kBAqBCe,GArBD,QAwBRvD,EAAI,gBAAiB,CAAE+C,OAAQ,MAAOH,UAASJ,SAAUP,EAAKO,WAxBtD,wDA0BRxC,EAAI,UAAD,aAAc+C,OAAQ,MAAOH,UAASJ,SAAQ,OAAEP,QAAF,IAAEA,OAAF,EAAEA,EAAMO,UAAaK,EAAnE,CAAyEW,WAAYhC,EAAID,SAASK,oBACrG6B,QAAQC,MAAM,kCAAoCd,EAAU,KAA9C,MA3BN,+DAiEG,EAhIC,SAAOX,EAAuBW,EAAiBC,GAA/C,qBAAAjE,EAAAC,OAAA,uDACRsC,EAAOK,EAAIQ,UAAUC,EAAMW,GADnB,SAIZa,QAAQzD,IAAI,QACZyD,QAAQzD,IAAIkD,KAAKC,UAAUN,IAC3BY,QAAQzD,IAAI,QACN6D,EAAaX,KAAKC,UAAUN,GAClCY,QAAQzD,IAAI,QARA,WAAApB,EAAA,MAUWwE,MAAMjC,EAAK,CAChC4B,OAAQ,MACRE,KAAMY,EACNb,QAAS,CACT,eAAgB,mBACd,cAAgB,UAAhB,OAA2Bf,EAAK/C,cAChC,WAAcsC,EAAID,SAASK,qBAhBnB,cAUNyB,EAVM,mBAAAzE,EAAA,MAoBUyE,EAASC,QApBnB,eAoBNC,EApBM,OAqBZvD,EAAI,gBAAiB,CAAE+C,OAAQ,MAAOH,UAASJ,SAAUP,EAAKO,WArBlD,kBAsBLe,GAtBK,wCAwBZvD,EAAI,UAAD,aAAc+C,OAAQ,MAAOH,UAASJ,SAAQ,OAAEP,QAAF,IAAEA,OAAF,EAAEA,EAAMO,UAAaK,EAAnE,CAAyEW,WAAYhC,EAAID,SAASK,oBACrG6B,QAAQC,MAAM,sCAAwCd,EAAU,KAAlD,MAzBF,+DAgID,EAhCH,SAAOX,EAAuBW,EAAiBC,GAA/C,qBAAAjE,EAAAC,OAAA,uDACJsC,EAAOK,EAAIQ,UAAUC,EAAMW,GAC7BE,EAAU,CACZC,OAAQ,SACRC,QAAS,CACP,eAAgB,mBAChB,cAAgB,UAAhB,OAA2Bf,EAAK/C,cAChC,WAAcsC,EAAID,SAASK,mBAI3BiB,IACFC,EAAQG,KAAOC,KAAKC,UAAUN,IAZtB,oBAAAjE,EAAA,MAgBewE,MAAMjC,EAAK2B,IAhB1B,UAgBFO,EAhBE,SAiBFM,EAAcN,EAASL,QAAQhE,IAAI,mBACuB,IAA7C2E,EAAYC,QAAQ,oBAlB/B,wBAmBN5D,EAAI,gBAAiB,CAAE+C,OAAQ,SAAUH,UAASJ,SAAUP,EAAKO,WAnB3D,YAAA5D,EAAA,MAoBOyE,EAASC,QApBhB,wDAuBRtD,EAAI,gBAAiB,CAAE+C,OAAQ,SAAUH,UAASJ,SAAUP,EAAKO,WAvBzD,2DA0BRxC,EAAI,UAAD,aAAc+C,OAAQ,SAAUH,UAASJ,SAAQ,OAAEP,QAAF,IAAEA,OAAF,EAAEA,EAAMO,UAAaK,EAAtE,CAA4EW,WAAYhC,EAAID,SAASK,oBACxG6B,QAAQC,MAAM,qCAAuCd,EAAU,KAAjD,MA3BN,gE,SDnIAtB,O,aAAAA,I,sBAAAA,M,KEQZ,IA+Ce,EA/CG,SAAMW,EAAuB6B,GAA7B,eAAAlF,EAAAC,OAAA,gGAEVkF,EAA6C,QAA1BvC,EAAID,SAASQ,SAClCT,EAAsB0C,IACtB1C,EAAsB2C,QAE1BjE,EAAI,oCAAqC,CAAE8D,QAAOC,kBAAiBvB,SAAUP,EAAKO,SAAUtD,aAAc+C,EAAK/C,eAN/F,WAAAN,EAAA,MAQHsF,EAAkBjC,EARf,0CAQ0B,CAAEkC,QAASL,EAAOM,gBAAiBL,KAR7D,8EA+CH,EAzBgB,SAAM9B,GAAN,SAAArD,EAAAC,OAAA,uGAAAD,EAAA,MAEhBsF,EAAcjC,EAFE,sHAyBhB,EAnBE,SAAMA,EAAuBoC,GAA7B,eAAAzF,EAAAC,OAAA,4FAETgE,EAAO,CACX9E,IAAKsG,GAHQ,WAAAzF,EAAA,MAMFsF,EAAcjC,EANZ,sCAMuBY,IANvB,8EAmBF,EATG,SAAMZ,GAAN,SAAArD,EAAAC,OAAA,4GAAAD,EAAA,MAMHsF,EAAcjC,EANX,2H,QCvCVqC,EAAsBC,IAAtBD,kBA0FO,EAvFE,SACfrC,EACAuC,EACAC,GACA,IAAMC,EAAUC,YAAqB,CAAEC,cAAc,IAErDN,EAAkBO,WAAWlH,MAAK,WAChC8F,QAAQzD,IAAI,+DAIdsE,EAAkBQ,YAAY,gBAC5B,SAAChB,GAECiB,EAAkB9C,EAAM6B,EAAMnD,OAC9B6D,GAAY,GACZC,EAAY,qCAAuCX,EAAMnD,OACzDX,EAAI,+BAAgC,CAAE8D,MAAOA,EAAMnD,MAAOoB,SAAUP,EAAID,SAASQ,cAKrFuC,EAAkBQ,YAAY,qBAC5B,SAACpB,GACCe,EAAY,0BAA4BvB,KAAKC,UAAUO,IACvD1D,EAAI,sCAAuC,CAAE0D,QAAO3B,SAAUP,EAAID,SAASQ,cAK/EuC,EAAkBQ,YAAY,4BAC5B,SAACE,GACoB,IAAD,EAAdA,IACEA,EAAanC,MAAQmC,EAAanC,KAAKoC,WACzCR,EAAY,iBAAmBO,EAAaE,MAAQ,KAAOF,EAAa/B,KAAO,OAAS+B,EAAanC,KAAKoC,WAC1GP,EAAQ3D,KAAK,kBAAoBiE,EAAanC,KAAKoC,WACnDP,EAAQS,aAERV,EAAY,iBAAmBO,EAAaE,MAAQ,KAAOF,EAAa/B,KAAO,YAGjFjD,EAAI,qCAAsC,CACxCkF,MAAOF,EAAaE,MACpBjC,KAAM+B,EAAa/B,KACnBmC,UAAS,UAAGJ,EAAanC,KAAKoC,iBAArB,SAAoC,UAgBrDX,EAAkBQ,YAAY,mCAC5B,SAACE,GAAmD,IAAD,EAC7CA,EAAaA,aAAanC,MAAQmC,EAAaA,aAAanC,KAAKoC,WACnER,EAAY,2BAA6BO,EAAaA,aAAaE,MAAQ,KAAOF,EAAaA,aAAa/B,KAAO,OAAS+B,EAAaA,aAAanC,KAAKoC,WAC3JP,EAAQ3D,KAAK,kBAAoBiE,EAAaA,aAAanC,KAAKoC,WAChEP,EAAQS,aAERV,EAAY,2BAA6BO,EAAaA,aAAaE,MAAQ,KAAOF,EAAaA,aAAa/B,KAAO,YAGrHjD,EAAI,oCAAqC,CACvCkF,MAAOF,EAAaA,aAAaE,MACjCjC,KAAM+B,EAAaA,aAAa/B,KAChCmC,UAAS,UAAGJ,EAAaA,aAAanC,KAAKoC,iBAAlC,SAAiD,UCxD5DI,EAA4C,CAChDC,YAAY,EACZpG,kBAAcC,EACdqD,SAAU,GACV+C,UAAU,EACVC,SAAS,EACTC,cAAUtG,EACVuG,eAAWvG,EACXwG,wBAAoBxG,EACpBiD,YAAa,OACbwD,eAAe,GAGXC,EAAmC,CACvC5D,KAAMoD,EACNS,OAAQ,oBAAAlH,EAAAC,OAAA,+EACRkH,aAAc,SAACC,EAAWC,EAAYrI,GAAgB,OAAO,IAAIH,SAAyB,WAAQ,OAAO4H,MACzGa,mBAAoB,WAAO,OAAO,IAAIzI,SAAc,gBACpD+G,YAAa,SAAC5G,MAGHuI,EAAyBC,IAAMC,cAAuCR,GAEtES,EAAiC,SAACC,GAAgB,IAAD,EAClBC,mBAAS,eAAInB,IADK,mBACrDoB,EADqD,KAC1CC,EAD0C,KAa5DC,qBAAU,WACR,IAAIC,GAAU,EAed,OAbAnJ,QAAQoJ,IAAI,CACVrI,EAAGO,iBACFpB,MAAK,SAAA0F,GACN,GAAIuD,EACJ,CACE,IAAME,EAAWzD,EAAS,GAExBqD,EADEI,EACmB,eAAKA,EAAN,CAAgBtB,SAAS,IAExB,eAAIiB,EAAL,CAAgBjB,SAAS,SAI3C,WAAQoB,GAAU,KAGzB,IAEHD,qBAAU,WACJF,IAAcA,EAAUb,eACxBa,EAAUvH,cACVuH,EAAUvH,aAAaqD,OAAS,GACN,UAA1Bf,EAAID,SAASQ,UACfgF,EAAwBN,EAAWjC,GAAa,iBAIjD,CAACiC,EAAUb,cAAea,EAAUvH,eAGvC,IAAMsF,EAAc,SAACwC,GACnBN,EAAqB,eAAKD,EAAN,CAAiBb,cAAeoB,MAkDtD,OACE,kBAACb,EAAuBc,SAAxB,CAAiCtG,MAAO,CACtCsB,KAAMwE,EACNV,aAjDiB,SAAOvD,EAAkBtD,EAAsBkD,GAA/C,qBAAAxD,EAAAC,OAAA,kEAAAD,EAAA,MACQJ,EAAGO,gBADX,cACbmI,EADa,2BAAAtI,EAAA,MAGMuI,IAAYC,sBAHlB,cAGXC,EAHW,OAIXP,EAAW,CACftE,WACAtD,eACAkD,cACAkD,YAAY,EACZC,SAAU2B,EAAeA,EAAa3B,SAAWF,EAAyBE,SAC1EC,SAAS,EACTC,SAAU4B,EAASC,OAAO7B,SAC1BC,UAAW2B,EAASC,OAAO5B,UAC3BE,eAAe,GAbA,YAAAhH,EAAA,MAeXJ,EAAGE,aAAaoI,IAfL,eAgBjBJ,EAAqBI,GACrBrD,QAAQzD,IAAI,iDAAkD8G,EAASxB,YAjBtD,kBAkBVwB,GAlBU,yCAoBjBrD,QAAQzD,IAAI,oCAAsC,KAAIuH,SAChDT,EAAW,CACftE,WACAtD,eACAkD,cACAkD,YAAY,EACZC,SAAU2B,EAAeA,EAAa3B,SAAWF,EAAyBE,SAC1EC,SAAS,EACTC,SAAQ,OAAEyB,QAAF,IAAEA,OAAF,EAAEA,EAAczB,SACxBC,UAAS,OAAEwB,QAAF,IAAEA,OAAF,EAAEA,EAAcxB,UACzBE,eAAe,GA9BA,YAAAhH,EAAA,MAgCXJ,EAAGE,aAAaoI,IAhCL,eAiCjBJ,EAAqBI,GAjCJ,kBAkCVA,GAlCU,0DAkDjBhB,OAXW,0BAAAlH,EAAAC,OAAA,uDACPiI,EADO,eACSL,EADT,CACoBnB,YAAY,EAAOpG,kBAAcC,IAClEuH,EAAqBI,GAFR,WAAAlI,EAAA,MAGPJ,EAAGE,aAAaoI,IAHT,OAIbrD,QAAQzD,IAAI,2CAA4C8G,EAASxB,YAJpD,sCAYXY,mBAnGuB,0BAAAtH,EAAAC,OAAA,2EAAAD,EAAA,MAEAuI,IAAYC,sBAFZ,OAEjBC,EAFiB,OAGvBX,EAAqB,eAAKD,EAAN,CAAiBhB,SAAU4B,EAASC,OAAO7B,SAAUC,UAAW2B,EAASC,OAAO5B,aAH7E,gDAKvBjC,QAAQzD,IAAI,qCAAuC,KAAIuH,SALhC,yDAoGvB/C,gBAEC+B,EAAMiB,WCzHEC,ICvBHC,EDuBGD,EA/Bf,WAAyB,IAAD,EACMjB,oBAAS,GADf,mBACfmB,EADe,KACPC,EADO,OAEYpB,mBAAS,CAACqB,OAAQ,GAAIN,QAAS,GAAIO,UAAW,eAF1D,mBAEfC,EAFe,KAEJC,EAFI,KAyBtB,MAAO,CACLC,UArBgB,SAACJ,EAAgBN,EAAiBO,GAClDE,EAAa,CACXH,SACAN,UACAO,cAGFF,GAAU,IAeVM,YAXA,kBAAC,IAAD,CACMP,OAAQA,EACRQ,aAAc,WAAQP,GAAU,GAAQG,EAAUD,aAClDD,OAAQE,EAAUF,OAClBN,QAASQ,EAAUR,QACnBa,QAAS,CAAC,U,SE4ELC,EA1FmC,SAAC,GAAwC,IAAvCC,EAAsC,EAAtCA,KAAMC,EAAgC,EAAhCA,SAAUC,EAAsB,EAAtBA,iBAG5DC,EAAgB,SAACzK,GACrB,IAAKuK,GAAgC,IAApBA,EAAShG,OACxB,OAAO,EAGT,IAAK,IAAImG,EAAI,EAAGA,EAAIH,EAAShG,OAAQmG,IACnC,GAAIH,EAASG,GAAG1K,KAAOA,EAErB,OAAO,EAIX,OAAO,GA0CT,OAAKsK,EAOH,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAS9H,KAAM,GACb,kBAAC,IAAD,CACEmI,KAAK,KACLnI,KAAM,EACNoI,SAAa,OAAJN,QAAI,IAAJA,OAAA,EAAAA,EAAM/F,WAAN,OAAiBgG,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAUhG,QACpCsG,QAAS,kBApDE,WACnB,IAAMD,GAAe,OAAJN,QAAI,IAAJA,OAAA,EAAAA,EAAM/F,WAAN,OAAiBgG,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAUhG,QAE5C,IAAQ,OAAJ+F,QAAI,IAAJA,OAAA,EAAAA,EAAM/F,WAAN,OAAiBgG,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAUhG,QAAQ,CACrC,GAAIqG,EACF,OAIFJ,EADoB,QAEf,CACL,IAAKI,EACH,OAGFJ,EAAgB,OAACF,QAAD,IAACA,OAAD,EAACA,EAAMQ,UAqCFC,MAEjB,kBAAC,IAAD,oBAEDT,GAAQA,EAAKlL,KAAI,SAAA4L,GAAM,OACtB,kBAAC,IAAD,CAASxI,IAAKwI,EAAOhL,IACnB,kBAAC,IAAD,CACE2K,KAAK,KACLnI,IAAKwI,EAAOhL,GACZ6K,QAAS,YAxCF,SAACI,GAClB,GAAiB,OAAbV,EAMJ,IAFiBA,EAASnL,KAAI,SAAA8L,GAAC,OAAIA,EAAElL,MAAImL,SAASF,EAAKjL,IAE1C,CACX,IAAMoL,EAAWb,EAASO,QAC1BM,EAAQrI,KAAKkI,GACbT,EAAiBY,OACZ,CACL,IAAMC,EAAUd,EAASe,QAAO,SAAAC,GAAC,OAAIA,EAAEvL,KAAOiL,EAAKjL,MACnDwK,EAAiBa,IA2BOG,CAAWR,IAC3BJ,QAASH,EAAcO,EAAOhL,MAChC,kBAAC,IAAD,KAAWgL,EAAO9H,YAvBxB,4CCkBSuI,EA1E6D,SAAC,GAAgC,IAA9BC,EAA6B,EAA7BA,eAAgB/B,EAAa,EAAbA,OACrF1F,EAAS0H,qBAAWxD,GAApBlE,KADkG,EAE/DuE,mBAAS,MAFsD,mBAElGoD,EAFkG,KAEnFC,EAFmF,OAG9CrD,mBAAS,MAHqC,mBAGlGsD,EAHkG,KAG3EC,EAH2E,KAM1GpD,qBAAU,WACR,IAAKgB,EAGH,OAFAoC,EAAyB,WACzBF,EAAiB,MAInB,IAAIG,GAAe,EAcnB,OAZAvM,QAAQoJ,IAAI,CACV9B,EAA+B9C,GAC/B8C,EAAkB9C,KACjBtE,MAAK,SAAAsM,GACDD,IAILD,EAAyBE,EAAU,IACnCJ,EAAiBI,EAAU,QAGtB,WAAQD,GAAe,KAC7B,CAACrC,EAAQ1F,IAgBZ,OACE,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAYiI,KAAK,SACf,kBAAC,IAAD,CAAWrB,QAjBJ,WACfa,MAiBU,kBAAC,IAAD,CAASS,KAAMC,IAAgBzB,KAAK,KAAKuB,KAAK,gBAGlD,kBAAC,IAAD,wBAMJ,kBAAC,IAAD,CAAYG,MAAM,iBAChB,kBAAC,EAAD,CACE/B,KAAMsB,EACNrB,SAAUuB,EACVtB,iBA1BmB,SAAC8B,GAC1B,IAAMvM,EAAMuM,EAAYlN,KAAI,SAAA8L,GAAC,OAAIA,EAAElL,MACnC+G,EAAiB9C,EAAMlE,GAAKJ,MAAK,WAC/BoM,EAAyBO,UA2BzB,kBAAC,IAAD,KACE,kBAAC,IAAD,SCcOC,GAtFQ,WAAO,IAAD,EACL/D,oBAAS,GAAxBgE,EADoB,oBAEnBvI,EAASmE,IAAMuD,WAAWxD,GAA1BlE,KACFG,EAAcZ,EAAID,SAASC,IAAIW,KAAKF,EAAKG,aACzCqI,EAA+B,SAApBrI,EAAY5B,IAAiByB,EAAKO,SAAUkI,OAAO,GAAKzI,EAAKO,SACxEmI,EAAMlD,IALe,EAMiCjB,oBAAS,GAN1C,mBAMpBoE,EANoB,KAMIC,EANJ,KAS3B,OACE,kBAAC,IAAD,CAASC,KAAK,UAAUC,SAAUP,EAAaQ,UAAU,QACvD,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,eAGJ,kBAAC,IAAD,CAAYX,MAAM,iBACK,SAApBjI,EAAY5B,KACX,yBAAKyK,UAAU,UACZR,EAASS,cADZ,KAC6B9I,EAAYlB,KAAKgK,cAD9C,KAImB,SAApB9I,EAAY5B,KACX,yBAAKyK,UAAU,UACZR,GAGL,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAeU,YAAU,SACvB,kBAAC,IAAD,CAASC,QAAQ,EAAMC,WAAW,WAAWC,gBAAgB,QAC3D,kBAAC,IAAD,iBACA,kBAAC,IAAD,CAASpB,KAAK,MAAMC,KAAM5I,QAI9B,kBAAC,IAAD,CAAe4J,YAAU,SACvB,kBAAC,IAAD,CAASC,QAAQ,EAAMvC,QAAS,WAAOgC,GAA0B,KAC/D,kBAAC,IAAD,sBACA,kBAAC,IAAD,CAASX,KAAK,MAAMC,KAAMP,QAiB9B,kBAAC,IAAD,CAAeuB,YAAU,SACvB,kBAAC,IAAD,CAASC,QAAQ,EAAMC,WAAW,WAAWC,gBAAgB,QAC3D,kBAAC,IAAD,wBACA,kBAAC,IAAD,CAASpB,KAAK,MAAMC,KAAMoB,QAG9B,kBAAC,IAAD,CAAeJ,YAAU,SACvB,kBAAC,IAAD,CAASC,QAAQ,EAAMC,WAAW,UAAUC,gBAAgB,QAC1D,kBAAC,IAAD,CAASpB,KAAK,MAAMC,KAAMqB,MAC1B,kBAAC,IAAD,kBAILb,EAAIzC,aAEP,kBAAC,IAAD,CAAW+C,UAAU,UACnB,yBAAKA,UAAU,WAAf,YAAmCzJ,EAAID,SAASK,iBAAhD,MAGF,kBAAC,IAAD,CACE+F,OAAQiD,GAER,kBAAC,EAAD,CACElB,eAAgB,WAAOmB,GAA0B,IACjDlD,OAAQiD,OCtCH,I,oFAAA,CACba,iBAnCuB,SAAOjJ,EAAkBkJ,EAAkBtJ,GAA3C,qBAAAxD,EAAAC,OAAA,uDACvB4E,QAAQzD,IAAR,iCAAsCwB,EAAID,SAASC,IAAIW,KAAKC,GAAalB,KAAzE,aAAkFM,EAAID,SAASC,IAAIW,KAAKC,GAAajB,IAArH,MACMA,EAAMK,EAAID,SAASC,IAAIW,KAAKC,GAAajB,IAAM,QAC/C8B,EAHiB,uCAGsBT,EAHtB,qBAG2CkJ,GAH3C,oBAAA9M,EAAA,MAKEwE,MAAMjC,EAAK,CAChC4B,OAAQ,OACRE,KAAMA,KAPa,cAKfI,EALe,kBAAAzE,EAAA,MAUFyE,EAASC,QAVP,YAUfA,EAVe,QAWZI,QAASJ,EAAKqI,kBAXF,0CAYZ,CAAEC,UAAU,EAAOlI,MAAOJ,EAAKqI,kBAAmBzM,aAAc,KAZpD,iCAed,CAAE0M,UAAU,EAAM1M,aAAcoE,EAAKpE,eAfvB,yCAiBrBuE,QAAQC,MAAM,qDAjBO,kBAkBd,CAAEkI,UAAU,EAAOC,IAAG,KAAEnI,MAAO,6BAA8BxE,aAAc,KAlB7D,0DAoCvB4M,gBAbsB,SAAO7J,GAAP,SAAArD,EAAAC,OAAA,kEAAAD,EAAA,MACTsF,EAAcjC,EAAM,sBADX,8EActB8J,mBATyB,SAAO9J,GAAP,eAAArD,EAAAC,OAAA,kEAAAD,EAAA,MACJsF,EAAcjC,EAAM,yBADhB,cACnB+J,EADmB,OAEzBvI,QAAQzD,IAAIgM,GAFa,kBAGlBA,GAHkB,yC,SJjCftE,K,oBAAAA,E,cAAAA,E,+BAAAA,E,+BAAAA,E,mBAAAA,M,KAQL,IAOKuE,GAKAC,GAKAC,GA0DAC,GAOAC,GAMAC,GAxFCC,GAAuC,CAClDlN,KAAM,CAAEmN,UAAW,GAAIC,KAAM,GAAIC,cAAe,GAAIC,WAAY,EAAGnH,SAAS,EAAOoH,KAAMlF,EAAKmF,UAC9FC,cAAe,GACfC,eAAW5N,EACX6N,WAAY,K,SAGFf,O,+BAAAA,I,wCAAAA,Q,cAKAC,O,eAAAA,I,kBAAAA,Q,cAKAC,O,eAAAA,I,+BAAAA,I,2CAAAA,I,uCAAAA,I,uCAAAA,I,4DAAAA,I,kDAAAA,I,+CAAAA,Q,cA0DAC,O,eAAAA,I,mBAAAA,I,eAAAA,I,gBAAAA,Q,cAOAC,O,yCAAAA,I,qCAAAA,I,0BAAAA,Q,cAMAC,O,yBAAAA,I,uBAAAA,I,qCAAAA,I,4CAAAA,Q,KK9FZ,IAAMW,GAA4C,CAChDN,WAAY,EACZC,KAAMlF,EAAKmF,SACXL,UAAW,GACXhH,SAAS,EACTkH,cAAe,GACfD,KAAM,IAGFS,GAA4B,CAChC7N,KAAM4N,GACNE,YAAa,SAACC,EAAgBC,GAA8B,OAAO,IAAI5P,SAAgC,gBACvG6P,UAAW,aACXC,aAAa,GAGFC,GAAyBpH,IAAMC,cAAuC6G,IAGnF,SAAe5N,GAAamO,EAA8BxL,EAAuBmL,GAAjF,iBAAAxO,EAAAC,OAAA,mDACiC,IAA3B4O,EAAYd,YAAqBS,EADvC,yCAEWK,GAFX,UAKOL,EALP,kCAAAxO,EAAA,MAMgCJ,EAAGc,gBANnC,aAMUoO,EANV,SAOyBA,EAAclB,WAAakB,EAAclB,UAAUjK,OAAS,GAPrF,yCAQamL,GARb,0BAAA9O,EAAA,MAY4B+O,GAAQ5B,mBAAmB9J,IAZvD,cAYQ2L,EAZR,SAaqBA,EAAYpB,WAAaoB,EAAYpB,UAAUjK,OAAS,GAb7E,wBAcI/D,EAAGY,aAAawO,GAAajQ,MAAK,kBAAM8F,QAAQzD,IAAI,mCAdxD,kBAeW4N,GAfX,eAiBInK,QAAQzD,IAAI,6BAjBhB,kBAkBW,MAlBX,sCAsBO,IAAM6N,GAAiC,SAACtH,GAAgB,IAAD,EAC5BC,mBAAS,eAAIyG,KADe,mBACrD5N,EADqD,KAC/CyO,EAD+C,OAE1BtH,oBAAS,GAFiB,mBAErD+G,EAFqD,KAExCQ,EAFwC,KAGrD9L,EAAQ0H,qBAAWxD,GAAnBlE,KAGP0E,qBAAU,WACR,IAAIC,GAAU,EAGd,GAFAmH,GAAW,GAEN9L,GAASA,EAAKqD,WAgBnB,OAZAhG,GAAaD,EAAM4C,GAAK,GAAOtE,MAAK,SAAAqQ,GAC7BpH,IAILmH,GAAW,GAEPC,GACFF,EAAgBE,OAIZ,WAAQpH,GAAU,KACzB,CAAC3E,EAAM5C,IAuBV,OACE,kBAACmO,GAAuBvG,SAAxB,CAAiCtG,MAAO,CACtCtB,OACA8N,YAvBgB,SAAOC,EAAgBC,GAAvB,eAAAzO,EAAAC,OAAA,uDAClBkP,GAAW,GADO,WAAAnP,EAAA,MAGIU,GAAaD,EAAMgO,EAASD,IAHhC,cAGZY,EAHY,OAIlBD,GAAW,GACPC,GACFF,EAAgBE,GANA,kBASXA,GATW,sCAwBhBV,UAXc,WAChBQ,EAAgBb,IAChBzO,EAAGY,aAAa6N,IAA0BtP,MAAK,SAAAsQ,GAC7CxK,QAAQzD,IAAI,wCASZuN,gBAEChH,EAAMiB,WClGb,SAAS0G,GAAS1L,EAAkBkJ,GAClC,OACIlJ,EAASD,OAAS,GAClBmJ,EAASnJ,OAAS,EAIxB,IA6Ie4L,GA7IqB,SAAC,GAAiB,IAAfzJ,EAAc,EAAdA,QAAc,EAClB+C,IAA1BS,EAD4C,EAC5CA,YAAaD,EAD+B,EAC/BA,UAD+B,EAEtB7B,IAAMuD,WAAWxD,GAAvClE,EAF4C,EAE5CA,KAAM8D,EAFsC,EAEtCA,aACNoH,EAAe/G,IAAMuD,WAAW6D,IAAhCL,YAH4C,EAIb3G,oBAAS,GAJI,mBAI5C4H,EAJ4C,KAI/BC,EAJ+B,OAKnB7H,mBAAS,IALU,mBAK5ChE,EAL4C,KAKlC8L,EALkC,OAMnB9H,mBAAS,IANU,mBAM5CkF,EAN4C,KAMlC6C,EANkC,OAO1B/H,mBAAS,IAA3BgI,EAP4C,sBAQ1BhI,mBAAS,IAA3BiI,EAR4C,sBASXjI,oBAAS,GATE,mBAS5CkI,EAT4C,KAS9BC,EAT8B,KA0DnD,OARAC,aAAoB,WAClBnL,QAAQzD,IAAI,sCAAuCiC,EAAKqD,YACpDrD,EAAKqD,aACPZ,EAAQ3D,KAAK,iBAAkB,CAAC8N,UAAW,YAC3CnK,EAAQS,gBAKV,kBAAC,IAAD,CAASnH,GAAG,cACV,kBAAC,IAAD,CAAYiN,UAAU,iBAEpB,yBAAKA,UAAU,cACb,yBAAKA,UAAU,OAAO6D,IAAI,uDAAuDC,IAAI,wBAGvF,kBAAC,IAAD,CACApH,OAAQyG,EACRjG,aAAc,kBAAMkG,GAAe,IACnCW,QAAQ,OACRzH,QAAS,gBACT0H,SAAU,MAGT/G,EAEC,kBAAC,IAAD,CAAS+C,UAAU,aAEjB,yBAAKA,UAAU,QACb,yBAAKA,UAAU,SAAf,QACA,yBAAKA,UAAU,mBACb,2BACEA,UAAU,QACVjN,GAAG,WACHkD,KAAK,WACL4J,KAAK,OACLnK,MAAO6B,EACP0M,SAAU,SAACtR,GA3EF,IAACuR,IA2EyBvR,EAAEwR,OAAOzO,MA1E1D2N,EAAYa,GACZR,EAAgBT,GAASiB,EAAazD,SA8E7B8C,EAAejM,OAAS,GACvB,kBAAC,IAAD,CAAS8M,MAAM,SACb,uBAAGpE,UAAU,qBACVuD,IAKP,yBAAKvD,UAAU,QACb,yBAAKA,UAAU,SAAf,YACA,yBAAKA,UAAU,mBACb,2BACEA,UAAU,QACVjN,GAAG,WACHkD,KAAK,WACL4J,KAAK,WACLnK,MAAO+K,EACPwD,SAAU,SAACtR,GA3FF,IAAC0R,IA2F0B1R,EAAEwR,OAAOzO,MA1F3D4N,EAAYe,GACZX,EAAgBT,GAAS1L,EAAU8M,SA6F1Bb,EAAelM,OAAS,GACvB,kBAAC,IAAD,CAAS8M,MAAM,SACf,uBAAGpE,UAAU,qBACVwD,KAMP,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CACExD,UAAU,eACVH,KAAK,SACLjC,QAvGA,gCAAAjK,EAAAC,OAAA,oDACT2D,IAAYkJ,EADH,wBAEJ6D,EAAU/N,EAAIa,+BAA+BG,GACnD6L,GAAe,GAHL,WAAAzP,EAAA,MAIa+O,GAAQlC,iBAAiB8D,EAAQ/M,SAAUkJ,EAAU6D,EAAQ/N,IAAIhB,MAJ9E,YAIJ6C,EAJI,QAKGuI,SALH,mCAAAhN,EAAA,MAMcmH,EAAavD,EAAUa,EAASnE,aAAcqQ,EAAQ/N,IAAIhB,MANxE,cAMF6M,EANE,mBAAAzO,EAAA,MAOFuO,GAAY,EAAME,IAPhB,eAQRgB,GAAe,GACfrO,EAAI,QAAS,CAAEwC,SAAU+M,EAAQ/M,SAAUgB,WAAYhC,EAAID,SAASK,iBAAkBQ,YAAamN,EAAQ/N,IAAIN,OAC/GwD,EAAQ3D,KAAK,iBAAkB,CAAC8N,UAAW,SAC3CnK,EAAQS,YAXA,2BAcRkJ,GAAe,GACfrO,EAAI,gBAAiB,CAAEwC,SAAU+M,EAAQ/M,SAAUgB,WAAYhC,EAAID,SAASK,iBAAkBQ,YAAamN,EAAQ/N,IAAIN,OACjHsO,EAAMnM,EAASK,MAAQL,EAASK,MAAQ,mBAC9CuE,EAAU,mBAAoBuH,GAAK,WACjCjB,EAAY,IACZI,GAAgB,MAnBV,uCAwGAc,OAAO,QACP1E,UAAW2D,GALb,e,0ICzIRgB,GAAY,IAAIC,KAAK,IAAM,EAAE,GAI5B,SAASC,GAAwBC,GACtC,IAAKA,EACH,OAAO,EAGT,IACIC,EACAC,EAFEC,EAAMH,EAASI,MAAM,KAG3B,GAAID,EAAI,GAAGpM,QAAQ,MAAQ,EAAG,CAC5B,IAAMsM,EAAQF,EAAI,GAAGC,MAAM,KAC3BH,EAAM,GAAKK,SAASD,EAAM,IAAMC,SAASD,EAAM,IAC/CH,EAAMI,SAASH,EAAI,SAEnBF,EAAMK,SAASH,EAAI,IACnBD,EAAMI,SAASH,EAAI,IAGrB,OAAY,GAAJF,EAAUC,EAsGb,SAASK,GAA8BP,GAC5C,IAAKA,EACH,MAAO,OAET,IACIC,EACAC,EAFEC,EAAMH,EAASI,MAAM,KAG3B,GAAID,EAAI,GAAGpM,QAAQ,MAAQ,EAAG,CAC5B,IAAMsM,EAAQF,EAAI,GAAGC,MAAM,KAC3BH,EAAM,GAAKK,SAASD,EAAM,IAAMC,SAASD,EAAM,IAC/CH,EAAMI,SAASH,EAAI,SAEnBF,EAAMK,SAASH,EAAI,IACnBD,EAAMI,SAASH,EAAI,IAGrB,OAAQF,EAAM,EAAP,WACCA,EADD,aACSC,EADT,iBAECA,EAFD,MA4EF,SAASM,GAAcC,GAC5B,OAAOC,aAAOD,EAAM,mBAAmBpF,cA2BlC,SAASsF,GAAiBC,GAC/B,IAAMC,EAAQH,aAAOI,aAASF,EAAIG,YAAa,WAAWC,QAAQ,IAAK,IAEvE,IAAKJ,EAAIK,UAAYL,EAAIK,SAAWpB,GAClC,OAAOgB,EAGT,IAAMK,EAAQR,aAAOI,aAASF,EAAIK,UAAW,WAAWD,QAAQ,IAAK,IACrE,MAAM,GAAN,OAAUH,EAAV,cAAqBK,GAUhB,SAASC,GAA4BP,GAC1C,IAAMC,EAAQH,aAAOI,aAASF,EAAIG,YAAa,UAAUC,QAAQ,IAAK,IAChEE,EAAMN,EAAIK,SACZP,aAAOI,aAASF,EAAIK,UAAW,UAAUD,QAAQ,IAAK,IACtDN,aAAO,IAAIZ,KAAQ,UAAUkB,QAAQ,IAAK,IAE9C,MAAM,GAAN,OAAUH,EAAV,cAAqBK,GAIhB,SAASE,GAAaX,EAAYY,EAAsBC,GAC3D,IAAMC,GAAoBD,GAAYA,EAASvN,QAAQ,KAAO,EAC1D,EACAgM,GAAwBuB,EAASlB,MAAM,KAAK,IAE5CoB,EAAUf,EACde,EAAQC,SAAS,EAAGF,EAAiB,EAAG,GAGxC,IADA,IAAIG,EAAU,EACPhB,aAAOc,EAAS,UAAYH,GAAgBK,EAAU,IACzDF,EAAUG,aAAQH,GAAU,GAC5BE,IAOJ,OAJIA,EAAU,IACV9N,QAAQC,MAAR,uDAA8D4M,EAA9D,8BAAwFY,EAAxF,MAGGG,EAuBJ,SAASI,GAA0BC,GACtC,OAAMA,aAAa/B,KAMX+B,EAAEC,cAAgB,IAClBC,GAAUF,EAAEG,WAAa,EAAG,GAAK,IACjCD,GAAUF,EAAEI,UAAW,GAAM,IAC7BF,GAAUF,EAAEK,WAAY,GAAK,IAC7BH,GAAUF,EAAEM,aAAc,GAAK,OATnCvO,QAAQC,MAAM,uEAAyEgO,GAChF,IAYR,SAASO,GAAcC,EAAaC,EAAgBC,GACvD,IAAIxR,EAAOyR,OAAOH,GAAKI,QAAQF,GAAWG,WAEtCC,EAAW,GACU,IAArB5R,EAAIgD,QAAQ,OACZhD,EAAMA,EAAI+B,UAAU,GACpB6P,EAAW,KAGf,IAAMC,EAAI,aAAe7R,EAEzB,OAAgB,IADDA,EAAIgD,QAAQ,KAEf4O,EAAWC,EAAE/H,OAAO+H,EAAElQ,OAAUmQ,KAAKC,IAAI/R,EAAI2B,OAAQ4P,IAErDK,EAAWC,EAAE/H,OAAO+H,EAAElQ,OAAUmQ,KAAKC,IAAI/R,EAAI2B,OAAQ4P,EAASC,EAAW,IAKzF,SAASR,GAAUhR,EAAUgS,GACzB,IAAMH,EAAI,aAAe7R,EACzB,OAAO6R,EAAE/H,OAAO+H,EAAElQ,OAASqQ,G,ICnW1BC,G,SCsIU,IACbC,iBA5GuB,SAAM7Q,EAAuB8Q,GAA7B,eAAAnU,EAAAC,OAAA,kEAAAD,EAAA,MACFsF,EAAcjC,EAAM,uCAAyC8Q,IAD3D,YACjB/G,EADiB,QAGZtI,MAHY,yCAId,MAJc,gCAOhBsI,GAPgB,sCA6GvBgH,0BAlGgC,SAAM/Q,EAAuBqH,GAA7B,eAAA1K,EAAAC,OAAA,uDAC1BoU,EAD0B,aAE9BvC,MAAOe,GAA0BnI,EAAOoH,OACxCK,IAAKU,GAA0BnI,EAAOyH,MACnCzH,GAJ2B,WAAA1K,EAAA,MAOnBsF,EAAejC,EAAM,yCAA0CgR,IAP5C,8EAmGhCC,sBAxF4B,SAAMjR,EAAuBqH,GAA7B,eAAA1K,EAAAC,OAAA,uDACtBoU,EADsB,aAE1BvC,MAAOe,GAA0BnI,EAAOoH,OACxCK,IAAKU,GAA0BnI,EAAOyH,MACnCzH,GAJuB,WAAA1K,EAAA,MAOfsF,EAAejC,EAAM,4BAA6BgR,IAPnC,8EAyF5BE,oBA9E0B,SAAMlR,EAAuBmR,EAA2BC,GAAxD,iBAAAzU,EAAAC,OAAA,uDACpBgE,EAAO,CACXkQ,gBAAiBK,EAAYL,gBAC7BO,UAAWF,EAAYE,UACvBC,YAAaH,EAAYG,YACzBC,YAAaJ,EAAYI,YACzBC,WAAYL,EAAY/L,SAASA,SAASrJ,GAC1C2O,WAAYyG,EAAYM,SAAS1V,GACjC2V,WAAYP,EAAYO,WACxBC,SAAUR,EAAYQ,SACtBC,MAAK,UAAET,EAAYU,WAAd,aAAE,EAAiB9V,GACxB+V,YAAaX,EAAYW,YACzBC,YAAaZ,EAAYY,YACzBC,WAAY,KACZC,cAAe,KACfC,cAAef,EAAYgB,cAC3BC,WAAYjB,EAAYkB,kBACxBC,MAAOnB,EAAYmB,MACnBC,aAAa,EACbC,aAAcrB,EAAYqB,aAC1BC,gBAAiBtB,EAAYsB,gBAC7BC,cAAevB,EAAYuB,cAC3BC,eAAgBxB,EAAYwB,eAC5BC,eAAgBzB,EAAYyB,eAC5BC,eAAgB1B,EAAY0B,eAC5BzB,wBAzBwB,WAAAzU,EAAA,MA4BbsF,EAAejC,EAAM,yCAA0CY,IA5BlD,8EA+E1BkS,oBA/C0B,SAAM9S,EAAuBmR,EAA2BC,GAAxD,iBAAAzU,EAAAC,OAAA,uDACpBgE,EAAO,CACXmS,eAAgB,EAChB1B,UAAWF,EAAYE,UACvBC,YAAaH,EAAYG,YACzBC,YAAaJ,EAAYI,YACzBC,WAAYL,EAAY/L,SAASA,SAASrJ,GAC1C2O,WAAYyG,EAAYM,SAAS1V,GACjC2V,WAAYP,EAAYO,WACxBC,SAAUR,EAAYQ,SACtBC,MAAK,UAAET,EAAYU,WAAd,aAAE,EAAiB9V,GACxB+V,YAAaX,EAAYW,YACzBC,YAAaZ,EAAYY,YACzBC,WAAY,KACZC,cAAe,KACfC,cAAef,EAAYgB,cAC3BC,WAAYjB,EAAYkB,kBACxBC,MAAOnB,EAAYmB,MACnBC,aAAa,EACbC,aAAcrB,EAAYqB,aAC1BC,gBAAiBtB,EAAYsB,gBAC7BC,cAAevB,EAAYuB,cAC3BC,eAAgBxB,EAAYwB,eAC5BC,eAAgBzB,EAAYyB,eAC5BC,eAAgB1B,EAAY0B,eAC5BzB,wBAzBwB,WAAAzU,EAAA,MA4BbsF,EAAejC,EAAM,yCAA0CY,IA5BlD,8EAgD1BoS,oBAhB0B,SAAMhT,EAAuB8Q,EAAyBM,GAAtD,eAAAzU,EAAAC,OAAA,uDACpBgE,EAAO,CACXkQ,kBACAM,uBACAmB,aAAa,GAJW,WAAA5V,EAAA,MAObsF,EAAejC,EAAM,yCAA0CY,IAPlD,+EC/GfqS,GAAkC,CAC7CC,cAAe,EACfC,SAAU,GACV1E,MAAO,IAAIf,KACXoB,IAAK,IAAIpB,KACT0F,kBAAkB,EAClBC,kBAAkB,EAClBC,YAAa,GACbC,aAAc,EACdC,eAAgB,EAChB5B,WAAO1U,G,uCCsCMuW,GAjDiC,SAAC,GAAgC,IAA9BC,EAA6B,EAA7BA,UAAWC,EAAkB,EAAlBA,aAC5D,OACE,yBAAK3K,UAAU,WACb,yBAAKA,UAAU,OACb,4BACEpC,QAAS,kBAAM+M,EAAapE,aAAQmE,GAAY,KAChD1K,UAAU,QACVzK,KAAM,GACJ,kBAAC,IAAD,CAASmI,KAAK,MAAMwB,KAAM0L,QAE9B,yBAAK5K,UAAU,wBACb,yBAAKA,UAAU,6BACb,kBAAC,IAAD,CACEA,UAAU,kBACV6K,cAAc,WACdC,aAAa,cACbhG,IAAI,aACJ4C,IAAI,aACJhS,MAAOgV,EAAUK,cACjBC,YAAa,SAACrY,GAAOgY,EAAajF,aAAS/S,EAAEsY,OAAOvV,WAEtD,kBAAC,IAAD,CAASgI,KAAK,KAAKwB,KAAMgM,SAG7B,4BACItN,QAAS,kBAAM+M,EAAapE,aAAQmE,EAAW,KAC/C1K,UAAU,QACVzK,IAAK,GACH,kBAAC,IAAD,CAASmI,KAAK,MAAMwB,KAAMiM,SAGlC,yBAAKnL,UAAU,gBACZ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG7N,KAAI,SAAC8U,GACpB,IAAMmE,EAAW7E,aAAQmE,EAAWzD,GAC9BoE,EAAeC,aAAQF,GAAY,QAAU,YAEnD,OACE,yBAAK7V,IAAK0R,EAAKjH,UAAU,kBACvB,yBAAKA,UAAU,gBAAgBsF,aAAO8F,EAAU,QAChD,yBAAKpL,UAAWqL,IAChB,yBAAKrL,UAAU,eAAesF,aAAO8F,EAAU,a,8CHpDxDxD,O,iBAAAA,I,6BAAAA,I,uBAAAA,I,iBAAAA,I,iBAAAA,I,oBAAAA,Q,KASWA,IIRX2D,GJQW3D,O,SIRX2D,O,uBAAAA,I,qBAAAA,I,kCAAAA,Q,KAMUA,ICDHC,GDCGD,MEoJA,GA3IqB,SAACnX,EAAuBqX,GAC1D,IAAKrX,IAASA,EAAKmN,WAAuC,IAA1BnN,EAAKmN,UAAUjK,OAC7C,MAAM,IAAI1E,MAAM,mEAGlB,OAAmB,IAAf6Y,EACKrX,EAAKmN,UAAU,GAAGjL,SAGpBlC,EAAKmN,UAAUlD,QAAO,SAAAqN,GAAG,OAAIA,EAAI3Y,KAAO0Y,KAAY,GAAGnV,UAkIjD,GA/FqB,SAAClC,EAAuBoU,GAC1D,IAAKpU,IAASA,EAAKmN,WAAuC,IAA1BnN,EAAKmN,UAAUjK,OAC7C,OAAO,KAGT,GAAIkR,GAAc,EAChB,OAAO,KAGT,IAAImD,EAAkB,KAWtB,OAVAvX,EAAKmN,UAAUqK,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,YAAY3Z,KAAI,SAAAsU,GAE5C,OAA6B,IADPA,EAAEsF,UAAU1N,QAAO,SAAA2N,GAAC,OAAIA,EAAEjZ,KAAOyV,KACrClR,QAChBqU,EAAkBlF,EACXA,GAGF,WAGFkF,GA2EM,GA7DiB,SAACtD,GAC/B,OACEA,IAAcT,GAAUqE,OACxB5D,IAAcT,GAAUsE,OACxB7D,IAAcT,GAAUuE,OACxB9D,IAAcT,GAAUwE,QAwDb,GAtEU,SAAChY,EAAuBqX,EAAoBY,GACnE,OAAQjY,EAAKmN,UACVlD,QAAO,SAAAwN,GAAC,OAAIA,EAAE9Y,KAAO0Y,KAAY,GAAGK,YACpCzN,QAAO,SAAAoI,GAAC,OAAIA,EAAE1T,KAAOsZ,KAAc,GACnCC,UAAYpL,GAAmBqL,oBAAsBrL,GAAmBqL,kBAkE9D,GAxC4B,SAACnY,EAAuBiY,GACjE,OAAOjY,EAAKmN,UAAUqK,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,YAAYzN,QAAO,SAAAoI,GAAC,OAAIA,EAAE1T,KAAOsZ,QAAe,GAAGC,WAuC3E,GAlDa,SAAClY,EAAuBiY,GAClD,OAAIjY,EAAKuN,OAASlF,EAAK+P,OAIVpY,EAAKmN,UAAUqK,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,YAAYzN,QAAO,SAAAoI,GAAC,OAAIA,EAAE1T,KAAOsZ,QAAe,GAC/EN,UAAU1N,QAAO,SAAA2N,GAAC,OAAIA,EAAES,eAAanV,OAAS,GA4C7C,GAhHkB,SAAClD,EAAuBiY,GACvD,IAAMK,EAAOtY,EAAKmN,UAAUqK,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,YAAYzN,QAAO,SAAAoI,GAAC,OAAIA,EAAE1T,KAAOsZ,QAAe,GAC3F,OAAKK,EAAKJ,UAAYpL,GAAmBqL,oBAAsBrL,GAAmBqL,kBAI3EG,EAAKX,UAAU1N,QAAO,SAAA2N,GAAC,OAAIA,EAAES,eAAanV,OAAS,GA0G7C,GARU,SAAC+Q,EAAsBC,GAC9C,OACGD,IAAcT,GAAUqE,OAAS3D,IAAgBiD,GAAYoB,UAC7DtE,IAAcT,GAAUsE,OAAS5D,IAAgBiD,GAAYqB,SAC7DvE,IAAcT,GAAUsE,OAAS5D,IAAgBiD,GAAYsB,eAInD,GA9BsB,SAACnB,EAA2BoB,EAAeC,GAC9E,IAAMC,EAAWtB,EAAIrN,QAAO,SAAAwN,GAAC,OAAIA,EAAE9Y,KAAO+Z,KAAO,GAC3C1Q,EAAW4Q,EAASlB,YAAYF,SAAQ,SAAAnF,GAAC,OAAIA,EAAEsF,UAAU1N,QAAO,SAAA2N,GAAC,OAAIA,EAAEjZ,KAAOga,QAAQ,GAC5F,MAAO,CAAEC,WAAU5Q,aA2BN,GAvBa,SAACsP,EAA2BqB,GACtD,IAAI,IAAIE,EAAW,EAAGA,EAAWvB,EAAIpU,OAAQ2V,IAC3C,IAAK,IAAIC,EAAW,EAAGA,EAAWxB,EAAIuB,GAAUnB,YAAYxU,OAAQ4V,IAClE,IAAK,IAAIC,EAAW,EAAGA,EAAWzB,EAAIuB,GAAUnB,YAAYoB,GAAUnB,UAAUzU,OAAQ6V,IACtF,GAAIzB,EAAIuB,GAAUnB,YAAYoB,GAAUnB,UAAUoB,GAAUpa,KAAOga,EACjE,MAAO,CAAEC,SAAUtB,EAAIuB,GAAW7Q,SAAUsP,EAAIuB,GAAUnB,YAAYoB,GAAUnB,UAAUoB,IAMlG,MAAO,CAAEH,SAAU,GAA0B5Q,SAAU,M,SDzI7CoP,O,eAAAA,I,uCAAAA,I,2CAAAA,I,2CAAAA,I,2CAAAA,I,oBAAAA,Q,KAyBL,IE/BF4B,GF+EQC,GAA4B,SACvChF,EACAC,EACAgF,EACA5E,EACAC,EACA4E,EACAC,EACAC,EACAC,EACAtZ,GACA,IAAMuZ,EAAmBC,GAAwCxZ,EAAKmN,UAAWgM,EAAiBE,GAC5FI,EAAqBC,GAA0B1Z,EAAMuZ,EAAkBL,EAAiBhF,GAAa,GACrGyF,EAAmBC,GAAwB5Z,EAAMuZ,EAAkBL,GAErEW,EAAS,CACXC,WAAY,GACZC,eAAe,EACfC,YAAY,EACZC,KAAM,GACNC,MAAO9C,GAAc+C,KACrBC,oBAAqBT,EACrBU,sBAAuBZ,GAGzB,GAAIzZ,EAAKuN,OAASlF,EAAKiS,cACrB,OAAOT,EAGT,GAAI7Z,EAAKuN,OAASlF,EAAKkS,cACrB,OAAIf,GAAmCvF,IAC+B,IAAhEjU,EAAKmN,UAAUlD,QAAO,SAAAwN,GAAC,OAAIA,EAAE9Y,KAAOwa,KAAiBjW,OAChD,KAIJ2W,EAGT,IAAMW,EAAalJ,aAASiD,GACtBkG,EAAM,IAAInK,KACVoK,EAAWC,aAAQF,EAAKD,GAC1BI,GAAgB,EACd1C,EAAYsB,GAA8CxZ,EAAMoZ,GAGtE,GAAIpZ,EAAKuN,OAASlF,EAAK+P,MACrB,GAAIc,IAAoBlZ,EAAKsN,WAAY,CAEvC,GAAI2G,IAAcT,GAAUuE,MAC1B,OAAKG,EAAYpL,GAAmB+N,yBAA2B/N,GAAmB+N,sBACzEhB,EAEA,KAIX,IAAK3B,EAAYpL,GAAmBqL,oBAAsBrL,GAAmBqL,iBAC3E,OAAO0B,EAGTe,GAAgB,MAEX,CAGL,GAAI3G,IAAcT,GAAUuE,MAC1B,OAAKG,EAAYpL,GAAmBgO,8BAAgChO,GAAmBgO,2BAC9EjB,EAEA,KAIX,GAAIL,GAA4BxZ,EAAMmZ,EAAiBC,GACrD,OAAOS,EAGP,IAAIL,GAA+BxZ,EAAMoZ,GAKvC,OAAO,KAHPwB,GAAgB,EASxB,OAAI5a,EAAKuN,OAASlF,EAAKmF,UAAYoN,EAC7B1B,IAAoBlZ,EAAKsN,WACvBoN,EACK,KAGLzG,IAAcT,GAAUuE,MACnB,KAGL9D,IAAcT,GAAUqE,MACtB3D,IAAgBiD,GAAYoB,SACvB,eAAKsB,EAAZ,CAAoBC,WAAY,uBAAwBE,YAAY,EAAME,MAAO9C,GAAc2D,qBAG7F7G,IAAgBiD,GAAYqB,QACvB,eAAKqB,EAAZ,CAAoBC,WAAY,qBAAsBC,eAAe,EAAOC,YAAY,EAAMC,KAAK,wCAAyCC,MAAO9C,GAAc4D,qBAI5J,KAGL/G,IAAcT,GAAUsE,MACtB5D,IAAgBiD,GAAYqB,QACvB,eAAKqB,EAAZ,CAAoBC,WAAY,qBAAsBC,eAAe,EAAMC,YAAY,EAAME,MAAO9C,GAAc6D,mBAG7G,MAGJzB,GAAmCvF,IAAcuF,GAAoCxZ,EAAMoZ,GACvF,eAAKS,EAAZ,CAAoBC,WAAY,iBAAkBC,eAAe,EAAOC,YAAY,EAAMC,KAAK,gCAAiCC,MAAO9C,GAAc8D,SAGhJ,KAILjH,IAAcT,GAAUsE,OAAS5D,IAAgBiD,GAAYqB,QACxD,eAAKqB,EAAZ,CAAoBC,WAAY,qBAAsBC,eAAe,EAAOC,YAAY,EAAMC,KAAK,GAAIC,MAAO9C,GAAc+D,qBAGvH,KAGF,MAIHvB,GAA0B,SAAC5Z,EAAuBuZ,EAAoCL,GAC1F,IAAKlZ,IAASA,EAAKmN,WAAuC,IAA1BnN,EAAKmN,UAAUjK,SAC5CqW,IAAqBA,EAAiBX,WAAaW,EAAiBX,SAAS1W,SAC9E,MAAO,GAGT,IAAMyX,EAA6B,CACjC,CACErY,MAAOkS,GAAUqE,MACjBoC,KAAM,QACNjK,MAAO,UAILoL,EAAc7B,EAAiBX,SAAS1W,SACxCoW,EAAOkB,GAAuCxZ,EAAMuZ,EAAiBvR,SAASrJ,IAC9EuZ,EAAYsB,GAA8CxZ,EAAMsY,EAAM3Z,IA2B5E,GAzBIqB,EAAKuN,OAASlF,EAAKiS,eAAiBta,EAAKuN,OAASlF,EAAKkS,cAEzDZ,EAAiBjY,KAAK,CAAEJ,MAAOkS,GAAUuE,MAAOkC,KAAM,QAASjK,MAAO,UAC7DhQ,EAAKuN,OAASlF,EAAK+P,QACxBpY,EAAKsN,aAAe4L,IAAqBhB,EAAYpL,GAAmB+N,yBAA2B/N,GAAmB+N,sBACxHlB,EAAiBjY,KAAK,CAAEJ,MAAOkS,GAAUuE,MAAOkC,KAAM,QAASjK,MAAO,UAC7DhQ,EAAKsN,aAAe4L,IAAqBhB,EAAYpL,GAAmBgO,8BAAgChO,GAAmBgO,4BACpInB,EAAiBjY,KAAK,CAAEJ,MAAOkS,GAAUuE,MAAOkC,KAAM,QAASjK,MAAO,WAItEhQ,EAAKuN,OAASlF,EAAKiS,eAAiBta,EAAKuN,OAASlF,EAAKkS,cACzDZ,EAAiBjY,KAAK,CAACJ,MAAOkS,GAAUsE,MAAOmC,KAAM,QAASjK,MAAO,QAC5DhQ,EAAKuN,OAASlF,EAAK+P,QAAWF,EAAYpL,GAAmBqL,oBAAsBrL,GAAmBqL,kBAC/GwB,EAAiBjY,KAAK,CAACJ,MAAOkS,GAAUsE,MAAOmC,KAAM,QAASjK,MAAO,QAGnEoL,EAAYC,0BACd1B,EAAiBjY,KAAK,CAAEJ,MAAOkS,GAAU8H,YAAarB,KAAM,cAAejK,MAAO,WAGhFoL,EAAYG,uBACd5B,EAAiBjY,KAAK,CAAEJ,MAAOkS,GAAUgI,SAAUvB,KAAM,WAAYjK,MAAO,WAG1EoL,EAAYK,oBAAqB,CACnC,IAAMC,EAAU1b,EAAKqN,cAAcpD,QAAO,SAAA0R,GAAE,OAAIA,EAAGzF,YAAYpM,SAASyP,EAAiBvR,SAASrJ,MAAQgd,EAAG9Z,KAAK+Z,WAAW,SAAO7d,KAAI,SAAA4d,GACtI,MAAO,CAAEra,MAAOqa,EAAGhd,GAAIsb,KAAM0B,EAAG9Z,KAAMmO,MAAO,aAE/C,OAAO2J,EAAiBkC,OAAOH,GAGjC,OAAO/B,GAKHD,GAA4B,SAAC1Z,EAAuBuZ,EAAoCL,EAAyB9C,EAA4B0F,GACjJ,IAAMrC,EAA+B,GAC/BnB,EAAOkB,GAAuCxZ,EAAMuZ,EAAiBvR,SAASrJ,IAC9EuZ,EAAYsB,GAA8CxZ,EAAMsY,EAAM3Z,IAgB5E,GAdIqB,EAAKuN,OAASlF,EAAKkS,eAAiBva,EAAKuN,OAASlF,EAAKiS,cACzDb,EAAmB/X,KAAK,CAAEJ,MAAO6V,GAAYoB,SAAU0B,KAAM,WAAYjK,MAAO,UACvEhQ,EAAKuN,OAASlF,EAAK+P,QAAWF,EAAYpL,GAAmBqL,oBAAsBrL,GAAmBqL,kBAC/GsB,EAAmB/X,KAAK,CAAEJ,MAAO6V,GAAYoB,SAAU0B,KAAM,WAAYjK,MAAO,UAGlFyJ,EAAmB/X,KAAK,CAAEJ,MAAO6V,GAAYqB,QAASyB,KAAM,UAAWjK,MAAO,QAE1EhQ,EAAKuN,OAASlF,EAAKkS,eAAiBva,EAAKuN,OAASlF,EAAKiS,cACzDb,EAAmB/X,KAAK,CAAEJ,MAAO6V,GAAYsB,cAAewB,KAAM,iBAAkBjK,MAAO,UAClFhQ,EAAKuN,OAASlF,EAAK+P,QAAWF,EAAYpL,GAAmBqL,oBAAsBrL,GAAmBqL,kBAC/GsB,EAAmB/X,KAAK,CAAEJ,MAAO6V,GAAYsB,cAAewB,KAAM,iBAAkBjK,MAAO,UAGzF8L,GACyE,IAAvErC,EAAmBxP,QAAO,SAAA8R,GAAE,OAAIA,EAAGza,QAAU8U,KAAelT,OAC9D,OAAQkT,GACN,KAAKe,GAAYoB,SACfkB,EAAmB/X,KAAK,CAAEJ,MAAO6V,GAAYoB,SAAU0B,KAAM,WAAYjK,MAAO,UAChF,MACF,KAAKmH,GAAYqB,QACfiB,EAAmB/X,KAAK,CAAEJ,MAAO6V,GAAYqB,QAASyB,KAAM,UAAWjK,MAAO,QAC9E,MACF,KAAKmH,GAAYsB,cACfgB,EAAmB/X,KAAK,CAAEJ,MAAO6V,GAAYsB,cAAewB,KAAM,iBAAkBjK,MAAO,UAMnG,OAAOyJ,GGjSHuC,GAAgB,CACpBC,EAAG,UACHC,EAAG,UACHC,EAAG,UACHC,EAAG,UACHC,EAAG,UACHC,EAAG,WAGCC,GAAuB,CAC3BN,EAAG,CAAEjM,MAAO,SACZkM,EAAG,CAAElM,MAAO,WACZoM,EAAG,CAAEpM,MAAO,YAiECwM,GA9D6B,SAAC,GAAkE,IAAhE5D,EAA+D,EAA/DA,SAAU6D,EAAqD,EAArDA,MAAOC,EAA8C,EAA9CA,cAAeC,EAA+B,EAA/BA,iBAAkBC,EAAa,EAAbA,OACvF5c,EAASsK,qBAAW6D,IAApBnO,KACF6c,EAAkCF,EACpC,CAAEG,QAAS,gBACX,CAAEA,QAAS,QAETC,EAAiBzL,aAASmL,EAAMO,YAChCC,IAAmBP,GAErB9D,EAASlB,YAAYzN,QAAO,SAAAoI,GAAC,OAAIA,EAAEsF,UAAU1N,QAAO,SAAA2N,GAAC,OAAIA,EAAES,kBAAcnV,OAAS,EAElFga,EAAa,GACbR,GAAiBD,EAAMU,0BACzBD,EAAaT,EAAMU,wBAA0B,KAG3CF,GAAmBR,EAAMW,4BAC3BF,GAAcT,EAAMW,0BAA4B,KAGlDF,GAAcT,EAAMY,aAEpB,IAAMC,EAAkB,CAAEC,WAAW,aAAD,OAAevB,GAASS,EAAMe,aAA9B,MAC9BC,EAA2BlB,GAAgBE,EAAMiB,eAYvD,OACI,4BACE9R,UAAU,QACVpC,QAAS,YAbK,WAClB,IAAMmU,EAAgB1E,GAA0BwD,EAAMe,YAAaf,EAAMiB,cAAejB,EAAMmB,WAAYnB,EAAMO,WAAYP,EAAMoB,SAAUpB,EAAMqB,WAAYrB,EAAMsB,aAAetB,EAAMuB,WAAYvB,EAAMwB,YAAaje,GAClM,OAAlB2d,GAKJf,EAAOH,EAAOkB,GAMMO,KAEd,yBAAMtS,UAAU,kBACd,yBAAKA,UAAU,YAAYsF,aAAO6L,EAAgB,OAAlD,KACA,yBAAKnR,UAAU,cAAcsF,aAAO6L,EAAgB,QAEtD,yBAAKnR,UAAU,kBAAkBuS,MAAOb,GACtC,yBAAK1R,UAAU,YACZ6Q,EAAM2B,aAAgB,kBAAC,IAAD,CAAStT,KAAMuT,OACtC,0BAAMF,MAAOV,GToLpB,SAAqCa,GAC1C,IAAMjN,EAAQH,aAAOI,aAASgN,EAAGtB,YAAa,WAAWxL,QAAQ,IAAK,IAChEE,EAAQR,aAAOI,aAASgN,EAAGT,UAAW,WAAWrM,QAAQ,IAAK,IAEpE,MAAM,GAAN,OAAUH,EAAV,cAAqBK,GSvLN6M,CAA4B9B,GAD/B,YAGC1L,GAA8B0L,EAAM+B,gBAEvC,yBAAK5S,UAAU,WAAWuS,MAAOtB,GAAmBJ,EAAMgC,UAA1D,IAAsEhC,EAAMiC,UAC5E,yBAAK9S,UAAU,gBACZsR,EADH,WAEGT,EAAMkC,KAAN,WAAiBlC,EAAMkC,SC7DvBnC,I,OAjB6B,SAAC,GAAc,IAAZoC,EAAW,EAAXA,KACvCC,EAAWvN,aAASsN,EAAK5B,YACzB8B,GAAkC,IAAvBF,EAAKb,aAAsB,YAAca,EAAKG,eAE/D,OACI,4BAAQnT,UAAU,cACd,yBAAMA,UAAU,kBACd,yBAAKA,UAAU,YAAYsF,aAAO2N,EAAU,OAA5C,KACA,yBAAKjT,UAAU,cAAcsF,aAAO2N,EAAU,QAEhD,yBAAKjT,UAAU,mBACb,yBAAKA,UAAU,aAAakT,EAA5B,KAAwCF,EAAKI,WCmC1CC,I,OApC2C,SAAC,GAAsE,IAApE9R,EAAmE,EAAnEA,UAAW3E,EAAwD,EAAxDA,OAAQ0W,EAAgD,EAAhDA,OAAQhK,EAAwC,EAAxCA,MAAOiK,EAAiC,EAAjCA,kBAAmBvC,EAAc,EAAdA,OAC1GF,EAAgBvP,EAAUlD,QAAO,SAAAwN,GAAC,OAAIA,EAAEC,YAAYzN,QAAO,SAAAoI,GAAC,OAAIA,EAAEsF,UAAU1N,QAAO,SAAA2N,GAAC,OAAIA,EAAES,qBAAenV,OAAS,EAExH,OAAsB,IAAlBgc,EAAOhc,OACF,8BAIP,oCACE,yBAAK0I,UAAU,UAAUpD,GACzB,yBAAKoD,UAAU,oBACZsJ,EAAMnX,KAAI,SAAA6gB,GAAI,OACb,kBAAC,GAAD,CACEzd,IAAKyd,EAAKQ,YACVR,KAAMA,EACNhG,SAAUzL,EAAUlD,QAAO,SAAAwN,GAAC,OAAIA,EAAE9Y,KAAOigB,EAAKd,cAAY,SAKhE,yBAAKlS,UAAU,cACZsT,EAAOnhB,KAAI,SAAAugB,GAAE,OACZ,kBAAC,GAAD,CACE1B,OAAQA,EACRzb,IAAKmd,EAAGe,gBACR5C,MAAO6B,EACP1F,SAAUzL,EAAUlD,QAAO,SAAAwN,GAAC,OAAIA,EAAE9Y,KAAO2f,EAAGR,cAAY,GACxDpB,cAAeA,EACfC,iBAAkBwC,WCrBxBG,GAAmB,SAACJ,EAA4BhK,EAAqBqK,EAAoCC,GAC7G,IAAIC,EAAW,IAAIze,EACnB,GAAsB,IAAlBke,EAAOhc,QAAiC,IAAjBgS,EAAMhS,OAC/B,OAAOuc,EAGT,IAAIC,EAAY,IAAIpP,KAAK,KAAK,EAAE,GAKhC,GAJI4O,EAAOhc,OAAS,IAClBwc,EAAY9N,GAAaN,aAAS4N,EAAO,GAAGlC,YAAauC,EAAiBI,gBAAiBJ,EAAiBK,eAG1G1K,EAAMhS,OAAS,EAAG,CACpB,IAAM2c,EAAajO,GAAaN,aAAS4D,EAAM,GAAG8H,YAAauC,EAAiBI,gBAAiBJ,EAAiBK,cAC9GE,aAASD,EAAYH,KACvBA,EAAYG,GAIhB,IAAME,EAAU5N,aAAQuN,EAAW,GAC7BlX,EAAS,UAAG0I,aAAOwO,EAAW,SAArB,cAAmCxO,aAAO6O,EAAS,UAAWlU,cAAgB,IZyGxF,SAA2BmU,GAChC,GAAIA,EAAU,GACZ,MAAM,IAAN,OAAWA,EAAX,MAGF,IAAIC,EAAG,WAAO5M,KAAK6M,MAAMF,EAAU,IAA5B,KACP,OAAQA,EAAU,KAAO,EACrBC,EAAM,IACNA,EAAG,WAAOD,EAAU,GAAjB,MYhHSG,CAAkBX,EAAYzhB,KAAI,SAAAqiB,GAAC,OAAI7P,GAAwB6P,EAAE/B,SAAOgC,QAAO,SAACC,EAAMC,GAAP,OAAeD,EAAOC,IAAK,IAG1H,OADAd,EAASzd,IAAIwG,EAAQ,CAAE0W,SAAQhK,UACxBuK,GAkEMe,GArC6B,SAAC,GAA4D,IAA1DtB,EAAyD,EAAzDA,OAAQuB,EAAiD,EAAjDA,SAAUvL,EAAuC,EAAvCA,MAAOsK,EAAgC,EAAhCA,YAAaxf,EAAmB,EAAnBA,KAAM4c,EAAa,EAAbA,OAEzF,GAAsB,IAAlBsC,EAAOhc,OACT,OAAO,0CAGT,IAAIuc,EAA6C,IAAIze,EACrD,OAAOyf,GACL,IAAK,WACHhB,EAlCyB,SAACP,EAA4BhK,EAAqB5H,GAC/E,IAAImS,EAAW,IAAIze,EAGnB,OAFAye,EAASzd,IAAI,cAAe,CAAEkd,OAAQA,EAAOjV,QAAO,SAAAqU,GAAE,OAAIA,EAAGV,aAAetQ,KAAa4H,MAAO,KAChGuK,EAASzd,IAAI,aAAe,CAAEkd,OAAQA,EAAOjV,QAAO,SAAAqU,GAAE,OAAIA,EAAGV,aAAetQ,KAAa4H,MAAO,KACzFuK,EA8BQiB,CAAuBxB,EAAQhK,EAAOlV,EAAKsN,YACtD,MACF,IAAK,KACHmS,EAAWH,GAAiBJ,EAAQhK,EAAOlV,EAAKmN,UAAU,GAAGjL,SAAUsd,GACvE,MACF,QACEC,EAhCoB,SAACP,EAA4BhK,GACrD,IAAIuK,EAAW,IAAIze,EAYnB,OAXAke,EAAOnhB,KAAI,SAAAugB,GACT,IAAMtH,EAAW9F,aAAOI,aAASgN,EAAGtB,YAAY/K,SAAS,EAAE,EAAE,EAAE,GAAI,gBAAgBpG,cACnF,IAAK4T,EAASkB,YAAY3J,GAAW,CACnC,IAAM4J,EAAiB1L,EAAMjL,QAAO,SAAAJ,GAAC,OAAIqH,aAAOI,aAASzH,EAAEmT,YAAY/K,SAAS,EAAE,EAAE,EAAE,GAAI,gBAAgBpG,gBAAkBmL,KAC5HyI,EAASzd,IAAIgV,EAAU,CAAE9B,MAAO0L,EAAgB1B,OAAQ,KAI1D,OADAO,EAAS3c,KAAKkU,GAAUkI,OAAOxd,KAAK4c,GAC7BtH,KAGFyI,EAmBQoB,CAAkB3B,EAAQhK,GAIzC,OACE,oCACCuK,EAASqB,OAAO/iB,KAAI,SAAAgjB,GAAG,OACtB,kBAAC,GAAD,CACInE,OAAQA,EACRzb,IAAK4f,EACLvY,OAAQuY,EACR5T,UAAWnN,EAAKmN,UAChB+R,OAAQO,EAAS3c,KAAKie,GAAK7B,OAC3BhK,MAAOuK,EAAS3c,KAAKie,GAAK7L,MAC1BiK,kBAAgC,OAAbsB,GAA6B,gBAARM,EACxCC,kBAAgC,aAAbP,S,gBJ9GxBzH,O,cAAAA,I,0BAAAA,I,wBAAAA,I,kCAAAA,I,oBAAAA,Q,KAQUA,UKSFiI,GAAsB,SAACjhB,EAAuBiK,GACzD,IAAKjK,IAASA,EAAKmN,WAAuC,IAA1BnN,EAAKmN,UAAUjK,OAC7C,MAAO,GAGT,IAAMkY,EAAcpb,EAAKmN,UAAU,GAAGjL,SAEhCyX,EAAsC,CAC1C,CACErY,MAAOkS,GAAUqE,MACjBoC,KAAM,QACNjK,MAAO,SAET,CACE1O,MAAOkS,GAAUsE,MACjBmC,KAAM,QACNjK,MAAO,QAmBX,GAfI/F,GACF0P,EAAiBuH,QAAQ,CAAE5f,OAAQ,EAAG2Y,KAAM,MAAOjK,MAAO,UAG5D2J,EAAiBjY,KAAK,CAAEJ,MAAOkS,GAAUuE,MAAOkC,KAAM,QAASjK,MAAO,UAGlEoL,EAAYC,0BACd1B,EAAiBjY,KAAK,CAAEJ,MAAOkS,GAAU8H,YAAarB,KAAM,cAAejK,MAAO,WAGhFoL,EAAYG,uBACd5B,EAAiBjY,KAAK,CAAEJ,MAAOkS,GAAUgI,SAAUvB,KAAM,WAAYjK,MAAO,WAG1EoL,EAAYK,oBAAqB,CACnC,IAAMC,EAA6B,GAC7ByF,EAAW,GAmBjB,OAlBAnhB,EAAKmN,UAAUqK,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,YAAYF,SAAQ,SAAAnF,GAAC,OAAIA,EAAEsF,UAAU5Z,KAAI,SAAA6Z,GAAC,OAAIuJ,EAAIvJ,EAAEjZ,IAAM8Y,WAExFzX,EAAKqN,cAActP,KAAI,SAAA4d,GACrB,OAAKA,EAAG9Z,KAAK+Z,WAAW,MAWf,MAVH3R,EACE0R,EAAGzF,YAAYkL,MAAK,SAAAziB,GAAE,OAAIsL,EAAOiM,YAAY3R,QAAQ5F,IAAO,MAC9D+c,EAAQha,KAAK,CAACJ,MAAOqa,EAAGhd,GAAIsb,KAAK,GAAD,OAAK0B,EAAG9Z,KAAR,aAAiBsf,EAAIxF,EAAGzF,YAAY,IAAIrU,KAAxC,KAAiDmO,MAAO,WAGxF0L,EAAQha,KAAK,CAACJ,MAAOqa,EAAGhd,GAAIsb,KAAK,GAAD,OAAK0B,EAAG9Z,KAAR,aAAiBsf,EAAIxF,EAAGzF,YAAY,IAAIrU,KAAxC,KAAiDmO,MAAO,WAGrF2L,MAKXD,EAAQ2F,MAAK,SAACC,EAAIC,GAAS,OAAOD,EAAGrH,KAAOsH,EAAGtH,KAAO,GAAK,KACpDN,EAAiBkC,OAAOH,GAGjC,OAAO/B,GC5EH6H,GAAc,CAGlBC,SAAU,SAAeC,EAASC,GAChC,IAAMD,GAAMC,GAAQD,IAAOC,EACzB,OAAO,EAGT,IAAKD,IAAOC,EACV,OAAO,EAGT,GAAID,EAAGxe,SAAWye,EAAGze,OACnB,OAAO,EAGT,IAAK,IAAImG,EAAI,EAAIA,EAAIqY,EAAGxe,OAASmG,IAC/B,IAAKmY,GAAYI,SAASD,EAAID,EAAGrY,IAC/B,OAAO,EAIX,OAAO,GAKTuY,SAAU,SAAeC,EAAUtgB,GACjC,IAAK,IAAI8H,EAAI,EAAIA,EAAIwY,EAAI3e,OAAQmG,IAC/B,GAAIwY,EAAIxY,KAAO9H,EACb,OAAO,EAGX,OAAO,GAGTugB,YAAa,SAAeC,EAAWC,GACrC,IAAK,IAAI3Y,EAAI,EAAIA,EAAI0Y,EAAK7e,OAAQmG,IAChC,GAAI2Y,EAAKlY,SAASiY,EAAK1Y,IAErB,OAAO,EAIX,OAAO,GAIT4Y,OAAQ,SAAeJ,GACrB,IAAIK,EAAc,GAQlB,OANAL,EAAI9jB,KAAI,SAAA6L,GACD4X,GAAYI,SAASM,EAAQtY,IAChCsY,EAAOxgB,KAAKkI,MAITsY,GAITC,aAAc,SAAeN,EAAUO,GACrC,IAAIF,EAAc,GAiBlB,OAfAL,EAAI9jB,KAAI,SAAA6L,GAEN,IADA,IAAIyY,GAAQ,EACHhZ,EAAI,EAAGA,EAAI6Y,EAAOhf,OAAQmG,IACjC,GAAI+Y,EAAKF,EAAO7Y,GAAIO,GAAO,CACzByY,GAAQ,EACR,MAICA,GAEHH,EAAOxgB,KAAKkI,MAITsY,IAKIV,MCkLAc,GAnPiD,SAAC,GAA6D,IAA3DtiB,EAA0D,EAA1DA,KAAMiK,EAAoD,EAApDA,OAAQI,EAA4C,EAA5CA,eAAgBkY,EAA4B,EAA5BA,cAAgBja,EAAY,EAAZA,OAAY,EAC3FnB,mBAAS8C,GADkF,mBACpHuY,EADoH,KAC1GC,EAD0G,OAEnEtb,oBAAS,GAF0D,mBAEpHub,EAFoH,KAE9FC,EAF8F,OAGvFxb,mBAAS6R,GAAW4J,eAHmE,mBAGpHC,EAHoH,KAGxGC,EAHwG,OAIjF3b,mBAAS8Z,GAAoBjhB,EAAMiK,IAJ8C,mBAIpH8Y,EAJoH,KAIrGC,EAJqG,OAKrF7b,mBAASnH,EAAKmN,UAAUpP,KAAI,SAAA0Z,GAAC,MAAI,GAAKA,EAAE9Y,OAL6C,mBAKpHskB,EALoH,KAKvGC,EALuG,OAMjF/b,mBAASnH,EAAKmN,UAAUqK,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,eAAa3Z,KAAI,SAAAsU,GAAC,MAAI,GAAKA,EAAE1T,OANa,mBAMpHwkB,EANoH,KAMrGC,EANqG,OAOrFjc,mBAASnH,EAAKmN,UAAUqK,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,eAAaF,SAAQ,SAAAnF,GAAC,OAAIA,EAAEsF,aAAW5Z,KAAI,SAAA6Z,GAAC,MAAI,GAAKA,EAAEjZ,OAPT,mBAOpHuX,EAPoH,KAOvGmN,EAPuG,OAQ7Flc,oBAAS,GARoF,mBAQpHmc,EARoH,KAQ3GC,EAR2G,KAU3Hjc,qBAAU,WACRmb,EAAYxY,KACX,CAACA,IAEJ3C,qBAAU,WACJgB,GACFib,GAAW,KAEZ,CAACjb,IAEJ,IAAMkb,EAAmB,SAACxjB,GACxB,OAAO,eACF6V,GADL,CAEExE,MAAOpH,EAAOoH,MACdK,IAAKzH,EAAOyH,IACZ8C,OAAQ,EACR0B,YAAalW,EAAKmN,UAAUqK,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,YAAYF,SAAQ,SAAAnF,GAAC,OAAKA,EAAEsF,UAAU5Z,KAAI,SAAA6Z,GAAC,OAAIA,EAAEjZ,YAC5FoX,SAAU/V,EAAKmN,UAAUpP,KAAI,SAAA0Z,GAAC,OAAIA,EAAE9Y,MACpCmX,cAAe9V,EAAKmN,UAAU,GAAGxO,MAgB/B8kB,EAAqB,SAACliB,GFpDO,IAACmiB,EAAgBC,EEqDlDb,EAAcvhB,GACdgiB,GAAW,GACXd,GFvDkCiB,EEuDAlB,GFvDgBmB,EEuDNpiB,KFtD7ByX,GAAW4K,OAArB,eACEF,EADF,CACKvN,aAAc,EAAGC,eAAgB,IADtC,eAEEsN,EAFF,CAEKvN,YAAawN,EAAOvN,cAAeuN,MEqD7ChB,EAAwBphB,IAAQyX,GAAW4K,SAgD7C,OACE,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAY/Y,KAAK,SACf,kBAAC,IAAD,CAAWrB,QATJ,WACf+Y,MASY,kBAAC,IAAD,CAASzX,KAAMC,IAAgBzB,KAAK,KAAKuB,KAAK,gBAGpD,kBAAC,IAAD,eAGA,kBAAC,IAAD,CAAYA,KAAK,OACf,kBAAC,IAAD,CAAWrB,QA7EL,WACdmZ,GAAwB,GACxBG,EAAc9J,GAAW4J,eACzBI,EAAiB/B,GAAoBjhB,EAAMiK,IAC3CiZ,EAAeljB,EAAKmN,UAAUpP,KAAI,SAAA0Z,GAAC,MAAI,GAAKA,EAAE9Y,OAC9CykB,EAAiBpjB,EAAKmN,UAAUqK,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,eAAa3Z,KAAI,SAAAsU,GAAC,MAAI,GAAKA,EAAE1T,OAC5E0kB,EAAerjB,EAAKmN,UAAUqK,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,eAAaF,SAAQ,SAAAnF,GAAC,OAAIA,EAAEsF,aAAW5Z,KAAI,SAAA6Z,GAAC,MAAI,GAAKA,EAAEjZ,OACpG8jB,EAAYe,EAAiBxjB,IAE7BujB,GAAW,KAoEH,YAON,kBAAC,IAAD,CAAYvY,MAAM,iBAEhB,kBAAC,IAAD,KACE,kBAAC,IAAD,eACA,kBAAC,IAAD,CACE1J,MAAOuhB,EACPjM,YAAa,SAACrY,GAAD,OAAOklB,EAAmBllB,EAAEsY,OAAOvV,QAChDuiB,UAAU,gBACV,kBAAC,IAAD,CAAiBviB,MAAO0X,GAAW4J,eAAnC,iBACA,kBAAC,IAAD,CAAiBthB,MAAO0X,GAAW8K,WAAnC,aACA,kBAAC,IAAD,CAAiBxiB,MAAO0X,GAAW+K,UAAnC,cACA,kBAAC,IAAD,CAAiBziB,MAAO0X,GAAW4K,QAAnC,UACA,kBAAC,IAAD,CAAiBtiB,MAAO0X,GAAWgL,KAAnC,SAIHtB,GACC,kBAAC,IAAD,KACE,kBAAC,IAAD,aACA,kBAAC,IAAD,CACEphB,MAAOkhB,EAASrM,YAChBS,YAAa,SAACrY,GAAD,OAAOkkB,EAAY,eAAID,EAAL,CAAerM,YAAa5X,EAAEsY,OAAOvV,UACpEuiB,UAAU,gBACTd,EAAchlB,KAAI,SAACgE,GAAD,OACjB,kBAAC,IAAD,CAAiBZ,IAAKY,EAAGT,MAAOA,MAAOS,EAAGT,OAAQS,EAAGkY,WAM5DyI,GACC,kBAAC,IAAD,KACE,kBAAC,IAAD,eACA,kBAAC,IAAD,CACEphB,MAAOkhB,EAASpM,cAChBQ,YAAa,SAACrY,GAAD,OAAOkkB,EAAY,eAAID,EAAL,CAAepM,cAAe7X,EAAEsY,OAAOvV,UACtEuiB,UAAU,gBACV,kBAAC,IAAD,CAAiBviB,OAAQ,GAAzB,OACA,kBAAC,IAAD,CAAiBA,MAAO,GAAxB,YACA,kBAAC,IAAD,CAAiBA,MAAO,GAAxB,WACA,kBAAC,IAAD,CAAiBA,MAAO,GAAxB,oBAKN,kBAAC,IAAD,KACE,kBAAC,IAAD,aACA,kBAAC,IAAD,CACEA,MAAOkhB,EAAShO,QAAU,EAC1BoC,YAAa,SAACrY,GAAQkkB,EAAY,eAAID,EAAL,CAAehO,MAAOjW,EAAEsY,OAAOvV,SAASiiB,GAAW,IACpFM,UAAU,gBACR,kBAAC,IAAD,CAAiB1iB,KAAM,EAAGG,OAAQ,GAAlC,OACCtB,EAAKoN,KAAKrP,KAAI,SAAC0W,GAAD,OACb,kBAAC,IAAD,CAAiBtT,IAAKsT,EAAI9V,GAAI2C,MAAOmT,EAAI9V,IAAzC,IAA+C8V,EAAI5S,WAK1D7B,EAAKmN,UAAUjK,OAAS,GACvB,kBAAC,IAAD,KACE,kBAAC,IAAD,kBACA,kBAAC,IAAD,CACE+gB,UAAU,EACVrN,YAAa,SAACrY,GAAD,OAhID2lB,EAgIuB3lB,EAAEsY,OAAOvV,MA/HtD4hB,EAAegB,GACfX,GAAW,GACXH,EAAiBpjB,EAAKmN,UACnBlD,QAAO,SAAAwN,GAAC,OAAIyM,EAAO3f,QAAQkT,EAAE9Y,GAAGuU,aAAe,KAC/CsE,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,eAEf3Z,KAAI,SAAAsU,GAAC,MAAI,GAAKA,EAAE1T,YACnBqkB,EAAiB/B,GAAoBjhB,EAAMwiB,IARtB,IAAC0B,GAiIZ5iB,MAAO2hB,GAEJjjB,EAAKmN,UAAUpP,KAAI,SAACuZ,GAAD,OAClB,kBAAC,IAAD,CAAiBnW,IAAKmW,EAAI3Y,GAAI2C,MAAOgW,EAAI3Y,GAAGuU,YAAaoE,EAAIzV,WAMtE7B,EAAKmN,UAAUqK,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,eAAaxU,OAAS,GACnD,kBAAC,IAAD,KACE,kBAAC,IAAD,oBACA,kBAAC,IAAD,CACE+gB,UAAU,EACVrN,YAAa,SAACrY,GAAD,OApIG4lB,EAoIuB5lB,EAAEsY,OAAOvV,MAnI1D8hB,EAAiBe,GACjBZ,GAAW,QACXF,EAAerjB,EAAKmN,UACjBlD,QAAO,SAAAwN,GAAC,OAAIwL,EAAY1e,QAAQkT,EAAE9Y,GAAGuU,aAAe,KACpDsE,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,eAEfF,SAAQ,SAAAnF,GAAC,OAAIA,EAAEsF,aAEf5Z,KAAI,SAAA6Z,GAAC,MAAI,GAAKA,EAAEjZ,OATM,IAACwlB,GAqIhB7iB,MAAO6hB,GAEJnjB,EAAKmN,UAAUlD,QAAO,SAAAwN,GAAC,OAAIwL,EAAY1e,QAAQkT,EAAE9Y,GAAGuU,aAAe,KAAGnV,KAAI,SAACuZ,GAAD,OACzEA,EAAII,YAAY3Z,KAAI,SAAAua,GAAI,OACtB,kBAAC,IAAD,CAAiBnX,IAAKmX,EAAK3Z,GAAI2C,MAAOgX,EAAK3Z,GAAGuU,YAAaoE,EAAI8M,KAA/D,IAAsE9L,EAAKzW,cAOtF7B,EAAKmN,UAAUqK,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,eAAaF,SAAQ,SAAAnF,GAAC,OAAIA,EAAEsF,aAAWzU,OAAS,GAC7E,kBAAC,IAAD,KACE,kBAAC,IAAD,kBACA,kBAAC,IAAD,CACE+gB,UAAU,EACVrN,YAAa,SAACrY,GAAD,OAzIC8lB,EAyIuB9lB,EAAEsY,OAAOvV,MAxIxD+hB,EAAegB,QACfd,GAAW,GAFY,IAACc,GA0Id/iB,MAAO4U,GAEJlW,EAAKmN,UACHlD,QAAO,SAAAwN,GAAC,OAAIwL,EAAY1e,QAAQkT,EAAE9Y,GAAGuU,aAAe,KACpDsE,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,eACfzN,QAAO,SAAAoI,GAAC,OAAI8Q,EAAc5e,QAAQ8N,EAAE1T,GAAGuU,aAAe,KACtDnV,KAAI,SAAAua,GAAI,OAAIA,EAAKX,UAAU5Z,KAAI,SAAAumB,GAAG,OACnC,kBAAC,IAAD,CAAiBnjB,IAAKmjB,EAAI3lB,GAAI2C,MAAOgjB,EAAI3lB,GAAGuU,YAAaoR,EAAIziB,cAMvE,kBAAC,IAAD,CACE+J,UAAU,eACVwE,OAAO,QACP5G,QArJa,WACnB,IAAM+a,EAAsBrO,EAAYnY,KAAI,SAAA6Z,GAAC,OAAI9G,SAAS8G,MACpD4M,EAAgBhB,EAAiBxjB,GACjCykB,EAAc,eAAQjC,EAAR,CAAkBtM,YAAaqO,IAC7CG,IACJF,EAAcrO,cAAgBsO,EAAetO,aAC7CqO,EAAcpO,gBAAkBqO,EAAerO,eAC/CoO,EAAchQ,QAAUiQ,EAAejQ,OACvCgN,GAAYC,SAAS+C,EAActO,YAAauO,EAAevO,cAEjE7L,EAAeoa,EAAgBC,IA4IzBhZ,UAAW4X,GAJb,iBAWF,kBAAC,IAAD,KACE,kBAAC,IAAD,SCxOOqB,ICvBHC,GDuBGD,GApBf,SAA2BE,GACzB,IAAMC,EAAkBC,iBAAgC,MAclDlL,EAAS,CAAEmL,kBAVf,kBAAC,IAAD,CAAcna,KAAK,QAAQoa,IAAKH,EAAiBI,aAAcL,GAC7D,kBAAC,IAAD,CACEM,YAAY,uBACZC,kBAAkB,OAClBC,eAAe,gBACflH,MAAO,CAACmH,gBAAiB,aAO/B,OAAO,eAAKzL,IEmNC0L,I,aAlNqD,SAAC,GAK3C,IAJpBvlB,EAImB,EAJnBA,KACAwlB,EAGmB,EAHnBA,aACAC,EAEmB,EAFnBA,OACAC,EACmB,EADnBA,WACAC,EAAmB,EAAnBA,cAAmB,EACmBxe,mBAAS8Z,GAAoBjhB,OAAMF,IADtD,mBAChBijB,EADgB,KACDC,EADC,OAE+B7b,mBAASqM,GAAUqE,OAFlD,mBAEhB+N,EAFgB,KAEKC,EAFL,OAGuB1e,mBAAS,MAHhC,mBAGhB2e,EAHgB,KAGCC,EAHD,OAImC5e,mBAASgQ,GAAYoB,UAJxD,mBAIhByN,EAJgB,KAIOC,EAJP,OAK6C9e,mBAAS,aALtD,mBAKhB+e,EALgB,KAKYC,EALZ,OAMehf,mBAAS,MANxB,mBAMhBiU,EANgB,KAMHgL,EANG,OAOyBjf,mBAAS,MAPlC,mBAOhBkf,EAPgB,KAOEC,EAPF,KASvBhf,qBAAU,WACR0b,EAAiB0C,GACjBK,EAAmBJ,GAIf3lB,EAAKuN,OAASlF,EAAKmF,UAAYgY,EAAa9R,iBAAmB,GAAKsS,IAA0B7O,GAAYqB,SAC5GiN,EAAO,CACLha,KAAM,qBACNwI,UAAW2R,EACX1R,YAAaiD,GAAYqB,QACzB+N,SAAUf,EAAae,SACvBtR,kBAAmBuQ,EAAavQ,oBAIhCuQ,EAAae,SACfV,EAAuBL,EAAae,UAEpCV,EAAuBL,EAAavR,WAGtCgS,EAAyBN,EAAc,GAAGrkB,SAGzC,CAACtB,EAAMwlB,EAAavR,UAAWuR,EAAatR,YAAasR,EAAaxd,SAAUwd,EAAae,SAAUf,EAAa9R,kBAEvHpM,qBAAU,WACJ8T,GACFkL,EAAuD,OAAnCd,EAAavQ,kBAC7B,KlBlBH,SAAkCmG,EAA+B1K,GACtE,GAAI0K,EAAYxO,aAAeA,GAAW4Z,aAAc,CACtD,GAAY,OAAR9V,EACF,MAAO,QAGT,IAAM+V,EAAQpT,KAAK6M,MAAMxP,EAAM,IACzBsP,EAAUtP,EAAM,GAEtB,MAAM,GAAN,OAAU6B,GAAUkU,EAAO,GAA3B,YAAiClU,GAAUyN,EAAS,IAEpD,OAAY,OAARtP,EACK,IAGFkC,GAAclC,EAAM,GAAI0K,EAAYsL,iBAAkBtL,EAAYuL,oBkBInEC,CAAyBxL,EAAaoK,EAAavQ,sBAExD,CAACmG,EAAaoK,EAAavQ,oBAE9B3N,qBAAU,WACR,KAAK8T,GAAgBoK,EAAanO,aAAe+D,EAAY0C,aASxD9d,GAASA,EAAKmN,WAAuC,IAA1BnN,EAAKmN,UAAUjK,OAA/C,CAIA,IAAM2jB,EAAiBrN,GAAuCxZ,EAAMwlB,EAAanO,YACjF+O,EAAeS,GACfV,EAA+BU,EAAeja,aAAeA,GAAW4Z,aACpE,YACA,cAGH,CAAChB,EAAanO,aAGjB/P,qBAAU,WACJke,EAAa9R,gBAAkB,GACjCuS,EAAyBT,EAAatR,eAEvC,CAACsR,EAAatR,YAAasR,EAAa9R,kBAE3C,IAkCMoT,EAAqB,SAAC7jB,GAM1B,QALcnD,IAAVmD,IAEFA,EAAQ,MAGG,MAATA,EAAJ,CAYA,IAAMyN,ElBvDH,SAAkC0K,EAA+B6E,GACtE,IAAKA,GAAsB,IAAfA,EAAI/c,OACd,OAAO,EAGT,GAAIkY,EAAYxO,aAAeA,GAAW4Z,aAAc,CAEtD,IADqB,iBACHO,KAAK9G,GACrB,OAAO,EAGT,GAAe,MAAXA,EAAI,GACN,OAAOnP,SAASmP,EAAI3c,UAAU,IAGhC,IAAMqN,EAAMsP,EAAIrP,MAAM,KACtB,OAAmB,IAAfD,EAAIzN,OACiB,GAAhB4N,SAASmP,GAGS,GAAnBnP,SAASH,EAAI,IAAYG,SAASH,EAAI,IAG9C,MADqB,eACHoW,KAAK9G,GAIhB5M,KAAK2T,MAAwB,GAAlBC,WAAWhH,IAHpB,EkB+BGiH,CAAyB9L,EAAcnY,GAC/CyN,IAAQ8U,EAAavQ,mBAIzBwQ,EAAO,CACLha,KAAM,qBACNwI,UAAW2R,EACX1R,YAAa8R,EACbO,SAAUX,GAAuB,IAAOA,OAAsB9lB,EAC9DmV,kBAAmBvE,SArBnB+U,EAAO,CACLha,KAAM,qBACNwI,UAAW2R,EACX1R,YAAa8R,EACbO,SAAUX,GAAuB,IAAOA,OAAsB9lB,EAC9DmV,kBAAmB,QAoBzB,OAAoB,OAAhBmG,EAEA,2CAKF,oCACI,kBAAC,IAAD,CAAQxP,UAAU,YAChB,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CAAUvb,UAAU,SAApB,SAEF,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CACIvb,UAAU,SACViY,UAAU,UACVnY,SAAU8Z,EAAaxL,WACvB1Y,MAAOskB,EACPhP,YAAa,SAACrY,IApFF,SAAC6oB,GACzB,GAAIA,IAAiB5B,EAAavR,UAAlC,CAGA4R,EAAuBuB,GAEvB,IAAMC,EAAoBD,IAAiB5T,GAAUwE,QAAUoP,EAAe,IAC1E,KACA5B,EAAavQ,kBAEjBwQ,EAAO,CACLha,KAAM,qBACNwI,UAAWmT,EACXlT,YAAa8R,EACbO,SAAWa,GAAgB,IAAOA,OAAetnB,EACjDmV,kBAAmBoS,KAqEaC,CAAkB/oB,EAAEsY,OAAOvV,SAElDyhB,EAAchlB,KAAI,SAACgE,GAAD,OACjB,kBAAC,IAAD,CAAiBZ,IAAKY,EAAGT,MAAOA,MAAOS,EAAGT,OAAQS,EAAGkY,YAM/D,kBAAC,IAAD,CAAQrO,UAAU,YACd,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CAAUvb,UAAU,SAApB,WAEF,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CACIvb,UAAU,SACViY,UAAU,UACVnY,SAAU8Z,EAAaxL,YAAeha,EAAKuN,OAASlF,EAAKmF,UAAYgY,EAAa9R,iBAAmB,EACrGpS,MAAO0kB,EACPpP,YAAa,SAACrY,GApFA,IAACgpB,KAoF2BhpB,EAAEsY,OAAOvV,SAnFxCkkB,EAAatR,cAIpC+R,EAAyBsB,GACzB9B,EAAO,CACLha,KAAM,qBACNwI,UAAW2R,EACX1R,YAAaqT,EACbhB,SAAUX,GAAuB,IAAOA,OAAsB9lB,EAC9DmV,kBAAmBuQ,EAAavQ,uBA2EvB6Q,GAAmBA,EAAgB/nB,KAAI,SAACge,GAAD,OACtC,kBAAC,IAAD,CAAiB5a,IAAK4a,EAAGza,MAAOA,MAAOya,EAAGza,OAAQya,EAAG9B,YAM7D,kBAAC,IAAD,CAAQrO,UAAWga,EAAsB,IAAM,mBAAqB,aAClE,kBAAC,IAAD,CAAQuB,KAAK,KACX,kBAAC,IAAD,CAAUvb,UAAU,SAApB,UAEF,kBAAC,IAAD,CAAQub,KAAK,KACT,kBAAC,IAAD,CACEvb,UAAU,gBACV4b,YAAatB,EACbxa,SAAU8Z,EAAaxL,WACvB1Y,MAAO+kB,EACPzP,YAAa,SAACrY,GAAYA,EAAEsY,OAAOvV,OAASglB,EAAoB/nB,EAAEsY,OAAOvV,QACzEmmB,UAAW,WAAOX,EAAmBT,WChItCqB,GAzDiD,SAAC,GAAoC,IAAlC1nB,EAAiC,EAAjCA,KAAMwlB,EAA2B,EAA3BA,aAAcC,EAAa,EAAbA,OAAa,EAClDte,mBAAS,CAACyR,SAAU,GAA0B5Q,SAAU,KADN,mBAC3FuR,EAD2F,KACzEoO,EADyE,OAE1DxgB,mBAAS,IAFiD,mBAE3FygB,EAF2F,KAE7EC,EAF6E,KAIlGvgB,qBAAU,WACR,GAAItH,GAAQA,EAAKmN,WAAanN,EAAKmN,UAAUjK,OAAS,EACpD,GAAIsiB,EAAaxd,UAAYwd,EAAa9R,gBAAkB,EAAG,CAC7D,IAAMoU,EAAStO,GAAwCxZ,EAAKmN,UAAWqY,EAAaxd,SAAS4Q,SAASja,GAAI6mB,EAAaxd,SAASA,SAASrJ,IACrImpB,EAAO9f,SAASrJ,KAAO4a,EAAiBvR,SAASrJ,IACnDgpB,EAAoBG,OAEjB,CACL,IAAMA,EAAStO,GAAwCxZ,EAAKmN,UAAWnN,EAAKmN,UAAU,GAAGxO,GAAIqB,EAAKmN,UAAU,GAAGuK,YAAY,GAAGC,UAAU,GAAGhZ,IAC3IgpB,EAAoBG,MAIvB,CAACtC,EAAaxd,SAAUhI,IAE3BsH,qBAAU,WACJtH,GAAQA,EAAKmN,WAAanN,EAAKmN,UAAUjK,OAAS,GACpD2kB,EAxCqB,SAACvQ,GAC1B,IAAMyQ,EAAazQ,EAAIpU,OAAS,EAChC,OAAOoU,EAAIE,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,YAAYF,SAAQ,SAAAnF,GAAC,OAAIA,EAAEsF,UAAU5Z,KAAI,SAAC6Z,GAClE,IAAMoQ,EAAavQ,EAAEC,YAAYxU,OAAS,EACtCrB,EAAO,GAUX,OATIkmB,IACFlmB,IAAS4V,EAAE2M,KAAO3M,EAAE2M,KAAO3M,EAAE5V,MAAQ,KAGnCmmB,IACFnmB,IAASwQ,EAAE+R,KAAO/R,EAAE+R,KAAO/R,EAAExQ,MAAQ,KAGvCA,GAAQ+V,EAAE/V,KACH,CAAElD,GAAIiZ,EAAEjZ,GAAIkD,KAAMA,YA0BPomB,CAAmBjoB,EAAKmN,cAEzC,CAACnN,IAYJ,OACE,kBAAC,IAAD,CAAQ4L,UAAU,YAChB,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CAAUvb,UAAU,SAApB,aAEF,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CACIvb,UAAU,SACViY,UAAU,UACVnY,SAAU8Z,EAAaxL,WACvB1Y,MAAOiY,EAAiBvR,SAASrJ,GACjCiY,YAAa,SAACrY,GAAD,OArBA,SAACoa,GACtB,IAAMzP,EAAWsQ,GAA+BxZ,EAAKmN,UAAWwL,GAC5DzP,EAASlB,SAASrJ,KAAO6mB,EAAaxd,SAASA,SAASrJ,KAI5DgpB,EAAoBze,GACpBuc,EAAO,CAAEha,KAAM,mBAAoB8N,iBAAkBrQ,KAczBgf,CAAe3pB,EAAEsY,OAAOvV,SAE7CsmB,EAAa7pB,KAAI,SAAA6Z,GAAC,OACjB,kBAAC,IAAD,CAAiBzW,IAAKyW,EAAEjZ,GAAI2C,MAAOsW,EAAEjZ,IAAKiZ,EAAE/V,aC/DzC,GAnB8C,SAC3De,EACA8V,EACAC,EACAtH,EACAK,EACA2P,GAN2D,eAAA9hB,EAAAC,OAAA,uDAQrDgE,EAAO,CACXkV,QACAC,QACAtH,MAAOe,GAA0Bf,GACjCK,IAAKU,GAA0BV,GAC/B2P,QAbyD,WAAA9hB,EAAA,MAgB9CsF,EAAejC,EAAM,+BAAgCY,IAhBP,8ECsH9C2kB,GA3GiD,SAAC,GAAoC,IAAlCnoB,EAAiC,EAAjCA,KAAMwlB,EAA2B,EAA3BA,aAAcC,EAAa,EAAbA,OAAa,EAC1Dte,mBAAS,IADiD,mBAC3FihB,EAD2F,KAC7EC,EAD6E,OAEhElhB,oBAAS,GAFuD,mBAE3FmhB,EAF2F,KAEhFC,EAFgF,OAG9CphB,oBAAU,GAHoC,mBAG3FqhB,EAH2F,KAGvEC,EAHuE,KAI1F7lB,EAAS0H,qBAAWxD,GAApBlE,KAGR0E,qBAAU,WAEJ1E,GAAQA,EAAKqD,aAAgD,IAAlCuf,EAAa9R,kBAC1C6U,GAAa,GACbG,EAAalD,MAGd,CAAC5iB,EAAM4iB,EAAaxd,SAAUwd,EAAa9R,kBAG9C,IAeMgV,EAAe,SAACpK,GACpBqK,GACE/lB,EACA4iB,EAAaxd,SAAS4Q,SAASja,GAC/B6mB,EAAaxd,SAASA,SAASrJ,GAC/B2S,aAASkU,EAAalR,YACtBhD,aAASkU,EAAajR,UACtBiR,EAAaxd,SAAS4Q,SAAS1W,SAAS+K,cAAc3O,MAAK,SAAAsqB,GACzDP,EAAgBO,GAChB,IAAMC,EAASD,EAAU7qB,KAAI,SAAAQ,GAAC,OAAIA,EAAEqf,cAEpC,GAAqC,IAAjC4H,EAAa9R,iBAAyBmV,EAAO/e,SAAS9J,EAAKsN,YAAa,CAC1Emb,EAAsBzoB,EAAKsN,YAC3B,IAAMwb,EAAUF,EAAU3e,QAAO,SAAA1L,GAAC,OAAIA,EAAEqf,aAAe5d,EAAKsN,cAAY,GACxEmY,EAAO,CAAEha,KAAM,mBAAoB4I,SAAU,CAAE1V,GAAImqB,EAAQlL,WAAY/b,KAAMinB,EAAQC,gBAChF,CACL,IAAMC,EAAyBH,EAAO/e,SAASwU,EAAGjK,SAAS1V,IACvD2f,EAAGjK,SAAS1V,IACX,EAEL8pB,EAAsBO,GAGxBT,GAAa,OAInB,OAAID,IAA+C,IAAlC9C,EAAa9R,iBAAkD,IAAxB0U,EAAallB,OAEjE,kBAAC,IAAD,CAAQ0I,UAAU,YAChB,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CAAUvb,UAAU,SAApB,aAEF,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CACIvb,UAAU,SACViY,UAAU,UACVviB,OAAQ,GAEV,kBAAC,IAAD,CAAiBH,IAAI,KAAKG,MAAM,MAAMkkB,EAAanR,SAASxS,SASpE,kBAAC,IAAD,CAAQ+J,UAAU,YAChB,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CAAUvb,UAAU,SAApB,aAEF,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CACIvb,UAAU,SACViY,UAAU,UACVnY,SAAU8Z,EAAaxL,WACvB1Y,MAAOknB,EACP5R,YAAa,SAACrY,IAzEP,SAAC+O,GAChB,IAAoB,IAAhBA,GAAqBA,IAAekY,EAAanR,SAAS1V,GAA9D,CAIA8pB,EAAsBnb,GACtB,IAAM2b,EAAMb,EAAane,QAAO,SAAA1L,GAAC,OAAIA,EAAEqf,aAAetQ,KAAY,GAEhEmY,GADkB,IAAhBnY,EACK,CAAE7B,KAAM,mBAAoB4I,SAAU,CAAE1V,IAAK,EAAGkD,KAAM,oBAEtD,CAAE4J,KAAM,mBAAoB4I,SAAU,CAAE1V,GAAI2O,EAAYzL,KAAMonB,EAAIF,aA+D7ClZ,CAAStR,EAAEsY,OAAOvV,SAE1C,kBAAC,IAAD,CAAiBH,KAAM,EAAGG,OAAQ,GAAlC,mBACC8mB,EAAarqB,KAAI,SAAAkrB,GAAG,OACnB,kBAAC,IAAD,CACE9nB,IAAK8nB,EAAIrL,WACTtc,MAAO2nB,EAAIrL,YAEVqL,EAAIF,iBClBJG,GAnFiD,SAAC,GAAmC,EAAjClpB,KAAkC,IAA5BwlB,EAA2B,EAA3BA,aAAcC,EAAa,EAAbA,OAgCrF,OAAKD,GAAiBA,EAAalR,WAOjC,oCACE,kBAAC,IAAD,CAAQ1I,UAAU,YAChB,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CAAUvb,UAAU,SAApB,UAEF,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CACEvb,UAAU,SACV6K,cAAc,eACd/K,SAAU8Z,EAAaxL,WACvBtD,aAAa,qBACbhG,IAAI,aACJ4C,IAAI,aACJ6V,aAAa,oCACb7nB,MAAOkkB,EAAalR,WACpBsC,YAAa,SAACrY,GApDF,IAAC6qB,KAoDsB7qB,EAAEsY,OAAOvV,QA/ChDgQ,aAAS8X,KAAmB9X,aAASkU,EAAalR,aAItDmR,EAAO,CACLha,KAAM,gBACN6I,WAAY8U,SA8CZ,kBAAC,IAAD,CAAQxd,UAAU,YAChB,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CAAUvb,UAAU,SAApB,QAEF,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CACEvb,UAAU,SACV6K,cAAc,eACd/K,SAAU8Z,EAAaxL,YAAcwL,EAAa7Q,YAClD+B,aAAa,qBACbhG,IAAI,aACJ4C,IAAI,aACJ6V,aAAa,oCACb7nB,MAAOkkB,EAAajR,SACpBqC,YAAa,SAACrY,GAxDJ,IAAC8qB,KAwDsB9qB,EAAEsY,OAAOvV,QAnD9CgQ,aAAS+X,KAAiB/X,aAASkU,EAAajR,WAIpDkR,EAAO,CACLha,KAAM,cACN8I,SAAU8U,UAMV,yC,wFChCAC,GAAa,SAACjY,EAAaK,EAAW6X,GAC1C,IAAMC,EAASnY,EACToY,EAAO/X,EACT2Q,GAAQ,EAUZ,OATAkH,EAAOxrB,KAAI,SAAAqT,GACT,IAAMsY,EAASC,aAAWrY,aAASF,EAAIG,YAAa,GAC9CqY,EAAQxY,EAAIK,SAAYkY,aAAWrY,aAASF,EAAIK,WAAa,GAAK,IAAInB,KAAK,KAAM,EAAG,GAK1F,OAJIkZ,EAASI,GAAQH,EAAOC,IAC1BrH,GAAQ,GAGHA,KAEFA,GA6JMwH,GAzJqC,SAAC,GAA4D,IAA3DC,EAA0D,EAA1DA,SAAUC,EAAgD,EAAhDA,MAAOC,EAAyC,EAAzCA,cAAe1V,EAA0B,EAA1BA,WAAYC,EAAc,EAAdA,SAAc,EAC5EpN,mBAAS8iB,aAAWhY,aAAS,IAAI3B,KAAQ,IAAK,IAD8B,mBACvGgG,EADuG,KAC5FC,EAD4F,OAEhFpP,mBAAS8iB,aAAWhY,aAAS,IAAI3B,KAAQ,IAAK,IAFkC,mBAEvG4Z,EAFuG,KAE9FC,EAF8F,OAGtEhjB,oBAAS,GAH6D,mBAGvGijB,EAHuG,KAGzFC,EAHyF,OAIlFljB,oBAAS,GAJyE,mBAIvGmjB,EAJuG,KAI/FC,EAJ+F,OAKtEpjB,mBAAS,IAL6D,mBAKvGqjB,EALuG,KAKzFC,EALyF,OAMhFtjB,oBAAS,GANuE,mBAMvGujB,EANuG,KAM9FC,EAN8F,KAOxGC,EAAQxiB,IAiDd,OACE,oCACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAWkB,KAAK,OACd,kBAAC,IAAD,KACE,kBAAC,IAAD,oBAGJ,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQsC,UAAU,QAAQub,KAAK,KAA/B,SACA,kBAAC,IAAD,CAAQA,KAAK,KACX,kBAAC,IAAD,CACEvb,UAAU,SACV6K,cAAc,SACdC,aAAa,SACbhG,IAAI,aACJ4C,IAAI,aACJ6V,aAAa,oCACb7nB,MAAOgV,EAAUK,cACjBC,YAAa,SAACrY,GAAD,OA3DH,SAACssB,GACrB,IAAMC,EAAexZ,aAASuZ,GAC9BtU,EAAauU,GACb1mB,QAAQzD,IAAIqpB,GACPlK,aAASgL,EAAcZ,GAIjB5Y,aAASgD,GAAcwW,GAChCH,GAAW,GACXF,EAAgB,8BACPnB,GAAWwB,EAAcZ,EAASF,IAC3CW,GAAW,GACXF,EAAgB,iCAEhBE,GAAW,GACXF,EAAgB,MAVhBE,GAAW,GACXF,EAAgB,6BAoDYM,CAAcxsB,EAAEsY,OAAOvV,YAIjD,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQsK,UAAU,QAAQub,KAAK,KAA/B,OACA,kBAAC,IAAD,CAAQA,KAAK,KACX,kBAAC,IAAD,CACIvb,UAAU,SACV6K,cAAc,SACdC,aAAa,SACbhG,IAAI,aACJ4C,IAAI,aACJ6V,aAAa,oCACb7nB,MAAO4oB,EAAQvT,cACfC,YAAa,SAACrY,GAAD,OAtDP,SAACysB,GACnB,IAAMC,EAAa3Z,aAAS0Z,GAC5Bb,EAAWc,GAENtQ,aAAQsQ,EAAY3U,GAGd2U,EAAa3Z,aAASiD,IAC/BoW,GAAW,GACXF,EAAgB,yBACPnB,GAAWhT,EAAW2U,EAAYjB,IAC3CW,GAAW,GACXF,EAAgB,iCAEhBE,GAAW,GACXF,EAAgB,MAVhBE,GAAW,GACXF,EAAgB,4BAgDcS,CAAY3sB,EAAEsY,OAAOvV,YAKjD,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQsK,UAAU,QAAQub,KAAK,MAC/B,kBAAC,IAAD,CAAQA,KAAK,IAAIvb,UAAU,iBACxB4e,IAML,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQrD,KAAK,MACX,yBAAKhJ,MAAO,CAACgN,MAAO,OAAQC,aAAc,sBAG9C,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQjE,KAAK,KACX,kBAAC,IAAD,CACEvb,UAAU,WACVrC,QAAS6gB,EACTxT,YAAa,SAACrY,GAAO8rB,EAAgB9rB,EAAEsY,OAAOtN,aAGlD,kBAAC,IAAD,CAAQqC,UAAU,QAAQub,KAAK,KAA/B,qBAEF,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQA,KAAK,KACX,kBAAC,IAAD,CACEvb,UAAU,WACVgL,YAAa,SAACrY,GAAOgsB,EAAUhsB,EAAEsY,OAAOtN,aAG5C,kBAAC,IAAD,CAAQqC,UAAU,QAAQub,KAAK,KAA/B,iBAIN,kBAAC,IAAD,KACE,kBAAC,IAAD,CACE/W,OAAO,QACPJ,MAAM,YACNxG,QA9Ha,WACb8M,EAAY4T,EACdU,EAAMhiB,UAAU,sBAAuB,kDAAkD,eAEzFmhB,EAAMzT,EAAW4T,EAASE,EAAcE,IA2HtC5e,UAAWgf,GAJb,OASA,kBAAC,IAAD,CACEta,OAAO,QACP5G,QAASsgB,GAFX,WAODc,EAAM/hB,cCtDIwiB,GA5G2C,SAAC,GAAmC,EAAjCrrB,KAAkC,IAA5BwlB,EAA2B,EAA3BA,aAAcC,EAAa,EAAbA,OAAa,EAC1Dte,mBAAS,IADiD,mBACrFmkB,EADqF,KAC1EC,EAD0E,OAEhDpkB,oBAAS,GAFuC,mBAErFqkB,EAFqF,KAErEC,EAFqE,KAI5FnkB,qBAAU,WACNikB,EAAa/F,EAAa9Q,eAC3B,CAAC8Q,EAAa9Q,cA2CjB,OAAI8Q,EAAavR,YAAcT,GAAUuE,OAAUyB,GAA4BgM,EAAavR,UAAWuR,EAAatR,aAQlH,oCACE,kBAAC,IAAD,CAAQtI,UAAU,WAAWuS,MAAO,CAACuN,aAAc,SACjD,kBAAC,IAAD,CAAQvE,KAAK,KACX,kBAAC,IAAD,CACEnX,MAAM,QACNtE,SAAU8Z,EAAaxL,WACvBxQ,QAAS,WAAOiiB,GAAkB,KAElC,kBAAC,IAAD,CAAS5gB,KAAK,YAAYC,KAAM6gB,KAAK3b,MAAM,WAG/C,kBAAC,IAAD,CAAQmX,KAAK,OAERmE,GAAkC,IAArBA,EAAUpoB,SACxB,yBAAK0I,UAAU,aAAf,YAGD0f,GAAaA,EAAUvtB,KAAI,SAAAqT,GAAG,OAC7B,yBAAKjQ,IAAKiQ,EAAIG,WAAY3F,UAAU,aAApC,OACOuF,GAAiBC,GACZA,EA5DXwa,YACP,kBAAC,IAAD,CAAShgB,UAAU,YAAYd,KAAM+gB,OAErC,+BAZmB,SAACC,GACtB,OAAOA,EAAEC,aACP,kBAAC,IAAD,CAASngB,UAAU,kBAAkBd,KAAMkhB,OAE3C,+BAkESC,CAAe7a,GAChB,4BACE1F,SAAU8Z,EAAaxL,WACvBxQ,QAAS,YAtCD,SAACoL,GACrB,IAAMsX,EAAeZ,EAAUrhB,QAAO,SAAA6hB,GAAC,OAAIA,EAAEva,aAAeqD,KAC5D2W,EAAaW,GACbzG,EAAO,CAAEha,KAAM,sBAAuB8d,OAAQ2C,IAmCjBC,CAAc/a,EAAIG,cAEnC,kBAAC,IAAD,CAAS1G,KAAK,YAAYvB,KAAK,MAAMwB,KAAMshB,KAAOpc,MAAM,gBAQlE,kBAAC,IAAD,CACE1H,OAAQkjB,EACRa,SAAS,kBACTvjB,aAAc,kBAAM2iB,GAAkB,KAEtC,kBAAC,GAAD,CACE3B,SAzEsB,WAC5B2B,GAAkB,IAyEZ1B,MAtEqB,SAACzT,EAAiB4T,EAAeE,EAAuBE,GACnFmB,GAAkB,GAClB,IAAMra,EAAkB,CACtBG,WAAYa,GAA0BkE,GACtC7E,SAAUW,GAA0B8X,GACpC6B,aAAc3B,EACdwB,YAAatB,EACbjL,gBAAiBmG,EAAa9R,iBAG1BwY,EAAY,uBAAOZ,GAAP,CAAkBla,IACpCma,EAAaW,GACbzG,EAAO,CAAEha,KAAM,sBAAuB8d,OAAQ2C,KA2DxClC,cAAesB,EACfhX,WAAYkR,EAAalR,WACzBC,SAAUiR,EAAajR,aAlD3B,+BCmBS+X,GAvEuC,SAAC,GAAoC,IAAlCtsB,EAAiC,EAAjCA,KAAMwlB,EAA2B,EAA3BA,aAAcC,EAAa,EAAbA,OAAa,EAC9Cte,oBAAU,GADoC,mBACjFolB,EADiF,KAClEC,EADkE,OAE1DrlB,mBAAS,IAFiD,mBAEjFslB,EAFiF,KAExEC,EAFwE,KAKxFplB,qBAAU,WACR,GAAItH,GAAQA,EAAKmN,WAAanN,EAAKmN,UAAUjK,OAAS,EAAG,CACvD,IAAMkK,EAAOpN,EAAKoN,KAAKnD,QAAO,SAAA0iB,GAAC,OAAIA,EAAEzW,YAAYpM,SAAS0b,EAAaxd,SAASA,SAASrJ,OAAKZ,KAAI,SAAA4uB,GAC/F,MAAO,CAAEhuB,GAAIguB,EAAEhuB,GAAIkD,KAAM8qB,EAAE9qB,SAE9B6qB,EAAWtf,GAEX,IAAMwf,EAASxf,EAAKrP,KAAI,SAAA4uB,GAAC,OAAIA,EAAEhuB,MAC1BiuB,EAAO9iB,SAASyiB,KACf/G,EAAa/Q,KAAO+Q,EAAa/Q,IAAI9V,IAAMiuB,EAAO9iB,SAAS0b,EAAa/Q,IAAI9V,IAC9E6tB,EAAiBhH,EAAa/Q,IAAI9V,IAElC6tB,GAAkB,OAMvB,CAACxsB,EAAMwlB,EAAaxd,WAiBvB,OACE,kBAAC,IAAD,CAAQ4D,UAAU,YAChB,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CAAUvb,UAAU,SAApB,QAEF,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CACIvb,UAAU,SACViY,UAAU,UACVnY,SAAU8Z,EAAaxL,WACvB1Y,MAAOirB,EACP3V,YAAa,SAACrY,IA1BJ,SAACiW,GAGnB,GAFAgY,EAAiBhY,GAEbA,IAAUgR,EAAa/Q,IAAI9V,GAI/B,IAAe,IAAX6V,EACFiR,EAAO,CAAEha,KAAM,cAAegJ,IAAK,CAAE9V,IAAK,EAAGkD,KAAM,cAC9C,CACL,IAAM4S,EAAMgY,EAAQxiB,QAAO,SAAA0iB,GAAC,OAAIA,EAAEhuB,KAAO6V,KAAO,GAChDiR,EAAO,CAAEha,KAAM,cAAegJ,SAeHoY,CAAYtuB,EAAEsY,OAAOvV,SAE5C,kBAAC,IAAD,CAAiBA,OAAQ,GAAzB,QAECmrB,EAAQ1uB,KAAI,SAAA0W,GAAG,OACd,kBAAC,IAAD,CACEtT,IAAKsT,EAAI9V,GACT2C,MAAOmT,EAAI9V,IACV8V,EAAI5S,aCIJirB,GAlE+C,SAAC,GAAoC,IAAlC9sB,EAAiC,EAAjCA,KAAMwlB,EAA2B,EAA3BA,aAAcC,EAAa,EAAbA,OAAa,EAC1Dte,oBAAS,GADiD,mBACzFgN,EADyF,KAC5E4Y,EAD4E,OAEtD5lB,oBAAS,GAF6C,mBAEzF6lB,EAFyF,KAE1EC,EAF0E,KAIhG3lB,qBAAU,WACJtH,GAAQA,EAAKmN,WAAanN,EAAKmN,UAAUjK,OAAS,GACpD6pB,EAAevH,EAAarR,eAI7B,CAACnU,EAAMwlB,EAAalR,WAAYkR,EAAajR,SAAUiR,EAAa7Q,cAEvErN,qBAAU,WACR,IAAM4lB,EAAiB1H,EAAavR,YAAcT,GAAUqE,OAAS2N,EAAatR,cAAgBiD,GAAYoB,UAE1GiN,EAAavR,YAAcT,GAAUsE,QAEnC0N,EAAatR,cAAgBiD,GAAYqB,SACzCgN,EAAatR,cAAgBiD,GAAYsB,eAG/CwU,EAAiBC,KAChB,CAAC1H,EAAavR,UAAWuR,EAAatR,cAezC,OAAK8Y,EAeH,oCACE,kBAAC,IAAD,CAAQ7F,KAAK,KACX,kBAAC,IAAD,CACE5d,QAAS4K,EACTyC,YAAa,SAACrY,GAhCA,IAACgL,KAgCoBhL,EAAEsY,OAAOtN,WA/BlC4K,GAAgB6Y,IAKhCD,EAAexjB,GACfkc,EAAO,CACLha,KAAM,kBACN0I,YAAa5K,SA0Bb,kBAAC,IAAD,CAAQ4d,KAAK,KACX,kBAAC,IAAD,CAAUvb,UAAU,SAApB,aApBF,oCACE,kBAAC,IAAD,CAAQub,KAAK,KACX,gCAEF,kBAAC,IAAD,CAAQA,KAAK,KACX,kCCgBKgG,GA7DuD,SAAC,GAAoC,IAAlCntB,EAAiC,EAAjCA,KAAMwlB,EAA2B,EAA3BA,aAAcC,EAAa,EAAbA,OAAa,EAClEte,oBAAS,GADyD,mBACjGwN,EADiG,KACpFyY,EADoF,OAE1DjmB,oBAAS,GAFiD,mBAEjGkmB,EAFiG,KAEhFC,EAFgF,KAIxGhmB,qBAAU,WACJtH,GAAQA,EAAKmN,WAAanN,EAAKmN,UAAUjK,OAAS,GACpDkqB,EAAe5H,EAAa7Q,eAI7B,CAAC3U,EAAMwlB,EAAalR,WAAYkR,EAAajR,SAAUiR,EAAa7Q,cAEvErN,qBAAU,WACRgmB,EAAmB9H,EAAavR,YAAcT,GAAUuE,SACvD,CAACyN,EAAavR,UAAWuR,EAAatR,cAezC,OAAKmZ,EAeH,oCACE,kBAAC,IAAD,CAAQlG,KAAK,KACX,kBAAC,IAAD,CACE5d,QAASoL,EACTiC,YAAa,SAACrY,GAhCA,IAACgL,KAgCoBhL,EAAEsY,OAAOtN,WA/BlCoL,GAAgB0Y,IAKhCD,EAAe7jB,GACfkc,EAAO,CACLha,KAAM,sBACNkJ,YAAapL,SA0Bb,kBAAC,IAAD,CAAQ4d,KAAK,KACX,kBAAC,IAAD,CAAUvb,UAAU,SAClB,kBAAC,IAAD,CAASd,KAAMuT,KAAMF,MAAO,CAACoP,aAAc,MAAOC,WAAY,UADhE,gBApBF,oCACE,kBAAC,IAAD,CAAQrG,KAAK,KACX,gCAEF,kBAAC,IAAD,CAAQA,KAAK,KACX,kC,oBVnDEvC,O,iBAAAA,I,mBAAAA,I,6CAAAA,I,2CAAAA,I,oBAAAA,Q,KWUZ,ICXY6I,GDWNC,GAAkB,SAAC1tB,EAAuB0Y,GAC9C,OAAO1Y,EAAKmN,UAAUlD,QAAO,SAAAwN,GAAC,OAAIA,EAAE9Y,KAAO+Z,KAAO,IAG9CiV,GAAkB,SAAC3tB,EAAuB2Y,GAC9C,OAAO3Y,EAAKmN,UAAUqK,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,YAAYF,SAAQ,SAAAnF,GAAC,OAAIA,EAAEsF,UAAU1N,QAAO,SAAA2N,GAAC,OAAIA,EAAEjZ,KAAOga,WAAS,IAGpGiV,GAAmB,SAACC,EAAkBC,GAC1C,IAAMzc,EAAQC,aAASuc,GACjBnc,EAAMJ,aAASwc,GAErB,QAAIC,aAAQ1c,EAAOK,IAIZiJ,aAAQjJ,EAAKL,IA8ChB2c,GAAuB,SAAC1uB,EAAqB8b,EAA+B7Z,GAChF,IAAKA,EACH,OAAO,EAIT,IAAK6Z,EAAY6S,oBAAgE,IAA1C7S,EAAY6S,mBAAmB/qB,OACpE,OAAO,EAIT,MADc,oBACD6jB,KAAKxlB,IAGd2sB,GAAa,SAACC,GAClB,OAAOA,EAAEC,oBACFD,EAAEE,eACFF,EAAEG,UACFH,EAAEI,sBACFJ,EAAEK,oBACFL,EAAEM,yBACFN,EAAEO,qBACFP,EAAEQ,qBAGEC,GAAqC,CAChDlb,iBAAkB,EAClB2D,WAAY,EACZwX,YAAY,EACZ5a,UAAWT,GAAUqE,MACrB3D,YAAaiD,GAAYoB,SACzBpE,aAAa,EACbnM,SAAU,CAAE4Q,SAAU,GAA0B5Q,SAAU,IAC1DqM,SAAU,CAAE1V,IAAK,EAAGkD,KAAM,mBAC1ByS,WAAYlC,GAA0BH,aAASgY,aAAW,IAAI3Z,KAAQ,GAAI,IAC1EiE,SAAUnC,GAA0BH,aAASgY,aAAW,IAAI3Z,KAAQ,GAAI,KACxEmE,IAAK,CAAC9V,IAAK,EAAGkD,KAAM,cACpB6S,YAAa,GACbC,aAAa,EACb2O,SAAS,EACTwL,OAAO,EACPV,oBAAoB,EACpBC,eAAe,EACfC,UAAU,EACVC,sBAAsB,EACtBC,oBAAoB,EACpBC,yBAAyB,EACzBC,qBAAqB,EACrBC,qBAAqB,EACrBpI,cAAUzmB,EACVivB,gBAAYjvB,EACZmV,kBAAmB,KACnBC,MAAO,GACPH,mBAAejV,EACfka,YAAY,GA4BDgV,GAAqB,SAACnnB,EAA4BonB,GAE7D,OADA7qB,QAAQzD,IAAI,oBAAqBsuB,EAAOxjB,KAAM,yBAA0B5D,EAAawM,SAAS1V,IACtFswB,EAAOxjB,MAEb,IAAK,eAAL,IACU6S,EAAa2Q,EAAb3Q,GAAIte,EAASivB,EAATjvB,KACN2U,EAZW,SAAC2J,GAEtB,OADYhN,aAASgN,EAAGT,UACV,IAAIvN,KAAK,KAAM,EAAE,GAUP4e,CAAe5Q,GACnC,MAAO,CACL5K,gBAAiB4K,EAAGe,gBACpBhI,WAAYiH,EAAGR,WACf+Q,YAAY,EACZ5a,UAAWqK,EAAGd,YACdtJ,YAAaoK,EAAGZ,cAChBvJ,iBAAgCrU,IAAnBwe,EAAG6Q,aAAgD,OAAnB7Q,EAAG6Q,YAChDnnB,SAAU,CACR4Q,SAAU8U,GAAgB1tB,EAAMse,EAAGR,YACnC9V,SAAU2lB,GAAgB3tB,EAAMse,EAAGN,aAErC3J,SAAU,CAAE1V,GAAI2f,EAAGV,WAAY/b,KAAMyc,EAAGG,UAAY,IAAMH,EAAGI,UAC7DpK,WAAYgK,EAAGtB,WACfzI,SAAWI,EAAevC,GAA0B,IAAI9B,MAAUgO,EAAGT,SACrEpJ,IAAK,CAAC9V,GAAK2f,EAAG8Q,MAAS9Q,EAAI8Q,OAAS,EAAGvtB,KAAM,IAC7C6S,YAAa4J,EAAG+Q,YAChB1a,YAAaA,EACb2O,SAAS,EACTwL,OAAO,EACPV,oBAAoB,EACpBC,eAAe,EACfC,UAAU,EACVC,sBAAsB,EACtBC,oBAAoB,EACpBO,WAAYzQ,EAAGgR,WACf/I,SAAUjI,EAAGiR,SACbta,kBAAoBqJ,EAAGkR,kBAAqBlR,EAAGkR,kBAAoB,KACnEta,MAAOoJ,EAAGU,MACVjK,cAAeuJ,EAAGmR,cAClBzV,WAAYiV,EAAOtR,cAAc3D,WACjC5E,aAAckJ,EAAGoR,kBACjBra,gBAAiBiJ,EAAGqR,qBACpBra,cAAegJ,EAAGsR,mBAClBra,eAAgB+I,EAAGuR,WACnBra,eAAgB8I,EAAGwR,eACnBra,eAAgB6I,EAAGyR,eACnBtB,yBAAyB,EACzBC,qBAAqB,EACrBC,qBAAqB,GAIzB,IAAK,SACH,OAAOC,GAGT,IAAK,mBAAL,IACUrV,EAAqB0V,EAArB1V,iBACR,OAAO,eACF1R,EADL,CAEEG,SAAUuR,EACV+J,SAAS,IAIb,IAAK,eACH,IAAMhM,EAAM2X,EAAOjvB,KAAKmN,UAAU,GAClC,OAAO,eACFyhB,GADL,CAEE5mB,SAAU,CACR4Q,SAAUtB,EACVtP,SAAUsP,EAAII,YAAY,GAAGC,UAAU,IAEzCjE,gBAAiB,EACjB4P,SAAS,IAIb,IAAK,eACH,OAAO,eACFzb,EADL,CAEEmS,WAAYiV,EAAOjV,aAIvB,IAAK,qBACH,IAAMgW,EAAkB,eACnBnoB,EADmB,CAEtBoM,UAAWgb,EAAOhb,UAClBC,YAAa+a,EAAO/a,YACpBqS,SAAU0I,EAAO1I,SACjBtR,kBAAmBga,EAAOha,kBAC1BqO,SAAS,EACTiL,uBAAwBU,EAAO1I,UAA0C,OAA7B0I,EAAOha,qBAIrD,OADA+a,EAAmBlB,MAAQZ,GAAW8B,GAC/BA,EAGT,IAAK,wBACH,IAAMC,EAAqB,eACtBpoB,EADsB,CAEzBkN,cAAeka,EAAOla,cACtByZ,mBAAoBR,GAAqBnmB,EAAconB,EAAO7T,YAAa6T,EAAOla,eAClFuO,SAAS,IAIX,OADA2M,EAAsBnB,MAAQZ,GAAW+B,GAClCA,EAIT,IAAK,mBACH,IAAMxoB,EAAQ,eACTI,EADS,CAEZwM,SAAU4a,EAAO5a,SACjBiP,SAAS,EACT+K,cAAeY,EAAO5a,SAAS1V,GAAK,IAItC,OADA8I,EAASqnB,MAAQZ,GAAWzmB,GACrBA,EAGT,IAAK,gBACH,IAAMyoB,EAAa,eACdroB,EADc,CAEjByM,WAAY2a,EAAO3a,WACnBgP,SAAS,EACT8K,mBAAoBR,GAAiBqB,EAAO3a,WAAYzM,EAAa0M,YAIvE,OADA2b,EAAcpB,MAAQZ,GAAWgC,GAC1BA,EAGT,IAAK,cACH,IAAMC,EAAW,eACZtoB,EADY,CAEf0M,SAAU0a,EAAO1a,SACjB+O,SAAS,EACT8K,mBAAoBR,GAAiB/lB,EAAayM,WAAY2a,EAAO1a,YAIvE,OADA4b,EAAYrB,MAAQZ,GAAWiC,GACxBA,EAGT,IAAK,sBACH,OAAO,eACFtoB,EADL,CAEE6M,YAAaua,EAAO1F,OACpBjG,SAAS,IAIb,IAAK,cACH,IAAM8M,EAAW,eACZvoB,EADY,CAEf4M,IAAKwa,EAAOxa,IACZ6O,SAAS,EACTgL,UAAU,IAIZ,OADA8B,EAAYtB,MAAQZ,GAAWkC,GACxBA,EAET,IAAK,kBACH,IAAMC,EAAe,eAChBxoB,EADgB,CAEnBsM,YAAa8a,EAAO9a,YACpBmP,SAAS,IAIX,OADA+M,EAAgBvB,MAAQZ,GAAWmC,GAC5BA,EAET,IAAK,gBACH,OAAO,eACFxoB,EADL,CAEEqN,MAAO+Z,EAAO/Z,MACdoO,SAAS,IAGb,IAAK,sBACH,IAAMgN,EAAiB,eAClBzoB,EADkB,CAErB8M,YAAasa,EAAOta,YACpB2O,SAAS,IAGX,GAAI2L,EAAOta,YAAa,CACtB,IAAM8F,EAAMrI,GAA0B,IAAI9B,MAC1CggB,EAAkBhc,WAAamG,EAC/B6V,EAAkB/b,SAAWkG,EAI/B,OADA6V,EAAkBxB,MAAQZ,GAAWoC,GAC9BA,EAET,IAAK,oBACH,IAAMC,EAAc,eACf1oB,EADe,CAElBwN,gBAAiB4Z,EAAO5Z,gBACxBC,cAAe2Z,EAAO3Z,cACtBC,eAAgB0Z,EAAO1Z,eACvBC,eAAgByZ,EAAOzZ,eACvBC,eAAgBwZ,EAAOuB,eACvBlN,SAAS,IAqBX,OAlBIiN,EAAelb,kBACbkb,EAAe/a,iBAAmBoP,GAAe6L,OACnDF,EAAe5B,oBAAyD,OAAlC4B,EAAe9a,qBAA6D3V,IAAlCywB,EAAe9a,gBAAgC8a,EAAe9a,eAAevS,OAAS,GAEtKqtB,EAAe9a,oBAAiB3V,EAChCywB,EAAe5B,qBAAsB,GAGlC4B,EAAejb,cAGlBib,EAAe9B,wBAA0B3O,aAASxO,aAASif,EAAelb,iBAAkB/D,aAASif,EAAejb,gBAFpHib,EAAe9B,yBAA0B,EAK3C8B,EAAe7B,oBAAyD,OAAlC6B,EAAe/a,qBAA6D1V,IAAlCywB,EAAe/a,gBAAgC+a,EAAe/a,eAAiB,GAGjK+a,EAAezB,MAAQZ,GAAWqC,GAC3BA,EAGT,QAEE,OADAnsB,QAAQC,MAAM,0DAA4D4qB,EAAOxjB,MAC1E5D,IEpVE6oB,GAlC2C,SAAC,GAAmC,EAAjC1wB,KAAkC,IAA5BwlB,EAA2B,EAA3BA,aAAcC,EAAa,EAAbA,OAE/Ene,qBAAU,eAcV,OACE,kBAAC,IAAD,CAAQsE,UAAU,YAChB,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CAAUvb,UAAU,SAApB,UAEF,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CAAavb,UAAU,WACrB+kB,UAAW,IACXC,KAAM,EACNtvB,MAAOkkB,EAAatQ,MACpBxJ,SAAU8Z,EAAaxL,WACvBpD,YAAa,SAACrY,GAAD,OArBEsyB,EAqBmBtyB,EAAEsY,OAAOvV,SAnB/CuvB,EAAU,SAGRA,IAAYrL,EAAatQ,OAC3BuQ,EAAO,CAAEha,KAAM,gBAAiByJ,MAAO2b,KANrB,IAACA,QCsEVC,GA1E2D,SAAC,GAAoC,IAAlC9wB,EAAiC,EAAjCA,KAAMwlB,EAA2B,EAA3BA,aAAcC,EAAa,EAAbA,OAAa,EAC1Ete,oBAAS,GADiE,mBACrG4pB,EADqG,KAC1FC,EAD0F,OAEtE7pB,mBAAS,MAF6D,mBAErGiU,EAFqG,KAExFgL,EAFwF,KAI5G9e,qBAAU,WACR,KAAgC,IAA5Bke,EAAanO,YAAqB+D,GAAgBoK,EAAanO,aAAe+D,EAAY0C,aAKzF9d,GAASA,EAAKmN,WAAuC,IAA1BnN,EAAKmN,UAAUjK,QAI1CsiB,EAAanO,WAAlB,CAIA,IAAMwP,EAAiBrN,GAAuCxZ,EAAMwlB,EAAanO,YACjF+O,EAAeS,MAGd,CAACrB,EAAanO,WAAYrX,IAE7BsH,qBAAU,WACH8T,GAIL4V,OACuClxB,IAApCsb,EAAa6S,oBACuB,OAApC7S,EAAa6S,oBACb7S,EAAa6S,mBAAmB/qB,OAAS,GAC1CsiB,EAAavR,YAAcT,GAAUuE,QACpCyN,EAAa7Q,eAIf,CAAC6Q,EAAavR,UAAWuR,EAAa7Q,YAAayG,IActD,OAAK2V,GAA6B,OAAhB3V,EAOhB,kBAAC,IAAD,CAAQxP,UAAU,YAChB,kBAAC,IAAD,CAAQub,KAAK,KACX,kBAAC,IAAD,CAAUvb,UAAU,SAASwP,EAAY6S,qBAE3C,kBAAC,IAAD,CAAQ9G,KAAK,KACX,kBAAC,IAAD,CACEvb,UAAU,gBACVtK,MAAOkkB,EAAazQ,cACpB6B,YAAa,SAACrY,GAAD,OA1BF,QADa0yB,EA2BmB1yB,EAAEsY,OAAOvV,SAzBxD2vB,OAAWnxB,QAGTmxB,IAAazL,EAAazQ,eAI9B0Q,EAAO,CAACha,KAAM,wBAAyB2P,YAAaA,EAAcrG,cAAekc,KATpD,IAACA,OAc5B,+BCqES,I,cAvGU,SAAMruB,EAAuB8Q,GAA7B,eAAAnU,EAAAC,OAAA,uDACjBsC,EADiB,6EAC2D4R,GAD3D,WAAAnU,EAAA,MAEVsF,EAAcjC,EAAMd,IAFV,+EAuGV,GAjGY,SACzBc,EACA8Q,EACA2D,EACA6Z,EACAC,EACAC,EACAC,GAPyB,eAAA9xB,EAAAC,OAAA,sDAQb,uDAENgE,EAAO,CACX6b,gBAAiB3L,EACjBoK,WAAYzG,EACZia,WAAYJ,EACZK,6BAA8BJ,EAC9BK,aAAcJ,EACdK,mBAAoBJ,GAhBG,WAAA9xB,EAAA,MAmBZsF,EAAcjC,EAXf,uDAW0BY,IAnBb,8EAiGZ,GA1EU,SACvBZ,EACA8Q,EACA2D,EACA6Z,EACAC,EACAC,GANuB,eAAA7xB,EAAAC,OAAA,sDAOX,uCAENgE,EAAO,CACX6b,gBAAiB3L,EACjBoK,WAAYzG,EACZia,WAAYJ,EACZK,6BAA8BJ,EAC9BK,aAAcJ,GAdO,WAAA7xB,EAAA,MAiBVsF,EAAcjC,EAVf,uCAU0BY,IAjBf,8EA0EV,GArDY,SACzBZ,EACAyU,EACA3D,EACAO,EACAC,EACAwd,GANyB,eAAAnyB,EAAAC,OAAA,sDAOb,yCAENgE,EAAO,CACXsa,WAAYzG,EACZgI,gBAAiB3L,EACjB8J,YAAavJ,EACbyJ,cAAexJ,EACfyd,cAAeD,GAdQ,WAAAnyB,EAAA,MAiBZsF,EAAejC,EAVhB,yCAU2BY,IAjBd,8EAqDZ,GAhCK,SAClBZ,EACAyU,EACA3D,EACAO,EACAC,EACAwd,GANkB,eAAAnyB,EAAAC,OAAA,sDAON,yCAENgE,EAAO,CACXsa,WAAYzG,EACZgI,gBAAiB3L,EACjB8J,YAAavJ,EACbyJ,cAAexJ,EACfyd,cAAeD,GAdC,WAAAnyB,EAAA,MAiBLsF,EAAejC,EAVhB,yCAU2BY,IAjBrB,8EAgCL,GAXkB,SAAOZ,EAAuB8Q,EAAyBke,GAAvD,eAAAryB,EAAAC,OAAA,sDACnB,oCAENgE,EAAO,CACXkQ,kBACAme,gBAAiBD,GALY,WAAAryB,EAAA,MAQlBsF,EAAejC,EAPhB,oCAO2BY,IARR,8ECSlBsuB,GAtH6C,SAAC,GAAmE,IAAlEhI,EAAiE,EAAjEA,SAAUiI,EAAuD,EAAvDA,KAAMpU,EAAiD,EAAjDA,cAAevC,EAAkC,EAAlCA,YAAa1H,EAAqB,EAArBA,gBACjG9Q,EAAQ0H,qBAAWxD,GAAnBlE,KADsH,EAEnGuE,mBAAS,IAF0F,mBAEtH+N,EAFsH,KAE/G8c,EAF+G,OAGzE7qB,mBAAS,MAHgE,mBAGtHqhB,EAHsH,KAGlGC,EAHkG,OAI3FthB,mBAAS,MAJkF,mBAItH8qB,EAJsH,KAI3GC,EAJ2G,KAO7H5qB,qBAAU,WACJqW,EAAczD,QAAU9C,GAAc2D,oBAAsBrH,EAAkB,GAChFye,GAAoCvvB,EAAM8Q,GAAiB,GAAMpV,MAAK,SAAA4F,GACpEguB,EAAahuB,GACTA,GAAWA,EAAQhB,OAAS,GAC9BulB,EAAsBvkB,EAAQ,GAAG5C,YAMtC,CAACoS,EAAiBiK,EAAczD,QASnC,OAAIyD,EAAczD,QAAU9C,GAAc+C,KAEpC,8BAKJ,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAW7Q,KAAK,OACd,kBAAC,IAAD,KACE,kBAAC,IAAD,KAAWqU,EAAc7D,cAG7B,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEsY,QAAShX,EAAYiX,0BAA4B1U,EAAczD,QAAU9C,GAAc2D,oBAEvF,kBAAC,IAAD,CAAQnP,UAAU,QAAQub,KAAK,KAA/B,MACA,kBAAC,IAAD,CAAQA,KAAK,KACX,kBAAC,IAAD,CACEvb,UAAU,SACVtK,MAAOknB,EACP5R,YAAa,SAACrY,GAAQkqB,EAAsB3X,SAASvS,EAAEsY,OAAOvV,UAE7D2wB,GAAaA,EAAUl0B,KAAI,SAAAu0B,GAAK,OAC7B,kBAAC,IAAD,CACEnxB,IAAKmxB,EAAMhxB,MACXA,MAAOgxB,EAAMhxB,MACboK,SAAU4mB,EAAM5mB,UAEf4mB,EAAMrY,YAOnB,kBAAC,IAAD,CACEmY,OAAQzU,EAAczD,QAAU9C,GAAc2D,oBAE9C,kBAAC,IAAD,CAAQoM,KAAK,MACX,yBAAKvb,UAAU,iBACX+R,EAAc1D,QAKtB,kBAAC,IAAD,CACEmY,OAAQzU,EAAczD,QAAU9C,GAAc2D,oBAE9C,kBAAC,IAAD,CAAQnP,UAAU,QAAQub,KAAK,KAA/B,SACA,kBAAC,IAAD,CAAQA,KAAK,KACX,kBAAC,IAAD,CACEvb,UAAU,SACV+kB,UAAW,IACXC,KAAM,EACNtvB,MAAO4T,EACP0B,YAAa,SAACrY,GAAOyzB,EAASzzB,EAAEsY,OAAOvV,YAK7C,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQsK,UAAU,QAAQub,KAAK,MAC/B,kBAAC,IAAD,CAAQA,KAAK,IAAIvb,UAAU,iBACzB,kCAKR,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEwE,OAAO,QACPJ,MAAM,YACNxG,QAjFU,WAEduoB,EAAKvJ,EADS,OAAItT,QAAJ,IAAIA,IAAU,IACO,KA4EjC,MAQA,kBAAC,IAAD,CACE9E,OAAO,QACP5G,QAASsgB,GAFX,aCmBOyI,GAjH+C,SAAC,GACwG,IAAnKvyB,EAAkK,EAAlKA,KAAcwyB,GAAoJ,EAA5J/M,OAA4J,EAApJ+M,iBAA2Bve,GAAyH,EAAnIM,SAAmI,EAAzHN,WAAWC,EAA8G,EAA9GA,YAA8BR,GAAgF,EAAjGwF,gBAAiG,EAAhFxF,iBAAkC2D,GAA8C,EAA/DgC,gBAA+D,EAA9ChC,YAA0BsG,GAAoB,EAAlC8U,aAAkC,EAApB9U,eACxI/a,EAAS0H,qBAAWxD,GAApBlE,KAD4J,EAEpHuE,oBAAS,GAF2G,mBAE7JurB,EAF6J,KAE3IC,EAF2I,KAG9JrnB,EAAMlD,IAENwqB,EAAa,SAAC1qB,GAClByqB,GAAoB,GACpBH,EAAgBtqB,IAgElB,OAAKyV,IACA3d,IACAA,EAAKmN,WACqB,IAA1BnN,EAAKmN,UAAUjK,QACfya,EAAczD,QAAU9C,GAAc+C,MACtCzG,GAAmB,EAEpB,8BAKF,oCACE,kBAAC,IAAD,CACE9H,UAAU,eACVwE,OAAO,QACP5G,QAAS,WAAQmpB,GAAoB,KAEpChV,EAAc7D,YAIjB,kBAAC,IAAD,CACExR,OAAQoqB,EACRrG,SAAS,sBACTvjB,aAAc,kBAAM6pB,GAAoB,KAExC,kBAAC,GAAD,CACE7I,SAAU,WAAO6I,GAAoB,IACrCZ,KA1FQ,SAACzkB,EAA2B4H,EAAeC,GACzD,OAAQwI,EAAezD,OACrB,KAAK9C,GAAc2D,mBACjB8X,GACEjwB,EACA8Q,EACA2D,EACA,EACAlC,EACAD,EACA5H,GACDhP,MAAK,WAAQs0B,EAAW,4BACzB,MAEF,KAAKxb,GAAc+D,mBACjB0X,GACEjwB,EACA8Q,EACA2D,EACA,EACAlC,EACAD,GACD5W,MAAK,SAAC4F,GACDA,EAAQG,MACViH,EAAI1C,UAAU,uBAAwB1E,EAAQgE,SAAS,eAEvD0qB,EAAW1uB,EAAQgE,YAIvB,MAEF,KAAKkP,GAAc4D,mBACjB6X,GACEjwB,EACAyU,EACA3D,EACAO,EACAC,OACApU,GACDxB,MAAK,WAAQs0B,EAAW,4BACzB,MAEF,KAAKxb,GAAc6D,iBACjB4X,GAAwBjwB,EAAM8Q,GAC7BpV,MAAK,WAAQs0B,EAAW,4BACzB,MAEF,KAAKxb,GAAc8D,OACjB2X,GACEjwB,EACAyU,EACA3D,EACAO,EACAC,OACApU,GACCxB,MAAK,WAAQs0B,EAAW,gBAmCzB5yB,KAAMA,EACN2d,cAAeA,EACfjK,gBAAiBA,EACjB0H,YAAa5B,GAAuCxZ,EAAMqX,KAE3D/L,EAAIzC,e,sCClDEiqB,GAzEiC,SAAC,GAA2C,IAAzC1X,EAAwC,EAAxCA,YAAaoK,EAA2B,EAA3BA,aAAcC,EAAa,EAAbA,OAAa,EACvDte,mBAAS,EAAC,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,IADS,mBAClF4rB,EADkF,KACvEC,EADuE,KAiBzF,GAbA1rB,qBAAU,WACR,GAAKke,EAAa/P,eAEX,CAEL,IADA,IAAMhO,EAAW,EAAC,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAC9C4B,EAAI,EAAGA,EAAImc,EAAa/P,eAAevS,OAAQmG,IACrD5B,EAASqJ,SAAS0U,EAAa/P,eAAepM,MAAO,EAGvD2pB,EAAavrB,QAPburB,EAAa,EAAC,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,MASnD,CAACxN,EAAa/P,iBAEG,OAAhB2F,EACF,OACE,8BAIJ,IAAMsE,EAAY9N,GAAa,IAAItB,KAAQ8K,EAAYuE,gBAAiBvE,EAAYwE,cA4BpF,OACE,yBAAKhU,UAAU,sBACZ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG7N,KAAI,SAAC8U,GACpB,IAAMmE,EAAW7E,aAAQuN,EAAW7M,GAC9BogB,EAAYC,aAAOlc,GAEzB,OACE,0BAAM7V,IAAK0R,EAAKjH,UAAU,OACxB,kBAAC,IAAD,CACEA,UAAU,eACVF,SAAU8Z,EAAaxL,WACvBxQ,QAAS,kBApCrB,SAA2BypB,GACzB,IAAME,EAAgBJ,EAAUtpB,QAC1B2pB,GAAaL,EAAUE,GAE7BE,EAAcF,GAAaG,EAC3BJ,EAAaG,GAGb,IADA,IAAI1d,EAAiB,GACZpM,EAAI,EAAGA,EAAI8pB,EAAcjwB,OAAQmG,IACpC8pB,EAAc9pB,KAChBoM,GAAkBpM,GAItBoc,EAAO,CACLha,KAAM,oBACN+kB,eAAgB/a,EAChBD,eAAgBgQ,EAAahQ,eAC7BD,eAAgBiQ,EAAajQ,eAC7BD,cAAekQ,EAAalQ,cAC5BD,gBAAiBmQ,EAAanQ,kBAgBPge,CAAkBJ,IACjC1pB,QAASwpB,EAAUE,KAErB,0BAAMrnB,UAAU,YAAasF,aAAO8F,EAAU,MAAM3L,OAAO,EAAG,UCkN3DioB,GA/QqD,SAAC,GAAoC,IAAlCtzB,EAAiC,EAAjCA,KAAMwlB,EAA2B,EAA3BA,aAAcC,EAAa,EAAbA,OAAa,EAChEte,mBAAS,MADuD,mBAC/FiU,EAD+F,KAClFgL,EADkF,OAEpEjf,oBAAS,GAF2D,mBAE/F4pB,EAF+F,KAEpFC,EAFoF,OAGpE7pB,oBAAS,GAH2D,mBAG/FisB,EAH+F,KAGpFG,EAHoF,KA+JtG,OAzJAjsB,qBAAU,WACJke,EAAanO,WAAa,EAC5B+O,EAAe5M,GAAuCxZ,EAAMwlB,EAAanO,aACpC,IAA5BmO,EAAanO,YACtB+O,EAAepmB,EAAKmN,UAAU,GAAGjL,YAIlC,CAACsjB,EAAanO,aAGjB/P,qBAAU,WACR0pB,EACExL,EAAavR,YAAcT,GAAUqE,OACrC2N,EAAavR,YAAcT,GAAU8H,eAEtC,CAACkK,EAAavR,YAGjB3M,qBAAU,WACHypB,GAIDvL,EAAanQ,iBACfke,GAAa,KAQd,CAACH,EAAWrC,EAAWvL,EAAanQ,kBAwHlC0b,EAOH,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQ5J,KAAK,KACX,kBAAC,IAAD,CACE5d,QAAS6pB,EACT5pB,QAjIV,WAWIic,EAVG2N,EAUI,CACL3nB,KAAM,oBACN+kB,oBAAgB1wB,EAChB0V,oBAAgB1V,EAChByV,oBAAgBzV,EAChBwV,mBAAexV,EACfuV,qBAAiBvV,GAfZ,CACL2L,KAAM,oBACN+kB,oBAAgB1wB,EAChB0V,eAAgB,EAChBD,eAAgBqP,GAAe6L,OAC/Bnb,mBAAexV,EACfuV,gBAAiBjD,GAA0B,IAAI9B,QAanDijB,GAAcH,IA6GN1nB,SAAU8Z,EAAaxL,aAEzB,kBAAC,IAAD,CAAUpO,UAAU,QAAQuS,MAAO,CAACqV,YAAa,SAAjD,gBAIAJ,GACA,kBAAC,IAAD,CAAQjM,KAAK,KACX,yBAAKhJ,MAAO,CAACiN,aAAc,iBAAkBqI,OAAQ,YAKzDL,GACA,oCACA,kBAAC,IAAD,CAAQxnB,UAAU,YAChB,kBAAC,IAAD,CAAQub,KAAK,MACb,kBAAC,IAAD,CAAQA,KAAK,KACX,kBAAC,IAAD,CAASrc,KAAM4oB,KAAUpqB,KAAK,QAEhC,kBAAC,IAAD,CAAQ6d,KAAK,KACX,kBAAC,IAAD,CACE7lB,MAAOkkB,EAAanQ,gBACpBzJ,UAAU,SACV6K,cAAc,SACdC,aAAa,cACbhL,SAAU8Z,EAAaxL,WACvBtJ,IAAI,aACJ4C,IAAI,aACJsD,YAAa,SAACrY,GAtI1B,IAAkC0yB,IAsIwB1yB,EAAEsY,OAAOvV,MA3H/DmkB,EAVGwL,EAUI,CACLxlB,KAAM,oBACN+kB,eAAgBhL,EAAa/P,eAC7BD,eAAgBgQ,EAAahQ,eAC7BD,eAAgBiQ,EAAajQ,eAC7BD,cAAekQ,EAAalQ,cAC5BD,gBAAiB4b,GAfZ,CACLxlB,KAAM,oBACN+kB,eAAgBhL,EAAa/P,eAC7BD,eAAgBgQ,EAAahQ,eAC7BD,eAAgBiQ,EAAajQ,eAC7BD,cAAekQ,EAAalQ,cAC5BD,qBAAiBvV,QAiIf,kBAAC,IAAD,CAAQqnB,KAAK,KACX,kBAAC,IAAD,CAASrc,KAAM4oB,KAAUpqB,KAAK,KAAK6U,MAAO,CAACwV,UAAW,YAExD,kBAAC,IAAD,CAAQxM,KAAK,KACX,kBAAC,IAAD,CACE7lB,MAAOkkB,EAAalQ,cACpB1J,UAAU,SACV6K,cAAc,SACdC,aAAa,cACbhL,SAAU8Z,EAAaxL,WACvBtJ,IAAI,aACJ4C,IAAI,aACJsD,YAAa,SAACrY,GA9H1B,IAAgC0yB,IA8HwB1yB,EAAEsY,OAAOvV,MAnH7DmkB,EAVGwL,EAUI,CACLxlB,KAAM,oBACN+kB,eAAgBhL,EAAa/P,eAC7BD,eAAgBgQ,EAAahQ,eAC7BD,eAAgBiQ,EAAajQ,eAC7BD,cAAe2b,EACf5b,gBAAiBmQ,EAAanQ,iBAfzB,CACL5J,KAAM,oBACN+kB,eAAgBhL,EAAa/P,eAC7BD,eAAgBgQ,EAAahQ,eAC7BD,eAAgBiQ,EAAajQ,eAC7BD,mBAAexV,EACfuV,gBAAiBmQ,EAAanQ,uBA0H9B,kBAAC,IAAD,CAAQzJ,UAAU,YAChB,kBAAC,IAAD,CAAQub,KAAK,MACb,kBAAC,IAAD,CAAQA,KAAK,KACX,kBAAC,IAAD,CAASrc,KAAM8oB,KAAStqB,KAAK,QAE/B,kBAAC,IAAD,CAAQ6d,KAAK,KACX,kBAAC,IAAD,CACEvb,UAAU,SACVtK,MAAOkkB,EAAajQ,eACpB7J,SAAU8Z,EAAaxL,WACvBpD,YAAa,SAACrY,GArH1B,IAAiC0yB,IAqHwB1yB,EAAEsY,OAAOvV,MA1G9DmkB,EAVGwL,EAUI,CACLxlB,KAAM,oBACN+kB,eAAgBhL,EAAa/P,eAC7BD,eAAgBgQ,EAAahQ,eAC7BD,eAAgBzE,SAASmgB,GACzB3b,cAAekQ,EAAalQ,cAC5BD,gBAAiBmQ,EAAanQ,iBAfzB,CACL5J,KAAM,oBACN+kB,eAAgBhL,EAAa/P,eAC7BD,eAAgBgQ,EAAahQ,eAC7BD,oBAAgBzV,EAChBwV,cAAekQ,EAAalQ,cAC5BD,gBAAiBmQ,EAAanQ,oBA+GxB,kBAAC,IAAD,CAAiB/T,MAAOsjB,GAAe6L,QAAvC,UACA,kBAAC,IAAD,CAAiBnvB,MAAOsjB,GAAeiP,qBAAvC,0BACA,kBAAC,IAAD,CAAiBvyB,MAAOsjB,GAAekP,oBAAvC,2BAGJ,kBAAC,IAAD,CAAQ3M,KAAK,KAAb,KAGA,kBAAC,IAAD,CAAQA,KAAK,KACX,kBAAC,IAAD,CACEvb,UAAU,gBACVF,SAAU8Z,EAAaxL,WACvB1Y,MAAQkkB,EAAahQ,eAAkBgQ,EAAahQ,eAAetC,gBAAapT,EAChF8W,YAAa,SAACrY,GAAD,OA7GQ0yB,EA6GuB1yB,EAAEsY,OAAOvV,WAlG7DmkB,EAVGwL,EAUI,CACLxlB,KAAM,oBACN+kB,eAAgBhL,EAAa/P,eAC7BD,eAAgB1E,SAASmgB,GACzB1b,eAAgBiQ,EAAajQ,eAC7BD,cAAekQ,EAAalQ,cAC5BD,gBAAiBmQ,EAAanQ,iBAfzB,CACL5J,KAAM,oBACN+kB,eAAgBhL,EAAa/P,eAC7BD,oBAAgB1V,EAChByV,eAAgBiQ,EAAajQ,eAC7BD,cAAekQ,EAAalQ,cAC5BD,gBAAiBmQ,EAAanQ,kBARpC,IAAiC4b,OAiH3B,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQ9J,KAAK,MACb,kBAAC,IAAD,CAAQA,KAAK,KACX,kBAAC,GAAD,CACE/L,YAAaA,EACboK,aAAcA,EACdC,OAAQA,MAKd,kBAAC,IAAD,CAAQ7Z,UAAU,YAChB,kBAAC,IAAD,CAAQub,KAAK,MACX,yBAAKhJ,MAAO,CAAC4V,UAAW,iBAAkB5I,MAAO,cArGvD,iC,SPpLMsC,O,yCAAAA,I,2CAAAA,I,8CAAAA,Q,gBQyFGuG,GA9EmE,SAAC,GAA4B,IAA3BC,EAA0B,EAA1BA,SAAUC,EAAgB,EAAhBA,WAE5F,GAAmB,OAAfA,EACF,OACE,8BAIJ,IAAMC,EAAgB,SAACC,GACrBH,EAASG,IAGLC,EAA2B,WAAfH,EACd,0BACA,0BAEJ,OACE,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAW5qB,KAAK,OACd,kBAAC,IAAD,KACE,kBAAC,IAAD,KAAW+qB,KAGf,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQlN,KAAK,MACX,kBAAC,IAAD,CACE/W,OAAO,QACPJ,MAAM,SACNpE,UAAU,eACVpC,QAAS,kBAAM2qB,EAAc1G,GAAqB6G,qBAJpD,gBAUJ,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQnN,KAAK,MACX,kBAAC,IAAD,CACE/W,OAAO,QACPJ,MAAM,SACNpE,UAAU,eACVpC,QAAS,kBAAM2qB,EAAc1G,GAAqB8G,sBAJpD,mBAUJ,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQpN,KAAK,MACX,kBAAC,IAAD,CACE/W,OAAO,QACPJ,MAAM,SACNpE,UAAU,eACVpC,QAAS,kBAAM2qB,EAAc1G,GAAqB+G,uBAJpD,wBAUJ,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQrN,KAAK,MACX,kBAAC,IAAD,CACE/W,OAAO,QACPxE,UAAU,aACVpC,QAAS,kBAAM2qB,EAAc,QAH/B,gB,OCkBCM,OAvEf,WAAgC,IAAD,EACDttB,oBAAS,GADR,mBACtBmB,EADsB,KACdC,EADc,OAEOpB,mBAAS,CAACqB,OAAQ,GAAIN,QAAS,GAAIzE,QAAS,GAAwBgF,UAAW,SAACisB,OAFvF,mBAEtBC,EAFsB,KAEVC,EAFU,KAiBvBT,EAAgB,SAACO,GACrBnsB,GAAU,GACVosB,EAAWlsB,UAAUisB,IA8CvB,MAAO,CACLG,WA7DiB,SAACrsB,EAAgBN,EAAiB4sB,EAAgCrsB,GACnFmsB,EAAc,CACZpsB,SACAN,UACAzE,QAASqxB,EACTrsB,cAGFF,GAAU,IAsDVwsB,aA5CE,kBAAC,IAAD,CACEzsB,OAAQA,EACR+jB,SAAS,uBACTvjB,aAAc,kBAAMqrB,EAAc,QAElC,kBAAC,IAAD,CAAYvoB,UAAU,iBACpB,kBAAC,IAAD,CAAWtC,KAAK,OACd,kBAAC,IAAD,KACE,kBAAC,IAAD,KAAWqrB,EAAWnsB,UAG1B,kBAAC,IAAD,KACGmsB,EAAWlxB,QAAQ1F,KAAI,SAAAi3B,GAAG,OACzB,kBAAC,IAAD,CAAQ7zB,IAAK6zB,EAAI1zB,OACf,kBAAC,IAAD,CAAQ6lB,KAAK,MACX,kBAAC,IAAD,CACE/W,OAAO,QACPJ,MAAOglB,EAAIhlB,MACXpE,UAAU,eACVpC,QAAS,kBAAM2qB,EAAca,EAAI1zB,SAEhC0zB,EAAI/a,WAKb,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQkN,KAAK,MACX,kBAAC,IAAD,CACE/W,OAAO,QACPxE,UAAU,aACVpC,QAAS,kBAAM2qB,EAAc,QAH/B,iBCuRDc,GAzT4C,SAAC,GAC2B,IAAnFj1B,EAAkF,EAAlFA,KAAM0T,EAA4E,EAA5EA,gBAAiBrJ,EAA2D,EAA3DA,eAAgBkY,EAA2C,EAA3CA,cAAeja,EAA4B,EAA5BA,OAAQqV,EAAoB,EAApBA,cAC1DrS,EAAMlD,IACJxF,EAASmE,IAAMuD,WAAWxD,GAA1BlE,KAF4E,EAGxCsyB,qBAAWlG,GAAoBJ,IAHS,mBAG5EpJ,EAH4E,KAG9D2P,EAH8D,OAIzChuB,mBAAS,MAJgC,mBAI5EiuB,EAJ4E,KAI7DC,EAJ6D,OAK3BluB,mBAAS,MALkB,mBAK5E6M,EAL4E,KAKtDshB,EALsD,OAMHnuB,mBAAS,MANN,mBAM5EouB,EAN4E,KAM1CC,EAN0C,OAOxCruB,mBAAS,QAP+B,mBAO5EsuB,EAP4E,KAO7DC,EAP6D,KAQ9EC,EAAgC,OAApBjiB,EACZkiB,EAASnB,KACX5uB,EAAQ,YACRiU,EAAa,SAEb6b,IACF9vB,EAAQ,aACRiU,EAAa,UAIfxS,qBAAU,WACHgB,GAIAtI,GAASA,EAAKmN,WAAuC,IAA1BnN,EAAKmN,UAAUjK,SAI3CwQ,EACFmiB,GAAiBpiB,iBAAiB7Q,EAAM8Q,GAAiBpV,MAAK,SAAC82B,GACxDA,GAQLC,EAAiBD,GACjBD,EAAmB,CAAE1pB,KAAM,eAAgB6S,GAAI8W,EAAep1B,OAAM2d,mBARlErS,EAAI1C,UACF,WACA,+DACAkhB,OAQgB,OAAlBsL,GACFC,EAAiB,MAGnBF,EAAmB,CAAE1pB,KAAM,eAAgBzL,aAI5C,CAAC0T,EAAiB9Q,EAAM0F,EAAQtI,IAGnCsH,qBAAU,WACqB,OAAzB0M,GAAmD,SAAlByhB,IACb,iBAAlBA,EACFK,IAEAC,EAA0C,OAA9BvQ,EAAapQ,mBAAuDtV,IAA9B0lB,EAAapQ,iBAKlE,CAACpB,EAAsByhB,IAG1B,IAAMK,EAAiB,YAC4B,IAAjCtQ,EAAa9R,gBAAwBmiB,GAAiBngB,oBAAsBmgB,GAAiB/hB,qBACrGlR,EAAM4iB,EAAcxR,GAAsB1V,MAAK,SAACqO,GAClDA,EAAOtI,MACTiH,EAAI1C,UAAU,gBAAiB+D,EAAOzE,SAAS,WAC7CmC,EAAe,6BAGjBA,EAAe,qBAMf0rB,EAAc,SAACC,GACnB,IAAMC,EAAW,WACfJ,GAAiBjgB,oBAAoBhT,EAAM4iB,EAAa9R,gBAAiBM,GAAsB1V,MAAK,SAAAqO,GAC9FA,EAAOtI,MACTiH,EAAI1C,UAAU,gBAAiB+D,EAAOzE,SAAS,WAC7CmC,EAAe,6BAGjBA,EAAe,qBAKjB2rB,EACFC,IAEAL,EAAOf,WACL,gBACA,GACA,CAAC,CAAE5a,KAAM,SAAUjK,MAAO,SAAU1O,MAAO,KAC3C,SAAAozB,GACoB,IAAdA,GACFuB,QAsBJC,EAA+B,SAACxB,GACpCc,EAAoC,MACpCF,EAAwBZ,GACN,OAAdA,GACFgB,EAAiB,SAmBf5L,EAAW,WACfqL,EAAmB,CAAC1pB,KAAM,WACVnG,cACR5D,KAAK,kBACb6gB,KAGF,OAAKja,GAAWtI,GAASA,EAAKmN,WAAuC,IAA1BnN,EAAKmN,UAAUjK,SAAkD,IAAlCsiB,EAAa9R,gBASnF,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAY7I,KAAK,SACf,kBAAC,IAAD,CAAWrB,QAASsgB,GAChB,kBAAC,IAAD,CAAShf,KAAMC,IAAgBzB,KAAK,KAAKuB,KAAK,gBAGpD,kBAAC,IAAD,KACGhF,KAKP,kBAAC,IAAD,CAAYmF,MAAM,iBAChB,kBAAC,IAAD,KACE,kBAAC,GAAD,CACEwa,aAAcA,EACdC,OAAQ0P,EACRn1B,KAAMA,EACN0lB,WAAY/H,EAAcvD,oBAC1BuL,cAAehI,EAActD,wBAG/B,kBAAC,IAAD,CAAQzO,UAAU,YAChB,kBAAC,GAAD,CACE5L,KAAMA,EACNwlB,aAAcA,EACdC,OAAQ0P,IAEV,kBAAC,GAAD,CACEn1B,KAAMA,EACNwlB,aAAcA,EACdC,OAAQ0P,KAIZ,kBAAC,IAAD,CAAQvpB,UAAU,YAChB,kBAAC,IAAD,CAAQub,KAAK,MACX,yBAAKhJ,MAAO,CAACgN,MAAO,OAAQC,aAAc,sBAI9C,kBAAC,GAAD,CACEprB,KAAMA,EACNwlB,aAAcA,EACdC,OAAQ0P,IAGV,kBAAC,GAAD,CACEn1B,KAAMA,EACNwlB,aAAcA,EACdC,OAAQ0P,IAGV,kBAAC,GAAD,CACEn1B,KAAMA,EACNwlB,aAAcA,EACdC,OAAQ0P,IAGV,kBAAC,GAAD,CACEn1B,KAAMA,EACNwlB,aAAcA,EACdC,OAAQ0P,IAGV,kBAAC,GAAD,CACEn1B,KAAMA,EACNwlB,aAAcA,EACdC,OAAQ0P,IAGV,kBAAC,GAAD,CACEn1B,KAAMA,EACNwlB,aAAcA,EACdC,OAAQ0P,IAGV,kBAAC,GAAD,CACEn1B,KAAMA,EACNwlB,aAAcA,EACdC,OAAQ0P,IAGV,kBAAC,GAAD,CACEn1B,KAAMA,EACNwlB,aAAcA,EACdC,OAAQ0P,KAMX7pB,EAAIzC,YACJ+sB,EAAOb,aAER,kBAAC,IAAD,CACEzsB,OAA6C,OAArCitB,EACRzsB,aAAc,WAAOotB,EAA6B,OAClD7J,SAAS,2BAET,kBAAC,GAAD,CACE4H,SAAUiC,EACVhC,WAAYqB,MAMlB,kBAAC,IAAD,CAAW3pB,UAAU,wBACnB,kBAAC,GAAD,CACE5L,KAAMA,EACNiU,UAAWuR,EAAavR,UACxBM,SAAUiR,EAAajR,SACvBL,YAAasR,EAAatR,YAC1BgF,gBAAiBsM,EAAanR,SAAS1V,GACvC0a,gBAAiBmM,EAAaxd,SAASA,SAASrJ,GAChD+U,gBAAiB8R,EAAa9R,gBAC9B2D,WAAYmO,EAAanO,WACzBsG,cAAeA,EACf8H,OAAQ0P,EACR3C,gBAAiB,SAACtqB,GAAD,OAAamC,EAAenC,IAC7CuqB,aAAc,eAEhB,kBAAC,IAAD,CACI7mB,UAAU,eACVwE,OAAO,QACP5G,QArLkB,WAC5BksB,EAAiB,gBACblQ,EAAapQ,aACc,OAAzBpB,EACF8hB,IAEAN,EAAoC,UAGtCM,KA6KQpqB,UAAW8Z,EAAalC,UAAYkC,EAAasJ,MACjDsD,OAAQ5M,EAAaxL,YAEpBF,GAEL,kBAAC,IAAD,CACElO,UAAU,gBACVwE,OAAO,QACP5G,QAvKY,WACpBksB,EAAiB,UACblQ,EAAapQ,aACc,OAAzBpB,EACF+hB,EAA0C,OAA9BvQ,EAAapQ,mBAAuDtV,IAA9B0lB,EAAapQ,cAE/DogB,EAAoC,UAGtCO,EAA0C,OAA9BvQ,EAAapQ,mBAAuDtV,IAA9B0lB,EAAapQ,eA+JzDgd,OAAQ5M,EAAaxL,YAAcwL,EAAa9R,iBAAmB,GAJrE,YA7IJ,oCACE,wCACCpI,EAAIzC,cCtKEstB,IC/BHC,GD+BGD,GA5Bf,WAA2B,IAAD,EACIhvB,oBAAS,GADb,mBACjBmB,EADiB,KACTC,EADS,OAEUpB,mBAAS,CAACe,QAAS,KAF7B,mBAEjBmuB,EAFiB,KAENC,EAFM,KAsBxB,MAAO,CACLC,UAnBgB,SAACruB,GACjBouB,EAAa,CACXpuB,YAGFK,GAAU,IAeViuB,eAXA,kBAAC,IAAD,CACEluB,OAAQA,EACRQ,aAAc,kBAAMP,GAAU,IAC9BP,SAAS,MACTE,QAASmuB,EAAUnuB,QACnB0H,SAAU,Q,mBEiBD6mB,GA9B6C,SAAC,GAAiB,IAAhBC,EAAe,EAAfA,UAC5D,OACE,4BACE9qB,UAAU,SAEV,yBAAMA,UAAU,kBACd,yBAAKA,UAAU,YAAW,kBAAC,KAAD,MAA1B,KACA,yBAAKA,UAAU,cAAa,kBAAC,KAAD,QAE9B,yBAAKuS,MAAO,CAACwY,QAAS,QACpB,kBAAC,KAAD,CAAUxL,MAAO,EAAGsI,OAAQ,MAE9B,yBAAK7nB,UAAU,mBACb,yBAAKA,UAAU,YACb,8BACM,kBAAC,KAAD,CAAUuf,MAAO,IAAKsI,OAAQ,IADpC,YAGA,kBAAC,KAAD,OAEDiD,GACC,6BAAM,kBAAC,KAAD,CAAUvL,MAAO,GAAIsI,OAAQ,MAErC,yBAAK7nB,UAAU,gBACb,kBAAC,KAAD,CAAUuf,MAAO,IAAKsI,OAAQ,KADhC,eCjBOmD,I,OATkB,WAE/B,OACE,yBAAKhrB,UAAU,qBACb,0BAAMA,UAAU,kBAAhB,gBCkBAirB,GAAoC,GACpCC,GAAkC,GA8YzBC,GAxYmC,SAAC,GAAa,IAAZC,EAAW,EAAXA,MAE1Cp0B,EAASmE,IAAMuD,WAAWxD,GAA1BlE,KAFqD,EAG/BmE,IAAMuD,WAAW6D,IAAvCnO,EAHqD,EAGrDA,KAAM8N,EAH+C,EAG/CA,YACRmpB,EAAQd,KAJ+C,EAgBPhvB,mBAAS,sBAhBF,mBAgBrD+vB,EAhBqD,KAgBjCC,EAhBiC,KAiBvDC,EAAYzS,IAXA,SAACpmB,GACjB84B,IAAc,GACdvpB,GAAY,EAAMlL,GAAMtE,MAAK,SAACqQ,GAC5BvK,QAAQzD,IAAI,MACRgO,GACF2oB,GAAkB3oB,EAAQxB,UAAWlD,GAAQstB,GAASh5B,SAOtD+X,EAAatW,GAAQA,EAAKmN,WAAanN,EAAKmN,UAAUjK,OAAS,EACjE0O,GAAa4lB,aAAW,IAAIlnB,MAAStQ,EAAKmN,UAAU,GAAGjL,SAASyd,gBAAiB3f,EAAKmN,UAAU,GAAGjL,SAAS0d,cAC5GhO,GAAa4lB,aAAW,IAAIlnB,MAAS,SAAU,IApBU,EAsBbnJ,mBAAS0vB,IAtBI,mBAsBtDY,EAtBsD,KAsBpCC,EAtBoC,OAuBrBvwB,mBAAS2vB,IAvBY,mBAuBtDa,EAvBsD,KAuBxCC,EAvBwC,OAwBnBzwB,mBAAS,IAxBU,mBAwBtD0wB,EAxBsD,KAwBvCC,EAxBuC,OAyBH3wB,mBAAS0vB,IAzBN,mBAyBtDkB,EAzBsD,KAyB/BC,EAzB+B,OA0BX7wB,mBAAS2vB,IA1BE,mBA0BtDmB,EA1BsD,KA0BnCC,EA1BmC,OA2BT/wB,mBAAS,IA3BA,mBA2BtDgxB,EA3BsD,KA2BlCC,EA3BkC,OA4BXjxB,mBAAS0vB,IA5BE,mBA4BtDwB,EA5BsD,KA4BnCC,EA5BmC,OA6BnBnxB,mBAAS2vB,IA7BU,mBA6BtDyB,EA7BsD,KA6BvCC,EA7BuC,OA8BjBrxB,mBAAS,IA9BQ,mBA8BtDsxB,GA9BsD,KA8BtCC,GA9BsC,QAgCvBvxB,oBAAS,GAhCc,qBAgCtD4H,GAhCsD,MAgCzCC,GAhCyC,SAiC/B7H,mBAAoC,MAjCL,qBAiCtDowB,GAjCsD,MAiC7CoB,GAjC6C,SAkCfxxB,oBAAS,GAlCM,qBAkCtDyxB,GAlCsD,MAkCrCC,GAlCqC,SAmCzB1xB,oBAAS,GAnCgB,qBAmCtD2xB,GAnCsD,MAmC1CzB,GAnC0C,SAoCjBlwB,oBAAS,GApCQ,qBAoCtD4xB,GApCsD,MAoCtCC,GApCsC,SAqCvB7xB,mBAAS,MArCc,qBAqCtD8xB,GArCsD,MAqCzCC,GArCyC,SAsCnB/xB,mBAAS,MAtCU,qBAsCtDwW,GAtCsD,MAsCvCwb,GAtCuC,SAuCjChyB,mBAAS,eAChC0O,GAD+B,CAElCxE,MAAOiF,EACP5E,IAAKS,aAAQmE,EAAW,GACxBJ,YAAalW,EAAKmN,UAAUqK,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,YAAYF,SAAQ,SAAAnF,GAAC,OAAKA,EAAEsF,UAAU5Z,KAAI,SAAA6Z,GAAC,OAAIA,EAAEjZ,YAC5FqX,kBAAkB,KA5CyC,qBAuCtD/L,GAvCsD,MAuC9CmvB,GAvC8C,MAgD7D9xB,qBAAU,WACR,GAAItH,GAAQA,EAAKmN,WAAanN,EAAKmN,UAAUjK,OAAS,EAAG,CACvD,IAAMm2B,EAAS,eACVpvB,GADU,CAEbiM,YAAalW,EAAKmN,UAAUqK,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,YAAYF,SAAQ,SAAAnF,GAAC,OAAKA,EAAEsF,UAAU5Z,KAAI,SAAA6Z,GAAC,OAAIA,EAAEjZ,YAC5FoX,SAAU/V,EAAKmN,UAAUpP,KAAI,SAAA0Z,GAAC,OAAIA,EAAE9Y,MACpCmX,cAAe9V,EAAKmN,UAAU,GAAGxO,KAGnCy6B,GAAUC,IAGK,OAAZ9B,IAAgD,IAA5BE,EAAiBv0B,QACzB,aAAZq0B,IAA2D,IAAjCQ,EAAsB70B,QACpC,QAAZq0B,IAAkD,IAA7Bc,EAAkBn1B,SAExC8L,IAAe,GAGe,IAA5ByoB,EAAiBv0B,QACnBo0B,GAAkBt3B,EAAKmN,UAAWksB,EAAW,UAAMv5B,GAGhB,IAAjCi4B,EAAsB70B,QACxBo0B,GAAkBt3B,EAAKmN,UAAWksB,EAAW,gBAAYv5B,GAG1B,IAA7Bu4B,EAAkBn1B,QACpBo0B,GAAkBt3B,EAAKmN,UAAWksB,EAAW,WAAOv5B,QAE7CE,GAA4B,IAApBA,EAAKsN,aACtBoqB,EAAoB,IACpBM,EAAyB,IACzBM,EAAqB,OAItB,CAACt4B,IAEJsH,qBAAU,WACJ0vB,EAAMsC,OAAO5lB,kBACfwlB,GAAepoB,SAASkmB,EAAMsC,OAAO5lB,kBACrCslB,IAAkB,MAEnB,CAAChC,EAAMsC,OAAO5lB,kBAGjB,IAAM4jB,GAAoB,SAACnqB,EAAiCuW,EAAgB6V,EAAwCh7B,GAChH,IAAMi7B,EAAa,eACd9V,EADc,CAEjB1N,iBAAiC,OAAfujB,EAClBpjB,YAA4B,aAAfojB,GAA6B,EAAI7V,EAAEvN,YAChDC,cAA8B,aAAfmjB,EAA4B,EAAI7V,EAAEtN,gBAQnD,GANAqjB,GAAkCD,EAAeD,EAAYh7B,GAE7Dm5B,EAAoB,IACpBM,EAAyB,IACzBM,EAAqB,IAEF,OAAfiB,EAAqB,CACvB,IAAMG,EAAa,eACdhW,EADc,CAEjB1N,kBAAkB,EAClBG,aAAc,EACdC,cAAe,IAEjBqjB,GAAkCC,EAAe,WAAYn7B,GAE7D,IAAMo7B,EAAa,eACdjW,EADc,CAEjB1N,kBAAkB,IAEpByjB,GAAkCE,EAAe,MAAOp7B,QACnD,GAAmB,aAAfg7B,EAA2B,CACpC,IAAMK,EAAa,eACdlW,EADc,CAEjB1N,kBAAkB,IAEpByjB,GAAkCG,EAAe,KAAMr7B,GAEvD,IAAMs7B,EAAa,eACdnW,EADc,CAEjB1N,kBAAkB,IAEpByjB,GAAkCI,EAAe,MAAOt7B,QACnD,GAAmB,QAAfg7B,EAAsB,CAC/B,IAAMO,EAAa,eACdpW,EADc,CAEjB1N,kBAAkB,IAEpByjB,GAAkCK,EAAe,KAAMv7B,GAEvD,IAAMw7B,EAAa,eACdrW,EADc,CAEjB1N,kBAAkB,EAClBG,aAAc,EACdC,cAAe,IAEjBqjB,GAAkCM,EAAe,WAAYx7B,KAK7Dk7B,GAAoC,SAAC/V,EAAgB6V,EAAuCh7B,GAChG,GAAwB,IAApBmlB,EAAE5N,cAOJ,OANA9G,IAAe,GACfqoB,IAAc,QACV94B,GACFA,EAAEsY,OAAOmjB,YAMbC,GAAkBtmB,0BAA0B/Q,EAAM8gB,GAAGplB,MAAK,SAAAsQ,GAKxD,OAJIrQ,GACFA,EAAEsY,OAAOmjB,WAGJT,GACL,IAAK,KACH7B,EAAoB9oB,EAAIsQ,QACxB0Y,EAAgBhpB,EAAIjB,YACpBmqB,EAAiBlpB,EAAI4Q,aACvB,MACA,IAAK,WACHwY,EAAyBppB,EAAIsQ,QAC7BgZ,EAAqBtpB,EAAIjB,YACzByqB,EAAsBxpB,EAAI4Q,aAC5B,MACA,IAAK,MACH8Y,EAAqB1pB,EAAIsQ,QACzBsZ,EAAiB5pB,EAAIjB,YACrB+qB,GAAkB9pB,EAAI4Q,aAI1BxQ,IAAe,GACfqoB,IAAc,OAKZ6C,GAAe,SAAC5b,EAAsB6b,GAC1CjB,GAAe5a,EAAGe,iBAClB8Z,GAAiBgB,GACjBnB,IAAkB,IAmCdoB,GAAkB,SAACC,GACvB1B,GAAW0B,IAGY,OAAhBA,GAAoD,IAA5B5C,EAAiBv0B,QACzB,aAAhBm3B,GAA+D,IAAjCtC,EAAsB70B,QACpC,QAAhBm3B,GAAsD,IAA7BhC,EAAkBn1B,UAEhD8L,IAAe,GACfsoB,GAAkBt3B,EAAKmN,UAAWlD,GAAQowB,OAAav6B,KAK3D,OAAKE,GAASA,EAAKmN,WAAuC,IAA1BnN,EAAKmN,UAAUjK,OAK7C,kBAAC,IAAD,CAASvE,GAAG,iBACV,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAY2K,KAAK,MACf,kBAAC,IAAD,CAAYuB,KAAK,SACf,kBAAC,IAAD,OAEF,kBAAC,IAAD,CAAUA,KAAK,SAAf,YACA,kBAAC,IAAD,CAAYA,KAAK,OACf,kBAAC,IAAD,CAAWrB,QAAS,WAClB0vB,GAAe,MACfC,GtCrQ0B,SACtCn5B,GAMA,IAJA,IAAI4Y,EAAW5Y,EAAKmN,UAAU,GAC1BmL,EAAOtY,EAAKmN,UAAU,GAAGuK,YAAY,GACrC1P,EAAWhI,EAAKmN,UAAU,GAAGuK,YAAY,GAAGC,UAAU,GACtD2iB,GAAmB,EACdjxB,EAAI,EAAIA,EAAIrJ,EAAKmN,UAAUjK,SAAWo3B,EAAkBjxB,IAC/D,IAAK,IAAIkxB,EAAI,EAAGA,EAAIv6B,EAAKmN,UAAU9D,GAAGqO,YAAYxU,SAAWo3B,EAAkBC,IAC7E,IAAK,IAAIC,EAAI,EAAGD,EAAIv6B,EAAKmN,UAAU9D,GAAGqO,YAAY6iB,GAAG5iB,UAAUzU,SAAWo3B,EAAkBE,IACtFx6B,EAAKmN,UAAU9D,GAAGqO,YAAY6iB,GAAG5iB,UAAU6iB,GAAGniB,cAChDO,EAAW5Y,EAAKmN,UAAU9D,GAC1BiP,EAAOtY,EAAKmN,UAAU9D,GAAGqO,YAAY6iB,GACrCvyB,EAAWhI,EAAKmN,UAAU9D,GAAGqO,YAAY6iB,GAAG5iB,UAAU6iB,GACtDF,GAAmB,GAM3B,IAAM/gB,EAAmB,CAAEX,WAAU5Q,YAEjCyyB,EAAgBtjB,GAAYqB,QAC5BxY,EAAKuN,OAASlF,EAAKiS,eAAiBta,EAAKuN,OAASlF,EAAKkS,cAEzDkgB,EAAgBtjB,GAAYoB,SACnBvY,EAAKuN,OAASlF,EAAK+P,QAAUE,EAAKJ,UAAYpL,GAAmBqL,oBAAsBrL,GAAmBqL,mBACnHsiB,EAAgBtjB,GAAYoB,UAG9B,IAAMkB,EAAqBC,GAA0B1Z,EAAMuZ,EAAkBvZ,EAAKsN,WAAYmtB,GAAe,GACvG9gB,EAAmBC,GAAwB5Z,EAAMuZ,EAAkBvZ,EAAKsN,YAY9E,MAVa,CACXwM,WAAY,GACZC,eAAe,EACfC,YAAY,EACZC,KAAM,GACNC,MAAO9C,GAAc+C,KACrBC,oBAAqBT,EACrBU,sBAAuBZ,GsC6NIihB,CAAyB16B,IAC1Cg5B,IAAkB,KAElB,kBAAC,IAAD,CAASluB,KAAM6gB,KAAKriB,KAAK,KAAKuB,KAAK,eAErC,kBAAC,IAAD,CAAWrB,QAAS,kBAAMqvB,IAAmB,KAC3C,yBAAKjtB,UAAWsrB,GAAhB,QACA,kBAAC,IAAD,CAASpsB,KAAM6vB,KAAQrxB,KAAK,MAAMuB,KAAK,kBAM/C,kBAAC,IAAD,CACEvB,KAAK,KACLhI,MAAOi2B,IAEP,kBAAC,IAAD,CACEjuB,KAAK,KACLhI,MAAM,KACNkI,QAAS,kBAAM4wB,GAAgB,OAC/B7wB,QAAqB,OAAZguB,IAJX,MAQA,kBAAC,IAAD,CACEjuB,KAAK,KACLhI,MAAM,WACNkI,QAAS,kBAAM4wB,GAAgB,aAC/B7wB,QAAqB,aAAZguB,IAJX,YAQA,kBAAC,IAAD,CACEjuB,KAAK,KACLhI,MAAM,MACNkI,QAAS,kBAAM4wB,GAAgB,QAC/B7wB,QAAqB,QAAZguB,IAJX,QASA,kBAAC,GAAD,CAAajhB,UAAW1E,GAAa3H,GAAOoH,MAAOrR,EAAKmN,UAAU,GAAGjL,SAASyd,gBAAiB3f,EAAKmN,UAAU,GAAGjL,SAAS0d,cAAerJ,aA5F1H,SAACtF,GACpB,IAAMooB,EAAS,eACVpvB,GADU,CAEboH,MAAOJ,EACPS,IAAKS,aAAQlB,EAAM,KAGrBmoB,GAAUC,GACV/B,GAAkBt3B,EAAKmN,UAAWksB,EAAW9B,QAAQz3B,MAqFjD,kBAAC,IAAD,KACCs3B,EAAUpS,mBAETjW,KAAgB+pB,IAA0B,OAAZvB,IAAgD,IAA5BE,EAAiBv0B,QACnE,kBAAC,GAAD,QAGC6L,IAAe+pB,KAA2B,OAAZvB,IAAoBE,EAAiBv0B,OAAS,GAC7E,kBAAC,GAAD,CACEgc,OAAQuY,EACRhX,SAAU8W,GACVriB,MAAOyiB,EACPnY,YAAaqY,EACb73B,KAAMA,EACN4c,OAAQsd,MAIVnrB,KAAgB+pB,IAA0B,aAAZvB,IAA2D,IAAjCQ,EAAsB70B,QAC9E,kBAAC,GAAD,QAGC6L,IAAe+pB,KAA2B,aAAZvB,IAA0BQ,EAAsB70B,OAAS,GACxF,kBAAC,GAAD,CACEgc,OAAQ6Y,EACRtX,SAAU8W,GACVriB,MAAO+iB,EACPzY,YAAa2Y,EACbn4B,KAAMA,EACN4c,OAAQsd,MAIVnrB,KAAgB+pB,IAA0B,QAAZvB,IAAkD,IAA7Bc,EAAkBn1B,QACrE,kBAAC,GAAD,QAGC6L,IAAe+pB,KAA2B,QAAZvB,IAAqBc,EAAkBn1B,OAAS,GAC/E,kBAAC,GAAD,CACEgc,OAAQmZ,EACR5X,SAAU8W,GACVriB,MAAOqjB,EACP/Y,YAAaiZ,GACbz4B,KAAMA,EACN4c,OAAQsd,MAGVnrB,IAAe+pB,KACf,oCACE,yBAAK3a,MAAO,CAACyc,UAAW,UACxB,kBAAC,KAAD,CAAUnH,OAAQ,GAAItI,MAAO,MAAO,6BACpC,kBAAC,GAAD,CAAmBuL,UAAuB,OAAZa,KAC9B,kBAAC,GAAD,CAAmBb,UAAuB,OAAZa,KAC9B,kBAAC,GAAD,CAAmBb,UAAuB,OAAZa,OAMnCN,EAAMT,eAEP,kBAAC,IAAD,CACEluB,OAAQswB,GACR9vB,aAAc,kBAAM+vB,IAAmB,KACvC,kBAAC,GAAD,CACE5uB,OAAQA,GACRjK,KAAMA,EACNqK,eApJqB,SAACqZ,EAAgBgB,GAC5C0U,GAAU1V,GACVtf,QAAQzD,IAAI,mBAAoB+jB,GAChCyS,EAAuBzS,EAAiB,iBAAmB,sBAC3DmU,IAAmB,GACnBvB,GAAkBt3B,EAAKmN,UAAWuW,EAAG6T,QAASz3B,IAgJxCwI,OAAQswB,GACRrW,cAAe,kBAAMsW,IAAmB,OAI5C,kBAAC,IAAD,CACEvwB,OAAQywB,GACRjwB,aAAc,kBAAMkwB,IAAkB,KAEtC,kBAAC,GAAD,CACE1wB,OAAQywB,GACR/4B,KAAMA,EACNuiB,cAAe,kBAAMyW,IAAkB,IACvC3uB,eAAgB,SAACwwB,GAAD,OAxLD,SAACA,GAClBA,GACF5D,EAAMV,UAAUsE,GAGlBvD,GAAkBt3B,EAAKmN,UAAWlD,GAAQstB,QAASz3B,GACnDk5B,IAAkB,GAkLsB8B,CAAeD,IACjDnnB,gBAAiBulB,GACjBtb,cAAeA,OA5Id,mC,mCHtRCyY,O,iCAAAA,I,uBAAAA,I,sBAAAA,Q,KIqBZ,ICrBY2E,GCAAC,GF6GGC,GAxFiD,SAAC,GAAqC,IAAnCj7B,EAAkC,EAAlCA,KAAMqK,EAA4B,EAA5BA,eAAgB6wB,EAAY,EAAZA,OAAY,EACjE/zB,mBAAS,IADwD,mBAC5FmkB,EAD4F,KACjFC,EADiF,KAE7F4P,EAAe,CAAEh6B,IAAK,SAAUU,KAAM,GAAIu5B,UAAWpuB,GAAUquB,mBA0CrE,OAvCA/zB,qBAAU,WACR,GAA8B,IAA1BtH,EAAKmN,UAAUjK,QAAiBg4B,EAAOI,uBAA3C,CAIA,IAAMlgB,EAAcpb,EAAKmN,UAAUlD,QAAO,SAAAwN,GAAC,OAAIA,EAAE9Y,KAAOu8B,EAAOI,uBAAwBxd,cAAY,GAAG5b,SAChGqnB,EAAsB,GAY5B,OAVI2R,EAAOK,yBAAyBr4B,OAAS,GAC3Cg4B,EAAOK,yBAAyB,GAAGlM,YAAYtxB,KAAI,SAAA+tB,GACjD,OAAOvC,EAAO7nB,KAAK,CACjBP,IAAK2qB,EAAEva,WACP1P,KAAM8P,GAA4Bma,GAClCsP,UAAWpuB,GAAU8W,eAKnB1I,EAAYrO,yBAClB,KAAKA,GAAwByuB,KAC3BjS,EAAO7nB,KAAK,CAAEP,IAAK,oBAAqBU,KAAM,cAAeu5B,UAAWpuB,GAAUquB,oBAClF9R,EAAO7nB,KAAK,CAAEP,IAAK,kBAAmBU,KAAM,gBAAiBu5B,UAAWpuB,GAAUyuB,kBAClF,MAEF,KAAK1uB,GAAwB2uB,KACzBnS,EAAO7nB,KAAK,CAAEP,IAAK,kBAAmBU,KAAM,gBAAiBu5B,UAAWpuB,GAAUyuB,kBAClF,MAEJ,KAAK1uB,GAAwB4uB,OACzBpS,EAAO7nB,KAAK,CAAEP,IAAK,oBAAqBU,KAAM,cAAeu5B,UAAWpuB,GAAUquB,oBAOxF9P,EAAahC,MACZ,CAAC2R,EAAQl7B,IAGV,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAY6K,KAAK,SACf,kBAAC,IAAD,CAAWrB,QAAS,kBAAMa,EAAe8wB,KACrC,kBAAC,IAAD,CAASrwB,KAAMC,IAAgBzB,KAAK,KAAKuB,KAAK,gBAGpD,kBAAC,IAAD,uBAMJ,kBAAC,IAAD,CAAYG,MAAM,iBAEfsgB,EAAUvtB,KAAI,SAAAqT,GAAG,OAChB,kBAAC,IAAD,CACExF,UAAU,eACVwE,OAAO,QACPjP,IAAKiQ,EAAIjQ,IACT6O,MAAM,YACNxG,QAAS,WAAOa,EAAe+G,KAE9BA,EAAIvP,UAMX,kBAAC,IAAD,KACE,kBAAC,IAAD,CACE+J,UAAU,gBACVwE,OAAO,QACPJ,MAAM,WACNxG,QAAS,kBAAMa,EAAe8wB,KAJhC,aG5BO,GAzDc,SAAMv4B,GAAN,SAAArD,EAAAC,OAAA,kEAAAD,EAAA,MACdsF,EAAcjC,EAAd,yCAAuDA,EAAKwD,SAA5D,gBAA4ExD,EAAKyD,aADnE,8EAyDd,GApDC,SAAMzD,EAAuBwR,EAAoBI,GAAjD,eAAAjV,EAAAC,OAAA,uDACR+D,EADQ,6CACwC6Q,EADxC,YACsDI,EADtD,gBACmE5R,EAAKwD,SADxE,gBACwFxD,EAAKyD,WAD7F,WAAA9G,EAAA,MAEDsF,EAAejC,EAAMW,EAAS,KAF7B,8EAoDD,GA9CE,SAAMX,EAAuBkS,GAA7B,eAAAvV,EAAAC,OAAA,uDACTo8B,EAAoB,CACxBnM,cAAe3a,EACf+mB,eAAgB,KAChBtqB,WAAY,MAJC,WAAAhS,EAAA,MAOFsF,EACXjC,EADW,kDAEgCA,EAAKwD,SAFrC,gBAEqDxD,EAAKyD,WACrEu1B,IAVa,8EA8CF,GAhCa,SAAMh5B,EAAuBwR,EAAoBI,EAAsBM,GAAvE,iBAAAvV,EAAAC,OAAA,uDACpB+D,EADoB,4CAC2B6Q,EAD3B,YACyCI,EADzC,gBACsD5R,EAAKwD,SAD3D,gBAC2ExD,EAAKyD,WACpGu1B,EAAoB,CACxBnM,cAAe3a,EACf+mB,eAAgB,KAChBtqB,WAAY,MALY,WAAAhS,EAAA,MAQbsF,EAAejC,EAAMW,EAASq4B,IARjB,8EAgCb,GApBI,SAAMh5B,EAAuBk5B,EAA2BC,EAAkCX,EAAsBxmB,GAAhH,iBAAArV,EAAAC,OAAA,uDACX+D,EADW,oDAC4CX,EAAKwD,SADjD,gBACiExD,EAAKyD,WACjF21B,EAAoB,CACxBC,aAAcH,EAAWzc,gBACzB6c,aAAcH,EAAaA,EAAY1c,gBAAkB,KACzD8c,gBAAiBvnB,EACjBwmB,aANe,WAAA77B,EAAA,MASJsF,EAAejC,EAAMW,EAASy4B,IAT1B,8EAoBJ,GAPE,SAAMp5B,EAAuBk5B,EAA2BC,GAAxD,iBAAAx8B,EAAAC,OAAA,uDACT08B,EAAgBH,EAAcA,EAAW1c,gBAAkB,GAC3D9b,EAFS,8CAEwCu4B,EAAWzc,gBAFnD,YAEsE6c,EAFtE,gBAE0Ft5B,EAAKwD,SAF/F,gBAE+GxD,EAAKyD,WAFpH,WAAA9G,EAAA,MAIFsF,EAAejC,EAAMW,EAAS,KAJ5B,+E,SF9DLw3B,O,qBAAAA,I,2CAAAA,I,mCAAAA,I,6CAAAA,I,2DAAAA,I,+DAAAA,I,sDAAAA,Q,cCAAC,O,qBAAAA,I,iEAAAA,I,qDAAAA,I,2DAAAA,I,+DAAAA,I,8CAAAA,Q,gBEqFGoB,GAzEqC,SAAC,GAAoC,IAAnCtS,EAAkC,EAAlCA,SAAUiI,EAAwB,EAAxBA,KAAM3W,EAAkB,EAAlBA,YAAkB,EAC5CjU,wBAASrH,GADmC,mBAC/EiV,EAD+E,KAChEsnB,EADgE,KAqBtF,OACE,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAW/yB,KAAK,OACd,kBAAC,IAAD,KACE,kBAAC,IAAD,oBAGJ,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQsC,UAAU,QAAQub,KAAK,MAAM/L,EAAY6S,qBAEnD,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQ9G,KAAK,MACb,kBAAC,IAAD,CAAQA,KAAK,KACX,kBAAC,IAAD,CACEK,YAAY,cACZ/b,KAAK,SACLG,UAAU,QACV0wB,YAAY,MACZC,YAAY,EACZj7B,MAAK,OAAEyT,QAAF,IAAEA,OAAF,EAAEA,EAAe7B,WACtB0D,YAAa,SAACrY,GAlC5B,IAA+BgD,KAkC0BhD,EAAEsY,OAAOvV,OAzBhE+6B,EAAiBpV,WAAW1lB,SAPJzB,IAAlBiV,GACFsnB,OAAiBv8B,OAoCb,kBAAC,IAAD,CAAQqnB,KAAK,SAInB,kBAAC,IAAD,KACE,kBAAC,IAAD,CACE/W,OAAO,QACP5G,QAnDU,WAChBuoB,EAAKhd,IAmDCnJ,UAAU,mBAHZ,aAQA,kBAAC,IAAD,CACEwE,OAAO,QACPxE,UAAU,gBACVpC,QAASsgB,GAHX,aCRO0S,GAnD6D,SAAC,GAAmE,IAAlEtB,EAAiE,EAAjEA,OAAQ9f,EAAyD,EAAzDA,YAAaqhB,EAA4C,EAA5CA,cAAelQ,EAA6B,EAA7BA,cAAemQ,EAAc,EAAdA,SAAc,EAC7Gv1B,oBAAS,GADoG,mBACtIuE,EADsI,KAC5HixB,EAD4H,KAGvIC,EACJ,+BAuBF,OApBAt1B,qBAAU,WACR,GAAI4zB,EAAO2B,cAAe,CACxB,IAAMC,EAAW5B,EAAOI,uBAAwBtd,WAC5C+e,EAAW7B,EAAOI,uBAAwBlM,MACzC2N,IACHA,GAAY,GAKZJ,EAFEG,IAAaL,GAGNM,IAAaxQ,MAOzB,CAAC2O,EAAO2B,cAAe3B,EAAOI,uBAAwBmB,EAAelQ,KAEnEnR,EAAY4hB,yBACd5hB,EAAY6hB,0CAIV/B,EAAO2B,cAKV,yBAAKjxB,UAAU,2BACb,kBAAC,IAAD,CACEA,UAAU,gBACVF,SAAUA,EACVsE,MAAM,YACNI,OAAO,QACP5G,QAASkzB,GALX,WATKE,GCoZIM,GAna+B,SAAC,GAAgC,IAA/BC,EAA8B,EAA9BA,SAAUC,EAAoB,EAApBA,cAChDx6B,EAASmE,IAAMuD,WAAWxD,GAA1BlE,KACA5C,EAAS+G,IAAMuD,WAAW6D,IAA1BnO,KAFoE,EAG9CmH,mBAAS,IAHqC,mBAGrEk2B,EAHqE,KAG5DC,EAH4D,OAIlCn2B,mBAAS,GAJyB,mBAIrEs1B,EAJqE,KAItDc,EAJsD,OAKtBp2B,oBAAS,GALa,mBAKrEq2B,EALqE,KAKhDC,EALgD,OAM9Ct2B,mBAAS,IANqC,mBAMrEslB,EANqE,KAM5DC,EAN4D,OAOlCvlB,mBAAS,MAPyB,mBAOrEolB,EAPqE,KAOtDC,EAPsD,OAQpCrlB,mBAA+C,eARX,mBAQrEu2B,EARqE,KAQvDC,EARuD,OAStCx2B,mBAAS,IAT6B,mBASrEiU,EATqE,KASxDgL,EATwD,OAUhBjf,oBAAS,GAVO,mBAUrEy2B,EAVqE,KAU7CC,EAV6C,OAWtC12B,oBAAS,GAX6B,mBAWrE4H,EAXqE,KAWxDC,EAXwD,OAYhC7H,mBAAS,kBAZuB,mBAYrE22B,EAZqE,KAYrDC,EAZqD,OAapC52B,mBAAS,IAb2B,mBAarE0zB,EAbqE,KAavDmD,GAbuD,QAc1C72B,oBAAS,GAdiC,qBAcrEovB,GAdqE,MAc1D0H,GAd0D,SAelC92B,mBAAS,CAAC+2B,MAAM,EAAO11B,OAAQ,QAASN,QAAS,KAff,qBAerEi2B,GAfqE,MAetDC,GAfsD,SAgBhDj3B,mBAAS,MAhBuC,qBAgBrE+zB,GAhBqE,MAgB7DmD,GAhB6D,SAiB1Bl3B,oBAAS,GAjBiB,qBAiBrEm3B,GAjBqE,MAiBlDC,GAjBkD,MAoB5Ej3B,qBAAU,WACRk3B,OAGC,CAACx+B,EAAMo9B,IAGV91B,qBAAU,WACR,GAAK4zB,IAAWl7B,GAASA,EAAKmN,WAAuC,IAA1BnN,EAAKmN,UAAUjK,QAItDg4B,GAAOuD,cAAe,CACxB,IAEIC,EASA5B,EAXE6B,EAAoBnd,GAAYS,OAAOiZ,GAAO0D,qBAAqB7gC,KAAI,SAAA6Z,GAAC,OAAIA,EAAEkG,eAC9E+gB,EAAgBrd,GAAYS,OAAOiZ,GAAO0D,qBAAqB7gC,KAAI,SAAA6Z,GAAC,OAAIA,EAAEmG,iBAG9E2gB,EADEC,EAAkBz7B,OAAS,EACrBg4B,GAAO0D,qBAAqB7gC,KAAI,SAAA6Z,GAAM,MAAO,CAAEjZ,GAAIiZ,EAAEoG,WAAYnc,KAAM+V,EAAEknB,2CACxED,EAAc37B,OAAS,EACxBg4B,GAAO0D,qBAAqB7gC,KAAI,SAAA6Z,GAAM,MAAO,CAACjZ,GAAIiZ,EAAEoG,WAAYnc,KAAM+V,EAAEmnB,qCAExE7D,GAAO0D,qBAAqB7gC,KAAI,SAAA6Z,GAAM,MAAO,CAACjZ,GAAIiZ,EAAEoG,WAAYnc,KAAM+V,EAAEyF,iBAI9E6d,GAAO2B,eACTC,EAAW5B,GAAOI,uBAAwBtd,WAC1Cuf,EAAiBT,IACR4B,EAAMx7B,OAAS,GACxB45B,EAAW4B,EAAM,GAAG//B,GACpB4+B,EAAiBT,IAEjBA,EAAW,EAGb,IAAMkC,EAAY9D,GAAO2B,cACrB3B,GAAOI,uBAAwBxd,WAClB,IAAbgf,EACI98B,EAAKmN,UAAUlD,QAAO,SAAAwN,GAAC,OAAIA,EAAEC,YAAYF,SAAQ,SAAAnF,GAAC,OAAIA,EAAEsF,UAAUH,SAAQ,SAAAI,GAAC,OAAIA,EAAEjZ,KAAOm+B,WAAY,GAAGn+B,GACvGqB,EAAKmN,UAAU,GAAGxO,GAEpByc,EAAcpb,EAAKmN,UAAUlD,QAAO,SAAAwN,GAAC,OAAIA,EAAE9Y,KAAOqgC,KAAU,GAAG98B,SACrEkkB,EAAehL,GAEXA,EAAY6jB,gCACX7jB,EAAYrO,0BAA4BA,GAAwBoN,MAChE+gB,GAAOI,uBAAwBjM,aAAe6L,GAAOI,uBAAwBjM,YAAYnsB,OAAS,GACrGy6B,EAAgBzC,GAAO2B,eAAiB3B,GAAOgE,kBAC3C,YACA,eAEJvB,EAAgB,QAGlBL,EAAWoB,GACXS,GAAQrC,MAGT,CAAC98B,EAAMk7B,KAGV,IAAMsD,GAAsB,WAC1BY,GAAkCx8B,GAAMtE,MAAK,SAAA4F,GAC3Cm6B,GAAUn6B,OAKTi7B,GAAU,SAACE,GACd,IAAKnE,GACH,OAAQ,EAGV,IAAM8D,EAAY9D,GAAO2B,cACrB3B,GAAOI,uBAAwBxd,WAC/B9d,EAAKmN,UAAUlD,QAAO,SAAAwN,GAAC,OAAIA,EAAEC,YAAYF,SAAQ,SAAAnF,GAAC,OAAIA,EAAEsF,UAAUH,SAAQ,SAAAI,GAAC,OAAIA,EAAEjZ,KAAO0gC,WAAqB,GAAG1gC,GAIpH,GAHoBqB,EAAKmN,UAAUlD,QAAO,SAAAwN,GAAC,OAAIA,EAAE9Y,KAAOqgC,KAAU,GAAG98B,SAGrD86B,yBACZ9B,GAAOoE,gBAAgBD,IACvBnE,GAAOoE,gBAAgBD,GAAmBn8B,OAAS,EAAG,CACxDu6B,GAAuB,GACvB,IAAIhR,EAAUyO,GAAOoE,gBAAgBD,GAAmBthC,KAAI,SAAA4uB,GAAM,MAAO,CAAEhuB,GAAIguB,EAAEyC,MAAOvtB,KAAM8qB,EAAE4S,YAChG9S,EAAQvL,QAAQ,CAACviB,IAAK,EAAGkD,KAAM,SAC/B6qB,EAAWD,QAGXgR,GAAuB,GAGzB,IAAIjpB,GAAS,EAmBb,OAlBI0mB,GAAO2B,cAEProB,EADE0mB,GAAOI,uBAAwBlM,MACzB8L,GAAOI,uBAAwBlM,OAC9B8L,GAAOI,uBAAwBlM,OAC/B,GAIF8L,GAAOoE,gBAAgBD,IAAsBnE,GAAOoE,gBAAgBD,GAAmBn8B,OAAS,IAGvGsR,EADE0mB,GAAOK,0BAA4BL,GAAOK,yBAAyB,IAAML,GAAOK,yBAAyB,GAAGnM,MACtG8L,GAAOK,yBAAyB,GAAGnM,OAElC,GAIb5C,EAAiBhY,GACVA,GAeH5L,GAAY,SAACJ,EAAgBN,GACjCk2B,GAAiB,CAACF,MAAM,EAAM11B,SAAQN,aAoClCs3B,GAAW,SAAC1qB,GACZwpB,IACFC,IAAqB,GAGvBR,EAAkB,mBAClB/uB,GAAe,GAEfowB,GAAsBx8B,EAAMkS,GAAexW,MAAK,SAAA0F,GAC9CgL,GAAe,GACuB,IAAlChL,EAASy7B,sBACXzB,GAAgB,kBAAoB9sB,aAAOI,aAAStN,EAAS07B,cAAc7hB,UAAW,YACtFogB,IAAa,GACbd,IACAqB,MAEA51B,GAAU,sBAAD,+BAAgD5E,EAAS27B,cAuFxE,OAAK3/B,GAASk7B,GAKZ,oCACE,kBAAC,IAAD,CACE5yB,OAAQyG,EACRjG,aAAc,kBAAMkG,GAAe,IACnCW,QAAQ,OACRzH,QAAS41B,IAGX,yBAAKlyB,UAAU,kBAEZsvB,GAAO0D,sBAAwB1D,GAAO0D,qBAAqB17B,OAAS,GACnE,kBAAC,IAAD,KACE,kBAAC,IAAD,iBACA,kBAAC,IAAD,CACE2gB,UAAU,eACVjN,YAAa,SAACrY,GAAD,OA3KCqhC,EA2KuBrhC,EAAEsY,OAAOvV,MA1KxDi8B,EAAiBqC,QACjBT,GAAQS,GAFe,IAACA,GA4Kdl0B,YAAewvB,GAAO2B,eAAiB3B,GAAO2E,kBAAsB3E,GAAO2B,eAAiB3B,GAAO4E,iBAAoB1kB,EAAYgb,qBAAuBA,GAAmB2J,eAC7Kz+B,MAAOm7B,GAEJY,EAAQt/B,KAAI,SAAAumB,GAAG,OACd,kBAAC,IAAD,CAAiBnjB,IAAKmjB,EAAI3lB,GAAI2C,MAAOgjB,EAAI3lB,IAAK2lB,EAAIziB,WAM3D27B,GACC,kBAAC,IAAD,KACE,kBAAC,IAAD,aACA,kBAAC,IAAD,CACE3Z,UAAU,eACVjN,YAAa,SAACrY,GAAD,OArLJqhC,EAqLuBrhC,EAAEsY,OAAOvV,WApLnDkrB,EAAiBoT,GADC,IAACA,GAsLTl0B,YAAewvB,GAAO2B,eAAiB3B,GAAO2E,kBAAsB3E,GAAO2B,eAAiB3B,GAAO4E,iBAAoB1kB,EAAYgb,qBAAuBA,GAAmB2J,eAC7Kz+B,MAAOirB,GAENE,EAAQ1uB,KAAI,SAAA4uB,GAAC,OACZ,kBAAC,IAAD,CAAiBxrB,IAAKwrB,EAAEhuB,GAAI2C,MAAOqrB,EAAEhuB,IAAKguB,EAAE9qB,WAMpD,kBAAC,GAAD,CACEq5B,OAAQA,GACR9f,YAAaA,EACbqhB,cAAeA,EACflQ,cAAeA,EACfmQ,SArEc,WACpBqB,EAAkB,gBAClB/uB,GAAe,GAEfowB,GAAiCx8B,EAAM65B,EAAelQ,GAAejuB,MAAK,SAAA0F,GACxEgL,GAAe,GACXhL,EAASg8B,0BAA4Bh8B,EAASi8B,qBAChDjC,GAAgB,YAChBC,IAAa,GACbd,IACAqB,MAEA51B,GAAU,mBAAD,UAAwB5E,EAASk8B,eAAjC,YAAmDl8B,EAASm8B,yBA2DnEjF,GAAO2B,eACP,yBAAKjxB,UAAU,4BACb,kBAAC,IAAD,CACEA,UAAU,iBACVpC,QAjIW,WACrBu0B,EAAkB,kBAClB/uB,GAAe,GAEfowB,GAAqBx8B,EAAM65B,EAAelQ,GAAejuB,MAAK,SAAA0F,GAC5DgL,GAAe,GACsB,IAAjChL,EAASo8B,qBACXpC,GAAgB,iBAAmB9sB,aAAOI,aAAStN,EAASq8B,aAAarjB,YAAa,YACtFihB,IAAa,GACbd,IACAqB,MAEA51B,GAAU,qBAAD,8BAA8C5E,EAAS27B,cAsH1Dj0B,UAAWwvB,GAAO4E,gBAElB,kBAAC,IAAD,CAASx2B,KAAK,KAAK6U,MAAO,CAACoP,aAAc,OAAQziB,KAAMuT,OALzD,cASH6c,GAAO2B,eACN,yBAAKjxB,UAAU,6BACb,kBAAC,IAAD,CACEA,UAAU,kBACVF,UAAWwvB,GAAO2E,gBAClBzvB,OAAO,QACP5G,QAxJY,WAClB4R,EAAY6S,mBAEdsQ,IAAqB,GAErBiB,OA+IM,aAMY,kBAAC,IAAD,CAASl2B,KAAK,KAAK6U,MAAO,CAACqV,YAAa,OAAQ1oB,KAAMuT,QAGhD,SAAjBqf,GACC,kBAAC,IAAD,CACEl0B,QAnIa,WACzB,GAAqB,SAAjBk0B,GAA4BxC,GAIhC,MAAqB,cAAjBwC,GACFK,EAAkB,mBAClB/uB,GAAe,QAEfowB,GACEx8B,EACAs4B,GAAOI,uBACPJ,GAAOK,yBAAyBr4B,OAAS,EAAIg4B,GAAOK,yBAAyB,GAAK,MAAMj9B,MAAK,SAAA0F,GAC3FgL,GAAe,GACXhL,EAASg3B,uBAAyBA,GAAqBsF,SACzDtC,GAAgB,kBAAoB9sB,aAAOI,aAAStN,EAASyN,UAAW,YACxEwsB,IAAa,GACbd,IACAqB,MAEA51B,GAAU,yBAA0B5E,EAAS27B,kBAOjDvkB,EAAYrO,0BAA4BA,GAAwBoN,MAC/D+gB,GAAOI,uBAAwBjM,aAAe6L,GAAOI,uBAAwBjM,YAAYnsB,OAAS,EACrG26B,GAA0B,GAE1Bj1B,GAAU,iBAAkB,yDAqGlBwH,OAAO,QACPxE,UAAU,eACVF,UAAWwvB,GAAO2E,iBAElB,kBAAC,IAAD,CAAS/0B,KAAMy1B,OACd7C,KAQX,kBAAC,IAAD,CACMp1B,OAAQiuB,GACRruB,QAAS2yB,EACTjrB,SAAU,IACV9G,aAAc,kBAAMm1B,IAAa,MAGvC,kBAAC,IAAD,CACE31B,OAAQs1B,EACRvR,SAAS,wBAET,kBAACmU,GAAD,CACExgC,KAAMA,EACNk7B,OAAQA,GACR7wB,eAAgB,SAACqqB,GAAD,OAjPWtjB,EAiP8BsjB,OAhP1DwG,KAIL2C,GAA0B,GACV,WAAZzsB,EAAIjQ,MAIR48B,EAAkB,qBAClB/uB,GAAe,GAEfowB,GACEx8B,EACAs4B,GAAOI,uBACPJ,GAAOK,yBAAyB,GAChCnqB,EAAIgqB,UACJhqB,EAAIgqB,YAAcpuB,GAAU8W,UAAY1S,EAAIjQ,SAAMrB,GAAWxB,MAAK,SAAA0F,GAChEgL,GAAe,GACXhL,EAAS+2B,yBAA2BA,GAAuBuF,SAC7DtC,GAAgB,oBAAsB9sB,aAAOI,aAAStN,EAASuN,YAAa,YAC5E0sB,IAAa,GACbd,IACAqB,MAEA51B,GAAU,wBAAD,iCAAoD5E,EAAS27B,gBA1B5C,IAACvuB,MAqP/B,kBAAC,IAAD,CACEib,SAAS,iBACT/jB,OAAQg2B,GACRx1B,aAAc,WAAOy1B,IAAqB,KAE1C,kBAAC,GAAD,CACEzU,SAAU,WAAOyU,IAAqB,IACtCxM,KAAMyN,GACNpkB,YAAaA,KAIjB,kBAAC,IAAD,CACE9S,OAAQ61B,GAAcD,KACtBp1B,aAAc,kBAAMs1B,GAAiB,eAAID,GAAL,CAAoBD,MAAM,MAC9D11B,OAAQ21B,GAAc31B,OACtBN,QAASi2B,GAAcj2B,QACvBa,QAAS,CAAC,SA9HP,4C,OChSX,IAqCe03B,GArCmD,SAAC,GAA6D,IAblGpvB,EAAoBK,EAamB4E,EAA0D,EAA1DA,UAAW4T,EAA+C,EAA/CA,QAASwW,EAAsC,EAAtCA,gBAAiBC,EAAqB,EAArBA,gBAClGrY,EAA0B,OAAdhS,GAAkC,OAAZ4T,EAClC0W,EAAqBtY,EAAa,IAfQ5W,EAe6BwY,GAfjD7Y,EAesCiF,IAdnD5E,EAIXL,EAAMmB,aAAed,EAAIc,WACpBtB,aAAOG,EAAO,SAASxF,cAAgB,MAAQqF,aAAOiB,aAAQT,GAAM,GAAI,SAAS7F,cAGnFqF,aAAOG,EAAO,SAASxF,cAAgB,MAAQqF,aAAOiB,aAAQT,GAAM,GAAI,KAPtE,KAeT,OACE,yBAAK9F,UAAU,WACb,yBAAKA,UAAU,OACb,4BACEpC,QAASm3B,EACT/0B,UAAU,QACVzK,KAAM,GACN,kBAAC,IAAD,CAASmI,KAAK,MAAMwB,KAAM0L,QAE5B,yBAAK5K,UAAU,wBACb,yBAAKA,UAAU,6BACb,yBAAKA,UAAU,mBAAoBg1B,GACnC,kBAAC,IAAD,CACEt3B,KAAK,KACLwB,KAAMgM,KACNsb,OAAQ9J,MAId,4BACE9e,QAASk3B,EACT90B,UAAU,QACVzK,IAAK,GACL,kBAAC,IAAD,CACEmI,KAAK,MACLwB,KAAMiM,WCfH,IACb8pB,4BAPkC,SAAOj+B,EAAuByU,EAAoBpG,GAAlD,eAAA1R,EAAAC,OAAA,uDAC5BshC,EAAU1uB,GAA0BnB,GADR,WAAA1R,EAAA,MAErBsF,EAAcjC,EAAM,sBAAwByU,EAAa,IAAMypB,IAF1C,+E,OCxBpC,SAASC,GAAeC,EAA+B3iB,GACrD,OtD0DK,SAAsCjD,EAA+BiD,GAC1E,GAAwB,aAApBA,EAAK4iB,WACP,OAAQ7lB,EAAYxO,aAAeA,GAAW4Z,aAC1C,QACA5T,GAAc,EAAGwI,EAAYsL,iBAAkBtL,EAAYuL,oBAGjE,GAAIvL,EAAYxO,aAAeA,GAAW4Z,aAAc,CACtD,IAAM7V,EAAM0N,EAAK4iB,WAAWrwB,MAAM,KAClC,GAAmB,IAAfD,EAAIzN,OACN,OAAOmb,EAAK4iB,WAGd,GAAItwB,EAAI,GAAG7G,SAAS,KAAM,CACxB,IAAMo3B,EAAavwB,EAAI,GAAGC,MAAM,KAC1B6V,EAAS,GAAK3V,SAASowB,EAAW,IAAOpwB,SAASowB,EAAW,IACnE,MAAM,GAAN,OAAUza,EAAV,YAAmB9V,EAAI,IAEvB,IAAM8V,EAAQ3V,SAASH,EAAI,IAC3B,MAAM,GAAN,OAAU8V,EAAV,YAAmB9V,EAAI,IAIzB,OAAOiC,GAAcyL,EAAK8iB,YAAa/lB,EAAYsL,iBAAkBtL,EAAYuL,oBsDjF5Eya,CAA6BJ,EAAa3iB,GAInD,IAaegjB,GAbkD,SAAC,GAAsC,IAApChjB,EAAmC,EAAnCA,KAAMjD,EAA6B,EAA7BA,YAAakmB,EAAgB,EAAhBA,UAErF,GAAc,OAAVjjB,EACF,OAAO,sCAGT,IAAMkjB,EAAqC,IAArBljB,EAAK8iB,YAAuB,YAAcG,EAEhE,OACE,0BAAMnjB,MAAO,CAACnO,MAAOuxB,IAAgBR,GAAe3lB,EAAaiD,K,OCHrE,IAyFemjB,GAzF0C,SAAC,GAAkC,IAAjCC,EAAgC,EAAhCA,QAASj+B,EAAuB,EAAvBA,KAAM4X,EAAiB,EAAjBA,YACjEpb,EAAQsK,qBAAW6D,IAAnBnO,KAEP,OAAKwD,EAOH,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAW8F,KAAK,OACd,kBAAC,IAAD,KACE,kBAAC,IAAD,KAAW0H,GAAcM,aAAS9N,EAAKyN,UAG3C,kBAAC,IAAD,KACGzN,EAAKk+B,QAAQP,YAAc,GAC1B,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQha,KAAK,KAAb,WAGA,kBAAC,IAAD,CAAQA,KAAK,KACX,kBAAC,GAAD,CAAwB9I,KAAM7a,EAAKk+B,QAAStmB,YAAaA,EAAakmB,UAAU,YAKrF99B,EAAKm+B,cAAcR,YAAc,GAChC,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQha,KAAK,KAAb,kBAGA,kBAAC,IAAD,CAAQA,KAAK,KACX,kBAAC,GAAD,CAAwB9I,KAAM7a,EAAKm+B,cAAevmB,YAAaA,EAAakmB,UAAU,UAK3F99B,EAAKo+B,eAAeT,YAAc,GACjC,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQha,KAAK,KAAb,mBAGA,kBAAC,IAAD,CAAQA,KAAK,KACX,kBAAC,GAAD,CAAwB9I,KAAM7a,EAAKo+B,eAAgBxmB,YAAaA,EAAakmB,UAAU,UAK5F99B,EAAKq+B,QAAQV,YAAc,GAC1B,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQha,KAAK,KAAb,iBAGA,kBAAC,IAAD,CAAQA,KAAK,KACX,kBAAC,GAAD,CAAwB9I,KAAM7a,EAAKq+B,QAASzmB,YAAaA,EAAakmB,UAAU,YAKrF99B,EAAKs+B,eAAiBt+B,EAAKs+B,cAAc/jC,KAAI,SAAAgkC,GAC5C,OACE,kBAAC,IAAD,CAAQ5gC,IAAK4gC,EAAIxb,UACf,kBAAC,IAAD,CAAQY,KAAK,KAtE7B,SAAuBnnB,EAAuBrB,GAC5C,OAAOqB,EAAKqN,cAAcpD,QAAO,SAAA0R,GAAE,OAAIA,EAAGhd,KAAOA,KAAI,GAAGkD,KAsEvCmgC,CAAchiC,EAAM+hC,EAAIxb,WAE3B,kBAAC,IAAD,CAAQY,KAAK,KACX,kBAAC,GAAD,CAAwB9I,KAAM0jB,EAAI1jB,KAAMjD,YAAaA,EAAakmB,UAAU,mBAQxF,kBAAC,IAAD,KACE,kBAAC,IAAD,CACElxB,OAAO,QACP5G,QAASi4B,GAFX,WAzEF,yCCJN,ICRYQ,GD4GGC,GApG4C,SAAC,GAA4C,IAL9E7vB,EAKoC8vB,EAAyC,EAAzCA,WAAYC,EAA6B,EAA7BA,cAAeC,EAAc,EAAdA,QAChFriC,EAAQsK,qBAAW6D,IAAnBnO,KACDob,EAAc5B,GAAuCxZ,EAAMA,EAAKmN,UAAU,GAAGxO,IAFkB,EAGvDwI,oBAAS,GAH8C,mBAG9Fm7B,EAH8F,KAG7EC,EAH6E,KAKrG,OAAmB,OAAfJ,EAEA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQhb,KAAK,KAAI,kBAAC,KAAD,CAAUgE,MAAO,MAClC,kBAAC,IAAD,CAAQhE,KAAK,KAAI,kBAAC,KAAD,CAAUgE,MAAO,MAClC,kBAAC,IAAD,CAAQhE,KAAK,KAAI,kBAAC,KAAD,CAAUgE,MAAO,MAClC,kBAAC,IAAD,CAAQhE,KAAK,KAAI,kBAAC,KAAD,CAAUgE,MAAO,OAMpC,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQhE,KAAMkb,GACZ,4BACElkB,MAAO,CAACqkB,SAAU,OAAQld,gBAAiB,QAASmd,OAAQ,OAAQC,QAAS,QAC7El5B,QAAS,kBAAM+4B,GAAmB,MA3BtBlwB,EA6BI8vB,EAAYlxB,KA5BjCC,aAAOI,aAASe,GAAI,SAASxG,iBAgC5B,kBAAC,IAAD,CACEsb,KAAMkb,EACNryB,MAAM,YACNoiB,QAASgQ,EAAgBH,GAAWU,WAAaV,GAAWU,SAE5D,kBAAC,GAAD,CACEtkB,KAAI,OAAE8jB,QAAF,IAAEA,OAAF,EAAEA,EAAYT,QAClBtmB,YAAaA,EACbkmB,UAAU,WAId,kBAAC,IAAD,CACEna,KAAMkb,EACNjQ,QAASgQ,EAAgBH,GAAWW,iBAAmBX,GAAWW,eAElE,kBAAC,GAAD,CACEvkB,KAAI,OAAE8jB,QAAF,IAAEA,OAAF,EAAEA,EAAYR,cAClBvmB,YAAaA,EACbkmB,UAAU,SAId,kBAAC,IAAD,CACEna,KAAMkb,EACNjQ,QAASgQ,EAAgBH,GAAWY,kBAAoBZ,GAAWY,gBAEnE,kBAAC,GAAD,CACExkB,KAAI,OAAE8jB,QAAF,IAAEA,OAAF,EAAEA,EAAYP,eAClBxmB,YAAaA,EACbkmB,UAAU,SAId,kBAAC,IAAD,CACEna,KAAMkb,EACNjQ,QAASgQ,EAAgBH,GAAWa,WAAab,GAAWa,SAE5D,kBAAC,GAAD,CACEzkB,KAAI,OAAE8jB,QAAF,IAAEA,OAAF,EAAEA,EAAYN,QAClBzmB,YAAaA,EACbkmB,UAAU,WAId,kBAAC,IAAD,CACEna,KAAMkb,EACNjQ,QAASgQ,EAAgBH,GAAWjqB,UAAYiqB,GAAWjqB,QAE3D,kBAAC,GAAD,CACEqG,KAAI,OAAE8jB,QAAF,IAAEA,OAAF,EAAEA,EAAYY,OAClB3nB,YAAaA,EACbkmB,UAAU,YAKhB,kBAAC,IAAD,CACEjV,SAAS,eACT/jB,OAAQg6B,EACRx5B,aAAc,kBAAMy5B,GAAmB,KAEvC,kBAAC,GAAD,CACEd,QAAS,kBAAMc,GAAmB,IAClCnnB,YAAaA,EACb5X,KAAM2+B,Q,SCrGNF,O,eAAAA,I,qBAAAA,I,iCAAAA,I,mCAAAA,I,qBAAAA,I,oBAAAA,I,eAAAA,Q,KAqCZ,IAkJee,GAlJ6C,SAAC,GAAqB,IAAnBC,EAAkB,EAAlBA,YACtDjjC,EAAQsK,qBAAW6D,IAAnBnO,KACDob,EAAc5B,GAAuCxZ,EAAMA,EAAKmN,UAAU,GAAGxO,IAFJ,EAGrCwI,mBAAS86B,GAAW9nB,MAHiB,mBAGxEioB,EAHwE,KAGzDc,EAHyD,OAIjD/7B,mBAAS,KAJwC,mBAIxEk7B,EAJwE,KAI/Dc,EAJ+D,KAiB/E,OAVA77B,qBAAU,WACR,GAAK27B,EAAL,CADc,MAlClB,SAA6BA,GAC3B,IAAIG,EAAOnB,GAAWU,QAClBzhC,EAAQ,EAsBZ,OApBI+hC,EAAYI,mBAAmBlC,YAAc,IAC/CiC,GAAQnB,GAAWW,cACnB1hC,KAGE+hC,EAAYK,oBAAoBnC,YAAc,IAChDiC,GAAQnB,GAAWY,eACnB3hC,KAGE+hC,EAAYM,aAAapC,YAAc,IACzCiC,GAAQnB,GAAWa,QACnB5hC,KAGE+hC,EAAYO,YAAYrC,YAAc,IACxCiC,GAAQnB,GAAWjqB,OACnB9W,KAGK,CAAEkiC,OAAMliC,SAeWuiC,CAAoBR,GAApC/hC,EALM,EAKNA,MAAOkiC,EALD,EAKCA,KACfF,EAAiBE,GACjBD,EAAYjiC,GAAS,EAAK,IAAM,QAC/B,CAAC+hC,IAEgB,OAAhBA,EAEA,yBAAKr3B,UAAU,kBACb,kBAAC,IAAD,CAASZ,MAAM,gBACb,kBAAC,IAAD,CAAQY,UAAU,cAAcZ,MAAM,mBACpC,kBAAC,IAAD,CAAQmc,KAAK,KAAI,kBAAC,KAAD,CAAUgE,MAAO,MAClC,kBAAC,IAAD,CAAQhE,KAAK,KAAI,kBAAC,KAAD,CAAUgE,MAAO,MAClC,kBAAC,IAAD,CAAQhE,KAAK,KAAI,kBAAC,KAAD,CAAUgE,MAAO,MAClC,kBAAC,IAAD,CAAQhE,KAAK,KAAI,kBAAC,KAAD,CAAUgE,MAAO,OAEnC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAAIptB,KAAI,SAAA2lC,GAC1B,OACE,kBAAC,GAAD,CACEvB,WAAY,KACZE,QAAQ,IACRD,cAAeH,GAAW9nB,KAC1BhZ,IAAKuiC,SAUjB,yBAAK93B,UAAU,kBACf,kBAAC,IAAD,CAASZ,MAAM,gBACb,kBAAC,IAAD,CAAQY,UAAU,cAAcZ,MAAM,mBACpC,kBAAC,IAAD,CACEmc,KAAMkb,GADR,QAGA,kBAAC,IAAD,CACElb,KAAMkb,EACNjQ,QAASgQ,EAAgBH,GAAWU,WAAaV,GAAWU,SAF9D,OAMA,kBAAC,IAAD,CACExb,KAAMkb,EACNjQ,QAASgQ,EAAgBH,GAAWW,iBAAmBX,GAAWW,eAFpE,YAMA,kBAAC,IAAD,CACEzb,KAAMkb,EACNjQ,QAASgQ,EAAgBH,GAAWY,kBAAoBZ,GAAWY,gBAFrE,WAMA,kBAAC,IAAD,CACE1b,KAAMkb,EACNjQ,QAASgQ,EAAgBH,GAAWa,WAAab,GAAWa,SAF9D,WAMA,kBAAC,IAAD,CACE3b,KAAMkb,EACNjQ,QAASgQ,EAAgBH,GAAWjqB,UAAYiqB,GAAWjqB,QAF7D,WA7BJ,OAoCGirB,QApCH,IAoCGA,OApCH,EAoCGA,EAAah6B,KAAKlL,KAAI,SAAA4lC,GAAG,OACxB,kBAAC,GAAD,CACExiC,IAAKwiC,EAAI1yB,KACTkxB,WAAYwB,EACZvB,cAAeA,EACfC,QAASA,OAGb,kBAAC,IAAD,CAAQlkB,MAAO,CAACylB,WAAY,SAC1B,kBAAC,IAAD,CAAQzc,KAAMkb,GAAd,SACA,kBAAC,IAAD,CACElb,KAAMkb,EACNjQ,QAASgQ,EAAgBH,GAAWU,WAAaV,GAAWU,SAE5D,kBAAC,GAAD,CACEtkB,KAAI,OAAE4kB,QAAF,IAAEA,OAAF,EAAEA,EAAaY,aACnBzoB,YAAaA,EACbkmB,UAAU,WAGd,kBAAC,IAAD,CACEna,KAAMkb,EACNjQ,QAASgQ,EAAgBH,GAAWW,iBAAmBX,GAAWW,eAElE,kBAAC,GAAD,CACEvkB,KAAI,OAAE4kB,QAAF,IAAEA,OAAF,EAAEA,EAAaI,mBACnBjoB,YAAaA,EACbkmB,UAAU,SAGd,kBAAC,IAAD,CACEna,KAAMkb,EACNjQ,QAASgQ,EAAgBH,GAAWY,kBAAoBZ,GAAWY,gBAEnE,kBAAC,GAAD,CACExkB,KAAI,OAAE4kB,QAAF,IAAEA,OAAF,EAAEA,EAAaK,oBACnBloB,YAAaA,EACbkmB,UAAU,SAGd,kBAAC,IAAD,CACEna,KAAMkb,EACNjQ,QAASgQ,EAAgBH,GAAWa,WAAab,GAAWa,SAE5D,kBAAC,GAAD,CACEzkB,KAAI,OAAE4kB,QAAF,IAAEA,OAAF,EAAEA,EAAaM,aACnBnoB,YAAaA,EACbkmB,UAAU,WAGd,kBAAC,IAAD,CACEna,KAAMkb,EACNjQ,QAASgQ,EAAgBH,GAAWjqB,UAAYiqB,GAAWjqB,QAE3D,kBAAC,GAAD,CACEqG,KAAI,OAAE4kB,QAAF,IAAEA,OAAF,EAAEA,EAAaO,YACnBpoB,YAAaA,EACbkmB,UAAU,eCzFPwC,GAnF6C,SAAC,GAAc,IAAZ7yB,EAAW,EAAXA,KACrDrO,EAASmE,IAAMuD,WAAWxD,GAA1BlE,KACA5C,EAAS+G,IAAMuD,WAAW6D,IAA1BnO,KAFgE,EAGhCmH,mBAAS,MAHuB,mBAGhE48B,EAHgE,KAGnDC,EAHmD,OAIpC78B,mBAAS,MAJ2B,mBAIhEmP,EAJgE,KAIrDC,EAJqD,OAKxCpP,mBAAS,MAL+B,mBAKhE+iB,EALgE,KAKvDC,EALuD,OAMjChjB,mBAAS,MANwB,mBAMhE87B,EANgE,KAMnDgB,EANmD,KAOlE34B,EAAMlD,IAONgvB,EAAYzS,IAJA,SAACpmB,GACjB2lC,EAAQ3lC,MA4BV,SAAS2lC,EAAQ3lC,GACf4lC,GAAiBtD,4BAA4Bj+B,EAAM5C,EAAKmN,UAAU,GAAGxO,GAAIolC,GAAczlC,MAAK,SAACkF,GACvFA,EAAKa,MACPiH,EAAI1C,UAAU,QAAS,oCAAsCpF,EAAK0E,SAAS,gBAI7EqO,EAAajF,aAAS9N,EAAK6N,QAC3B8Y,EAAW7Y,aAAS9N,EAAKkO,MACzBuyB,EAAezgC,GACXjF,GACFA,EAAEsY,OAAOmjB,eAjCf1yB,qBAAU,WACR,IAAIwjB,EAAe7Z,EACN,OAATA,IACF6Z,EAAe,IAAIxa,MAGrB0zB,EAAelZ,KAEd,CAAC7Z,IAGJ3J,qBAAU,WACW,MAAfy8B,GAIJG,MAGC,CAACH,IA6BJ,OACE,oCACE,kBAAC,GAAD,CACEztB,UAAWA,EACX4T,QAASA,EACTwW,gBAdkB,WACtBsD,EAAe7xB,aAAQ+X,EAAU,KAc7ByW,gBAVkB,WACtBqD,EAAe7xB,aAAQmE,GAAa,OAWlC,kBAAC,GAAD,CACE2sB,YAAaA,IAEd33B,EAAIzC,YACJuuB,EAAUpS,oBCnDFof,I,OAlBqC,SAAC,GAAuC,IAArCC,EAAoC,EAApCA,UAAWC,EAAyB,EAAzBA,QAASC,EAAgB,EAAhBA,UACzE,OAAKA,EAKH,4BAAQ34B,UAAU,cAChB,yBAAKA,UAAU,oBACf,yBAAKA,UAAU,mBACb,yBAAKA,UAAU,YArBH,SAACgT,EAAkBylB,GACrC,IAAI/rB,EAAO,GAKX,OAJI+rB,EAAUl3B,UAAUjK,QAAU,IAChCoV,EAAO+rB,EAAUl3B,UAAUlD,QAAO,SAAAwN,GAAC,OAAIA,EAAE9Y,KAAOigB,EAAKd,cAAY,GAAGsG,KAAO,MAG9C,IAAvBxF,EAAKb,aACTzF,EAAO,kBACPA,EAAOsG,EAAKG,eAaiBylB,CAAYD,EAAWF,IAClD,yBAAKz4B,UAAW04B,EAAU,wBAA0B,iBACjDC,EAAUvlB,SATV,gCCRLhD,I,MAAgB,CACpBC,EAAG,UACHC,EAAG,UACHC,EAAG,UACHC,EAAG,UACHC,EAAG,UACHC,EAAG,YAGCC,GAAuB,CAC3BN,EAAG,CAAEjM,MAAO,SACZkM,EAAG,CAAElM,MAAO,WACZoM,EAAG,CAAEpM,MAAO,YAmCd,IAyDey0B,GAzDuC,SAAC,GAAkC,IAAhChoB,EAA+B,EAA/BA,MAAOtP,EAAwB,EAAxBA,UAAWyP,EAAa,EAAbA,OACjE5c,EAASsK,qBAAW6D,IAApBnO,KAER,IAAKyc,IAAUzc,IAASA,EAAKmN,WAAuC,IAA1BnN,EAAKmN,UAAUjK,OACvD,OAAO,8BAGT,I5D2J2Bob,E4D3JrBjO,EAAY,IAAIC,KAAK,IAAM,EAAE,GAC7Bo0B,EAAUjoB,EAAMe,cAAgBhK,GAAUuE,OAChC0E,EAAMiB,gBAAkBvG,GAAYoB,UACpCkE,EAAM2B,YAChBumB,EAAUloB,EAAMe,cAAgBhK,GAAUuE,OAChC0E,EAAMiB,gBAAkBvG,GAAYoB,UACpCkE,EAAM4S,YAAYplB,QAAO,SAAA6hB,GAAC,OAAKA,EAAEra,UAAYqa,EAAEra,SAAWpB,KAAWnN,OAAS,EACxFua,EAA2BlB,GAAgBE,EAAMiB,eAGjDknB,EAAeF,GAAWC,EAAWpE,KAAOliB,KAC5CwmB,EAAgBH,EACpB,yBAAK94B,UAAU,YAAW,kBAAC,IAAD,CAASd,KAAM85B,IAAe,0BAAMzmB,MAAOV,I5D+I5Ca,E4D/IqE7B,E5DgJvFvL,aAAOI,aAASgN,EAAGtB,YAAa,WAAWxL,QAAQ,IAAK,M4DhJ/D,IAA8GT,GAA8B0L,EAAM+B,eAAlJ,KAEA,yBAAK5S,UAAU,YAAW,0BAAMuS,MAAOV,G5D4JpC,SAA0Ba,GAC7B,IAAMjN,EAAQH,aAAOI,aAASgN,EAAGtB,YAAa,WAAWxL,QAAQ,IAAK,IAChEE,EAAQR,aAAOI,aAASgN,EAAGT,UAAW,WAAWrM,QAAQ,IAAK,IAEpE,MAAM,GAAN,OAAUH,EAAV,cAAqBK,G4DhK8BozB,CAAiBroB,IAApE,IAAoF1L,GAA8B0L,EAAM+B,eAAxH,KAaI/J,EAAMgI,EAAMkC,IAAM,KAAOlC,EAAMkC,IAAM,GAErCrB,EAAkB,CAAEC,WAAW,aAAD,OAAevB,GAASS,EAAMe,aAA9B,MACpC,OACE,4BACEhU,QAdkB,WACpB,IAAMmU,EAAgB1E,GAA0BwD,EAAMe,YAAaf,EAAMiB,cAAejB,EAAMmB,WAAYnB,EAAMO,WAAYP,EAAMoB,SAAUpB,EAAMqB,WAAYrB,EAAMsB,aAAetB,EAAMuB,WAAYvB,EAAMwB,YAAaje,GAClM,OAAlB2d,GAIJf,EAAOH,EAAOkB,IASZ/R,UAAU,SAEV,yBAAKA,UAAU,kBAAkBuS,MAAOb,GACrCunB,EACD,yBAAKj5B,UAAU,gBA3EvB,SAAqBuB,EAAiCmR,GAClD,IAAMymB,EAAe53B,EAAUlD,QAAO,SAAAqN,GAAG,OAAIA,EAAI3Y,KAAO2f,EAAGR,cAAY,GACjEpB,EAAgBvP,EAAUlD,QAAO,SAAAwN,GAAC,OAAIA,EAAEC,YAAYzN,QAAO,SAAAoI,GAAC,OAAIA,EAAEsF,UAAU1N,QAAO,SAAA2N,GAAC,OAAIA,EAAES,qBAAenV,OAAS,EAClH+Z,IAAmBP,GAErBqoB,EAAartB,YAAYzN,QAAO,SAAAoI,GAAC,OAAIA,EAAEsF,UAAU1N,QAAO,SAAA2N,GAAC,OAAIA,EAAES,kBAAcnV,OAAS,EAGtFga,EAAa,GAmBjB,OAlBIR,IACE4B,EAAGnB,wBACLD,EAAaoB,EAAGnB,wBAA0B,IACjCmB,EAAG0mB,uBACZ9nB,EAAaoB,EAAG0mB,qBAAuB,MAIvC/nB,IACEqB,EAAGlB,0BACLF,GAAcoB,EAAGlB,0BAA4B,IACpCkB,EAAG2mB,yBACZ/nB,GAAcoB,EAAG2mB,uBAAyB,MAI9C/nB,GAAcoB,EAAGjB,aAmDV6nB,CAAY/3B,EAAWsP,GAD1B,IACmChI,GAElCgI,EAAM4S,aAAe5S,EAAM4S,YAAYtxB,KAAI,SAAAqT,GAAG,OAC7C,yBAAKjQ,IAAKiQ,EAAIG,WAAY3F,UAAU,aAApC,OACOuF,GAAiBC,UCxFnB+zB,GAlB+C,WAC5D,OACE,4BACEv5B,UAAU,SAEV,yBAAKuS,MAAO,CAACqV,YAAa,OAAQjG,aAAc,QAC9C,kBAAC,KAAD,CAAUpC,MAAO,EAAGsI,OAAQ,MAE9B,yBAAK7nB,UAAU,mBACb,kBAAC,KAAD,CAAUuf,MAAO,MACjB,yBAAKvf,UAAU,gBACb,kBAAC,KAAD,CAAUuf,MAAO,UC2GZia,GAxGqC,SAAC,GAA+B,IAA9BhI,EAA6B,EAA7BA,cAAeD,EAAc,EAAdA,SAAc,EAKzCh2B,mBAAS+F,IALgC,mBAK1Em4B,EAL0E,KAK5DC,EAL4D,KAM3ElO,EAAYzS,IALA,SAACpmB,GACjB2lC,EAAQ3lC,MAFuE,EAO5CwI,IAAMuD,WAAWxD,GAA9ClE,EAPyE,EAOzEA,KAAMiE,EAPmE,EAOnEA,mBACRyE,EAAMlD,IARqE,EASrCjB,oBAAS,GAT4B,mBAS1E4xB,EAT0E,KAS1DC,EAT0D,OAU3C7xB,mBAAS,MAVkC,mBAU1E8xB,EAV0E,KAU7DC,EAV6D,OAWvC/xB,mBAAS,MAX8B,mBAW1EwW,EAX0E,KAW3Dwb,EAX2D,OAY/ChyB,oBAAS,GAZsC,mBAY1EmhB,EAZ0E,KAY/DC,EAZ+D,KAe3E2R,EAAe,SAAC5b,EAAsB6b,GAC1CjB,EAAe5a,EAAGe,iBAClB8Z,EAAiBgB,GACjBnB,GAAkB,IAIpB,SAASkL,EAAQ3lC,GACfsI,IAAqBvI,MAAK,WACxBgQ,GAAQ7B,gBAAgB7J,GAAMtE,MAAK,SAAA0F,GACjCshC,EAAgBthC,GAChBukB,GAAa,GACThqB,IACFA,EAAEsY,OAAOmjB,WACTmD,WAOR71B,qBAAU,WAEJ1E,GAAQA,EAAKqD,aACfsiB,GAAa,GACb2b,OAAQpkC,MAIT,CAACs9B,IASJ,OACE,oCACE,kBAAC,IAAD,CAASxxB,UAAU,YAAY25B,MAAM,QACnC,kBAAC,IAAD,CAAej8B,KAAK,OAClB,kBAAC,IAAD,CAAUsC,UAAU,QAAStC,KAAK,OAAO0H,GAAc,IAAIV,QAE5DgY,IAAgB+c,EAAa13B,YAAc03B,EAAa13B,WAAWzK,OAAS,GAAOmiC,EAAa53B,eAAiB43B,EAAa53B,cAAcvK,OAAS,IACpJ,kBAAC,IAAD,CAAY0I,UAAU,SAAS/J,KAAK,SAGrCymB,KAAiB+c,EAAa13B,YAAiD,IAAnC03B,EAAa13B,WAAWzK,SAAmBmiC,EAAa53B,eAAuD,IAAtC43B,EAAa53B,cAAcvK,SAC/I,oCACE,kBAAC,GAAD,MACA,kBAAC,GAAD,OAKHmiC,EAAa13B,YAAc03B,EAAa13B,WAAW5P,KAAI,SAAA6gB,GAAI,OAC1D,kBAAC,IAAD,CAASzd,IAAKyd,EAAKQ,aACjB,kBAAC,GAAD,CAAoBilB,UAAWgB,EAAarlC,KAAOskC,SAAS,EAAOC,UAAW3lB,QAGjFymB,EAAa53B,cAAc1P,KAAK,SAAAugB,GAAE,OACjC,kBAAC,IAAD,CAASnd,IAAKmd,EAAGe,iBACf,kBAAC,GAAD,CAAgBzC,OAAQsd,EAAc/sB,UAAWk4B,EAAarlC,KAAKmN,UAAWsP,MAAO6B,SAI3F,kBAAC,IAAD,CACEhW,OAAQywB,EACRjwB,aAAc,kBAAMkwB,GAAkB,KAEtC,kBAAC,GAAD,CACE1wB,OAAQywB,EACR/4B,KAAMqlC,EAAarlC,KACnBuiB,cAAe,kBAAMyW,GAAkB,IACvC3uB,eAAgB,kBAzCtB65B,OAAQpkC,QACRk5B,GAAkB,IAyCZtlB,gBAAiBulB,EACjBtb,cAAeA,KAKlBrS,EAAIzC,YACJuuB,EAAUpS,oBCvCFwgB,GA1Ea,WAAO,IAAD,EACFr+B,mBAAkC,SADhC,mBACzBowB,EADyB,KAChBoB,EADgB,OAEUxxB,oBAAS,GAFnB,mBAEzBi2B,EAFyB,KAEVqI,EAFU,OAG4Bt+B,oBAAS,GAHrC,mBAGzBu+B,EAHyB,KAGDC,EAHC,KAoBhC,OACE,kBAAC,IAAD,CAAShnC,GAAG,cACV,kBAAC,IAAD,CAAW2K,KAAK,OACd,kBAAC,IAAD,CAAaA,KAAK,MAChB,kBAAC,IAAD,CAAYuB,KAAK,SACf,kBAAC,IAAD,OAEF,kBAAC,IAAD,CAAUA,KAAK,SAAf,WAIJ,kBAAC,IAAD,CAAYvB,KAAK,KAAKsN,YAAa,SAACrY,GAAD,OAfd87B,EAeqC97B,EAAEsY,OAAOvV,WAdrEq3B,EAAW0B,GADW,IAACA,IAgBnB,kBAAC,IAAD,CAAkB/wB,KAAK,KAAKhI,MAAM,QAAQiI,QAAqB,UAAZguB,GAAnD,SAGA,kBAAC,IAAD,CACEjuB,KAAK,KACLhI,MAAM,cACNiI,QAAqB,gBAAZguB,GAHX,eASF,kBAAC,IAAD,CAAY3rB,UAAU,iBAEP,UAAZ2rB,GACC,kBAAC,GAAD,CACE6F,cAAeA,EACfD,SAtCiB,WACzBwI,GAA2BD,MAyCV,gBAAZnO,GACC,kBAAC,GAAD,CACEtmB,KAAM,QAMZ,kBAAC,IAAD,CAAWrF,UAAU,UACN,UAAZ2rB,GACC,kBAAC,GAAD,CACE6F,cAAesI,EACfvI,SA3DiB,WACzBsI,GAAkBrI,S,0BC2BPwI,GA5BiC,SAAC,GAAiC,IAA/B19B,EAA8B,EAA9BA,QAAS29B,EAAqB,EAArBA,eAC1D,IAAK39B,EACH,OAAO,8BAGT,IAAM49B,EAAwB59B,EAAQ69B,SAAY,SAAW,OAE7D,OACE,4BACEn6B,UAAU,UACVpC,QAASq8B,GAET,yBAAKj6B,UAAU,YACb,0BAAMA,UAAU,UAAUuS,MAAO,CAACylB,WAAYkC,IAC1C59B,EAAQ89B,UACR,kBAAC,IAAD,CAASl7B,KAAMm7B,KAAU9nB,MAAO,CAACnO,MAAO,UAEzC9H,EAAQg+B,SAEX,0BAAMt6B,UAAU,QhEAjB,SAA2ByS,GAChC,IAAMpN,EAAOK,aAAS+M,GAChB5D,EAAM,IAAInK,KAEhB,OAAI4G,aAAQjG,GACHC,aAAOD,EAAM,WAAWO,QAAQ,IAAK,IACnC20B,aAAiB1rB,EAAKxJ,GAAQ,EAChCC,aAAOD,EAAM,OAAOpF,cAClBu6B,aAAWn1B,EAAMwJ,GACnBvJ,aAAOD,EAAM,SAEbC,aAAOD,EAAM,YgEXQo1B,CAAkBn+B,EAAQo+B,kBAAlD,MAEF,yBAAK16B,UAAU,eACZ1D,EAAQq+B,eCqFFC,GAjGiD,SAAC,GAAkD,IAAhDn8B,EAA+C,EAA/CA,eAAgBkY,EAA+B,EAA/BA,cAAekkB,EAAgB,EAAhBA,WAAgB,EACxEt/B,mBAAS,CAC/Cu/B,WAAYD,EAAWE,SAAWF,EAAWE,SAAS5oC,KAAI,SAAA6oC,GAAE,OAAIA,EAAGC,iBAAiB,GACpFv5B,YAAa,IAHiG,mBACzGw5B,EADyG,KAC3FC,EAD2F,KAY1Gjd,EAAW,WACfvH,KAaF,OACE,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAY1X,KAAK,SACf,kBAAC,IAAD,CAAWrB,QAASsgB,GAChB,kBAAC,IAAD,CAAShf,KAAMC,IAAgBzB,KAAK,KAAKuB,KAAK,gBAGpD,kBAAC,IAAD,eAGA,kBAAC,IAAD,CAAYA,KAAK,OACf,kBAAC,IAAD,CAAWrB,QAtBF,WACjBu9B,EAAgB,CAACL,WAAYD,EAAWE,SAAS5oC,KAAI,SAAA6oC,GAAE,OAAIA,EAAGC,iBAAgBv5B,YAAa,MAqBnF,gBAON,kBAAC,IAAD,CAAYtC,MAAM,iBAChB,kBAAC,IAAD,KACE,kBAAC,IAAD,aACA,kBAAC,IAAD,CACE1J,MAAOwlC,EAAax5B,WACpBsJ,YAAa,SAACrY,GAAD,OAAOwoC,EAAgB,eAAID,EAAL,CAAmBx5B,WAAY/O,EAAEsY,OAAOvV,UAC3EuiB,UAAU,gBACV,kBAAC,IAAD,CAAiB1iB,KAAM,EAAGG,OAAQ,GAAlC,YACCmlC,GAAcA,EAAW7d,WAAa6d,EAAW7d,UAAU7qB,KAAI,SAAAkrB,GAAG,OACjE,kBAAC,IAAD,CACE9nB,IAAK8nB,EAAI3b,WACThM,MAAO2nB,EAAI3b,YACV2b,EAAIpnB,WAKb,kBAAC,IAAD,KACE,kBAAC,IAAD,uBAEA4kC,EAAWE,UACX,kBAAC,EAAD,CACE19B,KAAMw9B,EAAWE,SAAS5oC,KAAI,SAAA6oC,GAAQ,MAAO,CAAEjoC,GAAIioC,EAAGC,cAAehlC,KAAM+kC,EAAG/kC,KAAMmlC,YAAa,OACjG99B,SAAUu9B,EAAWE,SAAS18B,QAAO,SAAA28B,GAAE,OAAIE,EAAaJ,WAAW58B,SAAS88B,EAAGC,kBAAgB9oC,KAAI,SAAA6oC,GAAQ,MAAO,CAAEjoC,GAAIioC,EAAGC,cAAehlC,KAAM+kC,EAAG/kC,KAAMmlC,YAAa,OACtK79B,iBAhDkB,SAAC89B,GAC3BF,EAAgB,eAAKD,EAAN,CAAoBJ,WAAYO,EAAalpC,KAAI,SAAA6oC,GAAE,OAAIA,EAAGjoC,aAqDvE,kBAAC,IAAD,CAAWiN,UAAU,wBACjB,kBAAC,IAAD,CACEA,UAAU,eACVwE,OAAO,QACP5G,QAzEW,WACnBa,EAAey8B,KAqET,gBAMA,kBAAC,IAAD,CACEl7B,UAAU,eACVwE,OAAO,QACP5G,QAASsgB,EACT9Z,MAAM,YAJR,WCrEGk3B,GAAe,IAAIlmC,EA7BH,CAC3B,CAAErC,GAAI,EAAGwoC,SAAU,sBAAuBH,YAAa,iBACvD,CAAEroC,GAAI,EAAGwoC,SAAU,uBAAwBH,YAAa,kBACxD,CAAEroC,GAAI,EAAGwoC,SAAU,4BAA6BH,YAAa,wBAC7D,CAAEroC,GAAI,EAAGwoC,SAAU,sBAAuBH,YAAa,iBACvD,CAAEroC,GAAI,EAAGwoC,SAAU,4BAA6BH,YAAa,gBAC7D,CAAEroC,GAAI,GAAIwoC,SAAU,8BAA+BH,YAAa,0BAChE,CAAEroC,GAAI,GAAIwoC,SAAU,wBAAyBH,YAAa,qBAC1D,CAAEroC,GAAI,GAAIwoC,SAAU,yBAA0BH,YAAa,sBAC3D,CAAEroC,GAAI,GAAIwoC,SAAU,qBAAsBH,YAAa,uBACvD,CAAEroC,GAAI,GAAIwoC,SAAU,4BAA6BH,YAAa,yBAC9D,CAAEroC,GAAI,GAAIwoC,SAAU,8BAA+BH,YAAa,0BAChE,CAAEroC,GAAI,GAAIwoC,SAAU,kCAAmCH,YAAa,8BACpE,CAAEroC,GAAI,GAAIwoC,SAAU,0BAA2BH,YAAa,qBAC5D,CAAEroC,GAAI,GAAIwoC,SAAU,yBAA0BH,YAAa,qBAC3D,CAAEroC,GAAI,GAAIwoC,SAAU,iCAAkCH,YAAa,+BACnE,CAAEroC,GAAI,GAAIwoC,SAAU,qBAAsBH,YAAa,gBACvD,CAAEroC,GAAI,IAAKwoC,SAAU,gBAAiBH,YAAa,mBACnD,CAAEroC,GAAI,IAAKwoC,SAAU,mCAAoCH,YAAa,4BACtE,CAAEroC,GAAI,IAAKwoC,SAAU,iBAAkBH,YAAa,WACpD,CAAEroC,GAAI,IAAKwoC,SAAU,kCAAmCH,YAAa,8BACrE,CAAEroC,GAAI,IAAKwoC,SAAU,6BAA8BH,YAAa,qCAChE,CAAEroC,GAAI,IAAKwoC,SAAU,sBAAuBH,YAAa,iBACzD,CAAEroC,GAAI,IAAKwoC,SAAU,sBAAuBH,YAAa,iBACzD,CAAEroC,GAAI,IAAKwoC,SAAU,gBAAiBH,YAAa,oBACnD,CAAEroC,GAAI,IAAKwoC,SAAU,wBAAyBH,YAAa,qBAC3D,CAAEroC,GAAI,IAAKwoC,SAAU,4BAA6BH,YAAa,4BAK3DjpC,KAAI,SAAA4uB,GAAC,OAAIua,GAAallC,IAAI,GAAK2qB,EAAEhuB,GAAIguB,MCjC3C,IAkCe,GAlCQ,SAAO/pB,EAAuBwkC,GAA9B,SAAA7nC,EAAAC,OAAA,kEAAAD,EAAA,MACRsF,EAAcjC,EAAM,4BAA8BwkC,IAD1C,8EAkCR,GA5BS,SAAOxkC,GAAP,SAAArD,EAAAC,OAAA,kEAAAD,EAAA,MACTsF,EAAcjC,EAAM,6BADX,8EA4BT,GAvBM,SAAOA,EAAuBwkC,GAA9B,SAAA7nC,EAAAC,OAAA,kEAAAD,EAAA,MACNsF,EAAcjC,EAAM,4BAA8BwkC,EAAQ,eADpD,8EAuBN,GAlBK,SAAMxkC,EAAuBwkC,EAAepB,GAA5C,SAAAzmC,EAAAC,OAAA,kEAAAD,EAAA,MACLsF,EACXjC,EACA,4BAA8BwkC,EAAQ,aACtC,CAACpB,cAJe,8EAkBL,GATK,SAAMpjC,EAAuBwkC,EAAerB,GAA5C,SAAAxmC,EAAAC,OAAA,kEAAAD,EAAA,MACLsF,EAAejC,EAAK,4BAA8BwkC,EAAQ,cAAc,CAACrB,cADpE,8EASL,GAJO,SAAMnjC,EAAuBwkC,GAA7B,SAAA7nC,EAAAC,OAAA,kEAAAD,EAAA,MACPsF,EAAcjC,EAAM,4BAA8BwkC,IAD3C,8E,OCQPC,OAzCf,WAAoC,IAAD,EACLlgC,oBAAS,GADJ,mBAC1BmB,EAD0B,KAClBC,EADkB,OAECpB,mBAAS,CAACe,QAAS,GAAI4hB,SAAU,aAAUwd,MAAO,eAFnD,mBAE1B5+B,EAF0B,KAEfC,EAFe,KAmCjC,MAAO,CACLksB,WAhCiB,SAAC3sB,EAAiBo/B,EAAmBxd,GACtDnhB,EAAa,CACXT,UACAo/B,QACAxd,aAGFvhB,GAAU,IA0BVg/B,UAtBA,kBAAC,IAAD,CACEj/B,OAAQA,EACRQ,aAAc,WAAQP,GAAU,GAAQG,EAAUohB,YAClD5hB,QAASQ,EAAUR,QACnBa,QAAS,CACP,CACEkR,KAAM,SACN1M,KAAM,SACN8e,SAAU,YACVmb,QAAS9+B,EAAUohB,UAGrB,CACE7P,KAAM,MACNutB,QAAS9+B,EAAU4+B,YCoLdG,GA3L4C,SAAC,GAA+C,IAA7Cv/B,EAA4C,EAA5CA,QAASw/B,EAAmC,EAAnCA,aAAcC,EAAqB,EAArBA,eAC7Er8B,EAAMlD,IACNw/B,EAAeP,KACbzkC,EAASmE,IAAMuD,WAAWxD,GAA1BlE,KACA5C,EAAS+G,IAAMuD,WAAW6D,IAA1BnO,KAJgG,EAK5DmH,mBAAS,MALmD,mBAKhGiuB,EALgG,KAKjFC,EALiF,OAM7DluB,mBAAS,MANoD,mBAMhGwW,EANgG,KAMjFwb,EANiF,OAOrEhyB,mBAAS,MAP4D,mBAOhG0gC,EAPgG,KAOrFC,EAPqF,OAQrE3gC,mBAAS,MAR4D,mBAQhG4gC,EARgG,KAQrFtV,EARqF,OAS3EtrB,oBAAS,GATkE,mBAShG6gC,EATgG,KASxFC,EATwF,KAYxG3gC,qBAAU,WACHY,IAIDA,EAAQwL,gBACVw0B,GAAiBz0B,iBAAiB7Q,EAAMsF,EAAQwL,iBAAiBpV,MAAK,SAAAme,GACpE,GAAIA,EAAO,CACT4Y,EAAiB5Y,GACjB,IAAM0d,EAAmBlhB,GACvBwD,EAAMe,YACNf,EAAMiB,cACNjB,EAAMmB,WACNnB,EAAMO,WACNP,EAAMoB,SACNpB,EAAMqB,WACNrB,EAAMsB,aACNtB,EAAMuB,WACiB,OAAtBvB,EAAM0S,kBAA8CrvB,IAAtB2c,EAAM0S,aAA6B1S,EAAM0S,YACxEnvB,GACFm5B,EAAiBgB,OAIjB/E,IACFC,EAAiB,MACjB5C,EAAa,OAIjB0V,GAAwBvlC,EAAMsF,EAAQnC,WAAWzH,MAAK,SAAA8pC,GACpDN,EAAaM,MAGVlgC,EAAQ69B,UACXoC,GAAuBvlC,EAAMsF,EAAQnC,WAAW,GAAMzH,MAAK,WACzDqpC,EAAe,CAACl8B,KAAM,gBAAiB27B,MAAOl/B,EAAQnC,UAAWggC,UAAU,OAI/EkC,EAAU//B,EAAQ89B,aAIjB,QAAC99B,QAAD,IAACA,OAAD,EAACA,EAASnC,YAGb,IrEoJ2C+6B,EqEjIrChX,EAAW,SAAC3Z,GAChBu3B,EAAav3B,IAGf,OAAKjI,GAAYlI,GAASA,EAAKmN,WAAuC,IAA1BnN,EAAKmN,UAAUjK,OASvD,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAY2H,KAAK,SACf,kBAAC,IAAD,CAAWrB,QAAS,WAAQsgB,EAAS,QACnC,kBAAC,IAAD,CAAShf,KAAMC,IAAgBzB,KAAK,KAAKuB,KAAK,gBAGlD,kBAAC,IAAD,CAAYA,KAAK,OACf,kBAAC,IAAD,CACErB,QAAS,YA1CD,WACpB,IAAM6+B,GAAeL,EACrBG,GAAuBvlC,EAAMsF,EAASnC,UAAWsiC,GAAa/pC,MAAK,WACjE2pC,EAAUI,GACVV,EAAe,CAAEl8B,KAAM,gBAAiB27B,MAAOl/B,EAASnC,UAAWigC,SAAUqC,OAsClDC,KAEjB,kBAAC,IAAD,CACEx9B,KAAMm7B,KACN9nB,MAAO6pB,EAAS,CAAEh4B,MAAO,SAAW,CAAEA,MAAO,gBAGjD,kBAAC,IAAD,CACExG,QAAS,WAxCrBo+B,EAAa/S,WAAW,wBAAwB,WAC9CsT,GAAyBvlC,EAAMsF,EAASnC,WAAWzH,MAAK,WACtDqpC,EAAe,CAAEl8B,KAAM,SAAU27B,MAAOl/B,EAASnC,YACjD+jB,EAAS,yBAEV,iBAqCS,kBAAC,IAAD,CAAShf,KAAMshB,WAMvB,kBAAC,IAAD,CAAYphB,MAAM,iBAChB,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQmc,KAAK,MACVjf,EAASg+B,QAAQ,6BADpB,SAESh+B,EAASqgC,sBAFlB,IAE0CrgC,EAASsgC,uBAGrD,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQrhB,KAAK,IAAIhJ,MAAO,CAACqV,YAAa,OAAQxjB,MAAO,erEiFtB8wB,EqEjFkE54B,EAASo+B,iBrEkF/Gp1B,aAAOI,aAASwvB,GAAU,kBAAkBtvB,QAAQ,IAAK,MqEjFpD,kBAAC,IAAD,CAAQ2V,KAAK,IAAIhJ,MAAO,CAACnO,MAAO,cACd,OAAd63B,GACA,8BAAOA,EAAP,WAIN,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQ1gB,KAAK,MACb,kBAAC,IAAD,CAAQA,KAAK,KACV,yBAAKshB,wBAAyB,CAAEC,OAAM,OAAExgC,QAAF,IAAEA,OAAF,EAAEA,EAASygC,iBAItC,OAAdZ,GACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQ5gB,KAAK,MACV4gB,KAORz8B,EAAIzC,YACJ++B,EAAaL,WAIhB,kBAAC,IAAD,CAAW37B,UAAU,wBACC,OAAlBwpB,GACA,kBAAC,GAAD,CACEp1B,KAAMA,EACNuU,SAAU6gB,EAAcvX,SACxB5J,UAAWmhB,EAAc5X,YACzBtJ,YAAakhB,EAAc1X,cAC3BxE,gBAAiBkc,EAAcxX,WAC/BvE,gBAAiB+b,EAAcpX,WAC/BtK,gBAAiB0hB,EAAc/V,gBAC/BhI,WAAY+d,EAActX,WAC1B2H,OAAQ,aACR+M,gBAAiB1I,EACjBnM,cAAeA,EACf8U,aAAcA,IAGlB,kBAAC,IAAD,CACE7mB,UAAU,eACVwE,OAAO,QACP5G,QAAS,WAAQsgB,EAAS,OAC1B9Z,MAAM,YAJR,UAxFJ,oCACE,wCACC1E,EAAIzC,cC7FP+/B,GAA6B,GAWtBC,GAAkB,SAAChhC,EAAyBonB,GAGvD,OAFA7qB,QAAQzD,IAAI,oBAAqBsuB,EAAOxjB,MAEhCwjB,EAAOxjB,MACb,IAAK,kBACH,OAAOwjB,EAAOzrB,KAChB,IAAK,QACH,MAAO,GACT,IAAK,gBACH,OAAOqE,EAAa9J,KAAI,SAAA+qC,GAAC,OACtBA,EAAE/iC,YAAckpB,EAAOmY,MAAxB,eACS0B,EADT,CACY9C,SAAU/W,EAAO+W,WACzB8C,KAER,IAAK,gBACH,OAAOjhC,EAAa9J,KAAI,SAAA+qC,GACtB,OAAQA,EAAE/iC,YAAckpB,EAAOmY,MAAxB,eACE0B,EADF,CACK/C,SAAU9W,EAAO8W,WACzB+C,KAER,IAAK,SACH,OAAOjhC,EAAaoC,QAAO,SAAA6+B,GAAC,OAAIA,EAAE/iC,YAAckpB,EAAOmY,WAkN9C2B,GAxMmC,SAAC,GAAsB,IAArB/R,EAAoB,EAApBA,MAAO3xB,EAAa,EAAbA,QACjDzC,EAASmE,IAAMuD,WAAWxD,GAA1BlE,KAQFw0B,EAAYzS,IALA,SAACpmB,GACjBopC,EAAe,CAAEl8B,KAAM,UACvBu9B,EAAgBzqC,MANoD,EAUxB4I,oBAAS,GAVe,mBAU/DyxB,EAV+D,KAU9CC,EAV8C,OAWpB1xB,oBAAS,GAXW,mBAW/D8hC,EAX+D,KAW5CC,EAX4C,OAYnChU,qBAAW2T,GAAiB,IAZO,mBAY/DM,EAZ+D,KAYrDxB,EAZqD,OAatBxgC,mBAASyhC,IAba,mBAa/DQ,EAb+D,KAa7CC,EAb6C,OAclCliC,mBAAS,IAdyB,mBAc/Ds/B,EAd+D,KAcnD6C,EAdmD,OAe9BniC,mBAAS,IAfqB,mBAe/D2/B,EAf+D,KAejDC,EAfiD,OAgBhC5/B,mBAAS,MAhBuB,mBAgB/DoiC,EAhB+D,KAgBlDC,EAhBkD,KAiBhEvS,EAAQd,KAGd7uB,qBAAU,WACR,GAAI1E,GAAQA,EAAKqD,WACf,OAAO+iC,OAAgBlpC,KAIxB,CAAC8C,IAGJ0E,qBAAU,WACRmiC,EAAe3C,EAAcqC,KAG5B,CAACA,IAEJ7hC,qBAAU,WACJ0vB,EAAMsC,OAAOvzB,WAA6B,OAAhBwjC,GAC5BG,GAA0B9mC,EAAMkO,SAASkmB,EAAMsC,OAAOvzB,YAAYzH,MAAK,SAAA6R,GAChEA,IACH8mB,EAAMV,UAAU,0CAChBlxB,EAAQ3D,KAAK,oBAGf8nC,EAAer5B,QAKlB,CAAC6mB,EAAMsC,OAAOvzB,YAGjB,IAAMijC,EAAkB,SAACzqC,GACvB,IAAIoM,GAAe,EAgBnB,OAfAu+B,GAAqB,GACrBQ,GAA2B9mC,GAAMtE,MAAK,SAAAqrC,GAC/Bh/B,IAILg9B,EAAe,CAAEl8B,KAAM,kBAAmBjI,KAAMmmC,IAChDF,EAAe3C,EAAc6C,GAC7BT,GAAqB,GAEjB3qC,GACFA,EAAEsY,OAAOmjB,eAIN,WAAQrvB,GAAe,IAW1B8+B,EAAiB,SAAC/lB,EAAiBimB,GAClCjmB,GAAMA,EAAEgjB,YAKS,IAAlBhjB,EAAEpW,WACAoW,EAAEgjB,WAAWxjC,OAAS,EACxBmmC,EAAoBM,EAAK1/B,QAAO,SAAA6+B,GAAC,OAC/BA,EAAEc,iBAAmBlmB,EAAEpW,YACvBkU,GAAYI,SAAS8B,EAAEgjB,WAAYoC,EAAEjC,mBAGvCwC,EAAoBM,EAAK1/B,QAAO,SAAA6+B,GAAC,OAAIA,EAAEc,iBAAmBlmB,EAAEpW,eAErDoW,EAAEgjB,WAAWxjC,OAAS,GAC/BkB,QAAQzD,IAAI+iB,EAAEgjB,YACd2C,EAAoBM,EAAK1/B,QAAO,SAAA6+B,GAAC,OAAItnB,GAAYI,SAAS8B,EAAEgjB,WAAYoC,EAAEjC,oBAE1EwC,EAAoBM,GAjBpBN,EAAoBM,IA2CxB,OACE,kBAAC,IAAD,CAAShrC,GAAG,cACV,kBAAC,IAAD,CAAW2K,KAAK,OACd,kBAAC,IAAD,CAAaA,KAAK,MAChB,kBAAC,IAAD,CAAYuB,KAAK,SACf,kBAAC,IAAD,OAEF,kBAAC,IAAD,CAAUA,KAAK,SAAf,YACA,kBAAC,IAAD,CAAYA,KAAK,OACf,kBAAC,IAAD,KACE,kBAAC,IAAD,CAASC,KAAM6gB,KAAKriB,KAAK,KAAKuB,KAAK,eAErC,kBAAC,IAAD,CAAWrB,QAzBF,WACjB,IAAMof,EAAYpH,GAAYW,aAC5BgnB,EAASprC,KAAI,SAAAoS,GAAS,MAAO,CAAE7C,WAAY6C,EAAIy5B,eAAgB/nC,KAAMsO,EAAIo4B,sBAAwB,IAAMp4B,EAAIq4B,0BAC3G,SAAC9E,EAAEmG,GAAO,OAAOnG,EAAEp2B,aAAeu8B,EAAEv8B,cAChCq5B,EAAYnlB,GAAYW,aAC5BgnB,EAASprC,KAAI,SAAAoS,GAAS,MAAO,CAAE02B,cAAe12B,EAAI02B,cAAehlC,KAAMqlC,GAAapkC,KAAKgnC,OAAO35B,EAAI02B,gBAAgBG,iBACpH,SAACtD,EAAEmG,GAAQ,OAAOnG,EAAEmD,gBAAkBgD,EAAEhD,iBAE1CyC,EAAc,CAAE3C,WAAU/d,cAE1BiQ,GAAmB,KAgBT,kBAAC,IAAD,CAAS/tB,KAAM6vB,KAAQrxB,KAAK,MAAMuB,KAAK,kBAM/C,kBAAC,IAAD,CAAYe,UAAU,iBACnBwrB,EAAUpS,kBACVikB,GACC,oCACC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAIlrC,KAAI,SAAA2lC,GAC3D,OACE,yBAAKviC,IAAKuiC,EAAGvlB,MAAO,CAAC4rB,OAAQ,aAC3B,kBAAC,KAAD,CAAU5e,MAAO,IAAKsI,OAAQ,WAMpCwV,GAAiD,IAA5BG,EAAiBlmC,QACtC,oDAIF,yBAAK0I,UAAU,iBACXq9B,GAAqBG,EAAiBlmC,OAAS,GAAKkmC,EAAiBn/B,QAAO,SAAA6+B,GAAC,OAAIA,EAAE9C,YAAUjoC,KAAI,SAAAoS,GAAG,OACpG,kBAAC,GAAD,CAAahP,IAAKgP,EAAIpK,UAAWmC,QAASiI,EAAK01B,eAAgB,kBAAM2D,EAAer5B,UAGxF,yBAAKgO,MAAO,CAACsV,OAAQ,MAAOM,UAAW,sBAAuB5I,MAAO,UACrE,yBAAKvf,UAAU,iBACXq9B,GAAqBG,EAAiBlmC,OAAS,GAAKkmC,EAAiBn/B,QAAO,SAAA6+B,GAAC,OAAKA,EAAE9C,YAAUjoC,KAAI,SAAAoS,GAAG,OACrG,kBAAC,GAAD,CAAahP,IAAKgP,EAAIpK,UAAWmC,QAASiI,EAAK01B,eAAgB,kBAAM2D,EAAer5B,WAK1F,kBAAC,IAAD,CACE7H,OAAQswB,GAER,kBAAC,GAAD,CACE6N,WAAYA,EACZp8B,eA3GY,SAAC2/B,GACnBjD,EAAgBiD,GAChBP,EAAeO,EAAeb,GAC9BtQ,GAAmB,IAyGbtW,cAAe,kBAAMsW,GAAmB,OAI5C,kBAAC,IAAD,CACEvwB,OAAwB,OAAhBihC,GAER,kBAAC,GAAD,CACErhC,QAASqhC,EACT5B,eAAgBA,EAChBD,aAvFoB,SAACv3B,GAC3Bq5B,EAAe,MACXr5B,GACF8mB,EAAMV,UAAUpmB,OAwFf8mB,EAAMT,iBC/LEyT,GArD2B,WACxC,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAUC,OAAO,EAAMC,KAAK,QAAQC,GAAG,mBAMvC,kBAAC,IAAD,CAAOD,KAAK,kCAAkCE,OAAQ,SAACC,GAAD,OACpD,kBAAC,GAAiBA,MAGpB,kBAAC,IAAD,CAAOH,KAAK,iBAAiBE,OAAQ,SAACC,GAAD,OACnC,kBAAC,GAAiBA,IACjBJ,OAAO,IAEV,kBAAC,IAAD,CAAOC,KAAK,4BAA4BE,OAAQ,SAACC,GAAD,OAC9C,kBAAC,GAAiBA,MAGpB,kBAAC,IAAD,CAAOH,KAAK,iBAAiBE,OAAQ,SAACC,GAAD,OACnC,kBAAC,GAAiBA,IACjBJ,OAAO,IAGV,kBAAC,IAAD,CAAOC,KAAK,cAAcE,OAAQ,kBAAM,kBAAC,GAAD,OAAeH,OAAO,KAEhE,kBAAC,IAAD,CAAWr/B,KAAK,UAOd,kBAAC,IAAD,CAAc0/B,IAAI,WAAWC,KAAK,kBAChC,kBAAC,IAAD,CAAS1/B,KAAM4oB,OACf,kBAAC,IAAD,kBAEF,kBAAC,IAAD,CAAc6W,IAAI,QAAQC,KAAK,eAC7B,kBAAC,IAAD,CAAS1/B,KAAM2/B,OACf,kBAAC,IAAD,eAEF,kBAAC,IAAD,CAAcF,IAAI,MAAMC,KAAK,kBAC3B,kBAAC,IAAD,CAAS1/B,KAAM4/B,OACf,kBAAC,IAAD,qBC5BKC,GApBwB,WAAO,IACpC/nC,EAASmE,IAAMuD,WAAWxD,GAA1BlE,KAER,OAAIA,EAAKuD,QAEL,kDAIAvD,EAAKqD,WAEL,kBAAC,GAAD,MAKF,kBAAC,IAAD,CAAUmkC,GAAG,YCiBFQ,I,OA/BuB,SAAC,GAAe,IAAdvlC,EAAa,EAAbA,QAAa,EAC3B0B,IAAMuD,WAAWxD,GAAlClE,EAD4C,EAC5CA,KAAM6D,EADsC,EACtCA,OACNwH,EAAalH,IAAMuD,WAAW6D,IAA9BF,UAaP,OAXA48B,aAAmB,WACjBlqC,EAAI,SAAU,CAAEiC,KAAMA,EAAKO,WAC3B8K,IACAxH,IAASnI,MAAK,WACZwsC,YAAW,WACTzlC,EAAQ3D,KAAK,SAAU,CAAC8N,UAAW,SACnCnK,EAAQS,cACP,YAKL,kBAAC,IAAD,CAASnH,GAAG,eACV,kBAAC,IAAD,CAAYiN,UAAU,kBAEpB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,OAAO6D,IAAI,uDAAuDC,IAAI,wBAGzF,yBAAK9D,UAAU,SAAf,2B,SCEFm/B,GAAkB,WAatB,OAXAzjC,qBAAU,WACJnF,EAAID,SAASM,cACfwoC,KAAkBhf,KAAKgf,KAAkBC,aAAaC,UAAU5sC,MAAK,WACnE8F,QAAQzD,IAAI,gC1FxBlByD,QAAQzD,IAAI,wBACZG,gBAAuBZ,G0F4BrBS,EAAI,aAAc,CAAEwqC,KAAMhpC,EAAID,SAASK,iBAAkBG,SAAUP,EAAID,SAASQ,aAC/E,IAGD,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAciJ,UAAU,QACtB,kBAAC,GAAD,MACA,kBAAC,IAAD,CAAiBhN,GAAG,QAElB,kBAAC,IAAD,CAAOwrC,KAAK,SAASE,OAAQ,SAACC,GAAD,OAC3B,kBAAC,GAAUA,MAGb,kBAAC,IAAD,CAAOH,KAAK,UAAUE,OAAQ,SAACC,GAAD,OAC5B,kBAAC,GAAWA,MAGd,kBAAC,IAAD,CAAOH,KAAK,QAAQE,OAAQ,SAACC,GAAD,OAC1B,kBAAC,GAAaA,MAGhB,kBAAC,IAAD,CAAOH,KAAK,IAAID,OAAO,GACrB,kBAAC,IAAD,CAAUE,GAAG,0BAuBdgB,GAZO,WACpB,OACE,kBAAC,IAAD,KACE,kBAAC,EAAD,KACE,kBAAC,GAAD,KACE,kBAAC,GAAD,UCjFVC,IAAShB,OAAO,kBAAC,GAAD,MAASiB,SAASC,eAAe,U","file":"static/js/main.effe2649.chunk.js","sourcesContent":["var map = {\n\t\"./ion-action-sheet-controller_8.entry.js\": [\n\t\t197,\n\t\t43\n\t],\n\t\"./ion-action-sheet-ios.entry.js\": [\n\t\t198,\n\t\t44\n\t],\n\t\"./ion-action-sheet-md.entry.js\": [\n\t\t199,\n\t\t45\n\t],\n\t\"./ion-alert-ios.entry.js\": [\n\t\t200,\n\t\t24\n\t],\n\t\"./ion-alert-md.entry.js\": [\n\t\t201,\n\t\t25\n\t],\n\t\"./ion-app_8-ios.entry.js\": [\n\t\t202,\n\t\t11\n\t],\n\t\"./ion-app_8-md.entry.js\": [\n\t\t203,\n\t\t12\n\t],\n\t\"./ion-avatar_3-ios.entry.js\": [\n\t\t204,\n\t\t46\n\t],\n\t\"./ion-avatar_3-md.entry.js\": [\n\t\t205,\n\t\t47\n\t],\n\t\"./ion-back-button-ios.entry.js\": [\n\t\t206,\n\t\t48\n\t],\n\t\"./ion-back-button-md.entry.js\": [\n\t\t207,\n\t\t49\n\t],\n\t\"./ion-backdrop-ios.entry.js\": [\n\t\t208,\n\t\t81\n\t],\n\t\"./ion-backdrop-md.entry.js\": [\n\t\t209,\n\t\t82\n\t],\n\t\"./ion-button_2-ios.entry.js\": [\n\t\t210,\n\t\t50\n\t],\n\t\"./ion-button_2-md.entry.js\": [\n\t\t211,\n\t\t51\n\t],\n\t\"./ion-card_5-ios.entry.js\": [\n\t\t212,\n\t\t52\n\t],\n\t\"./ion-card_5-md.entry.js\": [\n\t\t213,\n\t\t53\n\t],\n\t\"./ion-checkbox-ios.entry.js\": [\n\t\t214,\n\t\t54\n\t],\n\t\"./ion-checkbox-md.entry.js\": [\n\t\t215,\n\t\t55\n\t],\n\t\"./ion-chip-ios.entry.js\": [\n\t\t216,\n\t\t56\n\t],\n\t\"./ion-chip-md.entry.js\": [\n\t\t217,\n\t\t57\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t218,\n\t\t83\n\t],\n\t\"./ion-datetime_3-ios.entry.js\": [\n\t\t219,\n\t\t20\n\t],\n\t\"./ion-datetime_3-md.entry.js\": [\n\t\t220,\n\t\t21\n\t],\n\t\"./ion-fab_3-ios.entry.js\": [\n\t\t221,\n\t\t58\n\t],\n\t\"./ion-fab_3-md.entry.js\": [\n\t\t222,\n\t\t59\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t223,\n\t\t84\n\t],\n\t\"./ion-infinite-scroll_2-ios.entry.js\": [\n\t\t224,\n\t\t39\n\t],\n\t\"./ion-infinite-scroll_2-md.entry.js\": [\n\t\t225,\n\t\t40\n\t],\n\t\"./ion-input-ios.entry.js\": [\n\t\t226,\n\t\t60\n\t],\n\t\"./ion-input-md.entry.js\": [\n\t\t227,\n\t\t61\n\t],\n\t\"./ion-item-option_3-ios.entry.js\": [\n\t\t228,\n\t\t62\n\t],\n\t\"./ion-item-option_3-md.entry.js\": [\n\t\t229,\n\t\t63\n\t],\n\t\"./ion-item_8-ios.entry.js\": [\n\t\t230,\n\t\t64\n\t],\n\t\"./ion-item_8-md.entry.js\": [\n\t\t231,\n\t\t65\n\t],\n\t\"./ion-loading-ios.entry.js\": [\n\t\t232,\n\t\t26\n\t],\n\t\"./ion-loading-md.entry.js\": [\n\t\t233,\n\t\t27\n\t],\n\t\"./ion-menu_4-ios.entry.js\": [\n\t\t234,\n\t\t18\n\t],\n\t\"./ion-menu_4-md.entry.js\": [\n\t\t235,\n\t\t19\n\t],\n\t\"./ion-modal-ios.entry.js\": [\n\t\t236,\n\t\t14\n\t],\n\t\"./ion-modal-md.entry.js\": [\n\t\t237,\n\t\t15\n\t],\n\t\"./ion-nav_5.entry.js\": [\n\t\t238,\n\t\t13\n\t],\n\t\"./ion-popover-ios.entry.js\": [\n\t\t239,\n\t\t16\n\t],\n\t\"./ion-popover-md.entry.js\": [\n\t\t240,\n\t\t17\n\t],\n\t\"./ion-progress-bar-ios.entry.js\": [\n\t\t241,\n\t\t66\n\t],\n\t\"./ion-progress-bar-md.entry.js\": [\n\t\t242,\n\t\t67\n\t],\n\t\"./ion-radio_2-ios.entry.js\": [\n\t\t243,\n\t\t32\n\t],\n\t\"./ion-radio_2-md.entry.js\": [\n\t\t244,\n\t\t33\n\t],\n\t\"./ion-range-ios.entry.js\": [\n\t\t245,\n\t\t68\n\t],\n\t\"./ion-range-md.entry.js\": [\n\t\t246,\n\t\t69\n\t],\n\t\"./ion-refresher_2-ios.entry.js\": [\n\t\t247,\n\t\t41\n\t],\n\t\"./ion-refresher_2-md.entry.js\": [\n\t\t248,\n\t\t42\n\t],\n\t\"./ion-reorder_2-ios.entry.js\": [\n\t\t249,\n\t\t37\n\t],\n\t\"./ion-reorder_2-md.entry.js\": [\n\t\t250,\n\t\t38\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t251,\n\t\t85\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t252,\n\t\t70\n\t],\n\t\"./ion-searchbar-ios.entry.js\": [\n\t\t253,\n\t\t28\n\t],\n\t\"./ion-searchbar-md.entry.js\": [\n\t\t254,\n\t\t29\n\t],\n\t\"./ion-segment_2-ios.entry.js\": [\n\t\t255,\n\t\t71\n\t],\n\t\"./ion-segment_2-md.entry.js\": [\n\t\t256,\n\t\t72\n\t],\n\t\"./ion-select_3-ios.entry.js\": [\n\t\t257,\n\t\t34\n\t],\n\t\"./ion-select_3-md.entry.js\": [\n\t\t258,\n\t\t35\n\t],\n\t\"./ion-slide_2-ios.entry.js\": [\n\t\t259,\n\t\t86\n\t],\n\t\"./ion-slide_2-md.entry.js\": [\n\t\t260,\n\t\t87\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t261,\n\t\t73\n\t],\n\t\"./ion-split-pane-ios.entry.js\": [\n\t\t262,\n\t\t88\n\t],\n\t\"./ion-split-pane-md.entry.js\": [\n\t\t263,\n\t\t89\n\t],\n\t\"./ion-tab-bar_2-ios.entry.js\": [\n\t\t264,\n\t\t74\n\t],\n\t\"./ion-tab-bar_2-md.entry.js\": [\n\t\t265,\n\t\t75\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t266,\n\t\t36\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t267,\n\t\t76\n\t],\n\t\"./ion-textarea-ios.entry.js\": [\n\t\t268,\n\t\t77\n\t],\n\t\"./ion-textarea-md.entry.js\": [\n\t\t269,\n\t\t78\n\t],\n\t\"./ion-toast-ios.entry.js\": [\n\t\t270,\n\t\t30\n\t],\n\t\"./ion-toast-md.entry.js\": [\n\t\t271,\n\t\t31\n\t],\n\t\"./ion-toggle-ios.entry.js\": [\n\t\t272,\n\t\t22\n\t],\n\t\"./ion-toggle-md.entry.js\": [\n\t\t273,\n\t\t23\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t274,\n\t\t90\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 144;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t278,\n\t\t98\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 145;\nmodule.exports = webpackAsyncContext;","import { ApplicationUser } from '../context/ApplicationUserContext';\nimport { AuthorizedItems } from './../orbital-interfaces/authorized-items';\nimport { openDB, DBSchema, IDBPDatabase } from 'idb';\n\nconst DB_NAME = \"osKeyStore\";\nconst DB_VERSION = 1;\n\ninterface OSKeyStore extends DBSchema {\n  userStore: {\n    key: \"user\";\n    value: ApplicationUser;\n  },\n  authItems:  {\n    key: \"authItems\";\n    value: AuthorizedItems;\n  }\n};\n\n// ----------------------------------------------------------------------------------------------------------\nconst getKeyStore = (): Promise<IDBPDatabase<OSKeyStore>> => {\n  return  openDB<OSKeyStore>(DB_NAME, DB_VERSION, {\n    upgrade(db) {\n      db.createObjectStore(\"userStore\");\n      db.createObjectStore(\"authItems\");\n    }\n  });\n};\n\n// ----------------------------------------------------------------------------------------------------------\nconst putUserState = async (state: ApplicationUser) => {\n  const db = await getKeyStore();\n  await db.put(\"userStore\", state, \"user\");\n}\n\n// ----------------------------------------------------------------------------------------------------------\nconst getUserState = async (): Promise<ApplicationUser | undefined> => {\n  const db = await getKeyStore();\n  return await db.get(\"userStore\", \"user\");\n};\n\n// ----------------------------------------------------------------------------------------------------------\nconst getAccessToken = async (): Promise<string | undefined> => {\n  const db = await getKeyStore();\n  return await db.get(\"userStore\", \"user\").then(state => {\n    return (state) ? state.access_token : undefined;\n  });\n};\n\n// ----------------------------------------------------------------------------------------------------------\nconst putAuthItems = async (auth: AuthorizedItems) => {\n  const db = await getKeyStore();\n  await db.put(\"authItems\", auth, \"authItems\");\n}\n\nconst getAuthItems = async () => {\n  const db = await getKeyStore();\n  return db.get(\"authItems\", \"authItems\");\n}\n\nexport default {\n  getKeyStore,\n  putUserState,\n  getUserState,\n  getAccessToken,\n  putAuthItems,\n  getAuthItems\n}\n","import * as firebase from 'firebase/app';\nimport 'firebase/analytics';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAS526InuG-53VGKi5SA780Mh0YwHkhMDE\",\n  authDomain: \"orbital-shift-team-dashboard.firebaseapp.com\",\n  databaseURL: \"https://orbital-shift-team-dashboard.firebaseio.com\",\n  projectId: \"orbital-shift-team-dashboard\",\n  storageBucket: \"orbital-shift-team-dashboard.appspot.com\",\n  messagingSenderId: \"475985033328\",\n  appId: \"1:475985033328:web:77740655a89e28de035cb5\",\n  measurementId: \"G-TGE8788D28\"\n};\n\n// ------------------------------------------------------------------------------------------------\nexport function initialize() {\n  console.log(\"firebase initialized\");\n  firebase.initializeApp(firebaseConfig);\n}\n\n// ------------------------------------------------------------------------------------------------\nexport function log(eventName: string, eventParams?: any) {\n  firebase.analytics().logEvent(eventName, eventParams);\n}\n","\nexport interface IKeyedCollection<T> {\n  Add(key: string, value: T): void;\n  ContainsKey(key: string): boolean;\n  Count(): number;\n  Item(key: string): T;\n  Keys(): string[];\n  Remove(key: string): T;\n  Values(): T[];\n}\n\nexport class KeyedCollection<T> implements IKeyedCollection<T> {\n  private items: { [index: string]: T } = {};\n\n  private count: number = 0;\n\n  public ContainsKey(key: string): boolean {\n      return this.items.hasOwnProperty(key);\n  }\n\n  public Count(): number {\n      return this.count;\n  }\n\n  public Add(key: string, value: T) {\n      if(!this.items.hasOwnProperty(key))\n           this.count++;\n\n      this.items[key] = value;\n  }\n\n  public Remove(key: string): T {\n      var val = this.items[key];\n      delete this.items[key];\n      this.count--;\n      return val;\n  }\n\n  public Item(key: string): T {\n      return this.items[key];\n  }\n\n  public Keys(): string[] {\n      var keySet: string[] = [];\n\n      for (var prop in this.items) {\n          if (this.items.hasOwnProperty(prop)) {\n              keySet.push(prop);\n          }\n      }\n\n      return keySet;\n  }\n\n  public Values(): T[] {\n      var values: T[] = [];\n\n      for (var prop in this.items) {\n          if (this.items.hasOwnProperty(prop)) {\n              values.push(this.items[prop]);\n          }\n      }\n\n      return values;\n  }\n}\n\n","import { KeyedCollection } from '../util/KeyedCollection';\r\nimport { ApplicationUser } from '../context/ApplicationUserContext';\r\nimport { isPlatform }  from '@ionic/react';\r\n\r\nexport interface EnvironmentType {\r\n  key: string;\r\n  name: string;\r\n  url: string\r\n}\r\n\r\nconst envTypes: EnvironmentType[] = [\r\n  { key: 'prod', name: 'Production',  url: 'https://api.orbitalshift.com/' },\r\n  { key: 'sbx',  name: 'Sandbox',     url: 'https://sandboxapi.orbitalshift.com/'},\r\n  { key: 'loc',  name: 'Local',       url: 'http://localhost:54825/'},\r\n  { key: 'emu',  name: 'Local (Emu)', url: 'http://10.0.2.2:54825/'},\r\n  { key: 'tst',  name: 'TestServer',  url: 'http://TestServer:8000/'}\r\n];\r\n\r\nconst environments = new KeyedCollection<EnvironmentType>();\r\nenvTypes.map(et => environments.Add(et.key, et));\r\n\r\n// ------------------------------------------------------------------------------------------------\r\n// NOTE: versionName, versionCode, and revisionHash should be set to _REPLACE_XXXXX_XXX_ strings that\r\n//       get replaced when 'build' is run from the command line.\r\n//       See OSROOT/_buildenv/BuildModule/CommandLineFunctions.psm1\r\nconst settings = {\r\n  env: environments,\r\n  versionName: '2.0.0',\r\n  versionCode: '6071',\r\n  revisionHash: 'd3d6a93',\r\n  appVersionString: `2.0.0.6071 (d3d6a93)`,\r\n  hasCapacitor: isPlatform('capacitor'),\r\n  platform: isPlatform('ios') ? 'ios' : isPlatform('android') ? 'android' : 'other'\r\n};\r\n\r\n// ------------------------------------------------------------------------------------------------\r\nconst getApiUrl = (user: ApplicationUser, endpoint: string): string => {\r\n  return settings.env.Item(user.environment).url + endpoint;\r\n};\r\n\r\n// ------------------------------------------------------------------------------------------------\r\nconst getUserAndEnvironmentFromInput = (input: string) : {username: string, env: EnvironmentType} => {\r\n  if (input.length < 4) {\r\n    return {username: input, env: settings.env.Item('prod')};\r\n  }\r\n\r\n  const envKey = input.toLowerCase().substring(0, 4);\r\n  const username = input.substring(4);\r\n  switch (envKey) {\r\n    case 'sbx ':\r\n      return {username, env: settings.env.Item('sbx')};\r\n    case 'loc ':\r\n      return {username, env: settings.env.Item('loc')};\r\n    case 'emu ':\r\n      return {username, env: settings.env.Item('emu')};\r\n    case 'tst ':\r\n      return {username, env: settings.env.Item('tst')};\r\n    default:\r\n      return {username: input, env: settings.env.Item('prod')};\r\n  }\r\n};\r\n\r\nexport default {\r\n  settings,\r\n  getApiUrl,\r\n  getUserAndEnvironmentFromInput\r\n}\r\n","export enum DeviceOperatingSystem\n{\n  iOS = 1,\n  Android = 2\n}\n","import { ApplicationUser } from '../context/ApplicationUserContext';\nimport env from './environment';\nimport { log } from '../util/logger';\n\n// ----------------------------------------------------------------------------------------------\nconst post = async(user: ApplicationUser, baseUrl: string, data?: any) => {\n  const url = env.getApiUrl(user, baseUrl);\n\n  try {\n    const response = await fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${user.access_token}`,\n        'AppVersion': env.settings.appVersionString\n      }\n    });\n\n    const contentType = response.headers.get(\"content-type\");\n    if (contentType && contentType.indexOf(\"application/json\") !== -1) {\n      const results = await response.json();\n      log('api_succeeded', { method: 'POST', baseUrl, username: user.username });\n      return results;\n    }\n\n    log('api_succeeded', { method: 'POST', baseUrl, username: user.username });\n  } catch (err) {\n    log('api_err', { method: 'POST', baseUrl, username: user?.username, ...data, appVersion: env.settings.appVersionString});\n    console.error('Error calling post against url, ' + baseUrl + ': ' + err);\n    throw err;\n  }\n};\n\n// ----------------------------------------------------------------------------------------------\nconst putData = async (user: ApplicationUser, baseUrl: string, data: any) => {\n  const url =  env.getApiUrl(user, baseUrl);\n\n  try {\n    console.log(\"BING\");\n    console.log(JSON.stringify(data));\n    console.log(\"BONG\");\n    const dataString = JSON.stringify(data);\n    console.log(\"GONG\");\n\n    const response = await fetch(url, {\n      method: 'PUT',\n      body: dataString,\n      headers: {\n      'Content-Type': 'application/json',\n        'Authorization': `Bearer ${user.access_token}`,\n        'AppVersion': env.settings.appVersionString\n      }\n    });\n\n    const results = await response.json();\n    log('api_succeeded', { method: 'PUT', baseUrl, username: user.username });\n    return results;\n  } catch (err) {\n    log('api_err', { method: 'PUT', baseUrl, username: user?.username, ...data, appVersion: env.settings.appVersionString})\n    console.error('Error calling putData against url, ' + baseUrl + ': ' + err);\n    throw err;\n  }\n};\n\n\n// ----------------------------------------------------------------------------------------------\nconst get = async (user: ApplicationUser, baseUrl: string, data?: any) => {\n  const url =  env.getApiUrl(user, baseUrl);\n\n  try {\n    let options = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${user.access_token}`,\n        'AppVersion': env.settings.appVersionString,\n\n      },\n      body: null as null | string\n    };\n\n    if (data) {\n      options.body = JSON.stringify(data);\n    }\n\n    const response = await fetch(url, options);\n    const results = await response.json();\n    log('api_succeeded', { method: 'GET', baseUrl, username: user.username });\n    return results;\n  } catch (err) {\n    log('api_err', { method: 'GET', baseUrl, username: user?.username, appVersion: env.settings.appVersionString})\n    console.error('Error calling get against url, ' + baseUrl + ': ' + err);\n    throw err;\n  }\n};\n\n// ----------------------------------------------------------------------------------------------\nconst put = async (user: ApplicationUser, baseUrl: string, data?: any) => {\n  const url =  env.getApiUrl(user, baseUrl);\n  let options = {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${user.access_token}`,\n      'AppVersion': env.settings.appVersionString\n    },\n  } as any;\n\n  if (data) {\n    options.body = JSON.stringify(data!);\n  }\n\n  try {\n    const response = await fetch(url, options);\n    const contentType = response.headers.get(\"content-type\");\n    if (contentType && contentType.indexOf(\"application/json\") !== -1) {\n      const results = await response.json();\n      log('api_succeeded', { method: 'PUT', baseUrl, username: user.username });\n      return results;\n    }\n\n    log('api_succeeded', { method: 'PUT', baseUrl, username: user.username });\n  } catch (err) {\n    log('api_err', { method: 'PUT', baseUrl, username: user?.username, ...data, appVersion: env.settings.appVersionString})\n    console.error('Error calling put against url, ' + baseUrl + ': ' + err);\n    throw err;\n  }\n};\n\n// ----------------------------------------------------------------------------------------------\nconst del = async (user: ApplicationUser, baseUrl: string, data?: any) => {\n  const url =  env.getApiUrl(user, baseUrl);\n  let options = {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${user.access_token}`,\n      'AppVersion': env.settings.appVersionString\n    },\n  } as any;\n\n  if (data) {\n    options.body = JSON.stringify(data!);\n  }\n\n  try {\n    const response = await fetch(url, options);\n    const contentType = response.headers.get(\"content-type\");\n    if (contentType && contentType.indexOf(\"application/json\") !== -1) {\n      log('api_succeeded', { method: 'DELETE', baseUrl, username: user.username });\n      return await response.json();\n    }\n\n    log('api_succeeded', { method: 'DELETE', baseUrl, username: user.username });\n    return;\n  } catch (err) {\n    log('api_err', { method: 'DELETE', baseUrl, username: user?.username, ...data, appVersion: env.settings.appVersionString})\n    console.error('Error calling delete against url, ' + baseUrl + ': ' + err);\n    throw err;\n  }\n};\n\nexport default {\n  get,\n  post,\n  put,\n  putData,\n  del\n}\n","import {ApplicationUser} from '../context/ApplicationUserContext';\nimport apiHelper from './OrbitalApiHelper';\nimport {DeviceOperatingSystem} from \"../enums/DeviceOperatingSystem\";\nimport {NotificationTypeModel} from \"../orbital-interfaces/NotificationTypeModel\";\nimport env from './environment';\nimport {log} from '../util/logger';\n\n// ----------------------------------------------------------------------------------------------\nconst subscribe = async(user: ApplicationUser, token: string) => {\n  const url = `api/v1/employee/notifications/subscribe`;\n  const operatingSystem = (env.settings.platform === 'ios')\n    ? DeviceOperatingSystem.iOS\n    : DeviceOperatingSystem.Android;\n\n  log('pushNotifications_subscribeCalled', { token, operatingSystem, username: user.username, access_token: user.access_token });\n\n  return await apiHelper.putData(user, url, { TokenId: token, OperatingSystem: operatingSystem });\n};\n\n// ----------------------------------------------------------------------------------------------\nconst unsubscribe = async(user: ApplicationUser, token: string) => {\n  const url = `api/v1/employee/notifications/unsubscribe`;\n  const operatingSystem = (env.settings.platform === 'ios')\n    ? DeviceOperatingSystem.iOS\n    : DeviceOperatingSystem.Android;\n\n  return await apiHelper.putData(user, url, { TokenId: token, OperatingSystem: operatingSystem});\n};\n\n// ----------------------------------------------------------------------------------------------\nconst getTypesSelectedByUser = async(user: ApplicationUser) => {\n  const url = `api/v1/employee/notifications/types`;\n  return await apiHelper.get(user, url) as NotificationTypeModel[];\n};\n\n// ----------------------------------------------------------------------------------------------\nconst putTypes = async(user: ApplicationUser, typeIds: number[]) => {\n  const url = `api/v1/employee/notifications/types`;\n  const data = {\n    ids: typeIds\n  };\n\n  return await apiHelper.put(user, url, data) as void;\n};\n\n// ----------------------------------------------------------------------------------------------\nconst listTypes = async(user: ApplicationUser) => {\n  const url = `api/v1/employee/notifications/list-types`;\n\n  // NOTE: the API no longer really uses passed-in data since the\n  // \"Communications rewrite\"\n\n  return await apiHelper.get(user, url) as NotificationTypeModel[];\n};\n\nexport default {\n  subscribe,\n  unsubscribe,\n  getTypesSelectedByUser,\n  putTypes,\n  listTypes\n}\n","import { Plugins, PushNotification, PushNotificationToken, PushNotificationActionPerformed } from '@capacitor/core';\nimport { log } from './logger';\nimport env from '../api/environment';\nimport pushApi from '../api/PushNotificationsAPI';\nimport {ApplicationUser} from \"../context/ApplicationUserContext\";\nimport { createBrowserHistory } from 'history';\n\nconst { PushNotifications } = Plugins;\n\n// ---------------------------------------------------------------------------------------------------------\nconst register = (\n  user: ApplicationUser,\n  pushEnabled: (enabled: boolean) => void,\n  showMessage: (msg: string) => void) => {\n  const history = createBrowserHistory({ forceRefresh: true});\n\n  PushNotifications.register().then(() => {\n    console.log(\"PushNotificationController: register called and returned\");\n  });\n\n  // On succcess, we should be able to receive notifications\n  PushNotifications.addListener('registration',\n    (token: PushNotificationToken) => {\n\n      pushApi.subscribe(user, token.value);\n      pushEnabled(true);\n      showMessage('Push registration success, token: ' + token.value);\n      log('pushNotifications_registered', { token: token.value, platform: env.settings.platform });\n    }\n  );\n\n  // Some issue with your setup and push will not work\n  PushNotifications.addListener('registrationError',\n    (error: any) => {\n      showMessage('Error on registration: ' + JSON.stringify(error));\n      log('pushNotifications_registrationError', { error, platform: env.settings.platform });\n    }\n  );\n\n  // Show us the notification payload if the app is open on our device\n  PushNotifications.addListener('pushNotificationReceived',\n    (notification: PushNotification) => {\n      if (notification) {\n        if (notification.data && notification.data.MessageId) {\n          showMessage(\"NOTIFICATION: \" + notification.title + \": \" + notification.body + \" id:\" + notification.data.MessageId);\n          history.push('/tabs/messages/' + notification.data.MessageId);\n          history.goForward();\n        } else {\n          showMessage(\"NOTIFICATION: \" + notification.title + \": \" + notification.body + \" (no id)\");\n        }\n\n        log('pushNotifications_receivedWhenOpen', {\n          title: notification.title,\n          body: notification.body,\n          messageId: (notification.data.MessageId) ?? -123\n        });\n\n      }\n\n      /*\n      let notif = this.state.notifications;\n      notif.push({ id: notification.id, title: notification.title, body: notification.body })\n      this.setState({\n        notifications: notif\n      })\n      */\n    }\n  );\n\n  // Method called when tapping on a notification\n  PushNotifications.addListener('pushNotificationActionPerformed',\n    (notification: PushNotificationActionPerformed) => {\n      if (notification.notification.data && notification.notification.data.MessageId) {\n        showMessage(\"TAPPED ON NOTIFICATION: \" + notification.notification.title + \": \" + notification.notification.body + \" id:\" + notification.notification.data.MessageId);\n        history.push('/tabs/messages/' + notification.notification.data.MessageId);\n        history.goForward();\n      } else {\n        showMessage(\"TAPPED ON NOTIFICATION: \" + notification.notification.title + \": \" + notification.notification.body + \" (no id)\");\n      }\n\n      log('pushNotifications_actionPerformed', {\n        title: notification.notification.title,\n        body: notification.notification.body,\n        messageId: (notification.notification.data.MessageId) ?? -123\n      });\n\n      /*\n      let notif = this.state.notifications;\n      notif.push({ id: notification.notification.data.id, title: notification.notification.data.title, body: notification.notification.data.body })\n      this.setState({\n        notifications: notif\n      })\n      */\n    }\n  );\n};\n\nexport default {\n  register\n}\n","import React, { useState, useEffect } from \"react\";\nimport db from '../data/dbStore';\nimport { Geolocation} from '@capacitor/core';\nimport PushController from '../util/push-notifications-controller';\nimport env from '../api/environment';\n\nexport interface ApplicationUser {\n  isLoggedin: boolean;\n  access_token?: string;\n  username?: string;\n  darkMode: boolean;\n  loading: boolean;\n  latitude?: number;\n  longitude?: number;\n  lastLocationUpdate?: Date;\n  environment: string;\n  isPushEnabled: boolean;\n}\n\nexport interface IApplicationUserContext {\n  user: ApplicationUser;\n  logout: () => Promise<void>;\n  userLoggedIn: (username: string, access_token: string, environment: string) => Promise<ApplicationUser>;\n  refreshGeoLocation: () => Promise<void>;\n  pushEnabled: (enabled: boolean) => void;\n}\n\nconst INITIAL_APPLICATION_USER: ApplicationUser = {\n  isLoggedin: false,\n  access_token: undefined,\n  username: '',\n  darkMode: false,\n  loading: true,\n  latitude: undefined,\n  longitude: undefined,\n  lastLocationUpdate: undefined,\n  environment: 'prod',\n  isPushEnabled: false\n};\n\nconst INITIAL_APPLICATION_USER_CONTEXT = {\n  user: INITIAL_APPLICATION_USER,\n  logout: async () => {},\n  userLoggedIn: (u: string, at: string, e: string) => { return new Promise<ApplicationUser>(() => { return INITIAL_APPLICATION_USER})},\n  refreshGeoLocation: () => {return new Promise<void>(() => {})},\n  pushEnabled: (e: boolean) => {}\n};\n\nexport const ApplicationUserContext = React.createContext<IApplicationUserContext>(INITIAL_APPLICATION_USER_CONTEXT);\n\nexport const ApplicationUserContextProvider = (props: any) => {\n  const [userState, internalSetUserState] = useState({...INITIAL_APPLICATION_USER});\n\n  const refreshGeoLocation = async () => {\n    try {\n      const position = await Geolocation.getCurrentPosition();\n      internalSetUserState({ ...userState, latitude: position.coords.latitude, longitude: position.coords.longitude});\n    } catch(err) {\n      console.log(\"Error trying to get geo location: \" + err.message);\n    }\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  useEffect(() => {\n    let mounted = true;\n\n    Promise.all([\n      db.getUserState(),\n    ]).then(response => {\n      if (mounted)\n      {\n        const newState = response[0];\n        if (newState) {\n          internalSetUserState({ ...newState, loading: false});\n        } else {\n          internalSetUserState({...userState, loading: false});\n        }\n      }\n    });\n    return (() => { mounted = false;});\n\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    if (userState && !userState.isPushEnabled &&\n        userState.access_token &&\n        userState.access_token.length > 0 &&\n        env.settings.platform !== 'other') {\n      PushController.register(userState, pushEnabled, () => {});\n    }\n\n    // eslint-disable-next-line\n  }, [userState.isPushEnabled, userState.access_token]);\n\n  // ----------------------------------------------------------------------------------------------\n  const pushEnabled = (enabled: boolean) => {\n    internalSetUserState({ ...userState, isPushEnabled: enabled});\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  const userLoggedIn = async (username: string, access_token: string, environment: string): Promise<ApplicationUser> => {\n    const currentState = await db.getUserState();\n    try {\n      const position = await Geolocation.getCurrentPosition();\n      const newState = {\n        username,\n        access_token,\n        environment,\n        isLoggedin: true,\n        darkMode: currentState ? currentState.darkMode : INITIAL_APPLICATION_USER.darkMode,\n        loading: false,\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        isPushEnabled: false\n      };\n      await db.putUserState(newState);\n      internalSetUserState(newState);\n      console.log(\"ApplicationUserContextProvider: userLoggedin. \", newState.isLoggedin);\n      return newState;\n    } catch (err) {\n      console.log(\"Error trying to get geolocation: \" + err.message);\n      const newState = {\n        username,\n        access_token,\n        environment,\n        isLoggedin: true,\n        darkMode: currentState ? currentState.darkMode : INITIAL_APPLICATION_USER.darkMode,\n        loading: false,\n        latitude: currentState?.latitude,\n        longitude: currentState?.longitude,\n        isPushEnabled: false\n      };\n      await db.putUserState(newState);\n      internalSetUserState(newState);\n      return newState;\n    }\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  const logout = async () => {\n    const newState = { ...userState, isLoggedin: false, access_token: undefined};\n    internalSetUserState(newState);\n    await db.putUserState(newState);\n    console.log(\"ApplicationUserContextProvider: logout. \", newState.isLoggedin);\n  };\n\n  return (\n    <ApplicationUserContext.Provider value={{\n      user: userState,\n      userLoggedIn,\n      logout,\n      refreshGeoLocation,\n      pushEnabled\n    }} >\n      {props.children}\n    </ApplicationUserContext.Provider>\n  )\n};\n","import { IonAlert } from '@ionic/react';\nimport React, { useState } from \"react\";\n\nfunction useDialogBox() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [alertData, setAlertData] = useState({header: \"\", message: \"\", onDismiss: () => {}});\n\n  // ------------------------------------------------------------------------------------\n  const showAlert = (header: string, message: string, onDismiss: () => void) => {\n    setAlertData({\n      header,\n      message,\n      onDismiss\n    });\n\n    setIsOpen(true);\n  };\n\n  const alertBoxJsx = (\n    <IonAlert\n          isOpen={isOpen}\n          onDidDismiss={() => { setIsOpen(false); alertData.onDismiss();}}\n          header={alertData.header}\n          message={alertData.message}\n          buttons={['OK']}\n    />\n  );\n\n  return {\n    showAlert,\n    alertBoxJsx\n  }\n}\n\nexport default useDialogBox;\n","import { ClockInRequirement } from '../enums/ClockInRequirement';\nimport { EventInformation } from './TEC';\nimport { DailyNotes } from './DailyNotes';\n\nexport interface HomePageDataGet {\n    auth: AuthorizedItems;\n    currentEvents: EventInformation[];\n    nextEvent?: EventInformation;\n    dailyNotes: DailyNotes[];\n}\n\nexport enum Role {\n  Employee = \"Employee\",\n  Admin = \"Admin\",\n  LocationAdmin = \"Location Admin\",\n  BusinessAdmin = \"Business Admin\",\n  Orbital = \"Orbital\",\n}\n\nexport const initialHomePageData: HomePageDataGet = {\n  auth: { locations: [], tags: [], payrollEvents: [], employeeId: 0, loading: false, role: Role.Employee},\n  currentEvents: [],\n  nextEvent: undefined,\n  dailyNotes: []\n};\n\nexport enum TimeFormat {\n  HoursMinutes = 0,      // 05:59\n  HoursAndDecimals = 1   // 5.99\n}\n\nexport enum ClockOutValueType {\n  Unit = 1,\n  Money = 2\n}\n\nexport enum AdminAuthorization\n{\n  None = 0,\n  CanViewWages = 1,\n  CanEditPublishedTo = 2,\n  CanEditTemplates = 4,\n  CanEditSchedules = 8,\n  CanEditEmployeeClockEvents = 16,\n  CanEditOwnClockEvents = 32,\n  CanEditUserAccounts = 64\n}\n\nexport interface AuthorizedItems {\n    employeeId: number;\n    role: Role,\n    loading: boolean;\n    locations: AuthorizedLocation[];\n    tags: AuthorizedTag[];\n    payrollEvents: AuthorizedPayrollEvent[];\n}\n\nexport interface AuthorizedLocation {\n    id: number;\n    name: string;\n    abbr: string;\n    departments: AuthorizedDepartment[];\n    settings: LocationSettings;\n}\n\nexport interface AuthorizedDepartment {\n    id: number;\n    name: string;\n    abbr: string;\n    adminAuth: AdminAuthorization;\n    positions: AuthorizedPosition[];\n}\n\nexport interface AuthorizedTag {\n    id: number;\n    name: string;\n    locId: number;\n    positionIds: number[];\n}\n\nexport interface AuthorizedPosition {\n    id: number;\n    name: string;\n    hasPosition: boolean;\n    tagsIds: number[];\n    payrollEventIds: number[];\n}\n\nexport interface AuthorizedPayrollEvent {\n    id: number;\n    name: string;\n    positionIds: number[];\n}\n\nexport enum UnscheduledBreakOptions {\n  Both = 0,\n  Unpaid = 1,\n  Paid = 2,\n  None = 3\n}\n\nexport enum BreakType {\n    UnscheduledUnpaid = 0,\n    UnscheduledPaid = 1,\n    Scheduled = 2\n}\n\nexport enum EmployeeSort {\n  FirstName = 1,\n  LastName = 2,\n  EmploymentStart = 3,\n  EarliestEventStart = 4\n}\n\nexport interface LocationSettings {\n    LocationId: number;\n    DayStartTime: any;\n    DayWeekStartsOn: string;\n    EmployeeRequestWindowStart: number;\n    EmployeeRequestWindowEnd: number;\n    EmployeeDaysToShowSchedule: number;\n    RequestPanelDisplayDays: number;\n    EmployeesShowShiftEventType: boolean;\n    ShowUnavailableEventType: boolean;\n    ShowVacationEventType: boolean;\n    ShowAbsentEventType: boolean;\n    ShowSpecialDates: boolean;\n    AllowEmployeesToDeleteUnavailableAndVacationApproved: boolean;\n    EmployeesOnlyViewOwnPositions: boolean;\n    EmployeesOnlyViewOwnDepartments: boolean;\n    EnableLegacyBreak: boolean;\n    EnableLegacyBreakStart: boolean;\n    DefaultBreakDuration: any;\n    DefaultBreakStartTime: any;\n    ShowTimeClockBreak: boolean;\n    EnableEnhancedBreakManagement: boolean;\n    TimeZoneOffset: number;\n    OtherEmployeesViewableTypeAndStatus: any;\n    NotesPanel: number;\n    ClockOutValueLabel: string;\n    ClockOutValueType: ClockOutValueType;\n    EnableEventConfirm: boolean;\n    TimeFormat: TimeFormat;\n    TimeFormatDigits: number;\n    TimeFormatDecimals: number;\n    LockDate: any;\n    HideScheduleEventsInPast: boolean;\n    NewEventDefaultStartTime: any;\n    NewEventDefaultEndTime: any;\n    EnableAutoAdjustingDateTimes: any;\n    GenericEmployeeIdName: string;\n    GenericEmployeeId2Name: string;\n    GenericEmployeeId3Name: string;\n    GenericEmployeePerPositionIdName: string;\n    GenericEmployeePerPositionId2Name: string;\n    GenericEmployeePerPositionId3Name: string;\n    GenericPositionIdName: string;\n    GenericPositionId2Name: string;\n    GenericPositionId3Name: string;\n    GenericDepartmentIdName: string;\n    GenericDepartmentId2Name: string;\n    GenericDepartmentId3Name: string;\n    GenericLocationIdName: string;\n    GenericLocationId2Name: string;\n    GenericLocationId3Name: string;\n    CalculatedSchedulePublishedTo: any;\n    RequireGeoLocation: boolean;\n    RequireIPAddress: boolean;\n    EnablePTO: boolean;\n    ClockInWithDifferentTag: boolean;\n    UnscheduledBreakOptions: UnscheduledBreakOptions;\n    ClockInRequirement: ClockInRequirement;\n    EmployeeSort: EmployeeSort;\n    EnableDirectCoverRequest: boolean;\n    EnablePositionChangeForEmployeePosition: boolean;\n}\n","import React from 'react';\nimport {IonItem, IonToggle, IonList, IonLabel } from '@ionic/react';\nimport {NotificationTypeModel} from \"../orbital-interfaces/NotificationTypeModel\";\n\ninterface ToggleListExProps {\n  list: NotificationTypeModel[] | null;\n  selected: NotificationTypeModel[] | null;\n  selectionChanged(newSelected: NotificationTypeModel[] | null): void;\n}\n\nconst ToggleListEx: React.FC<ToggleListExProps> = ({list, selected, selectionChanged}) => {\n\n  // ----------------------------------------------------------------------------------------------\n  const isItemChecked = (id: number) => {\n    if (!selected || selected.length === 0) {\n      return false;\n    }\n\n    for (let i = 0; i < selected.length; i++) {\n      if (selected[i].id === id)\n      {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  const onAllChanged = () => {\n    const checked = (list?.length !== selected?.length);\n\n    if (list?.length === selected?.length) {\n      if (checked) {\n        return;\n      }\n\n      const newSelected = [] as NotificationTypeModel[];\n      selectionChanged(newSelected);\n    } else {\n      if (!checked) {\n        return;\n      }\n\n      selectionChanged(list?.slice());\n    }\n\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  const itemToggle = (item: NotificationTypeModel) => {\n    if (selected === null) {\n      return;\n    }\n\n    const checked = !selected.map(n => n.id).includes(item.id);\n\n    if (checked) {\n      const newList =  selected.slice();\n      newList.push(item);\n      selectionChanged(newList);\n    } else {\n      const newlist = selected.filter(r => r.id !== item.id);\n      selectionChanged(newlist);\n    }\n  };\n\n  if (!list) {\n    return (\n      <div>Loading...</div>\n    )\n  }\n\n  return (\n    <IonItem>\n      <IonList>\n        <IonItem key={-1}>\n          <IonToggle\n            mode=\"md\"\n            key={-1}\n            checked={list?.length === selected?.length}\n            onClick={() => onAllChanged()}\n          />\n          <IonLabel>SELECT ALL</IonLabel>\n        </IonItem>\n        {list && list.map(toggle => (\n          <IonItem key={toggle.id}>\n            <IonToggle\n              mode=\"md\"\n              key={toggle.id}\n              onClick={() => {itemToggle(toggle)}}\n              checked={isItemChecked(toggle.id)} />\n            <IonLabel>{toggle.name}</IonLabel>\n          </IonItem>\n        ))}\n      </IonList>\n    </IonItem>\n  );\n};\n\nexport default ToggleListEx;\n","import React, {useContext, useEffect, useState} from 'react';\nimport { IonButton, IonButtons, IonIcon, IonContent, IonFooter, IonHeader, IonTitle, IonToolbar } from '@ionic/react';\nimport { arrowRoundBack } from 'ionicons/icons';\nimport ToggleListEx from '../components/ToggleListEx';\nimport pushApi from '../api/PushNotificationsAPI';\nimport {ApplicationUserContext} from \"../context/ApplicationUserContext\";\nimport {NotificationTypeModel} from \"../orbital-interfaces/NotificationTypeModel\";\n\ninterface NotificationSettingsModalProps {\n  onDismissModal: () => void;\n  isOpen: boolean;\n}\n\nconst NotificationSettingsModal: React.FC<NotificationSettingsModalProps> = ({ onDismissModal, isOpen }) => {\n  const { user } = useContext(ApplicationUserContext);\n  const [ notifications, setNotifications] = useState(null as NotificationTypeModel[] | null);\n  const [ selectedNotifications, setSelectedNotifications ] = useState(null as NotificationTypeModel[] | null);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!isOpen) {\n      setSelectedNotifications(null);\n      setNotifications(null);\n      return;\n    }\n\n    let isSubscribed = true;\n\n    Promise.all([\n      pushApi.getTypesSelectedByUser(user),\n      pushApi.listTypes(user)\n    ]).then(responses => {\n      if (!isSubscribed) {\n        return;\n      }\n\n      setSelectedNotifications(responses[0]);\n      setNotifications(responses[1]);\n    });\n\n    return () => { isSubscribed = false} ;\n  }, [isOpen, user]);\n\n\n  // --------------------------------------------------------------------------------------\n  const onCancel = () => {\n    onDismissModal();\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onSelectionChanged = (newSelected: NotificationTypeModel[]) => {\n    const ids = newSelected.map(n => n.id);\n    pushApi.putTypes(user, ids).then(() => {\n      setSelectedNotifications(newSelected);\n    });\n  };\n\n  return (\n    <>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonButton onClick={onCancel}>\n              <IonIcon icon={arrowRoundBack} mode=\"md\" slot=\"icon-only\" />\n            </IonButton>\n          </IonButtons>\n          <IonTitle>\n            Notifications\n          </IonTitle>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent class=\"outer-content\">\n        <ToggleListEx\n          list={notifications}\n          selected={selectedNotifications}\n          selectionChanged={onSelectionChanged}\n        />\n      </IonContent>\n\n      <IonFooter>\n        <IonToolbar />\n      </IonFooter>\n    </>\n  )\n};\n\nexport default NotificationSettingsModal;\n","import { IonContent, IonHeader, IonIcon, IonItem, IonLabel, IonList, IonMenu, IonModal, IonMenuToggle, IonTitle, IonToolbar, IonFooter } from '@ionic/react';\nimport { settings, notifications, mail, logOut } from 'ionicons/icons';\nimport React, { useState } from 'react';\nimport './Menu.scss';\nimport { ApplicationUserContext } from '../context/ApplicationUserContext';\nimport env from '../api/environment';\nimport useDialogBox from \"../hooks/useDialogBox\";\nimport NotificationSettingsModal from \"./NotificationSettingsModal\";\n\nconst Menu: React.FC = () => {\n  const [disableMenu] = useState(false);\n  const { user } = React.useContext(ApplicationUserContext);\n  const environment = env.settings.env.Item(user.environment);\n  const userName = environment.key !== 'prod' ? user.username!.substr(4) : user.username!;\n  const dlg = useDialogBox();\n  const [showNotificationsModal, setShowNotificationsModal] = useState(false);\n\n  /* tslint:disable:jsx-no-lambda */\n  return (\n    <IonMenu type=\"overlay\" disabled={disableMenu} contentId=\"main\">\n      <IonHeader>\n        <IonToolbar>\n          <IonTitle>Menu</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent class=\"outer-content\">\n        {environment.key !== 'prod' && (\n          <div className=\"header\">\n            {userName.toUpperCase()} ({environment.name.toUpperCase()})\n          </div>\n        )}\n        {environment.key === 'prod' && (\n          <div className=\"header\">\n            {userName}\n          </div>\n        )}\n        <IonList>\n          <IonMenuToggle auto-hide=\"false\">\n            <IonItem button={true} routerLink=\"/account\" routerDirection=\"none\">\n              <IonLabel>Settings</IonLabel>\n              <IonIcon slot=\"end\" icon={settings} />\n            </IonItem>\n          </IonMenuToggle>\n\n          <IonMenuToggle auto-hide=\"false\">\n            <IonItem button={true} onClick={() => {setShowNotificationsModal(true)}} >\n              <IonLabel>Notifications</IonLabel>\n              <IonIcon slot=\"end\" icon={notifications} />\n            </IonItem>\n          </IonMenuToggle>\n          {/* KENKEN: TODO: Add 'My Account' and 'Legend' menu items in menu\n          <IonMenuToggle auto-hide=\"false\">\n            <IonItem button={true} routerLink=\"/account\" routerDirection=\"none\">\n              <IonLabel>My Account</IonLabel>\n              <IonIcon slot=\"end\" icon={person} />\n            </IonItem>\n          </IonMenuToggle>\n          <IonMenuToggle auto-hide=\"false\">\n            <IonItem button={true} routerLink=\"/account\" routerDirection=\"none\">\n              <IonLabel>Legend</IonLabel>\n              <IonIcon slot=\"end\" icon={colorPalette} />\n            </IonItem>\n          </IonMenuToggle>\n          */}\n          <IonMenuToggle auto-hide=\"false\">\n            <IonItem button={true} routerLink=\"/account\" routerDirection=\"none\">\n              <IonLabel>Submit a Ticket</IonLabel>\n              <IonIcon slot=\"end\" icon={mail} />\n            </IonItem>\n          </IonMenuToggle>\n          <IonMenuToggle auto-hide=\"false\">\n            <IonItem button={true} routerLink=\"/logout\" routerDirection=\"none\">\n              <IonIcon slot=\"end\" icon={logOut} />\n              <IonLabel>Logout</IonLabel>\n            </IonItem>\n          </IonMenuToggle>\n        </IonList>\n        {dlg.alertBoxJsx}\n      </IonContent>\n      <IonFooter className=\"footer\">\n        <div className=\"version\">Version: {env.settings.appVersionString} </div>\n      </IonFooter>\n\n      <IonModal\n        isOpen={showNotificationsModal}\n      >\n        <NotificationSettingsModal\n          onDismissModal={() => {setShowNotificationsModal(false)}}\n          isOpen={showNotificationsModal}\n        />\n      </IonModal>\n    </IonMenu>\n  );\n};\n\nexport default Menu;\n","import { HomePageDataGet, AuthorizedItems } from '../orbital-interfaces/authorized-items';\nimport { ApplicationUser } from '../context/ApplicationUserContext';\nimport env from './environment';\nimport apiHelper from './OrbitalApiHelper';\n\ninterface AccessTokenResponse {\n  access_token: string;\n  token_type: string;\n  expires_in: number;\n  error?: string;\n  error_description?: string;\n  ['.issued']: string;\n  ['.expires']: string;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst authenticateUser = async (username: string, password: string, environment: string) => {\n  console.log(`Authenticating against ${env.settings.env.Item(environment).name} (${env.settings.env.Item(environment).url})`);\n  const url = env.settings.env.Item(environment).url + 'token';\n  const body = `grant_type=password&username=${username}&password=${password}`;\n  try {\n    const response = await fetch(url, {\n      method: 'POST',\n      body: body\n    });\n\n    const json = await response.json() as AccessTokenResponse;\n    if (json.error || json.error_description) {\n      return { loggedIn: false, error: json.error_description, access_token: ''};\n    }\n\n    return { loggedIn: true, access_token: json.access_token };\n  } catch (err) {\n    console.error('Error returned from authentication request: ' + err);\n    return { loggedIn: false, err, error: 'Error attempting to log in', access_token: ''};\n  }\n}\n\n// ----------------------------------------------------------------------------------------------\nconst getHomePageData = async (user: ApplicationUser) => {\n  return await apiHelper.get(user, 'api/v3/home/get/0') as HomePageDataGet;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst getAuthorizedItems = async (user: ApplicationUser) => {\n  const result = await apiHelper.get(user, 'api/v3/home/get-auth') as AuthorizedItems;\n  console.log(result);\n  return result;\n}\n\nexport default {\n  authenticateUser,\n  getHomePageData,\n  getAuthorizedItems\n}\n","import React, {useState, useEffect, useContext} from \"react\";\nimport {AuthorizedItems, Role} from \"../orbital-interfaces/authorized-items\";\nimport db from \"../data/dbStore\";\nimport UserAPI from \"../api/UserAPI\";\nimport {ApplicationUser, ApplicationUserContext} from \"./ApplicationUserContext\";\n\nexport interface IAuthorizedItemsContext {\n  auth: AuthorizedItems;\n  refreshAuth: (force: boolean, newUser: ApplicationUser) => Promise<AuthorizedItems | null>;\n  clearAuth: () => void;\n  authLoading: boolean;\n}\n\nconst INITIAL_AUTHORIZED_ITEMS: AuthorizedItems = {\n  employeeId: 0,\n  role: Role.Employee,\n  locations: [],\n  loading: false,\n  payrollEvents: [],\n  tags: []\n};\n\nconst INITIAL_AUTHITEMS_CONTEXT = {\n  auth: INITIAL_AUTHORIZED_ITEMS,\n  refreshAuth: (force: boolean, newUser: ApplicationUser) => {return new Promise<AuthorizedItems | null>(() => {})},\n  clearAuth: () => {},\n  authLoading: false\n};\n\nexport const AuthorizedItemsContext = React.createContext<IAuthorizedItemsContext>(INITIAL_AUTHITEMS_CONTEXT);\n\n// ----------------------------------------------------------------------------------------------\nasync function getAuthItems(currentAuth: AuthorizedItems, user: ApplicationUser, force: boolean)  {\n  if (currentAuth.employeeId !== 0 && !force) {\n    return currentAuth;\n  }\n\n  if (!force) {\n    const authFromStore = await db.getAuthItems();\n    if (authFromStore && authFromStore.locations && authFromStore.locations.length > 0) {\n      return authFromStore;\n    }\n  }\n\n  const authFromApi = await UserAPI.getAuthorizedItems(user);\n  if (authFromApi && authFromApi.locations && authFromApi.locations.length > 0) {\n    db.putAuthItems(authFromApi).then(() => console.log(\"auth items stored in indexdb\"));\n    return authFromApi;\n  } else {\n    console.log(\"got nothing from auth api\");\n    return null;\n  }\n}\n\nexport const AuthorizedItemsContextProvider = (props: any) => {\n  const [auth, internalSetAuth] = useState({...INITIAL_AUTHORIZED_ITEMS});\n  const [authLoading, setLoading] = useState(false);\n  const {user} = useContext(ApplicationUserContext);\n\n  // ----------------------------------------------------------------------------------------------\n  useEffect(() => {\n    let mounted = true;\n    setLoading(true);\n\n    if (!user || !user.isLoggedin) {\n      return;\n    }\n\n    getAuthItems(auth, user,false).then(newAuth => {\n      if (!mounted) {\n        return;\n      }\n\n      setLoading(false);\n\n      if (newAuth) {\n        internalSetAuth(newAuth);\n      }\n    });\n\n    return (() => { mounted = false;});\n  }, [user, auth]);\n\n  // ----------------------------------------------------------------------------------------------\n  const refreshAuth = async (force: boolean, newUser: ApplicationUser) => {\n    setLoading(true);\n\n    const newAuth = await getAuthItems(auth, newUser, force);\n    setLoading(false);\n    if (newAuth) {\n      internalSetAuth(newAuth);\n    }\n\n    return newAuth;\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  const clearAuth = () => {\n    internalSetAuth(INITIAL_AUTHORIZED_ITEMS);\n    db.putAuthItems(INITIAL_AUTHORIZED_ITEMS).then(res => {\n      console.log(\"Cleared Authorized Items from db\");\n    });\n  };\n\n  return (\n    <AuthorizedItemsContext.Provider value={{\n      auth,\n      refreshAuth,\n      clearAuth,\n      authLoading\n    }}>\n      {props.children}\n    </AuthorizedItemsContext.Provider>\n  );\n};\n","import React, { useState } from 'react';\nimport { IonContent, IonPage, IonRow, IonCol, IonButton, IonList, IonText, IonLoading, useIonViewWillEnter } from '@ionic/react';\nimport './Login.scss';\nimport UserAPI from '../api/UserAPI';\nimport { RouteComponentProps } from 'react-router';\nimport useDialogBox from '../hooks/useDialogBox';\nimport { ApplicationUserContext } from '../context/ApplicationUserContext';\nimport env from '../api/environment';\nimport { log } from '../util/logger';\nimport {AuthorizedItemsContext} from \"../context/AuthorizedItemsContext\";\n\ninterface LoginProps extends RouteComponentProps {}\n\nfunction validate(username: string, password: string): boolean {\n  return (\n      username.length > 0 &&\n      password.length > 5\n  );\n}\n\nconst Login: React.FC<LoginProps> = ({ history }) => {\n  const {alertBoxJsx, showAlert} = useDialogBox();\n  const {user, userLoggedIn} = React.useContext(ApplicationUserContext);\n  const {refreshAuth} = React.useContext(AuthorizedItemsContext);\n  const [showLoading, setShowLoading] = useState(false);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [usernameErrors] = useState(\"\");\n  const [passwordErrors] = useState(\"\");\n  const [loginEnabled, setLoginEnabled] = useState(false);\n\n  // ----------------------------------------------------------------------------------------------\n  const onUsernameChange = (newUsername: string) => {\n    setUsername(newUsername);\n    setLoginEnabled(validate(newUsername, password));\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  const onPasswordChange = (newPassword: string) => {\n    setPassword(newPassword);\n    setLoginEnabled(validate(username, newPassword));\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  const login = async () => {\n    if(username && password) {\n      const envUser = env.getUserAndEnvironmentFromInput(username);\n      setShowLoading(true);\n      const response = await UserAPI.authenticateUser(envUser.username, password, envUser.env.key);\n      if (response.loggedIn) {\n        const newUser = await userLoggedIn(username, response.access_token, envUser.env.key);\n        await refreshAuth(true, newUser);\n        setShowLoading(false);\n        log('login', { username: envUser.username, appVersion: env.settings.appVersionString, environment: envUser.env.name});\n        history.push('/tabs/schedule', {direction: 'none'});\n        history.goForward();\n        return;\n      } else {\n        setShowLoading(false);\n        log('login_failure', { username: envUser.username, appVersion: env.settings.appVersionString, environment: envUser.env.name});\n        const msg = response.error ? response.error : \"Could not log in\";\n        showAlert(\"Failed to log in\", msg, () => {\n          setPassword(\"\");\n          setLoginEnabled(false);\n        });\n      }\n    }\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  useIonViewWillEnter(() => {\n    console.log(\"Entering login, is user logged in? \", user.isLoggedin);\n    if (user.isLoggedin) {\n      history.push('/tabs/schedule', {direction: 'forward'});\n      history.goForward();\n    }\n  });\n\n  return (\n    <IonPage id=\"login-page\">\n      <IonContent className=\"login-content\">\n\n        <div className=\"login-logo\">\n          <img className=\"logo\" src=\"assets/img/OS Logo - 4pt Rounded _ 2 Tone Orange.svg\" alt=\"Orbital Shift Logo\" />\n        </div>\n\n        <IonLoading\n        isOpen={showLoading}\n        onDidDismiss={() => setShowLoading(false)}\n        spinner=\"dots\"\n        message={'Logging in...'}\n        duration={5000}\n        />\n\n        {alertBoxJsx}\n\n          <IonList className=\"form-list\">\n\n            <div className=\"item\">\n              <div className=\"label\">User</div>\n              <div className=\"field-container\">\n                <input\n                  className=\"input\"\n                  id=\"username\"\n                  name=\"username\"\n                  type=\"text\"\n                  value={username}\n                  onChange={(e) => {onUsernameChange(e.target.value)}}\n                />\n              </div>\n            </div>\n\n            {usernameErrors.length > 0 && (\n              <IonText color=\"light\">\n                <p className=\"ion-padding-start\">\n                  {usernameErrors}\n                </p>\n              </IonText>\n            )}\n\n            <div className=\"item\">\n              <div className=\"label\">Password</div>\n              <div className=\"field-container\">\n                <input\n                  className=\"input\"\n                  id=\"password\"\n                  name=\"password\"\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => { onPasswordChange(e.target.value)}}  />\n              </div>\n            </div>\n\n            {passwordErrors.length > 0 && (\n              <IonText color=\"light\">\n              <p className=\"ion-padding-start\">\n                {passwordErrors}\n              </p>\n              </IonText>\n            )}\n          </IonList>\n\n          <IonRow>\n            <IonCol>\n              <IonButton\n                className=\"login-button\"\n                type=\"submit\"\n                onClick={login}\n                expand=\"block\"\n                disabled={!loginEnabled}\n              >\n                LOG IN\n              </IonButton>\n            </IonCol>\n          </IonRow>\n\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Login;\n","import {EventBreak} from '../orbital-interfaces/EventBreak';\nimport {EventInformation} from '../orbital-interfaces/TEC';\nimport {ScheduleEvent} from '../orbital-interfaces/ScheduleEvent';\nimport {addDays, differenceInDays, differenceInMinutes, format, isAfter, isSameYear, isToday, parseISO} from 'date-fns';\nimport {LocationSettings, TimeFormat} from \"../orbital-interfaces/authorized-items\";\nimport {OrbitalTime} from \"../orbital-interfaces/OrbitalTime\";\n\nconst noEndTime = new Date(9000, 1,1);\n\n\n// ---------------------------------------------------------------------------------------------\nexport function getDurationFromTimeSpan(timespan: string) {\n  if (!timespan) {\n    return 0;\n  }\n\n  const tok = timespan.split(\":\");\n  let hrs: number;\n  let min: number;\n  if (tok[0].indexOf(\".\") >= 0) {\n    const hrTok = tok[0].split(\".\");\n    hrs = 24 * parseInt(hrTok[0]) + parseInt(hrTok[1]);\n    min = parseInt(tok[1]);\n  } else {\n    hrs = parseInt(tok[0]);\n    min = parseInt(tok[1]);\n  }\n\n  return (hrs*60) + min;\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function messageDateString(time: string) {\n  const date = parseISO(time);\n  const now = new Date();\n\n  if (isToday(date)) {\n    return format(date, 'h:mmaaa').replace('M', '');\n  } else if (differenceInDays(now, date) < 7) {\n    return format(date, \"EEE\").toUpperCase();\n  } else if (isSameYear(date, now)) {\n    return format(date, \"MMM d\");\n  } else {\n    return format(date, \"M/d/yyyy\");\n  }\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getTimeStringFromMinutes(locSettings: LocationSettings, min: number | null) {\n  if (locSettings.TimeFormat === TimeFormat.HoursMinutes) {\n    if (min === null) {\n      return \"00:00\";\n    }\n\n    const hours = Math.floor(min / 60);\n    const minutes = min % 60;\n\n    return `${padZeroes(hours, 2)}:${padZeroes(minutes, 2)}`;\n  } else {\n    if (min === null) {\n      return \"0\";\n    }\n\n    return formatDecimal(min / 60, locSettings.TimeFormatDigits, locSettings.TimeFormatDecimals);\n  }\n}\n\n\n// ---------------------------------------------------------------------------------------------\nexport function getTimeStringFromOrbitalTime(locSettings: LocationSettings, time: OrbitalTime) {\n  if (time.ActualTime === \"00:00:00\") {\n    return (locSettings.TimeFormat === TimeFormat.HoursMinutes)\n      ? \"00:00\"\n      : formatDecimal(0, locSettings.TimeFormatDigits, locSettings.TimeFormatDecimals);\n  }\n\n  if (locSettings.TimeFormat === TimeFormat.HoursMinutes) {\n    const tok = time.ActualTime.split(':');\n    if (tok.length !== 3) {\n      return time.ActualTime;\n    }\n\n    if (tok[0].includes('.')) {\n      const dayHourTok = tok[0].split('.');\n      const hours = (24 * parseInt(dayHourTok[0])) + parseInt(dayHourTok[1]);\n      return `${hours}:${tok[1]}`;\n    } else {\n      const hours = parseInt(tok[0]);\n      return `${hours}:${tok[1]}`;\n    }\n\n  } else {\n    return formatDecimal(time.ActualHours, locSettings.TimeFormatDigits, locSettings.TimeFormatDecimals);\n  }\n}\n\n\n// ---------------------------------------------------------------------------------------------\nexport function getMinutesFromTimeString(locSettings: LocationSettings, str: string) {\n  if (!str || str.length === 0) {\n    return 0;\n  }\n\n  if (locSettings.TimeFormat === TimeFormat.HoursMinutes) {\n    const hourMinRegEx = /^\\d*(:\\d{2})?$/;\n    if (!hourMinRegEx.test(str)) {\n      return 0;\n    }\n\n    if (str[0] === ':') {\n      return parseInt(str.substring(1));\n    }\n\n    const tok = str.split(\":\");\n    if (tok.length === 1) {\n      return parseInt(str) * 60;\n    }\n\n    return (parseInt(tok[0]) * 60) + parseInt(tok[1]);\n  } else {\n    const decimalRegex = /^\\d+(.\\d*)?$/;\n    if (!decimalRegex.test(str)) {\n      return 0;\n    }\n\n    return Math.round(parseFloat(str) * 60.0);\n  }\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getDurationStringFromTimeSpan(timespan: string) {\n  if (!timespan) {\n    return \"(0m)\";\n  }\n  const tok = timespan.split(\":\");\n  let hrs: number;\n  let min: number;\n  if (tok[0].indexOf(\".\") >= 0) {\n    const hrTok = tok[0].split(\".\");\n    hrs = 24 * parseInt(hrTok[0]) + parseInt(hrTok[1]);\n    min = parseInt(tok[1]);\n  } else {\n    hrs = parseInt(tok[0]);\n    min = parseInt(tok[1]);\n  }\n\n  return (hrs > 0)\n    ? `(${hrs}h ${min}m)`\n    : `(${min}m)`;\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getDurationString(minutes: number): string {\n  if (minutes < 60) {\n    return `(${minutes}m)`;\n  }\n\n  let str = `(${Math.floor(minutes / 60)}h`;\n  return (minutes % 60 === 0)\n    ? str + \")\"\n    : str + ` ${minutes % 60}m)`;\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getDurationFromScheduleEvent(ev: EventInformation | ScheduleEvent): number {\n  if ((ev as EventInformation).Data) {\n    return getDurationFromTimeSpan((ev as EventInformation).Data!.HourlyValue.Time.ActualTime);\n  }\n\n  const getDiff = (start: string, end?: string) => {\n    const startDate = parseISO(start);\n    let endDate = end ? parseISO(end) : new Date();\n    if (endDate > noEndTime) {\n      endDate = new Date();\n    }\n    return differenceInMinutes(endDate, startDate);\n  }\n\n  let totalMinutes = getDiff(ev.EventStart, ev.EventEnd);\n  if (ev.EventBreaks) {\n    ev.EventBreaks.map(b => totalMinutes -= getDiff(b.BreakStart, b.BreakEnd));\n  }\n\n  return totalMinutes;\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getDuration(ev: EventInformation): number {\n  const getDiff = (start: string, end?: string) => {\n    const startDate = parseISO(start);\n    let endDate = end ? parseISO(end) : new Date();\n    if (endDate > noEndTime) {\n      endDate = new Date();\n    }\n    return differenceInMinutes(endDate, startDate);\n  }\n\n  let totalMinutes = getDiff(ev.EventStart, ev.EventEnd);\n  if (ev.EventBreaks) {\n    ev.EventBreaks.map(b => totalMinutes -= getDiff(b.BreakStart, b.BreakEnd));\n  }\n\n  return totalMinutes;\n}\n\n\n// ---------------------------------------------------------------------------------------------\nexport function getTotalDuration(events: EventInformation[]) {\n  let totalMinutes = 0;\n  events.map(ev => totalMinutes += getDuration(ev));\n  return totalMinutes;\n}\n\n\n// ---------------------------------------------------------------------------------------------\nexport function getTotalDurationFromScheduleEvent(events: ScheduleEvent[]) {\n  let totalMinutes = 0;\n  events.map(ev => totalMinutes += getDurationFromScheduleEvent(ev));\n  return totalMinutes;\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getDateString(date: Date): string {\n  return format(date, 'EEE MMM d, yyyy').toUpperCase();\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getStartTime(ev: EventInformation | ScheduleEvent) {\n    return format(parseISO(ev.EventStart), 'h:mmaaa').replace('M', '');\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getMessageDeliveryTimeString(dateStr: string) {\n  return format(parseISO(dateStr), \"M/d EEE h:mmaa\").replace('M', '');\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getBreakStartTime(brk: EventBreak) {\n  return format(parseISO(brk.BreakStart), 'h:mmaaa').replace('M', '');\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getEventStartEnd(ev: EventInformation | ScheduleEvent) {\n    const start = format(parseISO(ev.EventStart), 'h:mmaaa').replace('M', '');\n    const end   = format(parseISO(ev.EventEnd), 'h:mmaaa').replace('M', '');\n\n    return `${start} - ${end}`;\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getBreakStartEnd(brk: EventBreak) {\n  const start = format(parseISO(brk.BreakStart), 'h:mmaaa').replace('M', '');\n\n  if (!brk.BreakEnd || brk.BreakEnd > noEndTime) {\n    return start;\n  }\n\n  const end   = format(parseISO(brk.BreakEnd), 'h:mmaaa').replace('M', '');\n  return `${start} - ${end}`;\n}\n// ---------------------------------------------------------------------------------------------\nexport function getEventInformationStartEnd(ev: EventInformation | ScheduleEvent) {\n  const start = format(parseISO(ev.EventStart), 'h:mmaaa').replace('M', '');\n  const end   = format(parseISO(ev.EventEnd), 'h:mmaaa').replace('M', '');\n\n  return `${start} - ${end}`;\n}\n\nexport function getEventBreakStartEndString(brk: EventBreak): string {\n  const start = format(parseISO(brk.BreakStart), 'h:mmaa').replace('M', '');\n  const end = brk.BreakEnd\n    ? format(parseISO(brk.BreakEnd), 'h:mmaa').replace('M', '')\n    : format(new Date(), 'h:mmaa').replace('M', '');\n\n  return `${start} - ${end}`;\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getWeekStart(date: Date, weekStartsOn: string, dayStart: string): Date {\n    const dayStartMinutes = (!dayStart || dayStart.indexOf(\"T\") < 0)\n      ? 0\n      : getDurationFromTimeSpan(dayStart.split(\"T\")[1]);\n\n    let newDate = date;\n    newDate.setHours(0, dayStartMinutes, 0, 0);\n\n    let counter = 0;\n    while (format(newDate, 'EEEE') !== weekStartsOn && counter < 20) {\n        newDate = addDays(newDate, -1);\n        counter++;\n    }\n\n    if (counter > 15) {\n        console.error(`Could not calculate week start based on date ${date} and weekStartsOn \"${weekStartsOn}\"`);\n    }\n\n    return newDate;\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getDayStartMinutes(dayStartLocSetting: string) {\n  const tok = dayStartLocSetting.split(\"T\");\n  return getDurationFromTimeSpan(tok[1]);\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getTimeDiff(dateStr: string, timeZoneOffset: number) {\n    const now = new Date();\n    const dateTime = parseISO(dateStr);\n    let minutes = isAfter(now, dateTime)\n        ? differenceInMinutes(now, dateTime)\n        : differenceInMinutes(dateTime, now);\n\n    const hours = parseInt('' + (minutes / 60), 10);\n    minutes = minutes - (hours * 60);\n    return `${formatDecimal(hours, 2, 0)}:${formatDecimal(minutes, 2, 0)}`;\n}\n\n// --------------------------------------------------------------------------------------------------------------------------\nexport function formatDateTimeAsMvcString(d: Date) {\n    if (!(d instanceof Date)) {\n        console.error('ERROR: passed-in object to formatDateTimeAsMvcString is not a Date: ' + d);\n        return '';\n    }\n\n    return  '' +\n            d.getFullYear() + '-' +\n            padZeroes(d.getMonth() + 1, 2) + '-' +\n            padZeroes(d.getDate(), 2)  + 'T' +\n            padZeroes(d.getHours(), 2) + ':' +\n            padZeroes(d.getMinutes(), 2) + ':00';\n}\n\n// --------------------------------------------------------------------------------------------------------------------------\nexport function formatDecimal(num: number, digits: number, decimals: number) {\n    let val = (Number(num).toFixed(decimals)).toString();\n\n    let negative = '';\n    if (val.indexOf('-') === 0) {\n        val = val.substring(1);\n        negative = '-';\n    }\n\n    const s = '0000000000' + val;\n    const decPos = val.indexOf('.');\n    if (decPos === -1) {\n        return  negative + s.substr(s.length - (Math.max(val.length, digits)));\n    } else {\n        return  negative + s.substr(s.length - (Math.max(val.length, digits + decimals + 1)));\n    }\n}\n\n// --------------------------------------------------------------------------------------------------------------------------\nfunction padZeroes(val: any, digitCount: number) {\n    const s = '0000000000' + val;\n    return s.substr(s.length - digitCount);\n}\n","enum EventType {\n  Shift = 1,\n  Unavailable = 2,\n  Vacation = 3,\n  Cover = 4,\n  Clock = 6,\n  Absent = 7\n}\n\nexport default  EventType;\n","import { ScheduleEvent } from './../orbital-interfaces/ScheduleEvent';\nimport { EditorValues } from '../components/EditEvent/EditEventModalState';\nimport { TECGetData } from '../orbital-interfaces/TEC';\nimport { EventFilter } from '../orbital-interfaces/EventFilter';\nimport { DailyNotes } from '../orbital-interfaces/DailyNotes';\nimport { DailyNotesFilter } from'../orbital-interfaces/DailyNotesFilter';\nimport { formatDateTimeAsMvcString } from '../util/time-helper';\nimport { ApplicationUser } from '../context/ApplicationUserContext';\nimport apiHelper from './OrbitalApiHelper';\nimport {RecurrenceUpdateType} from \"../enums/RecurrenceUpdateType\";\n\ninterface AccessTokenResponse {\n  access_token: string;\n  token_type: string;\n  expires_in: number;\n  error?: string;\n  error_description?: string;\n  ['.issued']: string;\n  ['.expires']: string;\n}\n\ninterface ErrorResponse {\n  error: boolean;\n  message: string;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst getScheduleEvent = async(user: ApplicationUser, scheduleEventId: number): Promise<ScheduleEvent | null> => {\n  const result = await apiHelper.get(user, 'api/v2/employee/schedule-events/get/' + scheduleEventId);\n\n  if (result.error) {\n    return null;\n  }\n\n  return result as ScheduleEvent;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst getScheduleEventsByFilter = async(user: ApplicationUser, filter: EventFilter) => {\n  const filterToSend = {\n    start: formatDateTimeAsMvcString(filter.start),\n    end: formatDateTimeAsMvcString(filter.end),\n    ...filter\n  };\n\n  return await apiHelper.post(user, 'api/v2/employee/schedule-events/filter', filterToSend) as TECGetData;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst getDailyNotesByFilter = async(user: ApplicationUser, filter: DailyNotesFilter) => {\n  const filterToSend = {\n    start: formatDateTimeAsMvcString(filter.start),\n    end: formatDateTimeAsMvcString(filter.end),\n    ...filter\n  };\n\n  return await apiHelper.post(user, 'api/v2/daily-notes/filter', filterToSend) as DailyNotes[];\n}\n\n// ----------------------------------------------------------------------------------------------\nconst updateScheduleEvent = async(user: ApplicationUser, eventValues: EditorValues, recurrenceUpdateType: RecurrenceUpdateType | null) => {\n  const data = {\n    scheduleEventId: eventValues.scheduleEventId,\n    eventType: eventValues.eventType,\n    eventStatus: eventValues.eventStatus,\n    isConfirmed: eventValues.isConfirmed,\n    positionId: eventValues.position.position.id,\n    employeeId: eventValues.employee.id,\n    eventStart: eventValues.eventStart,\n    eventEnd: eventValues.eventEnd,\n    tagId: eventValues.tag?.id,\n    eventBreaks: eventValues.eventBreaks,\n    isClockedIn: eventValues.isClockedIn,\n    breakStart: null,\n    breakDuration: null,\n    clockOutValue: eventValues.clockoutValue,\n    absentTime: eventValues.absentTimeMinutes,\n    notes: eventValues.notes,\n    sendMessage: false,\n    recurrenceId: eventValues.recurrenceId,\n    recurrenceStart: eventValues.recurrenceStart,\n    recurrenceEnd: eventValues.recurrenceEnd,\n    recurrenceType: eventValues.recurrenceType,\n    repeatInterval: eventValues.repeatInterval,\n    repeatWeekdays: eventValues.repeatWeekdays,\n    recurrenceUpdateType\n  };\n\n  return await apiHelper.post(user, 'api/v2/employee/schedule-events/update', data) as ErrorResponse;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst createScheduleEvent = async(user: ApplicationUser, eventValues: EditorValues, recurrenceUpdateType: RecurrenceUpdateType | null) => {\n  const data = {\n    sceduleEventId: 0,\n    eventType: eventValues.eventType,\n    eventStatus: eventValues.eventStatus,\n    isConfirmed: eventValues.isConfirmed,\n    positionId: eventValues.position.position.id,\n    employeeId: eventValues.employee.id,\n    eventStart: eventValues.eventStart,\n    eventEnd: eventValues.eventEnd,\n    tagId: eventValues.tag?.id,\n    eventBreaks: eventValues.eventBreaks,\n    isClockedIn: eventValues.isClockedIn,\n    breakStart: null,\n    breakDuration: null,\n    clockOutValue: eventValues.clockoutValue,\n    absentTime: eventValues.absentTimeMinutes,\n    notes: eventValues.notes,\n    sendMessage: false,\n    recurrenceId: eventValues.recurrenceId,\n    recurrenceStart: eventValues.recurrenceStart,\n    recurrenceEnd: eventValues.recurrenceEnd,\n    recurrenceType: eventValues.recurrenceType,\n    repeatInterval: eventValues.repeatInterval,\n    repeatWeekdays: eventValues.repeatWeekdays,\n    recurrenceUpdateType\n  };\n\n  return await apiHelper.post(user, 'api/v2/employee/schedule-events/create', data) as ErrorResponse;\n};\n\n// ----------------------------------------------------------------------------------------------\nconst deleteScheduleEvent = async(user: ApplicationUser, scheduleEventId: number, recurrenceUpdateType: RecurrenceUpdateType | null) => {\n  const data = {\n    scheduleEventId,\n    recurrenceUpdateType,\n    sendMessage: false\n  };\n\n  return await apiHelper.post(user, 'api/v2/employee/schedule-events/delete', data) as ErrorResponse;\n};\n\nexport default {\n  getScheduleEvent,\n  getScheduleEventsByFilter,\n  getDailyNotesByFilter,\n  updateScheduleEvent,\n  createScheduleEvent,\n  deleteScheduleEvent\n}\n","export interface EventFilter {\n  settingsLocId: number;\n  dnLocIds: number[];\n  start: Date;\n  end: Date;\n  filterByEmployee: boolean;\n  filterByPosition: boolean;\n  positionIds: number[];\n  eventTypeId: number;\n  eventStatusId: number;\n  tagId?: number;\n}\n\nexport const initialEventFilter: EventFilter = {\n  settingsLocId: 0,\n  dnLocIds: [],\n  start: new Date(),\n  end: new Date(),\n  filterByEmployee: false,\n  filterByPosition: true,\n  positionIds: [],\n  eventTypeId: -1,\n  eventStatusId: -1,\n  tagId: undefined\n};\n","import React from 'react';\r\nimport './WeekChooser.scss';\r\nimport { IonIcon, IonDatetime } from '@ionic/react';\r\nimport { arrowBack, arrowForward, arrowDropdown } from 'ionicons/icons';\r\nimport { addDays, format, isToday, parseISO } from 'date-fns'\r\n\r\ninterface WeekChooserProps {\r\n  startDate: Date,\r\n  setStartDate: (date: Date) => void\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst WeekChooser: React.FC<WeekChooserProps> = ({ startDate, setStartDate}) => {\r\n  return (\r\n    <div className=\"chooser\">\r\n      <div className=\"top\">\r\n        <button\r\n          onClick={() => setStartDate(addDays(startDate, -7))}\r\n          className=\"arrow\"\r\n          key={-1}>\r\n            <IonIcon mode=\"ios\" icon={arrowBack}/>\r\n        </button>\r\n        <div className=\"month-year-container\">\r\n          <div className=\"datetime-picker-container\">\r\n            <IonDatetime\r\n              className=\"datetime-picker\"\r\n              displayFormat=\"MMM YYYY\"\r\n              pickerFormat=\"MMM DD YYYY\"\r\n              min=\"2005-01-01\"\r\n              max=\"2030-01-01\"\r\n              value={startDate.toISOString()}\r\n              onIonChange={(e) => {setStartDate(parseISO(e.detail.value!))}}\r\n            />\r\n            <IonIcon mode=\"md\" icon={arrowDropdown} />\r\n          </div>\r\n        </div>\r\n        <button\r\n            onClick={() => setStartDate(addDays(startDate, 7))}\r\n            className=\"arrow\"\r\n            key={7}>\r\n              <IonIcon mode=\"ios\" icon={arrowForward}/>\r\n        </button>\r\n      </div>\r\n      <div className=\"weekday-list\">\r\n        {[0,1,2,3,4,5,6].map((num: number) => {\r\n          const thisDate = addDays(startDate, num);\r\n          const isTodayClass = isToday(thisDate) ? 'today' : 'not-today';\r\n\r\n          return (\r\n            <div key={num} className=\"weekday-button\">\r\n              <div className=\"weekday-abbr\">{format(thisDate, 'EEE')}</div>\r\n              <div className={isTodayClass} />\r\n              <div className=\"weekday-num\">{format(thisDate, 'd')}</div>\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WeekChooser;\r\n","\nenum EventStatus {\n  Approved = 1,\n  Request = 2,\n  RequestDenied = 4\n}\n\nexport default EventStatus;\n","import EventType from \"../../enums/EventType\";\nimport EventStatus from \"../../enums/EventStatus\";\nimport {AdminAuthorization, AuthorizedItems, Role} from \"../../orbital-interfaces/authorized-items\";\nimport {isAfter, parseISO} from \"date-fns\";\nimport authHelper, {SelectedPosition} from '../../util/authitems-helper'\n\nexport enum EventEditEnum {\n  None,\n  UndoCoverRequest,\n  CreateShiftRequest,\n  DeleteShiftRequest,\n  CreateCoverRequest,\n  Delete\n}\n\nexport interface Option {\n  value: number;\n  text: string;\n  color: string;\n}\n\nexport interface EventEditAuthorization {\n  buttonText: string;\n  enableConfirm: boolean;\n  isReadonly: boolean;\n  text: string;\n  usage: EventEditEnum;\n  eventTypeOptionList: Option[];\n  eventStatusOptionList: Option[];\n}\n\nexport const getEventNewAuthorization = (\n  auth: AuthorizedItems): EventEditAuthorization | null => {\n\n  let location = auth.locations[0];\n  let dept = auth.locations[0].departments[0];\n  let position = auth.locations[0].departments[0].positions[0];\n  let hasPositionFound = false;\n  for (let i = 0 ; i < auth.locations.length && !hasPositionFound; i++) {\n    for (let j = 0; j < auth.locations[i].departments.length && !hasPositionFound; j++) {\n      for (let k = 0; j < auth.locations[i].departments[j].positions.length && !hasPositionFound; k++) {\n        if (auth.locations[i].departments[j].positions[k].hasPosition) {\n          location = auth.locations[i];\n          dept = auth.locations[i].departments[j];\n          position = auth.locations[i].departments[j].positions[k];\n          hasPositionFound = true;\n        }\n      }\n    }\n  }\n\n  const selectedPosition = { location, position };\n\n  let initialStatus = EventStatus.Request;\n  if (auth.role === Role.BusinessAdmin || auth.role === Role.LocationAdmin)\n  {\n    initialStatus = EventStatus.Approved;\n  } else if (auth.role === Role.Admin && (dept.adminAuth & AdminAuthorization.CanEditSchedules) === AdminAuthorization.CanEditSchedules) {\n    initialStatus = EventStatus.Approved;\n  }\n\n  const eventStatusOptions = getEventStatusOptionsList(auth, selectedPosition, auth.employeeId, initialStatus, false);\n  const eventTypeOptions = getEventTypeOptionsList(auth, selectedPosition, auth.employeeId);\n\n  let retVal = {\n    buttonText: '',\n    enableConfirm: true,\n    isReadonly: false,\n    text: '',\n    usage: EventEditEnum.None,\n    eventTypeOptionList: eventTypeOptions,\n    eventStatusOptionList: eventStatusOptions\n  } as EventEditAuthorization;\n\n  return retVal;\n};\n\n\n// --------------------------------------------------------------------------------------\nexport const getEventEditAuthorization = (\n  eventType: EventType,\n  eventStatus: EventStatus,\n  eventEmployeeId: number,\n  eventStart: string,\n  eventEnd: string,\n  eventLocationId: number,\n  eventDepartmentId: number,\n  eventPositionId: number,\n  eventConfirmed: boolean,\n  auth: AuthorizedItems): EventEditAuthorization | null => {\n  const selectedPosition = authHelper.getSelectedPositionWithLocId(auth.locations, eventLocationId, eventPositionId);\n  const eventStatusOptions = getEventStatusOptionsList(auth, selectedPosition, eventEmployeeId, eventStatus, true);\n  const eventTypeOptions = getEventTypeOptionsList(auth, selectedPosition, eventEmployeeId);\n\n  let retVal = {\n    buttonText: '',\n    enableConfirm: true,\n    isReadonly: false,\n    text: '',\n    usage: EventEditEnum.None,\n    eventTypeOptionList: eventTypeOptions,\n    eventStatusOptionList: eventStatusOptions\n  } as EventEditAuthorization;\n\n  if (auth.role === Role.BusinessAdmin) {\n    return retVal;\n  }\n\n  if (auth.role === Role.LocationAdmin) {\n    if (authHelper.isPositionSpecificEvent(eventType)) {\n      if (auth.locations.filter(l => l.id === eventLocationId).length === 0) {\n        return null;\n      }\n    }\n\n    return retVal;\n  }\n\n  const endOfEvent = parseISO(eventEnd);\n  const now = new Date();\n  const afterEnd = isAfter(now, endOfEvent);\n  let employeeEvent = false;\n  const adminAuth = authHelper.getAdminAuthorizationForDepartment(auth, eventDepartmentId);\n\n  // If the user is in the Admin role\n  if (auth.role === Role.Admin) {\n    if (eventEmployeeId === auth.employeeId) {\n\n      if (eventType === EventType.Clock) {\n        if ((adminAuth & AdminAuthorization.CanEditOwnClockEvents) === AdminAuthorization.CanEditOwnClockEvents) {\n          return retVal;\n        } else {\n          return null;\n        }\n      }\n\n      if ((adminAuth & AdminAuthorization.CanEditSchedules) === AdminAuthorization.CanEditSchedules) {\n        return retVal;\n      }\n\n      employeeEvent = true;\n\n    } else {\n      // Not the user's event, someone else's\n\n      if (eventType === EventType.Clock) {\n        if ((adminAuth & AdminAuthorization.CanEditEmployeeClockEvents) === AdminAuthorization.CanEditEmployeeClockEvents) {\n          return retVal;\n        } else {\n          return null;\n        }\n      }\n\n      if (authHelper.canEditSchedules(auth, eventLocationId, eventDepartmentId)) {\n        return retVal;\n      } else {\n        // If the admin has a position in the selected department\n        if (authHelper.adminIsInDepartment(auth, eventDepartmentId)) {\n          // Treat the admin as an employee for event editing\n          employeeEvent = true;\n        } else {\n          // disable editing\n          return null;\n        }\n      }\n    }\n  }\n\n  if (auth.role === Role.Employee || employeeEvent) {\n    if (eventEmployeeId === auth.employeeId) {\n      if (afterEnd) {\n        return null;\n      }\n\n      if (eventType === EventType.Clock) {\n        return null;\n      }\n\n      if (eventType === EventType.Shift) {\n        if (eventStatus === EventStatus.Approved) {\n          return { ...retVal, buttonText: 'Create Cover-Request', isReadonly: true, usage: EventEditEnum.CreateCoverRequest}\n        }\n\n        if (eventStatus === EventStatus.Request) {\n          return { ...retVal, buttonText: 'Undo Shift-Request', enableConfirm: false, isReadonly: true, text:'Click OK to remove your Shift-Request', usage: EventEditEnum.DeleteShiftRequest};\n        }\n\n        // else Shift Request-Denied\n        return null;\n      }\n\n      if (eventType === EventType.Cover) {\n        if (eventStatus === EventStatus.Request) {\n          return { ...retVal, buttonText: 'Undo Cover-Request', enableConfirm: true, isReadonly: true, usage: EventEditEnum.UndoCoverRequest};\n        }\n\n        return null; // Cover Request-Denied\n      }\n\n      if (!authHelper.isPositionSpecificEvent(eventType) && authHelper.canEditNonPositionEvents(auth, eventDepartmentId)) {\n        return { ...retVal, buttonText: 'Delete Request', enableConfirm: false, isReadonly: true, text:'Click OK to delete this event', usage: EventEditEnum.Delete};\n      }\n\n      return null;\n    }\n\n    // This is someone else's event being viewed by an Employee\n    if (eventType === EventType.Cover && eventStatus === EventStatus.Request) {\n      return { ...retVal, buttonText: 'Make Shift-Request', enableConfirm: false, isReadonly: true, text:'', usage: EventEditEnum.CreateShiftRequest};\n    }\n\n    return null;\n  }\n\n  return null;\n};\n\n// --------------------------------------------------------------------------------------\nconst getEventTypeOptionsList = (auth: AuthorizedItems, selectedPosition: SelectedPosition, eventEmployeeId: number): Option[] => {\n  if (!auth || !auth.locations || auth.locations.length === 0 ||\n    !selectedPosition || !selectedPosition.location || !selectedPosition.location.settings) {\n    return [];\n  }\n\n  const eventTypeOptions: Option[] = [\n    {\n      value: EventType.Shift,\n      text: \"SHIFT\",\n      color: \"green\"\n    }\n  ];\n\n  const locSettings = selectedPosition.location.settings;\n  const dept = authHelper.getDepartmentFromPositionId(auth, selectedPosition.position.id);\n  const adminAuth = authHelper.getAdminAuthorizationForDepartment(auth, dept!.id);\n\n  if (auth.role === Role.BusinessAdmin || auth.role === Role.LocationAdmin)\n  {\n    eventTypeOptions.push({ value: EventType.Clock, text: \"CLOCK\", color: \"green\"});\n  } else if (auth.role === Role.Admin) {\n    if (auth.employeeId === eventEmployeeId && ((adminAuth & AdminAuthorization.CanEditOwnClockEvents) === AdminAuthorization.CanEditOwnClockEvents)) {\n      eventTypeOptions.push({ value: EventType.Clock, text: \"CLOCK\", color: \"green\"});\n    } else if (auth.employeeId !== eventEmployeeId && ((adminAuth & AdminAuthorization.CanEditEmployeeClockEvents) === AdminAuthorization.CanEditEmployeeClockEvents)) {\n      eventTypeOptions.push({ value: EventType.Clock, text: \"CLOCK\", color: \"green\"});\n    }\n  }\n\n  if (auth.role === Role.BusinessAdmin || auth.role === Role.LocationAdmin) {\n    eventTypeOptions.push({value: EventType.Cover, text: \"COVER\", color: \"red\"});\n  } else if (auth.role === Role.Admin && ((adminAuth & AdminAuthorization.CanEditSchedules) === AdminAuthorization.CanEditSchedules)) {\n    eventTypeOptions.push({value: EventType.Cover, text: \"COVER\", color: \"red\"});\n  }\n\n  if (locSettings.ShowUnavailableEventType) {\n    eventTypeOptions.push({ value: EventType.Unavailable, text: \"UNAVAILABLE\", color: \"yellow\"});\n  }\n\n  if (locSettings.ShowVacationEventType) {\n    eventTypeOptions.push({ value: EventType.Vacation, text: \"VACATION\", color: \"yellow\"});\n  }\n\n  if (locSettings.ShowAbsentEventType) {\n    const peTypes = auth.payrollEvents.filter(pe => pe.positionIds.includes(selectedPosition.position.id) && !pe.name.startsWith(\"--\")).map(pe => {\n      return { value: pe.id, text: pe.name, color: 'yellow'};\n    });\n    return eventTypeOptions.concat(peTypes);\n  }\n\n  return eventTypeOptions;\n};\n\n\n// --------------------------------------------------------------------------------------\nconst getEventStatusOptionsList = (auth: AuthorizedItems, selectedPosition: SelectedPosition, eventEmployeeId: number, eventStatusId: EventStatus, isEditingExistingEvent: boolean): Option[] => {\n  const eventStatusOptions: Option[] = [];\n  const dept = authHelper.getDepartmentFromPositionId(auth, selectedPosition.position.id);\n  const adminAuth = authHelper.getAdminAuthorizationForDepartment(auth, dept!.id);\n\n  if (auth.role === Role.LocationAdmin || auth.role === Role.BusinessAdmin) {\n    eventStatusOptions.push({ value: EventStatus.Approved, text: \"APPROVED\", color: \"black\"});\n  } else if (auth.role === Role.Admin && ((adminAuth & AdminAuthorization.CanEditSchedules) === AdminAuthorization.CanEditSchedules)) {\n    eventStatusOptions.push({ value: EventStatus.Approved, text: \"APPROVED\", color: \"black\"});\n  }\n\n  eventStatusOptions.push({ value: EventStatus.Request, text: \"REQUEST\", color: \"red\"});\n\n  if (auth.role === Role.LocationAdmin || auth.role === Role.BusinessAdmin) {\n    eventStatusOptions.push({ value: EventStatus.RequestDenied, text: \"REQUEST-DENIED\", color: \"black\"});\n  } else if (auth.role === Role.Admin && ((adminAuth & AdminAuthorization.CanEditSchedules) === AdminAuthorization.CanEditSchedules)) {\n    eventStatusOptions.push({ value: EventStatus.RequestDenied, text: \"REQUEST-DENIED\", color: \"black\"});\n  }\n\n  if (isEditingExistingEvent) {\n    if (eventStatusOptions.filter(es => es.value === eventStatusId).length === 0) {\n      switch (eventStatusId) {\n        case EventStatus.Approved:\n          eventStatusOptions.push({ value: EventStatus.Approved, text: \"APPROVED\", color: \"black\"});\n          break;\n        case EventStatus.Request:\n          eventStatusOptions.push({ value: EventStatus.Request, text: \"REQUEST\", color: \"red\"});\n          break;\n        case EventStatus.RequestDenied:\n          eventStatusOptions.push({ value: EventStatus.RequestDenied, text: \"REQUEST-DENIED\", color: \"black\"});\n          break;\n      }\n    }\n  }\n\n  return eventStatusOptions;\n};\n\n","import {\n  AdminAuthorization,\n  AuthorizedDepartment,\n  AuthorizedItems,\n  AuthorizedLocation, AuthorizedPosition,\n  Role\n} from \"../orbital-interfaces/authorized-items\";\nimport EventType from \"../enums/EventType\";\nimport EventStatus from \"../enums/EventStatus\";\n\nexport interface SelectedPosition {\n  location: AuthorizedLocation;\n  position: AuthorizedPosition;\n}\n\n// --------------------------------------------------------------------------------------\nconst getLocSettingsForLocationId = (auth: AuthorizedItems, locationId: number) => {\n  if (!auth || !auth.locations || auth.locations.length === 0) {\n    throw new Error(\"getLocSettingsForLocationId: called with invalid auth parameter\");\n  }\n\n  if (locationId === 0) {\n    return auth.locations[0].settings;\n  }\n\n  return auth.locations.filter(loc => loc.id === locationId)[0].settings;\n};\n\n// --------------------------------------------------------------------------------------\nconst getLocationFromLocationId = (auth: AuthorizedItems, locationId: number) => {\n  if (!auth || !auth.locations || auth.locations.length === 0) {\n    return null;\n  }\n\n  if (locationId <= 0) {\n    return null;\n  }\n\n  return auth.locations.filter(l => l.id === locationId)[0];\n};\n\n// ---------------------------------------------------------------------------------------------------\n// Returns true if the user can edit their own events (they have a position within one of the admin's editable departments)\nconst canEditNonPositionEvents = (auth: AuthorizedItems, departmentId: number): boolean => {\n  const dept = auth.locations.flatMap(l => l.departments.filter(d => d.id === departmentId))[0];\n  if ((dept.adminAuth & AdminAuthorization.CanEditSchedules) !== AdminAuthorization.CanEditSchedules) {\n    return false;\n  }\n\n  return dept.positions.filter(p => p.hasPosition).length > 0;\n};\n\n// ---------------------------------------------------------------------------------------------------\nconst getPositionIdsForEmployee = (auth: AuthorizedItems): number[] => {\n  return auth.locations.flatMap(\n    l => l.departments.flatMap(\n      d => d.positions.filter(p => p.hasPosition).map(p => p.id)));\n};\n\n// --------------------------------------------------------------------------------------\nconst getDepartmentFromPositionId = (auth: AuthorizedItems, positionId: number) => {\n  if (!auth || !auth.locations || auth.locations.length === 0) {\n    return null;\n  }\n\n  if (positionId <= 0) {\n    return null;\n  }\n\n  let foundDepartment = null as AuthorizedDepartment | null;\n  auth.locations.flatMap(l => l.departments.map(d => {\n    const foundPosition = d.positions.filter(p => p.id === positionId);\n    if (foundPosition.length === 1) {\n      foundDepartment = d;\n      return d;\n    }\n\n    return null;\n  }));\n\n  return foundDepartment;\n};\n\n// ---------------------------------------------------------------------------------------------------\n// Returns true if the Admin can edit schedules for the passed-in department\nconst canEditSchedules = (auth: AuthorizedItems, locationId: number, departmentId: number) => {\n  return (auth.locations\n    .filter(l => l.id === locationId)[0].departments\n    .filter(d => d.id === departmentId)[0]\n    .adminAuth & AdminAuthorization.CanEditSchedules) === AdminAuthorization.CanEditSchedules;\n};\n\n// ---------------------------------------------------------------------------------------------------\n// Returns true if the event type is a type that is associated to a position (e.g., not an unavailable)\nconst isPositionSpecificEvent = (eventType: EventType) => {\n  return (\n    eventType === EventType.Shift ||\n    eventType === EventType.Cover ||\n    eventType === EventType.Clock ||\n    eventType === EventType.Absent\n  );\n};\n\n// ---------------------------------------------------------------------------------------------------\n// Returns true if 1) the user is an Admin and 2) they have a position in the passed-in department\nconst adminIsInDepartment = (auth: AuthorizedItems, departmentId: number) => {\n  if (auth.role !== Role.Admin) {\n    return false;\n  }\n\n  const dept = auth.locations.flatMap(l => l.departments.filter(d => d.id === departmentId))[0];\n  return dept.positions.filter(p => p.hasPosition).length > 0;\n};\n\n// ---------------------------------------------------------------------------------------------------\nconst getAdminAuthorizationForDepartment = (auth: AuthorizedItems, departmentId: number) => {\n  return auth.locations.flatMap(l => l.departments.filter(d => d.id === departmentId))[0].adminAuth;\n};\n\n// ---------------------------------------------------------------------------------------------------\nconst hasPosition = (auth: AuthorizedItems, positionId: number) => {\n  return auth.locations.flatMap(l => l.departments.flatMap(d => d.positions.filter(p => p.hasPosition && p.id === positionId))).length > 0;\n};\n\n// --------------------------------------------------------------------------------------\nconst getSelectedPositionWithLocId = (loc: AuthorizedLocation[], locId: number, posId: number) => {\n  const location = loc.filter(l => l.id === locId)[0];\n  const position = location.departments.flatMap(d => d.positions.filter(p => p.id === posId))[0];\n  return { location, position };\n};\n\n// --------------------------------------------------------------------------------------\nconst getSelectedPosition = (loc: AuthorizedLocation[], posId: number) => {\n  for(let locPosId = 0; locPosId < loc.length; locPosId++) {\n    for (let depPosId = 0; depPosId < loc[locPosId].departments.length; depPosId++) {\n      for (let posPosId = 0; posPosId < loc[locPosId].departments[depPosId].positions.length; posPosId++) {\n        if (loc[locPosId].departments[depPosId].positions[posPosId].id === posId) {\n          return { location: loc[locPosId], position: loc[locPosId].departments[depPosId].positions[posPosId] };\n        }\n      }\n    }\n  }\n\n  return { location: {} as AuthorizedLocation, position: {} as AuthorizedPosition };\n};\n\n// ---------------------------------------------------------------------------------------------------\nconst isShiftTypeEvent = (eventType: EventType, eventStatus: EventStatus) => {\n  return (\n    (eventType === EventType.Shift && eventStatus === EventStatus.Approved) ||\n    (eventType === EventType.Cover && eventStatus === EventStatus.Request) ||\n    (eventType === EventType.Cover && eventStatus === EventStatus.RequestDenied)\n  );\n};\n\nexport default {\n  getLocSettingsForLocationId,\n  getLocationFromLocationId,\n  getDepartmentFromPositionId,\n  getPositionIdsForEmployee,\n  isPositionSpecificEvent,\n  canEditSchedules,\n  getAdminAuthorizationForDepartment,\n  adminIsInDepartment,\n  canEditNonPositionEvents,\n  hasPosition,\n  isShiftTypeEvent,\n  getSelectedPositionWithLocId,\n  getSelectedPosition\n}\n","enum EventGroup {\n  All = -1,\n  Scheduled = -2,\n  DontWork = -3,\n  ClockAndSched = -6,\n  Custom = 0\n}\n\nexport default EventGroup;\n","import React, {CSSProperties, useContext} from 'react';\nimport {getDurationStringFromTimeSpan, getEventInformationStartEnd} from '../../util/time-helper';\nimport './EventCard.scss';\nimport {AuthorizedLocation} from '../../orbital-interfaces/authorized-items';\nimport {format, parseISO} from 'date-fns';\nimport {EventInformation} from '../../orbital-interfaces/TEC';\nimport {time} from 'ionicons/icons';\nimport {IonIcon} from '@ionic/react';\nimport {getEventEditAuthorization, EventEditAuthorization} from '../EditEvent/EditEventAuthorization';\nimport {AuthorizedItemsContext} from \"../../context/AuthorizedItemsContext\";\n\ninterface EventCardProps {\n  event: EventInformation,\n  location: AuthorizedLocation\n  multiLocation: boolean,\n  showEmployeeName: boolean\n  onEdit: (ev: EventInformation, eventEditAuth: EventEditAuthorization) => void;\n}\n\nconst colorMap: any = {\n  1: '#9CBA6A',\n  2: '#BFBFBF',\n  3: '#FFAD00',\n  4: '#C41A26',\n  6: '#677A46',\n  7: '#FFAD00'\n};\n\nconst statusTimeColor: any = {\n  1: { color: 'black'},\n  2: { color: '#C41A26'},\n  4: { color: '#BCBCBC'}\n};\n\nconst EventCard: React.FC<EventCardProps> = ({ location, event, multiLocation, showEmployeeName, onEdit }) => {\n  const { auth } = useContext(AuthorizedItemsContext);\n  const displayNameStyle: CSSProperties = showEmployeeName\n    ? { display: \"inline-block\" }\n    : { display: \"none\" };\n\n  const eventStartDate = parseISO(event.EventStart);\n  const multiDepartment = (multiLocation)\n    ? true\n    : location.departments.filter(d => d.positions.filter(p => p.hasPosition)).length > 1;\n\n  let posDisplay = '';\n  if (multiLocation && event.AbbreviatedLocationName) {\n    posDisplay = event.AbbreviatedLocationName + '/';\n  }\n\n  if (multiDepartment && event.AbbreviatedDepartmentName) {\n    posDisplay += event.AbbreviatedDepartmentName + '/';\n  }\n\n  posDisplay += event.PositionName;\n\n  const eventTypeBorder = { borderLeft: `6px solid ${colorMap[event.EventTypeId]} `};\n  const timeColor: CSSProperties = statusTimeColor[event.EventStatusId];\n\n  const onUserClick = () => {\n    const eventEditAuth = getEventEditAuthorization(event.EventTypeId, event.EventStatusId, event.EmployeeId, event.EventStart, event.EventEnd, event.LocationId, event.DepartmentId!, event.PositionId, event.IsConfirmed, auth);\n    if (eventEditAuth === null)\n    {\n      return;\n    }\n\n    onEdit(event, eventEditAuth);\n  };\n\n  return (\n      <button\n        className=\"event\"\n        onClick={() => {onUserClick()}}\n      >\n          <div  className=\"card-first-col\">\n            <div className=\"day-name\">{format(eventStartDate, 'EEE')} </div>\n            <div className=\"day-number\">{format(eventStartDate, 'dd')}</div>\n          </div>\n          <div className=\"card-second-col\" style={eventTypeBorder}>\n            <div className=\"time-row\">\n              {event.IsClockedIn && (<IonIcon icon={time} /> )}\n              <span style={timeColor}>\n                {getEventInformationStartEnd(event)}&nbsp;&nbsp;\n              </span>\n              {getDurationStringFromTimeSpan(event.EventDuration)}\n            </div>\n            <div className=\"name-row\" style={displayNameStyle}>{event.FirstName} {event.LastName}</div>\n            <div className=\"position-row\">\n              {posDisplay}&nbsp;&nbsp;\n              {event.Tag && `~${event.Tag}`}\n            </div>\n          </div>\n      </button>\n  );\n};\n\nexport default EventCard;\n","import React from 'react';\nimport './DailyNoteCard.scss';\nimport { AuthorizedLocation } from '../../orbital-interfaces/authorized-items';\nimport { format, parseISO } from 'date-fns';\nimport { DailyNotes } from '../../orbital-interfaces/DailyNotes';\n\ninterface EventCardProps {\n  note: DailyNotes,\n  location: AuthorizedLocation\n}\n\nconst EventCard: React.FC<EventCardProps> = ({ note }) => {\n  const noteDate = parseISO(note.EventStart);\n  const deptName = note.DepartmentId === -1 ? \"All Depts\" : note.DepartmentName;\n\n  return (\n      <button className=\"daily-note\">\n          <div  className=\"card-first-col\">\n            <div className=\"day-name\">{format(noteDate, 'EEE')} </div>\n            <div className=\"day-number\">{format(noteDate, 'dd')}</div>\n          </div>\n          <div className=\"card-second-col\">\n            <div className=\"first-row\">{deptName}: {note.Notes}</div>\n          </div>\n      </button>\n  );\n};\n\nexport default EventCard;\n","import React from 'react';\nimport './EventList.scss';\nimport EventCard from './EventCard';\nimport DailyNoteCard from './DailyNoteCard';\nimport { AuthorizedLocation } from '../../orbital-interfaces/authorized-items';\nimport './EventListSection.scss'\nimport { EventInformation } from '../../orbital-interfaces/TEC';\nimport { DailyNotes } from '../../orbital-interfaces/DailyNotes';\nimport {EventEditAuthorization} from \"../EditEvent/EditEventAuthorization\";\n\ninterface EventListSectionProps {\n  locations: AuthorizedLocation[];\n  events: EventInformation[];\n  notes: DailyNotes[];\n  header: string;\n  showEmployeeNames: boolean;\n  showTotalDuration: boolean;\n  onEdit: (ev: EventInformation, eventEditAuth: EventEditAuthorization) => void;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventListSection: React.FC<EventListSectionProps> = ({ locations, header, events, notes, showEmployeeNames, onEdit  }) => {\n  const multiLocation = locations.filter(l => l.departments.filter(d => d.positions.filter(p => p.hasPosition))).length > 1;\n\n  if (events.length === 0) {\n    return <div/>\n  }\n\n  return (\n    <>\n      <div className='header'>{header}</div>\n      <div className=\"daily-notes-list\">\n        {notes.map(note => (\n          <DailyNoteCard\n            key={note.DailyNoteId}\n            note={note}\n            location={locations.filter(l => l.id === note.LocationId)[0]}\n          />\n          )\n        )}\n      </div>\n      <div className=\"event-list\">\n        {events.map(ev =>  (\n          <EventCard\n            onEdit={onEdit}\n            key={ev.ScheduleEventId}\n            event={ev}\n            location={locations.filter(l => l.id === ev.LocationId)[0]}\n            multiLocation={multiLocation}\n            showEmployeeName={showEmployeeNames} />\n          )\n        )}\n      </div>\n    </>\n  )\n};\n\nexport default EventListSection;\n","import React from 'react';\nimport './EventList.scss';\nimport { LocationSettings } from '../../orbital-interfaces/authorized-items';\nimport { parseISO, format, addDays, isBefore } from 'date-fns';\nimport { KeyedCollection } from '../../util/KeyedCollection';\nimport EventListSection from './EventListSection';\nimport { getWeekStart, getDurationFromTimeSpan, getDurationString } from '../../util/time-helper';\nimport { EventInformation, HoursList } from '../../orbital-interfaces/TEC';\nimport { DailyNotes } from '../../orbital-interfaces/DailyNotes';\nimport { AuthorizedItems } from '../../orbital-interfaces/authorized-items';\nimport {EventEditAuthorization} from \"../EditEvent/EditEventAuthorization\";\n\ninterface EventListProps {\n  events: EventInformation[];\n  notes: DailyNotes[];\n  hoursPerDay: HoursList[];\n  listType: 'my' | 'requests' | 'all';\n  auth: AuthorizedItems;\n  onEdit: (ev: EventInformation, eventEditAuth: EventEditAuthorization) => void;\n}\n\ninterface SegmentItemList {\n  events: EventInformation[];\n  notes: DailyNotes[]\n}\n\n\n// --------------------------------------------------------------------------------------\nconst getSegmentsForMy = (events: EventInformation[], notes: DailyNotes[], locationSettings: LocationSettings, hoursPerDay: HoursList[]) => {\n  let segments = new KeyedCollection<SegmentItemList>();\n  if (events.length === 0 && notes.length === 0) {\n    return segments;\n  }\n\n  let weekStart = new Date(2199,1,1);\n  if (events.length > 0) {\n    weekStart = getWeekStart(parseISO(events[0].EventStart), locationSettings.DayWeekStartsOn, locationSettings.DayStartTime);\n  }\n\n  if (notes.length > 0) {\n    const notesStart = getWeekStart(parseISO(notes[0].EventStart), locationSettings.DayWeekStartsOn, locationSettings.DayStartTime);\n    if (isBefore(notesStart, weekStart)) {\n      weekStart = notesStart;\n    }\n  }\n\n  const weekEnd = addDays(weekStart, 6);\n  const header = `${format(weekStart, \"MMM d\")} - ${format(weekEnd, \"MMM d\")}`.toUpperCase() + ' ' +\n                  getDurationString(hoursPerDay.map(h => getDurationFromTimeSpan(h.time)).reduce((prev, cur) => prev + cur, 0));\n\n  segments.Add(header, { events, notes});\n  return segments;\n};\n\n// --------------------------------------------------------------------------------------\nconst getSegmentsForRequests = (events: EventInformation[], notes: DailyNotes[], employeeId: number) => {\n  let segments = new KeyedCollection<SegmentItemList>();\n  segments.Add('MY REQUESTS', { events: events.filter(ev => ev.EmployeeId === employeeId), notes: []});\n  segments.Add('CO-WORKERS',  { events: events.filter(ev => ev.EmployeeId !== employeeId), notes: []});\n  return segments;\n};\n\n// --------------------------------------------------------------------------------------\nconst getSegmentsForAll = (events: EventInformation[], notes: DailyNotes[]) => {\n  let segments = new KeyedCollection<SegmentItemList>();\n  events.map(ev => {\n    const thisDate = format(parseISO(ev.EventStart).setHours(0,0,0,0), 'MMM dd, yyyy').toUpperCase();\n    if (!segments.ContainsKey(thisDate)) {\n      const thisDatesNotes = notes.filter(n => format(parseISO(n.EventStart).setHours(0,0,0,0), 'MMM dd, yyyy').toUpperCase() === thisDate);\n      segments.Add(thisDate, { notes: thisDatesNotes, events: []});\n    }\n\n    segments.Item(thisDate).events.push(ev);\n    return thisDate;\n  });\n\n  return segments;\n};\n\n// --------------------------------------------------------------------------------------\nconst EventList: React.FC<EventListProps> = ({ events, listType, notes, hoursPerDay, auth, onEdit }) => {\n\n  if (events.length === 0) {\n    return <div>No Events</div>\n  }\n\n  let segments: KeyedCollection<SegmentItemList> = new KeyedCollection<SegmentItemList>();\n  switch(listType) {\n    case 'requests':\n      segments = getSegmentsForRequests(events, notes, auth.employeeId);\n      break;\n    case 'my':\n      segments = getSegmentsForMy(events, notes, auth.locations[0].settings, hoursPerDay);\n      break;\n    default:\n      segments = getSegmentsForAll(events, notes);\n      break;\n  }\n\n  return (\n    <>\n    {segments.Keys().map(seg => (\n      <EventListSection\n          onEdit={onEdit}\n          key={seg}\n          header={seg}\n          locations={auth.locations}\n          events={segments.Item(seg).events}\n          notes={segments.Item(seg).notes}\n          showEmployeeNames={listType !== 'my' && seg !== 'MY REQUESTS'}\n          showTotalDuration={listType !== 'requests'}\n      />\n    ))}\n    </>\n  )\n};\n\nexport default EventList;\n","import EventGroup from '../enums/EventGroup';\nimport {EventFilter} from \"../orbital-interfaces/EventFilter\";\nimport {AuthorizedItems} from \"../orbital-interfaces/authorized-items\";\nimport EventType from \"../enums/EventType\";\n\nexport interface EventTypeOption {\n  value: number;\n  text: string;\n  color: string;\n}\n\nexport const getFilterByEventGroup = (f: EventFilter, group: EventGroup): EventFilter => {\n  return group === EventGroup.Custom\n    ? { ...f, eventTypeId: -1, eventStatusId: -1}\n    : { ...f, eventTypeId: group, eventStatusId: group };\n}\n\nexport const getEventTypeOptions = (auth: AuthorizedItems, filter?: EventFilter): EventTypeOption[] => {\n  if (!auth || !auth.locations || auth.locations.length === 0) {\n    return [];\n  }\n\n  const locSettings = auth.locations[0].settings;\n\n  const eventTypeOptions: EventTypeOption[] = [\n    {\n      value: EventType.Shift,\n      text: \"SHIFT\",\n      color: \"green\"\n    },\n    {\n      value: EventType.Cover,\n      text: \"COVER\",\n      color: \"red\",\n    },\n  ];\n\n  if (filter) {\n    eventTypeOptions.unshift({ value: -1, text: \"ALL\", color: \"black\"});\n  }\n\n  eventTypeOptions.push({ value: EventType.Clock, text: \"CLOCK\", color: \"green\"});\n\n\n  if (locSettings.ShowUnavailableEventType) {\n    eventTypeOptions.push({ value: EventType.Unavailable, text: \"UNAVAILABLE\", color: \"yellow\"});\n  }\n\n  if (locSettings.ShowVacationEventType) {\n    eventTypeOptions.push({ value: EventType.Vacation, text: \"VACATION\", color: \"yellow\"});\n  }\n\n  if (locSettings.ShowAbsentEventType) {\n    const peTypes: EventTypeOption[] = [];\n    const p2l: any = {};\n    auth.locations.flatMap(l => l.departments.flatMap(d => d.positions.map(p => p2l[p.id] = l)));\n\n    auth.payrollEvents.map(pe => {\n      if (!pe.name.startsWith(\"--\")) {\n        if (filter) {\n          if (pe.positionIds.some(id => filter.positionIds.indexOf(id) >= 0)) {\n            peTypes.push({value: pe.id, text: `${pe.name} (${p2l[pe.positionIds[0]].name})`, color: \"yellow\"});\n          };\n        } else {\n            peTypes.push({value: pe.id, text: `${pe.name} (${p2l[pe.positionIds[0]].name})`, color: \"yellow\"});\n        }\n\n        return pe;\n      } else {\n        return null;\n      }\n    });\n    peTypes.sort((p1, p2) => { return p1.text > p2.text ? 1 : -1;});\n    return eventTypeOptions.concat(peTypes);\n  }\n\n  return eventTypeOptions;\n}\n","const arrayHelper = {\n\n  // ------------------------------------------------------------------------------------\n  areEqual: <T extends {}>(a1: T[], a2: T[]): boolean => {\n    if ((!a1 && a2) || (a1 && !a2)) {\n      return false;\n    }\n\n    if (!a1 && !a2) {\n      return true;\n    }\n\n    if (a1.length !== a2.length) {\n      return false;\n    }\n\n    for (var i = 0 ; i < a1.length ; i++) {\n      if (!arrayHelper.contains(a2, a1[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n\n  // ------------------------------------------------------------------------------------\n  contains: <T extends {}>(arr: T[], val: T): boolean => {\n    for (let i = 0 ; i < arr.length; i++) {\n      if (arr[i] === val) {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  containsAny: <T extends {}>(arr1: T[], arr2: T[]): boolean => {\n    for (let i = 0 ; i < arr1.length; i++) {\n      if (arr2.includes(arr1[i]))\n      {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  // ------------------------------------------------------------------------------------\n  unique: <T extends {}>(arr: T[]): T[] => {\n    let newArr: T[] = [];\n    // eslint-disable-next-line\n    arr.map(item => {\n      if (!arrayHelper.contains(newArr, item)) {\n        newArr.push(item);\n      }\n    });\n\n    return newArr;\n  },\n\n  // ------------------------------------------------------------------------------------\n  uniqueObject: <T extends {}>(arr: T[], filt: (o: T, n: T) => boolean): T[] => {\n    let newArr: T[] = [];\n    // eslint-disable-next-line\n    arr.map(item => {\n      let found = false;\n      for (let i = 0; i < newArr.length; i++) {\n        if (filt(newArr[i], item)) {\n          found = true;\n          break;\n        }\n      }\n\n      if (!found)\n      {\n        newArr.push(item);\n      }\n    });\n\n    return newArr;\n  }\n\n}\n\nexport default arrayHelper;\n","import React, { useState, useEffect } from 'react';\nimport {IonButton, IonButtons, IonIcon, IonContent, IonFooter, IonHeader, IonItem, IonLabel, IonSelect, IonSelectOption, IonTitle, IonToolbar} from '@ionic/react';\nimport {EventFilter, initialEventFilter} from '../../orbital-interfaces/EventFilter'\nimport { arrowRoundBack } from 'ionicons/icons';\nimport './ScheduleFilterModal.scss';\nimport EventGroup from '../../enums/EventGroup';\nimport {getFilterByEventGroup, getEventTypeOptions } from '../../util/event-helper';\nimport {AuthorizedItems} from \"../../orbital-interfaces/authorized-items\";\nimport arrayHelper from '../../util/array-helper';\n\ninterface ScheduleFilterModalProps {\n  filter: EventFilter;\n  auth: AuthorizedItems;\n  onDismissModal: (f: EventFilter, filterApplied: boolean) => void;\n  onCancelModal: () => void;\n  isOpen: boolean;\n}\n\n// --------------------------------------------------------------------------------------\nconst ScheduleFilterModal: React.FC<ScheduleFilterModalProps> = ({ auth, filter, onDismissModal, onCancelModal , isOpen}) => {\n  const [myFilter, setMyFilter] = useState(filter);\n  const [showCustomEventTypes, setShowCustomEventTypes] = useState(false);\n  const [eventGroup, setEventGroup] = useState(EventGroup.ClockAndSched);\n  const [eventTypeList, setEventTypeList] = useState(getEventTypeOptions(auth, filter));\n  const [locationIds, setLocationIds] = useState(auth.locations.map(l => \"\" + l.id));\n  const [departmentIds, setDepartmentIds] = useState(auth.locations.flatMap(l => l.departments).map(d => \"\" + d.id));\n  const [positionIds, setPositionIds] = useState(auth.locations.flatMap(l => l.departments).flatMap(d => d.positions).map(p => \"\" + p.id));\n  const [isDirty, setIsDirty] = useState(false);\n\n  useEffect(() => {\n    setMyFilter(filter);\n  }, [filter]);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsDirty(false);\n    }\n  }, [isOpen]);\n\n  const getDefaultFilter = (auth: AuthorizedItems) => {\n    return {\n      ...initialEventFilter,\n      start: filter.start,\n      end: filter.end,\n      tagId: -1,\n      positionIds: auth.locations.flatMap(l => l.departments.flatMap(d =>  d.positions.map(p => p.id))),\n      dnLocIds: auth.locations.map(l => l.id),\n      settingsLocId: auth.locations[0].id\n    }\n  };\n\n  const onReset = () => {\n    setShowCustomEventTypes(false);\n    setEventGroup(EventGroup.ClockAndSched);\n    setEventTypeList(getEventTypeOptions(auth, filter));\n    setLocationIds(auth.locations.map(l => \"\" + l.id));\n    setDepartmentIds(auth.locations.flatMap(l => l.departments).map(d => \"\" + d.id));\n    setPositionIds(auth.locations.flatMap(l => l.departments).flatMap(d => d.positions).map(p => \"\" + p.id));\n    setMyFilter(getDefaultFilter(auth));\n\n    setIsDirty(true);\n  };\n\n  const onEventGroupSelect = (val: EventGroup) => {\n    setEventGroup(val);\n    setIsDirty(true);\n    setMyFilter(getFilterByEventGroup(myFilter, val));\n    setShowCustomEventTypes(val === EventGroup.Custom);\n  };\n\n  const onSetLocations = (locIds: string[]) => {\n    setLocationIds(locIds);\n    setIsDirty(true);\n    setDepartmentIds(auth.locations\n      .filter(l => locIds.indexOf(l.id.toString()) >= 0)\n      .flatMap(l => l.departments)\n      //.filter(d => departmentIds.indexOf(d.id.toString()) >=0)\n      .map(d => \"\" + d.id));\n    setEventTypeList(getEventTypeOptions(auth, myFilter));\n  };\n\n  const onSetDepartmentIds = (deptIds: string[]) => {\n    setDepartmentIds(deptIds);\n    setIsDirty(true);\n    setPositionIds(auth.locations\n      .filter(l => locationIds.indexOf(l.id.toString()) >= 0)\n      .flatMap(l => l.departments)\n      //.filter(d => deptIds.length > 0 && deptIds.indexOf(d.id.toString()) >= 0)\n      .flatMap(d => d.positions)\n      //.filter(p => positionIds.length > 0 && positionIds.indexOf(p.id.toString()) >= 0)\n      .map(p => \"\" + p.id));\n  };\n\n  const onSetPositionIds = (posIds: string[]) => {\n    setPositionIds(posIds);\n    setIsDirty(true);\n  };\n\n  const onCloseModal = () => {\n    const selectedPositionIds = positionIds.map(p => parseInt(p));\n    const defaultFilter = getDefaultFilter(auth);\n    const returnedFilter = { ...myFilter, positionIds: selectedPositionIds};\n    const filterApplied = !(\n      defaultFilter.eventTypeId === returnedFilter.eventTypeId &&\n      defaultFilter.eventStatusId === returnedFilter.eventStatusId &&\n      defaultFilter.tagId === returnedFilter.tagId &&\n      arrayHelper.areEqual(defaultFilter.positionIds, returnedFilter.positionIds));\n\n    onDismissModal(returnedFilter, filterApplied);\n  };\n\n  const onCancel = () => {\n    onCancelModal();\n  };\n\n  return (\n    <>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonButton onClick={onCancel}>\n                <IonIcon icon={arrowRoundBack} mode=\"md\" slot=\"icon-only\" />\n            </IonButton>\n          </IonButtons>\n          <IonTitle>\n            Filter\n          </IonTitle>\n          <IonButtons slot=\"end\">\n            <IonButton onClick={onReset}>\n                RESET\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent class=\"outer-content\">\n\n        <IonItem>\n          <IonLabel>Events</IonLabel>\n          <IonSelect\n            value={eventGroup}\n            onIonChange={(e) => onEventGroupSelect(e.detail.value)}\n            interface=\"action-sheet\">\n            <IonSelectOption value={EventGroup.ClockAndSched}>Clock + Sched</IonSelectOption>\n            <IonSelectOption value={EventGroup.Scheduled}>Scheduled</IonSelectOption>\n            <IonSelectOption value={EventGroup.DontWork}>Don't Work</IonSelectOption>\n            <IonSelectOption value={EventGroup.Custom}>Custom</IonSelectOption>\n            <IonSelectOption value={EventGroup.All}>All</IonSelectOption>\n          </IonSelect>\n        </IonItem>\n\n        {showCustomEventTypes && (\n          <IonItem>\n            <IonLabel>Type</IonLabel>\n            <IonSelect\n              value={myFilter.eventTypeId}\n              onIonChange={(e) => setMyFilter({...myFilter, eventTypeId: e.detail.value})}\n              interface=\"action-sheet\">\n              {eventTypeList.map((et) => (\n                <IonSelectOption key={et.value} value={et.value}>{et.text}</IonSelectOption>\n              ))}\n            </IonSelect>\n          </IonItem>\n        )}\n\n        {showCustomEventTypes && (\n          <IonItem>\n            <IonLabel>Status</IonLabel>\n            <IonSelect\n              value={myFilter.eventStatusId}\n              onIonChange={(e) => setMyFilter({...myFilter, eventStatusId: e.detail.value})}\n              interface=\"action-sheet\">\n              <IonSelectOption value={-1}>All</IonSelectOption>\n              <IonSelectOption value={1}>Approved</IonSelectOption>\n              <IonSelectOption value={2}>Request</IonSelectOption>\n              <IonSelectOption value={4}>Request Denied</IonSelectOption>\n            </IonSelect>\n          </IonItem>\n        )}\n\n        <IonItem>\n          <IonLabel>Tags</IonLabel>\n          <IonSelect\n            value={myFilter.tagId || -1}\n            onIonChange={(e) => { setMyFilter({...myFilter, tagId: e.detail.value}); setIsDirty(true);}}\n            interface=\"action-sheet\">\n              <IonSelectOption key={-1} value={-1}>ALL</IonSelectOption>\n              {auth.tags.map((tag) => (\n                <IonSelectOption key={tag.id} value={tag.id}>~{tag.name}</IonSelectOption>\n              ))}\n          </IonSelect>\n        </IonItem>\n\n        {auth.locations.length > 1 && (\n          <IonItem>\n            <IonLabel>Locations</IonLabel>\n            <IonSelect\n              multiple={true}\n              onIonChange={(e) => onSetLocations(e.detail.value)}\n              value={locationIds}\n            >\n                {auth.locations.map((loc) => (\n                  <IonSelectOption key={loc.id} value={loc.id.toString()}>{loc.name}</IonSelectOption>\n                ))}\n            </IonSelect>\n          </IonItem>\n        )}\n\n        {auth.locations.flatMap(l => l.departments).length > 1 && (\n          <IonItem>\n            <IonLabel>Departments</IonLabel>\n            <IonSelect\n              multiple={true}\n              onIonChange={(e) => onSetDepartmentIds(e.detail.value)}\n              value={departmentIds}\n            >\n                {auth.locations.filter(l => locationIds.indexOf(l.id.toString()) >= 0).map((loc) =>\n                  loc.departments.map(dept => (\n                    <IonSelectOption key={dept.id} value={dept.id.toString()}>{loc.abbr}/{dept.name}</IonSelectOption>\n                  ))\n                )}\n            </IonSelect>\n          </IonItem>\n        )}\n\n        {auth.locations.flatMap(l => l.departments).flatMap(d => d.positions).length > 1 && (\n          <IonItem>\n            <IonLabel>Positions</IonLabel>\n            <IonSelect\n              multiple={true}\n              onIonChange={(e) => onSetPositionIds(e.detail.value)}\n              value={positionIds}\n            >\n                {auth.locations\n                  .filter(l => locationIds.indexOf(l.id.toString()) >= 0)\n                  .flatMap(l => l.departments)\n                  .filter(d => departmentIds.indexOf(d.id.toString()) >= 0)\n                  .map(dept => dept.positions.map(pos => (\n                  <IonSelectOption key={pos.id} value={pos.id.toString()}>{pos.name}</IonSelectOption>\n                )))}\n            </IonSelect>\n          </IonItem>\n        )}\n\n        <IonButton\n          className=\"apply-button\"\n          expand=\"block\"\n          onClick={onCloseModal}\n          disabled={!isDirty}\n        >\n          APPLY FILTER\n        </IonButton>\n\n      </IonContent>\n\n      <IonFooter>\n        <IonToolbar />\n      </IonFooter>\n    </>\n  )\n};\n\nexport default ScheduleFilterModal;\n","import { IonRefresher, IonRefresherContent } from '@ionic/react';\nimport React, { useRef } from \"react\";\nimport { RefresherEventDetail } from '@ionic/core';\n\nfunction useIonicRefresher(doRefresh: (event: CustomEvent<RefresherEventDetail>) => void) {\n  const ionRefresherRef = useRef<HTMLIonRefresherElement>(null);\n\n  // ----------------------------------------------------------------------------------------------\n  const ionicRefresherJsx = (\n    <IonRefresher slot=\"fixed\" ref={ionRefresherRef} onIonRefresh={doRefresh}>\n      <IonRefresherContent\n        pullingText=\"Pull down to refresh\"\n        refreshingSpinner=\"dots\"\n        refreshingText=\"Refreshing...\"\n        style={{backgroundColor: 'white'}}\n      />\n    </IonRefresher>\n  );\n\n  const retVal = { ionicRefresherJsx };\n\n  return { ...retVal };\n}\n\nexport default useIonicRefresher;\n","\nexport enum RecurrenceType\n{\n  Daily = 0,\n  Weekly = 1,\n  MonthlyByDayOfMonth = 2,\n  MonthlyByDayOfWeek = 3,\n  Yearly = 4\n}\n","import React, {useEffect, useState} from 'react';\nimport {IonCol, IonInput, IonLabel, IonRow, IonSelect, IonSelectOption,} from '@ionic/react';\nimport './EventTypeStatusEditor.scss';\nimport {AuthorizedItems, LocationSettings, Role, TimeFormat} from \"../../../orbital-interfaces/authorized-items\";\nimport {getEventTypeOptions} from '../../../util/event-helper';\nimport EventType from '../../../enums/EventType';\nimport EventStatus from '../../../enums/EventStatus';\nimport {EditorReducerAction, EditorValues} from '../../EditEvent/EditEventModalState';\nimport {getMinutesFromTimeString, getTimeStringFromMinutes} from \"../../../util/time-helper\";\nimport authHelper from '../../../util/authitems-helper';\nimport {Option} from \"../EditEventAuthorization\";\n\ninterface EventTypeStatusEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n  eventTypes: Option[];\n  eventStatuses: Option[];\n}\n\n\n// --------------------------------------------------------------------------------------\nconst EventTypeStatusEditor: React.FC<EventTypeStatusEditorProps> = ({\n      auth,\n      editorValues,\n      update,\n      eventTypes,\n      eventStatuses}) => {\n  const [eventTypeList, setEventTypeList] = useState(getEventTypeOptions(auth, undefined));\n  const [selectedEventTypeId, setSelectedEventTypeId] = useState(EventType.Shift);\n  const [eventStatusList, setEventStatusList] = useState(null as Option[] | null);\n  const [selectedEventStatusId, setSelectedEventStatusId] = useState(EventStatus.Approved);\n  const [absentHoursPlaceholderText, setAbsentHoursPlaceholderText] = useState(\"Ex: 00:00\");\n  const [locSettings, setLocSettings] = useState(null as LocationSettings | null);\n  const [absentTimeString, setAbsentTimeString] = useState(null as string | null);\n\n  useEffect(() => {\n    setEventTypeList(eventTypes);\n    setEventStatusList(eventStatuses);\n\n\n    // If this is an employee and we're creating an event\n    if (auth.role === Role.Employee && editorValues.scheduleEventId <= 0 && selectedEventStatusId !== EventStatus.Request) {\n      update({\n        type: \"TYPESTATUS-UPDATED\",\n        eventType: selectedEventTypeId,\n        eventStatus: EventStatus.Request,\n        absentId: editorValues.absentId,\n        absentTimeMinutes: editorValues.absentTimeMinutes\n      });\n    }\n\n    if (editorValues.absentId) {\n      setSelectedEventTypeId(editorValues.absentId);\n    } else {\n      setSelectedEventTypeId(editorValues.eventType);\n    }\n\n    setSelectedEventStatusId(eventStatuses[0].value);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [auth, editorValues.eventType, editorValues.eventStatus, editorValues.position, editorValues.absentId, editorValues.scheduleEventId]);\n\n  useEffect(() => {\n    if (locSettings) {\n      setAbsentTimeString(editorValues.absentTimeMinutes === null\n        ? null\n        : getTimeStringFromMinutes(locSettings, editorValues.absentTimeMinutes));\n    }\n  }, [locSettings, editorValues.absentTimeMinutes]);\n\n  useEffect(() => {\n    if ((locSettings && (editorValues.locationId === locSettings.LocationId)))\n    {\n      return;\n    }\n\n    //if (!editorValues.locationId) {\n    //  return;\n    //}\n\n    if (!auth || !auth.locations || auth.locations.length === 0) {\n      return;\n    }\n\n    const newLocSettings = authHelper.getLocSettingsForLocationId(auth, editorValues.locationId);\n    setLocSettings(newLocSettings);\n    setAbsentHoursPlaceholderText((newLocSettings.TimeFormat === TimeFormat.HoursMinutes)\n      ? \"Ex: 00:00\"\n      : \"Ex: 0.0\");\n\n    // eslint-disable-next-line\n  }, [editorValues.locationId]);\n\n\n  useEffect(() => {\n    if (editorValues.scheduleEventId > 0) {\n      setSelectedEventStatusId(editorValues.eventStatus);\n    }\n  }, [editorValues.eventStatus, editorValues.scheduleEventId]);\n\n  const onEventTypeChange = (newEventType: EventType) => {\n    if (newEventType === editorValues.eventType) {\n      return;\n    }\n    setSelectedEventTypeId(newEventType);\n\n    const newAbsentMinutes = (newEventType !== EventType.Absent && newEventType < 100)\n      ? null\n      : editorValues.absentTimeMinutes;\n\n    update({\n      type: 'TYPESTATUS-UPDATED',\n      eventType: newEventType,\n      eventStatus: selectedEventStatusId,\n      absentId: (newEventType >= 100) ? newEventType : undefined,\n      absentTimeMinutes: newAbsentMinutes\n    });\n  };\n\n  const onEventStatusChange = (newEventStatus: EventStatus) => {\n    if (newEventStatus === editorValues.eventStatus) {\n      return;\n    }\n\n    setSelectedEventStatusId(newEventStatus);\n    update({\n      type: 'TYPESTATUS-UPDATED',\n      eventType: selectedEventTypeId,\n      eventStatus: newEventStatus,\n      absentId:(selectedEventTypeId >= 100) ? selectedEventTypeId : undefined,\n      absentTimeMinutes: editorValues.absentTimeMinutes\n    });\n  };\n\n  const onAbsentTimeChange = (input?: string | null) => {\n    if (input === undefined)\n    {\n      input = null;\n    }\n\n    if (input == null) {\n      update({\n        type: 'TYPESTATUS-UPDATED',\n        eventType: selectedEventTypeId,\n        eventStatus: selectedEventStatusId,\n        absentId:(selectedEventTypeId >= 100) ? selectedEventTypeId : undefined,\n        absentTimeMinutes: null\n      });\n\n      return;\n    }\n\n    const min = getMinutesFromTimeString(locSettings!, input!);\n    if (min === editorValues.absentTimeMinutes) {\n      return;\n    }\n\n    update({\n      type: 'TYPESTATUS-UPDATED',\n      eventType: selectedEventTypeId,\n      eventStatus: selectedEventStatusId,\n      absentId:(selectedEventTypeId >= 100) ? selectedEventTypeId : undefined,\n      absentTimeMinutes: min\n    });\n  };\n\n  if (locSettings === null) {\n    return (\n      <div>Loading...</div>\n    )\n  }\n\n  return (\n    <>\n        <IonRow className=\"edit-row\">\n          <IonCol size=\"3\">\n            <IonLabel className=\"label\">Type</IonLabel>\n          </IonCol>\n          <IonCol size=\"9\">\n            <IonSelect\n                className=\"select\"\n                interface=\"popover\"\n                disabled={editorValues.isReadonly}\n                value={selectedEventTypeId}\n                onIonChange={(e) => { onEventTypeChange(e.detail.value)}}\n              >\n              {eventTypeList.map((et) => (\n                <IonSelectOption key={et.value} value={et.value}>{et.text}</IonSelectOption>\n              ))}\n            </IonSelect>\n          </IonCol>\n        </IonRow>\n\n      <IonRow className=\"edit-row\">\n          <IonCol size=\"3\">\n            <IonLabel className=\"label\">Status</IonLabel>\n          </IonCol>\n          <IonCol size=\"9\">\n            <IonSelect\n                className=\"select\"\n                interface=\"popover\"\n                disabled={editorValues.isReadonly || (auth.role === Role.Employee && editorValues.scheduleEventId <= 0)}\n                value={selectedEventStatusId}\n                onIonChange={(e) => { onEventStatusChange(e.detail.value)}}\n              >\n              {eventStatusList && eventStatusList.map((es) => (\n                <IonSelectOption key={es.value} value={es.value}>{es.text}</IonSelectOption>\n              ))}\n            </IonSelect>\n          </IonCol>\n        </IonRow>\n\n        <IonRow className={selectedEventTypeId > 100 ? \"visible edit-row\" : \"invisible\"}>\n          <IonCol size=\"3\">\n            <IonLabel className=\"label\">Hours</IonLabel>\n          </IonCol>\n          <IonCol size=\"9\">\n              <IonInput\n                className=\"input-textbox\"\n                placeholder={absentHoursPlaceholderText}\n                disabled={editorValues.isReadonly}\n                value={absentTimeString}\n                onIonChange={(e) => { if (e.detail.value) { setAbsentTimeString(e.detail.value) }}}\n                onIonBlur={() => {onAbsentTimeChange(absentTimeString)}}\n              />\n          </IonCol>\n        </IonRow>\n    </>\n  );\n};\n\nexport default EventTypeStatusEditor;\n","import React, { useState, useEffect } from 'react';\nimport {IonLabel, IonSelect, IonRow, IonCol, IonSelectOption} from '@ionic/react';\nimport './EventPositionEditor';\nimport {AuthorizedItems, AuthorizedLocation, AuthorizedPosition} from \"../../../orbital-interfaces/authorized-items\";\nimport { EditorValues, EditorReducerAction } from '../EditEventModalState';\nimport authHelper from '../../../util/authitems-helper';\n\ninterface EventPositionEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\ninterface Option {\n  id: number;\n  name: string;\n}\n\n\n// --------------------------------------------------------------------------------------\nconst createPositionList = (loc: AuthorizedLocation[]): Option[] => {\n  const isMultiLoc = loc.length > 1;\n  return loc.flatMap(l => l.departments.flatMap(d => d.positions.map((p) => {\n    const isMultiDep = l.departments.length > 1;\n    let name = \"\";\n    if (isMultiLoc) {\n      name += (l.abbr ? l.abbr : l.name) + \"/\";\n    }\n\n    if (isMultiDep) {\n      name += (d.abbr ? d.abbr : d.name) + \"/\";\n    }\n\n    name += p.name;\n    return { id: p.id, name: name};\n  })));\n};\n\n// --------------------------------------------------------------------------------------\nconst EventPositionEditor: React.FC<EventPositionEditorProps> = ({ auth, editorValues, update }) => {\n  const [selectedPosition, setSelectedPosition] = useState({location: {} as AuthorizedLocation, position: {} as AuthorizedPosition});\n  const [positionList, setPositionList] = useState([] as Option[] );\n\n  useEffect(() => {\n    if (auth && auth.locations && auth.locations.length > 0) {\n      if (editorValues.position && editorValues.scheduleEventId > 0) {\n        const selPos = authHelper.getSelectedPositionWithLocId(auth.locations, editorValues.position.location.id, editorValues.position.position.id);\n        if (selPos.position.id !== selectedPosition.position.id) {\n          setSelectedPosition(selPos);\n        }\n      } else {\n        const selPos = authHelper.getSelectedPositionWithLocId(auth.locations, auth.locations[0].id, auth.locations[0].departments[0].positions[0].id);\n        setSelectedPosition(selPos);\n      }\n    }\n    // eslint-disable-next-line\n  }, [editorValues.position, auth]);\n\n  useEffect(() => {\n    if (auth && auth.locations && auth.locations.length > 0) {\n      setPositionList(createPositionList(auth.locations));\n    }\n  }, [auth]);\n\n  const updatePosition = (posId: number) => {\n    const selected = authHelper.getSelectedPosition(auth.locations, posId);\n    if (selected.position.id === editorValues.position.position.id) {\n      return;\n    }\n\n    setSelectedPosition(selected);\n    update({ type: \"POSITION-UPDATED\", selectedPosition: selected});\n  };\n\n  return (\n    <IonRow className=\"edit-row\">\n      <IonCol size=\"3\">\n        <IonLabel className=\"label\">Position</IonLabel>\n      </IonCol>\n      <IonCol size=\"9\">\n        <IonSelect\n            className=\"select\"\n            interface=\"popover\"\n            disabled={editorValues.isReadonly}\n            value={selectedPosition.position.id}\n            onIonChange={(e) => updatePosition(e.detail.value)}\n            >\n          {positionList.map(p => (\n            <IonSelectOption key={p.id} value={p.id}>{p.name}</IonSelectOption>\n          ))}\n        </IonSelect>\n      </IonCol>\n    </IonRow>\n  );\n};\n\nexport default EventPositionEditor;\n","import { EmployeeSort } from './../orbital-interfaces/authorized-items';\nimport { Employee } from '../orbital-interfaces/Employee';\nimport { ApplicationUser } from '../context/ApplicationUserContext';\nimport { formatDateTimeAsMvcString } from '../util/time-helper';\nimport apiHelper from './OrbitalApiHelper';\n\nconst getEmployeesByLocationIdPositionIdAndActiveDateRange = async (\n  user: ApplicationUser,\n  locId: number,\n  posId: number,\n  start: Date,\n  end: Date,\n  sort: EmployeeSort) => {\n\n  const data = {\n    locId,\n    posId,\n    start: formatDateTimeAsMvcString(start),\n    end: formatDateTimeAsMvcString(end),\n    sort\n  };\n\n  return await apiHelper.post(user, 'api/v2/employees/at-position', data) as Employee[];\n}\n\nexport default {\n  getEmployeesByLocationIdPositionIdAndActiveDateRange\n}\n","import React, { useState, useContext, useEffect } from 'react';\nimport { IonLabel, IonSelect, IonRow, IonCol, IonSelectOption } from '@ionic/react';\nimport './EventEmployeeEditor';\nimport {AuthorizedItems} from \"../../../orbital-interfaces/authorized-items\";\nimport { Employee } from '../../../orbital-interfaces/Employee';\nimport employeeAPI from '../../../api/EmployeesAPI';\nimport { ApplicationUserContext } from '../../../context/ApplicationUserContext';\nimport { parseISO } from 'date-fns';\nimport { EditorValues, EditorReducerAction } from '../../EditEvent/EditEventModalState';\n\ninterface EventEmployeeEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventEmployeeEditor: React.FC<EventEmployeeEditorProps> = ({ auth, editorValues, update }) => {\n  const [employeeList, setEmployeeList] = useState([] as Employee[]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [selectedEmployeeId, setSelectedEmployeeId] = useState(-1);\n  const { user } = useContext(ApplicationUserContext);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    // eslint-disable-next-line\n    if (user && user.isLoggedin && editorValues.scheduleEventId !== -1) {\n      setIsLoading(true);\n      getEmployees(editorValues);\n    }\n    // eslint-disable-next-line\n  }, [user, editorValues.position, editorValues.scheduleEventId]);\n\n  // --------------------------------------------------------------------------------------\n  const onChange = (employeeId: number) => {\n    if (employeeId === -5 || employeeId === editorValues.employee.id) {\n      return;\n    }\n\n    setSelectedEmployeeId(employeeId);\n    const emp = employeeList.filter(e => e.EmployeeId === employeeId)[0];\n    if (employeeId === -1) {\n      update({ type: \"EMPLOYEE-UPDATED\", employee: { id: -1, name: \"SELECT EMPLOYEE\"}});\n    } else {\n      update({ type: \"EMPLOYEE-UPDATED\", employee: { id: employeeId, name: emp.FullName}});\n    }\n  };\n\n  // --------------------------------------------------------------------------------------\n  const getEmployees = (ev: EditorValues) => {\n    employeeAPI.getEmployeesByLocationIdPositionIdAndActiveDateRange(\n      user,\n      editorValues.position.location.id,\n      editorValues.position.position.id,\n      parseISO(editorValues.eventStart),\n      parseISO(editorValues.eventEnd),\n      editorValues.position.location.settings.EmployeeSort).then(employees => {\n        setEmployeeList(employees);\n        const empIds = employees.map(e => e.EmployeeId);\n\n        if (editorValues.scheduleEventId === 0 && empIds.includes(auth.employeeId)) {\n          setSelectedEmployeeId(auth.employeeId);\n          const thisEmp = employees.filter(e => e.EmployeeId === auth.employeeId)[0];\n          update({ type: \"EMPLOYEE-UPDATED\", employee: { id: thisEmp.EmployeeId, name: thisEmp.FullName}});\n        } else {\n          const newSelectedEmployeeId = (empIds.includes(ev.employee.id))\n            ? ev.employee.id\n            : -1;\n\n          setSelectedEmployeeId(newSelectedEmployeeId);\n        }\n\n        setIsLoading(false);\n      });\n  };\n\n  if (isLoading || editorValues.scheduleEventId === -1 || employeeList.length === 0) {\n    return (\n      <IonRow className=\"edit-row\">\n        <IonCol size=\"3\">\n          <IonLabel className=\"label\">Employee</IonLabel>\n        </IonCol>\n        <IonCol size=\"9\">\n          <IonSelect\n              className=\"select\"\n              interface=\"popover\"\n              value={-5}\n            >\n            <IonSelectOption key=\"-5\" value=\"-5\">{editorValues.employee.name}</IonSelectOption>\n          </IonSelect>\n        </IonCol>\n      </IonRow>\n    );\n  }\n\n  return (\n\n    <IonRow className=\"edit-row\">\n      <IonCol size=\"3\">\n        <IonLabel className=\"label\">Employee</IonLabel>\n      </IonCol>\n      <IonCol size=\"9\">\n        <IonSelect\n            className=\"select\"\n            interface=\"popover\"\n            disabled={editorValues.isReadonly}\n            value={selectedEmployeeId}\n            onIonChange={(e) => { onChange(e.detail.value)}}\n          >\n          <IonSelectOption key={-1} value={-1}>Select Employee</IonSelectOption>\n          {employeeList.map(emp => (\n            <IonSelectOption\n              key={emp.EmployeeId}\n              value={emp.EmployeeId}\n            >\n              {emp.FullName}\n            </IonSelectOption>\n          ))}\n        </IonSelect>\n      </IonCol>\n    </IonRow>\n  );\n};\n\nexport default EventEmployeeEditor;\n","import React from 'react';\nimport { IonLabel, IonRow, IonCol, IonDatetime } from '@ionic/react';\nimport './EventStartEndEditor';\nimport {AuthorizedItems} from \"../../../orbital-interfaces/authorized-items\";\nimport { parseISO } from 'date-fns'\nimport { EditorValues, EditorReducerAction } from '../EditEventModalState';\n\ninterface EventStartEndEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventStartEndEditor: React.FC<EventStartEndEditorProps> = ({ auth, editorValues, update }) => {\n\n  const onStartChange = (newEventStart?: string | null) => {\n    if (!newEventStart) {\n      return;\n    }\n\n    if (parseISO(newEventStart) === parseISO(editorValues.eventStart)) {\n      return;\n    }\n\n    update({\n      type: \"START-UPDATED\",\n      eventStart: newEventStart\n    });\n  };\n\n  const onEndChange = (newEventEnd?: string | null) => {\n    if (!newEventEnd) {\n      return;\n    }\n\n    if (parseISO(newEventEnd) === parseISO(editorValues.eventEnd)) {\n      return;\n    }\n\n    update({\n      type: \"END-UPDATED\",\n      eventEnd: newEventEnd\n    });\n  };\n\n  if (!editorValues || !editorValues.eventStart) {\n    return (\n      <div>Loading</div>\n    );\n  }\n\n  return (\n    <>\n      <IonRow className=\"edit-row\">\n        <IonCol size=\"3\">\n          <IonLabel className=\"label\">Start</IonLabel>\n        </IonCol>\n        <IonCol size=\"9\">\n          <IonDatetime\n            className=\"select\"\n            displayFormat=\"M/D/YY h:mma\"\n            disabled={editorValues.isReadonly}\n            pickerFormat=\"MMM DD YYYY h:mm A\"\n            min=\"2005-01-01\"\n            max=\"2030-01-01\"\n            minuteValues=\"0,5,10,15,20,25,30,35,40,45,50,55\"\n            value={editorValues.eventStart}\n            onIonChange={(e) => {onStartChange(e.detail.value)}}\n          />\n        </IonCol>\n      </IonRow>\n\n      <IonRow className=\"edit-row\">\n        <IonCol size=\"3\">\n          <IonLabel className=\"label\">End</IonLabel>\n        </IonCol>\n        <IonCol size=\"9\">\n          <IonDatetime\n            className=\"select\"\n            displayFormat=\"M/D/YY h:mma\"\n            disabled={editorValues.isReadonly || editorValues.isClockedIn}\n            pickerFormat=\"MMM DD YYYY h:mm A\"\n            min=\"2005-01-01\"\n            max=\"2030-01-01\"\n            minuteValues=\"0,5,10,15,20,25,30,35,40,45,50,55\"\n            value={editorValues.eventEnd}\n            onIonChange={(e) => {onEndChange(e.detail.value)}}\n\n          />\n        </IonCol>\n      </IonRow>\n    </>\n\n  );\n};\n\nexport default EventStartEndEditor;\n","import React, { useState } from 'react';\nimport { IonCheckbox, IonDatetime,  IonContent, IonRow, IonCol, IonButton, IonFooter, IonGrid, IonHeader, IonTitle, IonToolbar } from '@ionic/react';\nimport './AddBreakModal.scss';\nimport { setHours, setMinutes, parseISO, isAfter, isBefore, addMinutes } from 'date-fns';\nimport useDialogBox from '../../../hooks/useDialogBox';\nimport { EventBreak } from '../../../orbital-interfaces/EventBreak';\n\ninterface AddBreakModalProps {\n  onCancel: () => void;\n  onAdd: (startDate: Date, endDate: Date, isRestricted: boolean, isPaid: boolean) => void;\n  currentBreaks: EventBreak[];\n  eventStart: string;\n  eventEnd: string;\n}\n\n// --------------------------------------------------------------------------------------\nconst hasOverlap = (start: Date, end: Date, breaks: EventBreak[]) => {\n  const startA = start;\n  const endA = end;\n  let found = false;\n  breaks.map(brk => {\n    const startB = addMinutes(parseISO(brk.BreakStart), 3);\n    const endB = (brk.BreakEnd) ? addMinutes(parseISO(brk.BreakEnd!), -3) : new Date(2200, 1, 1);\n    if (startA < endB && endA > startB) {\n      found = true;\n    }\n\n    return found;\n  })\n  return found;\n};\n\n// --------------------------------------------------------------------------------------\nconst AddBreakModal: React.FC<AddBreakModalProps> = ({onCancel, onAdd, currentBreaks, eventStart, eventEnd}) => {\n  const [startDate, setStartDate] = useState(setMinutes(setHours(new Date(), 12), 0));\n  const [endDate, setEndDate] = useState(setMinutes(setHours(new Date(), 13), 0));\n  const [isRestricted, setIsRestricted] = useState(false);\n  const [isPaid, setIsPaid] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [isValid, setIsValid] = useState(true);\n  const alert = useDialogBox();\n\n  const onAddClick = () => {\n    if (startDate > endDate) {\n      alert.showAlert(\"Invalid Start / End\", \"Start of break cannot come after end of break.\", () => {});\n    } else {\n      onAdd(startDate, endDate, isRestricted, isPaid);\n    }\n  }\n\n  const onStartUpdate = (newStart: string) => {\n    const newStartDate = parseISO(newStart);\n    setStartDate(newStartDate);\n    console.log(currentBreaks);\n    if (!isBefore(newStartDate, endDate))\n    {\n      setIsValid(false);\n      setErrorMessage(\"Start must be before End\");\n    } else if (parseISO(eventStart) > newStartDate) {\n      setIsValid(false);\n      setErrorMessage(\"Start before Event begins\");\n    } else if (hasOverlap(newStartDate, endDate, currentBreaks)) {\n      setIsValid(false);\n      setErrorMessage(\"Pre-existing break overlaps\");\n    } else {\n      setIsValid(true);\n      setErrorMessage(\"\");\n    }\n  }\n\n  const onEndUpdate = (newEnd: string) => {\n    const newEndDate = parseISO(newEnd);\n    setEndDate(newEndDate);\n\n    if (!isAfter(newEndDate, startDate)) {\n      setIsValid(false);\n      setErrorMessage(\"End must be after Start\");\n    } else if (newEndDate > parseISO(eventEnd)) {\n      setIsValid(false);\n      setErrorMessage(\"End after Event ends\");\n    } else if (hasOverlap(startDate, newEndDate, currentBreaks)) {\n      setIsValid(false);\n      setErrorMessage(\"Pre-existing break overlaps\");\n    } else {\n      setIsValid(true);\n      setErrorMessage(\"\");\n    }\n  }\n\n  return (\n    <>\n    <IonContent>\n      <IonHeader mode=\"ios\">\n        <IonToolbar>\n          <IonTitle>Add Break</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonGrid>\n        <IonRow>\n          <IonCol className=\"label\" size=\"3\">Start</IonCol>\n          <IonCol size=\"9\">\n            <IonDatetime\n              className=\"select\"\n              displayFormat=\"h:mm a\"\n              pickerFormat=\"h:mm A\"\n              min=\"2005-01-01\"\n              max=\"2030-01-01\"\n              minuteValues=\"0,5,10,15,20,25,30,35,40,45,50,55\"\n              value={startDate.toISOString()}\n              onIonChange={(e) => onStartUpdate(e.detail.value!)}\n            />\n          </IonCol>\n        </IonRow>\n        <IonRow>\n          <IonCol className=\"label\" size=\"3\">End</IonCol>\n          <IonCol size=\"9\">\n            <IonDatetime\n                className=\"select\"\n                displayFormat=\"h:mm a\"\n                pickerFormat=\"h:mm A\"\n                min=\"2005-01-01\"\n                max=\"2030-01-01\"\n                minuteValues=\"0,5,10,15,20,25,30,35,40,45,50,55\"\n                value={endDate.toISOString()}\n                onIonChange={(e) => onEndUpdate(e.detail.value!)}\n                />\n          </IonCol>\n        </IonRow>\n\n        <IonRow>\n          <IonCol className=\"label\" size=\"3\" />\n          <IonCol size=\"9\" className=\"error-message\">\n            {errorMessage}\n          </IonCol>\n        </IonRow>\n\n\n\n        <IonRow>\n          <IonCol size=\"12\">\n            <div style={{width: \"100%\", borderBottom: \"1px solid #AAA\"}} />\n          </IonCol>\n        </IonRow>\n        <IonRow>\n          <IonCol size=\"3\">\n            <IonCheckbox\n              className=\"checkbox\"\n              checked={isRestricted}\n              onIonChange={(e) => {setIsRestricted(e.detail.checked)}}\n            />\n          </IonCol>\n          <IonCol className=\"label\" size=\"9\">Restricted Break</IonCol>\n        </IonRow>\n        <IonRow>\n          <IonCol size=\"3\">\n            <IonCheckbox\n              className=\"checkbox\"\n              onIonChange={(e) => {setIsPaid(e.detail.checked)}}\n            />\n          </IonCol>\n          <IonCol className=\"label\" size=\"9\">Paid Break</IonCol>\n        </IonRow>\n      </IonGrid>\n    </IonContent>\n    <IonFooter>\n      <IonButton\n        expand=\"block\"\n        color=\"secondary\"\n        onClick={onAddClick}\n        disabled={!isValid}\n      >\n        ADD\n      </IonButton>\n\n      <IonButton\n        expand=\"block\"\n        onClick={onCancel}\n      >\n        CANCEL\n      </IonButton>\n    </IonFooter>\n    {alert.alertBoxJsx}\n    </>\n  );\n}\n\nexport default AddBreakModal;\n","import React, { useState, useEffect } from 'react';\nimport {IonModal, IonRow, IonCol, IonButton, IonIcon } from '@ionic/react';\nimport './EventBreakEditor.scss';\nimport { add, trash, lock, logoUsd } from 'ionicons/icons';\nimport {AuthorizedItems} from \"../../../orbital-interfaces/authorized-items\";\nimport { EventBreak } from '../../../orbital-interfaces/EventBreak';\nimport { getBreakStartEnd, formatDateTimeAsMvcString } from '../../../util/time-helper';\nimport AddBreakModal from './AddBreakModal';\nimport { EditorValues, EditorReducerAction } from '../EditEventModalState';\nimport EventType from \"../../../enums/EventType\";\nimport authHelper from '../../../util/authitems-helper';\n\ninterface EventBreakEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventBreakEditor: React.FC<EventBreakEditorProps> = ({ auth, editorValues, update }) => {\n  const [breakList, setBreakList] = useState([] as EventBreak[]);\n  const [showBreakModal, setShowBreakModal] = useState(false);\n\n  useEffect(() => {\n      setBreakList(editorValues.eventBreaks);\n  }, [editorValues.eventBreaks]);\n\n  const showRestricted = (b: EventBreak) => {\n    return b.IsRestricted ? (\n      <IonIcon className=\"restricted-icon\" icon={lock}  />\n    ) : (\n      <span />\n    );\n  };\n\n  const showPaid = (b: EventBreak) => {\n    return b.IsPaidBreak ? (\n      <IonIcon className=\"paid-icon\" icon={logoUsd}  />\n    ) : (\n      <span />\n    );\n  };\n\n  const onAddBreakModalCancel = () => {\n    setShowBreakModal(false);\n  };\n\n  const onAddBreakModalApply = (startDate: Date, endDate: Date, isRestricted: boolean, isPaid: boolean) => {\n    setShowBreakModal(false);\n    const brk: EventBreak = {\n      BreakStart: formatDateTimeAsMvcString(startDate),\n      BreakEnd: formatDateTimeAsMvcString(endDate),\n      IsRestricted: isRestricted,\n      IsPaidBreak: isPaid,\n      ScheduleEventId: editorValues.scheduleEventId\n    };\n\n    const newBreakList = [...breakList, brk];\n    setBreakList(newBreakList);\n    update({ type: 'EVENTBREAKS-UPDATED', breaks: newBreakList});\n  };\n\n  const onDeleteBreak = (breakStart: string) => {\n    const newBreakList = breakList.filter(b => b.BreakStart !== breakStart);\n    setBreakList(newBreakList);\n    update({ type: 'EVENTBREAKS-UPDATED', breaks: newBreakList});\n  };\n\n  if (editorValues.eventType !== EventType.Clock && !authHelper.isShiftTypeEvent(editorValues.eventType, editorValues.eventStatus)) {\n    return (\n      <div />\n    )\n  }\n\n\n  return (\n    <>\n      <IonRow className=\"edit-row\" style={{marginBottom: \"20px\"}}>\n        <IonCol size=\"3\">\n          <IonButton\n            color=\"light\"\n            disabled={editorValues.isReadonly}\n            onClick={() => {setShowBreakModal(true)}}\n          >\n            <IonIcon slot=\"icon-only\" icon={add} color=\"dark\" />\n          </IonButton>\n        </IonCol>\n        <IonCol size=\"9\">\n\n          {(!breakList || breakList.length === 0) && (\n            <div className=\"break-div\">(B) NONE</div>\n          )}\n\n          {breakList && breakList.map(brk => (\n            <div key={brk.BreakStart} className=\"break-div\">\n              (B) {getBreakStartEnd(brk)}\n              {showPaid(brk)}\n              {showRestricted(brk)}\n              <button\n                disabled={editorValues.isReadonly}\n                onClick={() => { onDeleteBreak(brk.BreakStart)}}\n              >\n                <IonIcon slot=\"icon-only\" mode=\"ios\" icon={trash} color=\"gray\" />\n              </button>\n            </div>\n          ))}\n\n        </IonCol>\n      </IonRow>\n\n      <IonModal\n        isOpen={showBreakModal}\n        cssClass=\"add-break-modal\"\n        onDidDismiss={() => setShowBreakModal(false)}\n      >\n        <AddBreakModal\n          onCancel={onAddBreakModalCancel}\n          onAdd={onAddBreakModalApply}\n          currentBreaks={breakList}\n          eventStart={editorValues.eventStart}\n          eventEnd={editorValues.eventEnd}\n        />\n      </IonModal>\n    </>\n  );\n};\n\nexport default EventBreakEditor;\n","import React, { useState, useEffect } from 'react';\nimport { IonLabel, IonSelect, IonRow, IonCol, IonSelectOption } from '@ionic/react';\nimport './EventTagEditor';\nimport {AuthorizedItems} from \"../../../orbital-interfaces/authorized-items\";\nimport { EditorValues, EditorReducerAction } from '../EditEventModalState';\n\ninterface EventTagEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\ninterface TagList {\n  id: number;\n  name: string;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventTagEditor: React.FC<EventTagEditorProps> = ({ auth, editorValues, update }) => {\n  const [selectedTagId, setSelectedTagId] = useState(-1);\n  const [tagList, setTagList] = useState([] as TagList[]);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (auth && auth.locations && auth.locations.length > 0) {\n      const tags = auth.tags.filter(t => t.positionIds.includes(editorValues.position.position.id)).map(t => {\n         return { id: t.id, name: t.name};\n      });\n      setTagList(tags);\n\n      const tagIds = tags.map(t => t.id);\n      if (!tagIds.includes(selectedTagId)) {\n        if (editorValues.tag && editorValues.tag.id && tagIds.includes(editorValues.tag.id)) {\n          setSelectedTagId(editorValues.tag.id);\n        } else {\n          setSelectedTagId(-1);\n        }\n      }\n    }\n\n    // eslint-disable-next-line\n  }, [auth, editorValues.position]);\n\n  const onUpdateTag = (tagId: number) => {\n    setSelectedTagId(tagId);\n\n    if (tagId === editorValues.tag.id) {\n      return;\n    }\n\n    if (tagId === -1) {\n      update({ type: 'TAG-UPDATED', tag: { id: -1, name: 'NONE'}});\n    } else {\n      const tag = tagList.filter(t => t.id === tagId)[0];\n      update({ type: 'TAG-UPDATED', tag});\n    }\n  };\n\n  return (\n    <IonRow className=\"edit-row\">\n      <IonCol size=\"3\">\n        <IonLabel className=\"label\">Tag</IonLabel>\n      </IonCol>\n      <IonCol size=\"9\">\n        <IonSelect\n            className=\"select\"\n            interface=\"popover\"\n            disabled={editorValues.isReadonly}\n            value={selectedTagId}\n            onIonChange={(e) => {onUpdateTag(e.detail.value)}}\n          >\n          <IonSelectOption value={-1}>NONE</IonSelectOption>\n\n          {tagList.map(tag => (\n            <IonSelectOption\n              key={tag.id}\n              value={tag.id}>\n              {tag.name}\n            </IonSelectOption>\n\n          ))}\n\n        </IonSelect>\n      </IonCol>\n    </IonRow>\n\n  );\n};\n\nexport default EventTagEditor;\n","import React, { useEffect, useState } from 'react';\nimport { IonLabel,  IonCheckbox, IonCol } from '@ionic/react';\nimport './EventStartEndEditor';\nimport {AuthorizedItems} from \"../../../orbital-interfaces/authorized-items\";\nimport { EditorValues, EditorReducerAction } from '../../EditEvent/EditEventModalState';\nimport EventType from '../../../enums/EventType';\nimport EventStatus from '../../../enums/EventStatus';\n\ninterface EventConfirmEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventConfirmEditor: React.FC<EventConfirmEditorProps> = ({ auth, editorValues, update }) => {\n  const [isConfirmed, setIsConfirmed] = useState(false);\n  const [showConfirmed, setShowConfirmed] = useState(false);\n\n  useEffect(() => {\n    if (auth && auth.locations && auth.locations.length > 0) {\n      setIsConfirmed(editorValues.isConfirmed);\n    }\n\n    // eslint-disable-next-line\n  }, [auth, editorValues.eventStart, editorValues.eventEnd, editorValues.isClockedIn]);\n\n  useEffect(() => {\n    const isConfirmable = (editorValues.eventType === EventType.Shift && editorValues.eventStatus === EventStatus.Approved) ||\n      (\n        editorValues.eventType === EventType.Cover &&\n        (\n          editorValues.eventStatus === EventStatus.Request ||\n          editorValues.eventStatus === EventStatus.RequestDenied\n        )\n      );\n    setShowConfirmed(isConfirmable);\n  }, [editorValues.eventType, editorValues.eventStatus]);\n\n  const onCheckChange = (checked: boolean) => {\n    if (checked === isConfirmed || !showConfirmed)\n    {\n      return;\n    }\n\n    setIsConfirmed(checked);\n    update({\n      type: \"CONFIRM-UPDATED\",\n      isConfirmed: checked\n    });\n  }\n\n  if (!showConfirmed)\n  {\n    return (\n      <>\n        <IonCol size=\"1\">\n          <span/>\n        </IonCol>\n        <IonCol size=\"2\">\n          <span/>\n        </IonCol>\n      </>\n    )\n  }\n\n  return (\n    <>\n      <IonCol size=\"1\">\n        <IonCheckbox\n          checked={isConfirmed}\n          onIonChange={(e) => {onCheckChange(e.detail.checked)}}\n        />\n      </IonCol>\n      <IonCol size=\"2\">\n        <IonLabel className=\"label\">Confirm</IonLabel>\n      </IonCol>\n    </>\n  );\n}\n\nexport default EventConfirmEditor;\n","import React, { useEffect, useState } from 'react';\nimport { IonLabel,  IonCheckbox, IonCol, IonIcon } from '@ionic/react';\nimport './EventStartEndEditor';\nimport {AuthorizedItems} from \"../../../orbital-interfaces/authorized-items\";\nimport { EditorValues, EditorReducerAction } from '../EditEventModalState';\nimport EventType from '../../../enums/EventType';\nimport { time } from 'ionicons/icons';\n\ninterface EventIsClockedInEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventIsClockedInEditor: React.FC<EventIsClockedInEditorProps> = ({ auth, editorValues, update }) => {\n  const [isClockedIn, setIsClockedIn] = useState(false);\n  const [showIsClockedIn, setShowIsClockedIn] = useState(false);\n\n  useEffect(() => {\n    if (auth && auth.locations && auth.locations.length > 0) {\n      setIsClockedIn(editorValues.isClockedIn);\n    }\n\n    // eslint-disable-next-line\n  }, [auth, editorValues.eventStart, editorValues.eventEnd, editorValues.isClockedIn]);\n\n  useEffect(() => {\n    setShowIsClockedIn(editorValues.eventType === EventType.Clock);\n  }, [editorValues.eventType, editorValues.eventStatus]);\n\n  const onCheckChange = (checked: boolean) => {\n    if (checked === isClockedIn || !showIsClockedIn)\n    {\n      return;\n    }\n\n    setIsClockedIn(checked);\n    update({\n      type: \"ISCLOCKEDIN-UPDATED\",\n      isClockedIn: checked\n    });\n  }\n\n  if (!showIsClockedIn)\n  {\n    return (\n      <>\n        <IonCol size=\"1\">\n          <span/>\n        </IonCol>\n        <IonCol size=\"4\">\n          <span/>\n        </IonCol>\n      </>\n    )\n  }\n\n  return (\n    <>\n      <IonCol size=\"1\">\n        <IonCheckbox\n          checked={isClockedIn}\n          onIonChange={(e) => {onCheckChange(e.detail.checked)}}\n        />\n      </IonCol>\n      <IonCol size=\"4\">\n        <IonLabel className=\"label\">\n          <IonIcon icon={time} style={{paddingRight: \"5px\", marginLeft: \"-5px\"}} />\n          Clocked In\n        </IonLabel>\n      </IonCol>\n    </>\n  );\n}\n\nexport default EventIsClockedInEditor;\n","import {ScheduleEvent} from '../../orbital-interfaces/ScheduleEvent';\nimport {SelectedPosition} from '../../util/authitems-helper'\nimport {EventBreak} from '../../orbital-interfaces/EventBreak';\nimport {isAfter, isBefore, isEqual, parseISO, setHours, setMinutes} from 'date-fns';\nimport {formatDateTimeAsMvcString} from '../../util/time-helper';\nimport EventType from '../../enums/EventType';\nimport EventStatus from '../../enums/EventStatus';\nimport {AuthorizedItems, AuthorizedLocation, AuthorizedPosition, LocationSettings } from \"../../orbital-interfaces/authorized-items\";\nimport {EventEditAuthorization} from './EditEventAuthorization';\nimport {RecurrenceType} from '../../enums/RecurrenceType';\n\nconst getLocationById = (auth: AuthorizedItems, locId: number) => {\n  return auth.locations.filter(l => l.id === locId)[0];\n};\n\nconst getPositionById = (auth: AuthorizedItems, posId: number) => {\n  return auth.locations.flatMap(l => l.departments.flatMap(d => d.positions.filter(p => p.id === posId)))[0];\n};\n\nconst getValidStartEnd = (startStr: string, endStr: string) => {\n  const start = parseISO(startStr);\n  const end = parseISO(endStr);\n\n  if (isEqual(start, end)) {\n    return true;\n  }\n\n  return isAfter(end, start);\n};\n\nexport interface IdName {\n  id: number;\n  name: string;\n}\n\nexport interface EditorValues {\n  scheduleEventId: number;\n  locationId: number;\n  isUpdating: boolean;\n  eventType: EventType;\n  eventStatus: EventStatus;\n  isConfirmed: boolean;\n  position: SelectedPosition;\n  employee: IdName;\n  eventStart: string;\n  eventEnd: string;\n  tag: IdName;\n  eventBreaks: EventBreak[],\n  isClockedIn: boolean;\n  isDirty: boolean;\n  valid: boolean;\n  validEventStartEnd: boolean;\n  validEmployee: boolean;\n  validTag: boolean;\n  validEventTypeStatus: boolean;\n  validClockoutValue: boolean;\n  validRecurrenceStartEnd: boolean;\n  validRepeatInterval: boolean;\n  validRepeatWeekdays: boolean;\n  absentId?: number;\n  absentName?: string;\n  absentTimeMinutes: number | null;\n  notes: string;\n  clockoutValue?: string;\n  isReadonly: boolean;\n  recurrenceId?: number;\n  recurrenceStart?: string;\n  recurrenceEnd?: string;\n  recurrenceType?: RecurrenceType;\n  repeatInterval?: number;\n  repeatWeekdays?: string;\n}\n\nconst isClockoutValueValid = (state: EditorValues, locSettings: LocationSettings, val?: string) => {\n  if (!val) {\n    return true;\n  }\n\n  // clockout values are not enabled\n  if (!locSettings.ClockOutValueLabel || locSettings.ClockOutValueLabel.length === 0) {\n    return false;\n  }\n\n  const regEx = /^\\d*(\\.\\d{0,2})?$/;\n  return regEx.test(val);\n};\n\nconst isAllValid = (v: EditorValues): boolean => {\n  return v.validEventStartEnd &&\n         v.validEmployee &&\n         v.validTag &&\n         v.validEventTypeStatus &&\n         v.validClockoutValue &&\n         v.validRecurrenceStartEnd &&\n         v.validRepeatInterval &&\n         v.validRepeatWeekdays;\n};\n\nexport const INITIAL_EDITOR_VAUES: EditorValues = {\n  scheduleEventId: -1,\n  locationId: 0,\n  isUpdating: false,\n  eventType: EventType.Shift,\n  eventStatus: EventStatus.Approved,\n  isConfirmed: false,\n  position: { location: {} as AuthorizedLocation, position: {} as AuthorizedPosition},\n  employee: { id: -1, name: \"SELECT EMPLOYEE\"},\n  eventStart: formatDateTimeAsMvcString(setHours(setMinutes(new Date(), 0), 8)),\n  eventEnd: formatDateTimeAsMvcString(setHours(setMinutes(new Date(), 0), 17)),\n  tag: {id: -1, name: \"SELECT TAG\"},\n  eventBreaks: [] as EventBreak[],\n  isClockedIn: false,\n  isDirty: false,\n  valid: true,\n  validEventStartEnd: true,\n  validEmployee: true,\n  validTag: true,\n  validEventTypeStatus: true,\n  validClockoutValue: true,\n  validRecurrenceStartEnd: true,\n  validRepeatInterval: true,\n  validRepeatWeekdays: true,\n  absentId: undefined,\n  absentName: undefined,\n  absentTimeMinutes: null,\n  notes: \"\",\n  clockoutValue: undefined,\n  isReadonly: false\n};\n\nexport type EditorReducerAction =\n | { type: 'LOADING', data: \"we're loading \"}\n | { type: 'BEGIN-UPDATE', auth: AuthorizedItems, ev: ScheduleEvent, eventEditAuth: EventEditAuthorization}\n | { type: 'CANCEL'}\n | { type: 'CREATE-EVENT', auth: AuthorizedItems}\n | { type: 'TYPESTATUS-UPDATED', eventType: EventType, eventStatus: EventStatus, absentId?: number, absentTimeMinutes: number | null}\n | { type: 'POSITION-UPDATED', selectedPosition: SelectedPosition}\n | { type: 'EMPLOYEE-UPDATED', employee: IdName}\n | { type: 'START-UPDATED', eventStart: string}\n | { type: 'END-UPDATED', eventEnd: string}\n | { type: 'EVENTBREAKS-UPDATED', breaks: EventBreak[]}\n | { type: 'TAG-UPDATED', tag: IdName }\n | { type: 'CONFIRM-UPDATED', isConfirmed: boolean}\n | { type: 'ISCLOCKEDIN-UPDATED', isClockedIn: boolean}\n | { type: 'NOTES-UPDATED', notes: string}\n | { type: 'CLOCKOUTVALUE-UPDATED', clockoutValue?: string, locSettings: LocationSettings}\n | { type: 'SET-READONLY', isReadonly: boolean }\n | { type: 'REPEATING-UPDATED', recurrenceStart?: string, recurrenceEnd?: string, recurrenceType?: RecurrenceType, repeatInterval?: number, repeatWeekDays?: string}\n\nconst getIsClockedIn = (ev: ScheduleEvent) => {\n  const end = parseISO(ev.EventEnd);\n  return (end > new Date(2199, 1,1));\n};\n\n// ------------------------------------------------------------------------------------------------\nexport const editorValueReducer = (currentState: EditorValues, action: EditorReducerAction): EditorValues => {\n  console.log(\"REDUCER: ACTION =\", action.type, \"   Current State Emp =\", currentState.employee.id);\n  switch (action.type) {\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'BEGIN-UPDATE':\n      const { ev, auth } = action;\n      const isClockedIn = getIsClockedIn(ev);\n      return {\n        scheduleEventId: ev.ScheduleEventId,\n        locationId: ev.LocationId,\n        isUpdating: false,\n        eventType: ev.EventTypeId,\n        eventStatus: ev.EventStatusId,\n        isConfirmed: ev.ConfirmedBy !== undefined && ev.ConfirmedBy !== null,\n        position: {\n          location: getLocationById(auth, ev.LocationId),\n          position: getPositionById(auth, ev.PositionId)\n        },\n        employee: { id: ev.EmployeeId, name: ev.FirstName + \" \" + ev.LastName},\n        eventStart: ev.EventStart,\n        eventEnd: (isClockedIn) ? formatDateTimeAsMvcString(new Date()) : ev.EventEnd,\n        tag: {id: (ev.TagId) ? ev!.TagId : -1, name: \"\"},\n        eventBreaks: ev.EventBreaks,\n        isClockedIn: isClockedIn,\n        isDirty: false,\n        valid: true,\n        validEventStartEnd: true,\n        validEmployee: true,\n        validTag: true,\n        validEventTypeStatus: true,\n        validClockoutValue: true,\n        absentName: ev.AbsentName,\n        absentId: ev.AbsentId,\n        absentTimeMinutes: (ev.AbsentTimeMinutes) ? ev.AbsentTimeMinutes : null,\n        notes: ev.Notes,\n        clockoutValue: ev.ClockOutValue,\n        isReadonly: action.eventEditAuth.isReadonly,\n        recurrenceId: ev.EventRecurrenceId,\n        recurrenceStart: ev.EventRecurrenceStart,\n        recurrenceEnd: ev.EventRecurrenceEnd,\n        recurrenceType: ev.RepeatType,\n        repeatInterval: ev.RepeatInterval,\n        repeatWeekdays: ev.RepeatWeekdays,\n        validRecurrenceStartEnd: true,\n        validRepeatInterval: true,\n        validRepeatWeekdays: true\n      };\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'CANCEL':\n      return INITIAL_EDITOR_VAUES;\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'POSITION-UPDATED':\n      const { selectedPosition } = action;\n      return {\n        ...currentState,\n        position: selectedPosition,\n        isDirty: true\n      };\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'CREATE-EVENT':\n      const loc = action.auth.locations[0];\n      return {\n        ...INITIAL_EDITOR_VAUES,\n        position: {\n          location: loc,\n          position: loc.departments[0].positions[0]\n        },\n        scheduleEventId: 0,\n        isDirty: true\n      };\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'SET-READONLY':\n      return {\n        ...currentState,\n        isReadonly: action.isReadonly\n      };\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'TYPESTATUS-UPDATED':\n      const newTypeStatusState = {\n        ...currentState,\n        eventType: action.eventType,\n        eventStatus: action.eventStatus,\n        absentId: action.absentId,\n        absentTimeMinutes: action.absentTimeMinutes,\n        isDirty: true,\n        validEventTypeStatus: !(action.absentId  && action.absentTimeMinutes === null)\n      };\n\n      newTypeStatusState.valid = isAllValid(newTypeStatusState);\n      return newTypeStatusState;\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'CLOCKOUTVALUE-UPDATED':\n      const newClockoutValueState = {\n        ...currentState,\n        clockoutValue: action.clockoutValue,\n        validClockoutValue: isClockoutValueValid(currentState, action.locSettings, action.clockoutValue),\n        isDirty: true\n      };\n\n      newClockoutValueState.valid = isAllValid(newClockoutValueState);\n      return newClockoutValueState;\n\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'EMPLOYEE-UPDATED':\n      const newState = {\n        ...currentState,\n        employee: action.employee,\n        isDirty: true,\n        validEmployee: action.employee.id > 0\n      };\n\n      newState.valid = isAllValid(newState);\n      return newState;\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'START-UPDATED':\n      const newStartState = {\n        ...currentState,\n        eventStart: action.eventStart,\n        isDirty: true,\n        validEventStartEnd: getValidStartEnd(action.eventStart, currentState.eventEnd)\n      };\n\n      newStartState.valid = isAllValid(newStartState);\n      return newStartState;\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'END-UPDATED':\n      const newEndState = {\n        ...currentState,\n        eventEnd: action.eventEnd,\n        isDirty: true,\n        validEventStartEnd: getValidStartEnd(currentState.eventStart, action.eventEnd)\n      };\n\n      newEndState.valid = isAllValid(newEndState);\n      return newEndState;\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'EVENTBREAKS-UPDATED':\n      return {\n        ...currentState,\n        eventBreaks: action.breaks,\n        isDirty: true\n      };\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'TAG-UPDATED':\n      const newTagState = {\n        ...currentState,\n        tag: action.tag,\n        isDirty: true,\n        validTag: true\n      };\n\n      newTagState.valid = isAllValid(newTagState);\n      return newTagState;\n\n    case 'CONFIRM-UPDATED':\n      const newConfirmState = {\n        ...currentState,\n        isConfirmed: action.isConfirmed,\n        isDirty: true\n      };\n\n      newConfirmState.valid = isAllValid(newConfirmState);\n      return newConfirmState;\n\n    case 'NOTES-UPDATED':\n      return {\n        ...currentState,\n        notes: action.notes,\n        isDirty: true\n      };\n\n    case 'ISCLOCKEDIN-UPDATED':\n      const newClockedInState = {\n        ...currentState,\n        isClockedIn: action.isClockedIn,\n        isDirty: true\n      };\n\n      if (action.isClockedIn) {\n        const now = formatDateTimeAsMvcString(new Date());\n        newClockedInState.eventStart = now;\n        newClockedInState.eventEnd = now;\n      }\n\n      newClockedInState.valid = isAllValid(newClockedInState);\n      return newClockedInState;\n\n    case 'REPEATING-UPDATED':\n      const newRepeatState = {\n        ...currentState,\n        recurrenceStart: action.recurrenceStart,\n        recurrenceEnd: action.recurrenceEnd,\n        recurrenceType: action.recurrenceType,\n        repeatInterval: action.repeatInterval,\n        repeatWeekdays: action.repeatWeekDays,\n        isDirty: true\n      };\n\n      if (newRepeatState.recurrenceStart) {\n        if (newRepeatState.repeatInterval === RecurrenceType.Weekly) {\n          newRepeatState.validRepeatWeekdays = (newRepeatState.repeatWeekdays !== null && newRepeatState.repeatWeekdays !== undefined && newRepeatState.repeatWeekdays.length > 0);\n        } else {\n          newRepeatState.repeatWeekdays = undefined;\n          newRepeatState.validRepeatWeekdays = true;\n        }\n\n        if (!newRepeatState.recurrenceEnd) {\n          newRepeatState.validRecurrenceStartEnd = false;\n        } else {\n          newRepeatState.validRecurrenceStartEnd = isBefore(parseISO(newRepeatState.recurrenceStart), parseISO(newRepeatState.recurrenceEnd));\n        }\n\n        newRepeatState.validRepeatInterval = (newRepeatState.repeatInterval !== null && newRepeatState.repeatInterval !== undefined && newRepeatState.repeatInterval > 0);\n      }\n\n      newRepeatState.valid = isAllValid(newRepeatState);\n      return newRepeatState;\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    default:\n      console.error(\"ERROR in editorValueReducer, could not find action for \" + action.type);\n      return currentState;\n  }\n};\n","export enum RecurrenceUpdateType {\n  UpdateSingleEvent,\n  UpdateEntireSeries,\n  UpdateSeriesForward\n};\n","import React, { useEffect } from 'react';\nimport {IonLabel, IonTextarea, IonCol, IonRow } from '@ionic/react';\nimport './EventStartEndEditor';\nimport {AuthorizedItems} from \"../../../orbital-interfaces/authorized-items\";\nimport { EditorValues, EditorReducerAction } from '../EditEventModalState';\n\ninterface EventNotesEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventNotesEditor: React.FC<EventNotesEditorProps> = ({ auth, editorValues, update }) => {\n\n  useEffect(() => {\n    // eslint-disable-next-line\n  });\n\n  const onNotesUpdate = (newNote?: string | null) => {\n    if (!newNote) {\n      newNote = \"\";\n    }\n\n    if (newNote !== editorValues.notes) {\n      update({ type: \"NOTES-UPDATED\", notes: newNote});\n    }\n  }\n\n  return (\n    <IonRow className=\"edit-row\">\n      <IonCol size=\"3\">\n        <IonLabel className=\"label\">Notes</IonLabel>\n      </IonCol>\n      <IonCol size=\"9\">\n        <IonTextarea className=\"textarea\"\n          maxlength={200}\n          rows={4}\n          value={editorValues.notes}\n          disabled={editorValues.isReadonly}\n          onIonChange={(e) => onNotesUpdate(e.detail.value)}\n        />\n      </IonCol>\n    </IonRow>\n  );\n}\n\nexport default EventNotesEditor;\n","import React, { useEffect, useState } from 'react';\nimport {IonLabel, IonCol, IonRow, IonInput} from '@ionic/react';\nimport './EventStartEndEditor';\nimport {AuthorizedItems, LocationSettings } from \"../../../orbital-interfaces/authorized-items\";\nimport { EditorValues, EditorReducerAction } from '../EditEventModalState';\nimport authHelper from \"../../../util/authitems-helper\";\nimport {EventType} from \"../../../orbital-interfaces\";\n\ninterface EventClockoutValueEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventClockoutValueEditor: React.FC<EventClockoutValueEditorProps> = ({ auth, editorValues, update }) => {\n  const [isVisible, setIsVisible] = useState(false);\n  const [locSettings, setLocSettings] = useState(null as LocationSettings | null);\n\n  useEffect(() => {\n    if (editorValues.locationId === 0 || (locSettings && (editorValues.locationId === locSettings.LocationId)))\n    {\n      return;\n    }\n\n    if (!auth || !auth.locations || auth.locations.length === 0) {\n      return;\n    }\n\n    if (!editorValues.locationId) {\n      return;\n    }\n\n    const newLocSettings = authHelper.getLocSettingsForLocationId(auth, editorValues.locationId);\n    setLocSettings(newLocSettings);\n\n    // eslint-disable-next-line\n  }, [editorValues.locationId, auth]);\n\n  useEffect(() => {\n    if (!locSettings) {\n      return;\n    }\n\n    setIsVisible(\n      (locSettings!.ClockOutValueLabel !== undefined) &&\n      (locSettings!.ClockOutValueLabel !== null) &&\n      (locSettings!.ClockOutValueLabel.length > 0) &&\n      editorValues.eventType === EventType.Clock &&\n      !editorValues.isClockedIn\n    );\n\n    // eslint-disable-next-line\n  }, [editorValues.eventType, editorValues.isClockedIn, locSettings]);\n\n  const onClockoutValueUpdated = (newValue?: string | null) => {\n    if (newValue === null) {\n      newValue = undefined;\n    }\n\n    if (newValue === editorValues.clockoutValue) {\n      return;\n    }\n\n    update({type: 'CLOCKOUTVALUE-UPDATED', locSettings: locSettings!, clockoutValue: newValue});\n  };\n\n  if (!isVisible || locSettings === null) {\n    return (\n      <div />\n    )\n  }\n\n  return (\n    <IonRow className=\"edit-row\">\n      <IonCol size=\"3\">\n        <IonLabel className=\"label\">{locSettings.ClockOutValueLabel}</IonLabel>\n      </IonCol>\n      <IonCol size=\"9\">\n        <IonInput\n          className=\"input-textbox\"\n          value={editorValues.clockoutValue}\n          onIonChange={(e) => onClockoutValueUpdated(e.detail.value)}\n        />\n      </IonCol>\n    </IonRow>\n  );\n}\n\nexport default EventClockoutValueEditor;\n","import { ApplicationUser } from '../context/ApplicationUserContext';\nimport apiHelper from './OrbitalApiHelper';\nimport EventType from \"../enums/EventType\";\nimport EventStatus from \"../enums/EventStatus\";\nimport {RecurrenceUpdateType} from \"../enums/RecurrenceUpdateType\";\n\ninterface CoverRequestModel {\n  ScheduleEventId: number;\n  LocationId: number;\n  BusinessId: number;\n  BroadcastCoverRequestMessage: boolean;\n  CoverMessage: string;\n}\n\ninterface DeleteEventModel {\n  LocationId: number;\n  ScheduleEventId: number;\n  EventTypeId: EventType;\n  EventStatusId: EventStatus;\n  RecUpdateType?: RecurrenceUpdateType\n}\n\nexport interface ErrorResponse {\n  error: boolean;\n  message: string;\n}\n\nexport interface CoverListItem {\n  value: number;\n  text: string;\n  disabled: boolean;\n  style: string | null;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst undoCoverRequest = async(user: ApplicationUser, scheduleEventId: number) => {\n  const url = `api/v1/employee/schedule-events/cover-request/undo?scheduleEventId=${scheduleEventId}`;\n  return await apiHelper.put(user, url);\n};\n\n// ----------------------------------------------------------------------------------------------\nconst createCoverRequest = async(\n  user: ApplicationUser,\n  scheduleEventId: number,\n  locationId: number,\n  businessId: number,\n  broadCastMessage: boolean,\n  coverMessage: string,\n  toEmployeeId: number | null) => {\n  const url = 'api/v1/employee/schedule-events/cover-request/submit';\n\n  const data = {\n    ScheduleEventId: scheduleEventId,\n    LocationId: locationId,\n    BusinessId: businessId,\n    BroadcastCoverRequestMessage: broadCastMessage,\n    CoverMessage: coverMessage,\n    DirectToEmployeeId: toEmployeeId\n  } as CoverRequestModel;\n\n  return await apiHelper.put(user, url, data);\n};\n\n// ----------------------------------------------------------------------------------------------\nconst makeShiftRequest = async(\n  user: ApplicationUser,\n  scheduleEventId: number,\n  locationId: number,\n  businessId: number,\n  broadCastMessage: boolean,\n  coverMessage: string) => {\n  const url = 'api/v2/requests/shift-request/submit';\n\n  const data = {\n    ScheduleEventId: scheduleEventId,\n    LocationId: locationId,\n    BusinessId: businessId,\n    BroadcastCoverRequestMessage: broadCastMessage,\n    CoverMessage: coverMessage\n  } as CoverRequestModel;\n\n  return await apiHelper.put(user, url, data) as ErrorResponse;\n};\n\n// ----------------------------------------------------------------------------------------------\nconst removeShiftRequest = async(\n  user: ApplicationUser,\n  locationId: number,\n  scheduleEventId: number,\n  eventType: EventType,\n  eventStatus: EventStatus,\n  recUpdateType?: RecurrenceUpdateType) => {\n  const url = 'api/v1/employee/schedule-events/delete';\n\n  const data = {\n    LocationId: locationId,\n    ScheduleEventId: scheduleEventId,\n    EventTypeId: eventType,\n    EventStatusId: eventStatus,\n    RecUpdateType: recUpdateType\n  } as DeleteEventModel;\n\n  return await apiHelper.post(user, url, data);\n};\n\n// ----------------------------------------------------------------------------------------------\nconst deleteEvent = async(\n  user: ApplicationUser,\n  locationId: number,\n  scheduleEventId: number,\n  eventType: EventType,\n  eventStatus: EventStatus,\n  recUpdateType?: RecurrenceUpdateType) => {\n  const url = 'api/v1/employee/schedule-events/delete';\n\n  const data = {\n    LocationId: locationId,\n    ScheduleEventId: scheduleEventId,\n    EventTypeId: eventType,\n    EventStatusId: eventStatus,\n    RecUpdateType: recUpdateType\n  } as DeleteEventModel;\n\n  return await apiHelper.post(user, url, data);\n};\n\n// ----------------------------------------------------------------------------------------------\nconst getCoverRequestListItems = async (user: ApplicationUser, scheduleEventId: number, isDirectCoverList: boolean) => {\n  const url = 'api/v2/requests/transfers/to-list';\n\n  const data = {\n    scheduleEventId,\n    directCoverList: isDirectCoverList\n  };\n\n  return await apiHelper.post(user, url, data) as CoverListItem[];\n};\n\nexport default {\n  undoCoverRequest,\n  createCoverRequest,\n  makeShiftRequest,\n  removeShiftRequest,\n  deleteEvent,\n  getCoverRequestListItems\n}\n","import React, {useContext, useEffect, useState} from 'react';\nimport { IonButton, IonCol, IonContent, IonFooter, IonGrid, IonHeader, IonRow, IonSelect, IonSelectOption, IonTextarea, IonTitle, IonToolbar} from '@ionic/react';\nimport './EventRequestModal.scss';\nimport {AuthorizedItems, LocationSettings} from \"../../../orbital-interfaces/authorized-items\";\nimport {EventEditAuthorization, EventEditEnum} from \"../../EditEvent/EditEventAuthorization\";\nimport requestAPI, {CoverListItem} from \"../../../api/RequestsAPI\";\nimport {ApplicationUserContext} from \"../../../context/ApplicationUserContext\";\n\ninterface EventRequestModalProps {\n  onCancel: () => void;\n  onOk: (employeeId: number | null, notes: string, sendMessage: boolean) => void;\n  auth: AuthorizedItems;\n  eventEditAuth: EventEditAuthorization;\n  locSettings: LocationSettings;\n  scheduleEventId: number;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventRequestModal: React.FC<EventRequestModalProps> = ({onCancel, onOk, eventEditAuth, locSettings, scheduleEventId}) => {\n  const {user} = useContext(ApplicationUserContext);\n  const [notes, setNotes] = useState(\"\" as string | null | undefined);\n  const [selectedEmployeeId, setSelectedEmployeeId] = useState(null as number | null);\n  const [coverList, setCoverList] = useState(null as CoverListItem[] | null);\n\n// --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (eventEditAuth.usage === EventEditEnum.CreateCoverRequest && scheduleEventId > 0) {\n      requestAPI.getCoverRequestListItems(user, scheduleEventId, true).then(results => {\n        setCoverList(results);\n        if (results && results.length > 0) {\n          setSelectedEmployeeId(results[0].value);\n        }\n      });\n    }\n\n    // eslint-disable-next-line\n  }, [scheduleEventId, eventEditAuth.usage]);\n\n// --------------------------------------------------------------------------------------\n  const onOkClick = () => {\n      const newNotes = (notes) ?? \"\";\n      onOk(selectedEmployeeId, newNotes, false);\n  };\n\n\n  if (eventEditAuth.usage === EventEditEnum.None) {\n    return (\n        <div />\n    )\n  }\n\n  return (\n    <>\n      <IonContent>\n        <IonHeader mode=\"ios\">\n          <IonToolbar>\n            <IonTitle>{eventEditAuth.buttonText}</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        <IonGrid>\n          <IonRow\n            hidden={!locSettings.EnableDirectCoverRequest || eventEditAuth.usage !== EventEditEnum.CreateCoverRequest}\n          >\n            <IonCol className=\"label\" size=\"3\">To</IonCol>\n            <IonCol size=\"9\">\n              <IonSelect\n                className=\"select\"\n                value={selectedEmployeeId}\n                onIonChange={(e) => { setSelectedEmployeeId(parseInt(e.detail.value));}}\n              >\n                {coverList && coverList.map(cover => (\n                    <IonSelectOption\n                      key={cover.value}\n                      value={cover.value}\n                      disabled={cover.disabled}\n                    >\n                      {cover.text}\n                    </IonSelectOption>\n                ))}\n              </IonSelect>\n            </IonCol>\n          </IonRow>\n\n          <IonRow\n            hidden={eventEditAuth.usage === EventEditEnum.CreateCoverRequest}\n          >\n            <IonCol size=\"12\">\n              <div className=\"usage-message\">\n                {(eventEditAuth.text)}\n              </div>\n            </IonCol>\n          </IonRow>\n\n          <IonRow\n            hidden={eventEditAuth.usage !== EventEditEnum.CreateCoverRequest}\n          >\n            <IonCol className=\"label\" size=\"3\">Notes</IonCol>\n            <IonCol size=\"9\">\n              <IonTextarea\n                className=\"select\"\n                maxlength={200}\n                rows={4}\n                value={notes}\n                onIonChange={(e) => {setNotes(e.detail.value)}}\n              />\n            </IonCol>\n          </IonRow>\n\n          <IonRow>\n            <IonCol className=\"label\" size=\"3\" />\n            <IonCol size=\"9\" className=\"error-message\">\n              <div/>\n            </IonCol>\n          </IonRow>\n        </IonGrid>\n      </IonContent>\n      <IonFooter>\n        <IonButton\n          expand=\"block\"\n          color=\"secondary\"\n          onClick={onOkClick}\n        >\n          OK\n        </IonButton>\n\n        <IonButton\n          expand=\"block\"\n          onClick={onCancel}\n        >\n          CANCEL\n        </IonButton>\n      </IonFooter>\n    </>\n  );\n};\n\nexport default EventRequestModal;\n","import React, {useContext, useState} from 'react';\nimport {IonButton, IonModal} from '@ionic/react';\nimport './EventRequestEditor.scss';\nimport {AuthorizedItems} from \"../../../orbital-interfaces/authorized-items\";\nimport {EditorReducerAction} from '../EditEventModalState';\nimport EventRequestModal from \"./EventRequestModal\";\nimport authHelper from '../../../util/authitems-helper';\nimport reqApi from \"../../../api/RequestsAPI\";\nimport {ApplicationUserContext} from \"../../../context/ApplicationUserContext\";\nimport EventType from \"../../../enums/EventType\";\nimport EventStatus from \"../../../enums/EventStatus\";\nimport useDialogBox from \"../../../hooks/useDialogBox\";\nimport {EventEditAuthorization, EventEditEnum} from '../EditEventAuthorization';\n\ninterface EventRequestEditorProps {\n  auth: AuthorizedItems;\n  update: React.Dispatch<EditorReducerAction>;\n  cancelEditModal: (message: string) => void;\n  setUsageText: ((usageText: string) => void);\n  eventEnd: string;\n  eventType: EventType;\n  eventStatus: EventStatus;\n  eventEmployeeId: number;\n  eventPositionId: number;\n  scheduleEventId: number;\n  locationId: number;\n  eventEditAuth: EventEditAuthorization | null;\n}\n\n\n// --------------------------------------------------------------------------------------\nconst EventRequestEditor: React.FC<EventRequestEditorProps> = (\n  { auth, update, cancelEditModal, eventEnd, eventType, eventStatus, eventEmployeeId, scheduleEventId, eventPositionId, locationId, setUsageText, eventEditAuth }) => {\n  const { user } = useContext(ApplicationUserContext);\n  const [showRequestModal, setShowRequestModal] = useState(false);\n  const dlg = useDialogBox();\n\n  const onComplete = (message: string) => {\n    setShowRequestModal(false);\n    cancelEditModal(message);\n  };\n\n  const onApply = (employeeId: number | null, notes: string, sendMessage: boolean) => {\n    switch (eventEditAuth!.usage) {\n      case EventEditEnum.CreateCoverRequest:\n        reqApi.createCoverRequest(\n          user,\n          scheduleEventId,\n          locationId,\n          0,\n          sendMessage,\n          notes,\n          employeeId)\n        .then(() => { onComplete(\"Cover-Request Created\");});\n        break;\n\n      case EventEditEnum.CreateShiftRequest:\n        reqApi.makeShiftRequest(\n          user,\n          scheduleEventId,\n          locationId,\n          0,\n          sendMessage,\n          notes)\n        .then((results) => {\n          if (results.error) {\n            dlg.showAlert(\"Shift-Request Failed\", results.message, () => {});\n          } else {\n            onComplete(results.message); // \"Shift-Request Created\"\n          }\n\n        });\n        break;\n\n      case EventEditEnum.DeleteShiftRequest:\n        reqApi.removeShiftRequest(\n          user,\n          locationId,\n          scheduleEventId,\n          eventType,\n          eventStatus,\n          undefined)\n        .then(() => { onComplete(\"Shift-Request Removed\");});\n        break;\n\n      case EventEditEnum.UndoCoverRequest:\n        reqApi.undoCoverRequest(user, scheduleEventId)\n        .then(() => { onComplete(\"Removed Cover-Request\");});\n        break;\n\n      case EventEditEnum.Delete:\n        reqApi.deleteEvent(\n          user,\n          locationId,\n          scheduleEventId,\n          eventType,\n          eventStatus,\n          undefined)\n          .then(() => { onComplete(\"Deleted\")});\n        break;\n    }\n  };\n\n  if (!eventEditAuth ||\n      !auth ||\n      !auth.locations ||\n       auth.locations.length === 0 ||\n       eventEditAuth.usage === EventEditEnum.None ||\n       scheduleEventId <= 0) {\n    return (\n      <div/>\n    )\n  }\n\n  return (\n    <>\n      <IonButton\n        className=\"apply-button\"\n        expand=\"block\"\n        onClick={() => { setShowRequestModal(true)}}\n      >\n        {eventEditAuth.buttonText}\n      </IonButton>\n\n\n      <IonModal\n        isOpen={showRequestModal}\n        cssClass=\"event-request-modal\"\n        onDidDismiss={() => setShowRequestModal(false)}\n      >\n        <EventRequestModal\n          onCancel={() => {setShowRequestModal(false)}}\n          onOk={onApply}\n          auth={auth}\n          eventEditAuth={eventEditAuth}\n          scheduleEventId={scheduleEventId}\n          locSettings={authHelper.getLocSettingsForLocationId(auth, locationId)}\n        />\n        {dlg.alertBoxJsx}\n      </IonModal>\n    </>\n  );\n};\n\nexport default EventRequestEditor;\n","import React, {useEffect, useState} from 'react';\nimport { IonCheckbox } from '@ionic/react';\nimport './WeekdayList.scss';\nimport {LocationSettings} from \"../../../orbital-interfaces/authorized-items\";\nimport {getWeekStart} from \"../../../util/time-helper\";\nimport {addDays, format, getDay} from \"date-fns\";\nimport {EditorReducerAction, EditorValues} from \"../EditEventModalState\";\n\ninterface WeekdayListProps {\n  locSettings: LocationSettings | null;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst WeekdayList: React.FC<WeekdayListProps> = ({ locSettings, editorValues, update }) => {\n  const [checkList, setCheckList] = useState([false,false,false,false,false,false,false]);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!editorValues.repeatWeekdays) {\n      setCheckList([false,false,false,false,false,false,false]);\n    } else {\n      const newState = [false,false,false,false,false,false,false];\n      for(let i = 0; i < editorValues.repeatWeekdays.length; i++) {\n        newState[parseInt(editorValues.repeatWeekdays[i])] = true;\n      }\n\n      setCheckList(newState);\n    }\n  }, [editorValues.repeatWeekdays]);\n\n  if (locSettings === null) {\n    return (\n      <div />\n    )\n  }\n\n  const weekStart = getWeekStart(new Date(), locSettings.DayWeekStartsOn, locSettings.DayStartTime);\n\n  // --------------------------------------------------------------------------------------\n  function onCheckboxChecked(dayOfWeek: number) {\n    const newCheckState = checkList.slice();\n    const isChecked = !checkList[dayOfWeek];\n\n    newCheckState[dayOfWeek] = isChecked;\n    setCheckList(newCheckState);\n\n    let repeatWeekdays = '';\n    for (let i = 0; i < newCheckState.length; i++ ) {\n      if (newCheckState[i]) {\n        repeatWeekdays += i;\n      }\n    }\n\n    update({\n      type: \"REPEATING-UPDATED\",\n      repeatWeekDays: repeatWeekdays,\n      repeatInterval: editorValues.repeatInterval,\n      recurrenceType: editorValues.recurrenceType,\n      recurrenceEnd: editorValues.recurrenceEnd,\n      recurrenceStart: editorValues.recurrenceStart\n    });\n  }\n\n\n  return (\n    <div className=\"weeklist-container\">\n      {[0,1,2,3,4,5,6].map((num: number) => {\n        const thisDate = addDays(weekStart, num);\n        const dayOfWeek = getDay(thisDate);\n\n        return (\n          <span key={num} className=\"day\">\n            <IonCheckbox\n              className=\"day-checkbox\"\n              disabled={editorValues.isReadonly}\n              onClick={() => onCheckboxChecked(dayOfWeek)}\n              checked={checkList[dayOfWeek]}\n            />\n            <span className=\"day-abbr\" >{format(thisDate, 'EE').substr(0, 2)}</span>\n          </span>\n        )\n      })}\n    </div>\n  );\n};\n\nexport default WeekdayList;\n","import React, {useEffect, useState} from 'react';\nimport { IonCheckbox, IonCol, IonDatetime, IonIcon, IonInput, IonLabel, IonRow, IonSelect, IonSelectOption} from '@ionic/react';\nimport './RecurringEventSection.scss';\nimport {calendar, refresh} from 'ionicons/icons';\nimport {AuthorizedItems, LocationSettings} from \"../../../orbital-interfaces/authorized-items\";\nimport EventType from \"../../../enums/EventType\";\nimport authHelper from '../../../util/authitems-helper';\nimport WeekdayList from \"./WeekdayList\";\nimport {EditorReducerAction, EditorValues} from \"../EditEventModalState\";\nimport {RecurrenceType} from \"../../../enums/RecurrenceType\";\nimport {formatDateTimeAsMvcString} from \"../../../util/time-helper\";\n\ninterface RecurringEventSectionProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst RecurringEventSection: React.FC<RecurringEventSectionProps> = ({ auth, editorValues, update }) => {\n  const [locSettings, setLocSettings] = useState(null as LocationSettings | null);\n  const [isVisible, setIsVisible] = useState(false);\n  const [isChecked, setIsChecked] = useState(false);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (editorValues.locationId > 0) {\n      setLocSettings(authHelper.getLocSettingsForLocationId(auth, editorValues.locationId));\n    } else if (editorValues.locationId === 0) {\n      setLocSettings(auth.locations[0].settings);\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editorValues.locationId]);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    setIsVisible(\n      editorValues.eventType === EventType.Shift ||\n      editorValues.eventType === EventType.Unavailable\n    );\n  }, [editorValues.eventType]);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!isVisible) {\n      return;\n    }\n\n    if (editorValues.recurrenceStart) {\n      setIsChecked(true);\n    } else {\n      if (isChecked) {\n\n      } else {\n      }\n    }\n\n  }, [isChecked, isVisible, editorValues.recurrenceStart]);\n\n  // --------------------------------------------------------------------------------------\n  function onRepeatingChecked() {\n    if (!isChecked) {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: undefined,\n        repeatInterval: 1,\n        recurrenceType: RecurrenceType.Weekly,\n        recurrenceEnd: undefined,\n        recurrenceStart: formatDateTimeAsMvcString(new Date())\n      });\n    } else {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: undefined,\n        repeatInterval: undefined,\n        recurrenceType: undefined,\n        recurrenceEnd: undefined,\n        recurrenceStart: undefined\n      });\n    }\n\n    setIsChecked(!isChecked);\n  }\n\n  // --------------------------------------------------------------------------------------\n  function onRecurrenceStartChanged(newValue: string | null | undefined) {\n    if (!newValue) {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: undefined\n      });\n    } else {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: newValue\n      });\n    }\n  }\n\n  // --------------------------------------------------------------------------------------\n  function onRecurrenceEndChanged(newValue: string | null | undefined) {\n    if (!newValue) {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: undefined,\n        recurrenceStart: editorValues.recurrenceStart\n      });\n    } else {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: newValue,\n        recurrenceStart: editorValues.recurrenceStart\n      });\n    }\n  }\n\n  // --------------------------------------------------------------------------------------\n  function onRecurrenceTypeChanged(newValue: string | null | undefined) {\n    if (!newValue) {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: undefined,\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: editorValues.recurrenceStart\n      });\n    } else {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: parseInt(newValue),\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: editorValues.recurrenceStart\n      });\n    }\n  }\n\n  // --------------------------------------------------------------------------------------\n  function onRepeatIntervalChanged(newValue: string | null | undefined) {\n    if (!newValue) {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: undefined,\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: editorValues.recurrenceStart\n      });\n    } else {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: parseInt(newValue),\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: editorValues.recurrenceStart\n      });\n    }\n  }\n\n\n  if (!isVisible) {\n    return (\n      <span />\n    )\n  }\n\n  return (\n    <>\n      <IonRow>\n        <IonCol size=\"4\">\n          <IonCheckbox\n            checked={isChecked}\n            onClick={onRepeatingChecked}\n            disabled={editorValues.isReadonly}\n          />\n          <IonLabel className=\"label\" style={{paddingLeft: \"10px\"}}>\n            (R)epeating\n          </IonLabel>\n        </IonCol>\n        {(isChecked) && (\n          <IonCol size=\"8\">\n            <div style={{borderBottom: \"1px solid gray\", height: \"12px\"}}  />\n          </IonCol>\n        )}\n      </IonRow>\n\n      {(isChecked) && (\n        <>\n        <IonRow className=\"edit-row\" >\n          <IonCol size=\"2\" />\n          <IonCol size=\"1\">\n            <IonIcon icon={calendar} mode=\"md\" />\n          </IonCol>\n          <IonCol size=\"4\">\n            <IonDatetime\n              value={editorValues.recurrenceStart}\n              className=\"select\"\n              displayFormat=\"M/D/YY\"\n              pickerFormat=\"MMM DD YYYY\"\n              disabled={editorValues.isReadonly}\n              min=\"2005-01-01\"\n              max=\"2030-01-01\"\n              onIonChange={(e) => {onRecurrenceStartChanged(e.detail.value)}}\n            />\n          </IonCol>\n          <IonCol size=\"1\">\n            <IonIcon icon={calendar} mode=\"md\" style={{textAlign: \"right\"}} />\n          </IonCol>\n          <IonCol size=\"4\">\n            <IonDatetime\n              value={editorValues.recurrenceEnd}\n              className=\"select\"\n              displayFormat=\"M/D/YY\"\n              pickerFormat=\"MMM DD YYYY\"\n              disabled={editorValues.isReadonly}\n              min=\"2005-01-01\"\n              max=\"2030-01-01\"\n              onIonChange={(e) => {onRecurrenceEndChanged(e.detail.value)}}\n            />\n          </IonCol>\n        </IonRow>\n        <IonRow className=\"edit-row\">\n          <IonCol size=\"2\" />\n          <IonCol size=\"1\">\n            <IonIcon icon={refresh} mode=\"md\" />\n          </IonCol>\n          <IonCol size=\"4\">\n            <IonSelect\n              className=\"select\"\n              value={editorValues.recurrenceType}\n              disabled={editorValues.isReadonly}\n              onIonChange={(e) => {onRecurrenceTypeChanged(e.detail.value)}}\n            >\n              <IonSelectOption value={RecurrenceType.Weekly}>Weekly</IonSelectOption>\n              <IonSelectOption value={RecurrenceType.MonthlyByDayOfMonth}>Monthly (Day of Month)</IonSelectOption>\n              <IonSelectOption value={RecurrenceType.MonthlyByDayOfWeek}>Monthly (Day of Week)</IonSelectOption>\n            </IonSelect>\n          </IonCol>\n          <IonCol size=\"1\">\n            #\n          </IonCol>\n          <IonCol size=\"4\">\n            <IonInput\n              className=\"input-textbox\"\n              disabled={editorValues.isReadonly}\n              value={(editorValues.repeatInterval) ? editorValues.repeatInterval.toString() : undefined}\n              onIonChange={(e) => onRepeatIntervalChanged(e.detail.value)}\n            />\n          </IonCol>\n        </IonRow>\n        <IonRow>\n          <IonCol size=\"3\" />\n          <IonCol size=\"9\">\n            <WeekdayList\n              locSettings={locSettings}\n              editorValues={editorValues}\n              update={update}\n            />\n          </IonCol>\n\n        </IonRow>\n        <IonRow className=\"edit-row\">\n          <IonCol size=\"12\">\n            <div style={{borderTop: \"1px solid gray\", width: \"100%\"}} />\n          </IonCol>\n        </IonRow>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default RecurringEventSection;\n","import React from 'react';\nimport {IonButton, IonCol, IonContent, IonGrid, IonHeader, IonRow, IonTitle, IonToolbar} from '@ionic/react';\nimport {RecurrenceUpdateType} from \"../../enums/RecurrenceUpdateType\";\nimport './RecurrenceUpdateTypeSelector.scss';\n\ninterface RecurrenceUpdateTypeSelectorProps {\n  onSelect: (selection: RecurrenceUpdateType | null) => void;\n  updateType: 'NO' | 'UPDATE' | 'DELETE';\n}\n\n// --------------------------------------------------------------------------------------\nconst RecurrenceUpdateTypeSelector: React.FC<RecurrenceUpdateTypeSelectorProps> = ({onSelect, updateType}) => {\n\n  if (updateType === 'NO') {\n    return (\n      <div />\n    );\n  }\n\n  const onButtonClick = (choice: RecurrenceUpdateType | null) => {\n    onSelect(choice);\n  };\n\n  const titleText = updateType === 'UPDATE'\n    ? 'Update Recurring Events'\n    : 'Delete Recurring Events';\n\n  return (\n    <>\n      <IonContent>\n        <IonHeader mode=\"ios\">\n          <IonToolbar>\n            <IonTitle>{titleText}</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        <IonGrid>\n          <IonRow>\n            <IonCol size=\"12\">\n              <IonButton\n                expand=\"block\"\n                color=\"danger\"\n                className=\"apply-button\"\n                onClick={() => onButtonClick(RecurrenceUpdateType.UpdateSingleEvent)}\n              >\n                This event\n              </IonButton>\n            </IonCol>\n          </IonRow>\n          <IonRow>\n            <IonCol size=\"12\">\n              <IonButton\n                expand=\"block\"\n                color=\"danger\"\n                className=\"apply-button\"\n                onClick={() => onButtonClick(RecurrenceUpdateType.UpdateEntireSeries)}\n              >\n                Entire series\n              </IonButton>\n            </IonCol>\n          </IonRow>\n          <IonRow>\n            <IonCol size=\"12\">\n              <IonButton\n                expand=\"block\"\n                color=\"danger\"\n                className=\"apply-button\"\n                onClick={() => onButtonClick(RecurrenceUpdateType.UpdateSeriesForward)}\n              >\n                This event forward\n              </IonButton>\n            </IonCol>\n          </IonRow>\n          <IonRow>\n            <IonCol size=\"12\">\n              <IonButton\n                expand=\"block\"\n                className=\"cancel-btn\"\n                onClick={() => onButtonClick(null)}\n              >\n                Cancel\n              </IonButton>\n            </IonCol>\n          </IonRow>\n        </IonGrid>\n      </IonContent>\n    </>\n  );\n}\n\nexport default RecurrenceUpdateTypeSelector;\n","import {\n  IonButton,\n  IonCol,\n  IonContent,\n  IonGrid,\n  IonHeader,\n  IonModal,\n  IonRow,\n  IonTitle,\n  IonToolbar\n} from '@ionic/react';\nimport React, { useState } from \"react\";\nimport \"./useOrbitalDialogBox.scss\";\n\nexport interface DialogOptions {\n  value: number;\n  text: string;\n  color: string;\n}\n\n\nfunction useOrbitalDialogBox() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [dialogData, setDialogData] = useState({header: \"\", message: \"\", options: [] as DialogOptions[],  onDismiss: (selection: number | null) => {}});\n\n// --------------------------------------------------------------------------------------\n  const showDialog = (header: string, message: string, dialogOptions: DialogOptions[], onDismiss: (selection: number | null) => void) => {\n    setDialogData({\n      header,\n      message,\n      options: dialogOptions,\n      onDismiss\n    });\n\n    setIsOpen(true);\n  };\n\n// --------------------------------------------------------------------------------------\n  const onButtonClick = (selection: number | null) => {\n    setIsOpen(false);\n    dialogData.onDismiss(selection);\n  };\n\n  const dialogBoxJsx = (\n      <IonModal\n        isOpen={isOpen}\n        cssClass=\"orbital-dialog-modal\"\n        onDidDismiss={() => onButtonClick(null)}\n      >\n        <IonContent className=\"modal-content\">\n          <IonHeader mode=\"ios\">\n            <IonToolbar>\n              <IonTitle>{dialogData.header}</IonTitle>\n            </IonToolbar>\n          </IonHeader>\n          <IonGrid>\n            {dialogData.options.map(opt => (\n              <IonRow key={opt.value}>\n                <IonCol size=\"12\">\n                  <IonButton\n                    expand=\"block\"\n                    color={opt.color}\n                    className=\"apply-button\"\n                    onClick={() => onButtonClick(opt.value)}\n                  >\n                    {opt.text}\n                  </IonButton>\n                </IonCol>\n              </IonRow>\n            ))}\n            <IonRow>\n              <IonCol size=\"12\">\n                <IonButton\n                  expand=\"block\"\n                  className=\"cancel-btn\"\n                  onClick={() => onButtonClick(null)}\n                >\n                  Cancel\n                </IonButton>\n              </IonCol>\n            </IonRow>\n          </IonGrid>\n        </IonContent>\n      </IonModal>\n  );\n\n  return {\n    showDialog,\n    dialogBoxJsx\n  }\n}\n\nexport default useOrbitalDialogBox;\n","import React, { useEffect, useReducer, useState } from 'react';\nimport { IonButton, IonButtons, IonIcon, IonContent, IonFooter, IonHeader, IonGrid, IonRow, IonCol, IonTitle,  IonToolbar,  IonModal} from '@ionic/react';\nimport { arrowRoundBack } from 'ionicons/icons';\nimport './EditEventModal.scss';\nimport {AuthorizedItems } from \"../../orbital-interfaces/authorized-items\";\nimport EventTypeStatusEditor from './editor/EventTypeStatusEditor';\nimport EventPositionEditor from './editor/EventPositionEditor';\nimport EventEmployeeEditor from './editor/EventEmployeeEditor';\nimport EventStartEndEditor from './editor/EventStartEndEditor';\nimport EventBreakEditor from './editor/EventBreakEditor';\nimport EventTagEditor from './editor/EventTagEditor';\nimport EventConfirmEditor from './editor/EventConfirmEditor';\nimport EventIsClockedInEditor from './editor/EventIsClockedInEditor';\nimport {editorValueReducer, INITIAL_EDITOR_VAUES} from './EditEventModalState';\nimport scheduleEventApi from '../../api/ScheduleEventsAPI';\nimport { ApplicationUserContext } from '../../context/ApplicationUserContext';\nimport useDialogBox from '../../hooks/useDialogBox';\nimport { ScheduleEvent } from '../../orbital-interfaces/ScheduleEvent';\nimport EventNotesEditor from \"./editor/EventNotesEditor\";\nimport EventClockoutValueEditor from \"./editor/EventClockoutValueEditor\";\nimport EventReqeustEditor from \"./editor/EventRequestEditor\";\nimport { createBrowserHistory } from 'history';\nimport {EventEditAuthorization} from \"./EditEventAuthorization\";\nimport RecurringEventSection from \"./editor/RecurringEventSection\";\nimport {RecurrenceUpdateType} from \"../../enums/RecurrenceUpdateType\";\nimport RecurrenceUpdateTypeSelector from \"./RecurrenceUpdateTypeSelector\";\nimport useOrbitalDialogBox from '../../hooks/useOrbitalDialogBox';\n\ninterface ScheduleFilterModalProps {\n  scheduleEventId: number | null;\n  auth: AuthorizedItems;\n  onDismissModal: (toastMessage?: string) => void;\n  onCancelModal: () => void;\n  isOpen: boolean;\n  eventEditAuth: EventEditAuthorization;\n}\n\n// --------------------------------------------------------------------------------------\nconst EditEventModal: React.FC<ScheduleFilterModalProps> = (\n  { auth, scheduleEventId, onDismissModal, onCancelModal, isOpen, eventEditAuth }) => {\n  const dlg = useDialogBox();\n  const { user } = React.useContext(ApplicationUserContext);\n  const [ editorValues, updateEditorValues] = useReducer(editorValueReducer, INITIAL_EDITOR_VAUES);\n  const [ scheduleEvent, setScheduleEvent] = useState(null as ScheduleEvent | null);\n  const [ recurrenceUpdateType, setRecurrenceUpdateType] = useState(null as RecurrenceUpdateType | null);\n  const [ showRecurrenceUpdateTypeSelector, setShowRecurrenceUpdateTypeSelector] = useState('NO' as 'NO' | 'UPDATE' | 'DELETE');\n  const [ buttonClicked, setButtonClicked ] = useState('NONE' as 'NONE' | 'CREATEUPDATE' | 'DELETE');\n  const isEditing = scheduleEventId !== null;\n  const dialog = useOrbitalDialogBox();\n  let title = \"New Event\";\n  let buttonText = \"CREATE\";\n\n  if (isEditing) {\n    title = \"Edit Event\";\n    buttonText = \"UPDATE\"\n  }\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!isOpen) {\n      return;\n    }\n\n    if (!auth || !auth.locations || auth.locations.length === 0) {\n      return;\n    }\n\n    if (scheduleEventId) {\n      scheduleEventApi.getScheduleEvent(user, scheduleEventId).then((scheduleEvent) => {\n        if (!scheduleEvent) {\n          dlg.showAlert(\n            \"No Event\",\n            \"The event may have been removed or you no longer have access\",\n            onCancel);\n          return;\n        }\n\n        setScheduleEvent(scheduleEvent);\n        updateEditorValues({ type: 'BEGIN-UPDATE', ev: scheduleEvent, auth, eventEditAuth});\n      });\n    } else {\n      if (scheduleEvent !== null) {\n        setScheduleEvent(null);\n      }\n\n      updateEditorValues({ type: 'CREATE-EVENT', auth});\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [scheduleEventId, user, isOpen, auth]);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (recurrenceUpdateType !== null && buttonClicked !== 'NONE') {\n      if (buttonClicked === 'CREATEUPDATE') {\n        createOrUpdate();\n      } else {\n        deleteEvent(editorValues.recurrenceId !== null && editorValues.recurrenceId !== undefined);\n      }\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [recurrenceUpdateType, buttonClicked]);\n\n  // --------------------------------------------------------------------------------------\n  const createOrUpdate = () => {\n    const apiCall = editorValues.scheduleEventId === 0 ? scheduleEventApi.createScheduleEvent : scheduleEventApi.updateScheduleEvent;\n    apiCall(user, editorValues, recurrenceUpdateType).then((result) => {\n      if (result.error) {\n        dlg.showAlert(\"Cannot update\", result.message, () => {\n          onDismissModal(\"Could not update event\");\n        });\n      } else {\n        onDismissModal(\"Event Updated\");\n      }\n    });\n  };\n\n  // --------------------------------------------------------------------------------------\n  const deleteEvent = (skipPrompt: boolean) => {\n    const goDelete = () => {\n      scheduleEventApi.deleteScheduleEvent(user, editorValues.scheduleEventId, recurrenceUpdateType).then(result => {\n        if (result.error) {\n          dlg.showAlert(\"Cannot delete\", result.message, () => {\n            onDismissModal(\"Could not delete event\");\n          });\n        } else {\n          onDismissModal(\"Deleted Event\");\n        }\n      });\n    };\n\n    if (skipPrompt) {\n      goDelete();\n    } else {\n      dialog.showDialog(\n        \"Delete event?\",\n        \"\",\n        [{ text: \"Delete\", color: \"danger\", value: 1}],\n        selection => {\n          if (selection === 1) {\n            goDelete();\n          }\n        }\n      );\n    }\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onCreateOrUpdateClick = () => {\n    setButtonClicked('CREATEUPDATE');\n    if (editorValues.recurrenceId) {\n      if (recurrenceUpdateType !== null) {\n        createOrUpdate();\n      } else {\n        setShowRecurrenceUpdateTypeSelector('UPDATE');\n      }\n    } else {\n      createOrUpdate();\n    }\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onRecurrenceUpdateTypeSelect = (selection: RecurrenceUpdateType | null) => {\n    setShowRecurrenceUpdateTypeSelector('NO');\n    setRecurrenceUpdateType(selection);\n    if (selection === null) {\n      setButtonClicked('NONE');\n    }\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onDeleteClick = () => {\n    setButtonClicked('DELETE');\n    if (editorValues.recurrenceId) {\n      if (recurrenceUpdateType !== null) {\n        deleteEvent(editorValues.recurrenceId !== null && editorValues.recurrenceId !== undefined);\n      } else {\n        setShowRecurrenceUpdateTypeSelector('DELETE');\n      }\n    } else {\n      deleteEvent(editorValues.recurrenceId !== null && editorValues.recurrenceId !== undefined);\n    }\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onCancel = () => {\n    updateEditorValues({type: 'CANCEL'});\n    const history = createBrowserHistory();\n    history.push('/tabs/schedule');\n    onCancelModal();\n  };\n\n  if (!isOpen || !auth || !auth.locations || auth.locations.length === 0 || editorValues.scheduleEventId === -1) {\n    return (\n      <>\n        <div>Loading</div>\n        {dlg.alertBoxJsx}\n      </>\n    )\n  } else {\n    return (\n      <>\n        <IonHeader>\n          <IonToolbar>\n            <IonButtons slot=\"start\">\n              <IonButton onClick={onCancel}>\n                  <IonIcon icon={arrowRoundBack} mode=\"md\" slot=\"icon-only\" />\n              </IonButton>\n            </IonButtons>\n            <IonTitle>\n              {title}\n            </IonTitle>\n          </IonToolbar>\n        </IonHeader>\n\n        <IonContent class=\"outer-content\">\n          <IonGrid>\n            <EventTypeStatusEditor\n              editorValues={editorValues}\n              update={updateEditorValues}\n              auth={auth}\n              eventTypes={eventEditAuth.eventTypeOptionList}\n              eventStatuses={eventEditAuth.eventStatusOptionList}\n            />\n\n            <IonRow className=\"edit-row\">\n              <EventConfirmEditor\n                auth={auth}\n                editorValues={editorValues}\n                update={updateEditorValues}\n              />\n              <EventIsClockedInEditor\n                auth={auth}\n                editorValues={editorValues}\n                update={updateEditorValues}\n              />\n            </IonRow>\n\n            <IonRow className=\"edit-row\">\n              <IonCol size=\"12\">\n                <div style={{width: \"100%\", borderBottom: \"1px solid #AAA\"}} />\n              </IonCol>\n            </IonRow>\n\n            <EventPositionEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventEmployeeEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventStartEndEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <RecurringEventSection\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventBreakEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventTagEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventClockoutValueEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventNotesEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n\n          </IonGrid>\n\n          {dlg.alertBoxJsx}\n          {dialog.dialogBoxJsx}\n\n          <IonModal\n            isOpen={showRecurrenceUpdateTypeSelector !== 'NO'}\n            onDidDismiss={() => {onRecurrenceUpdateTypeSelect(null)}}\n            cssClass=\"recurrence-update-modal\"\n          >\n            <RecurrenceUpdateTypeSelector\n              onSelect={onRecurrenceUpdateTypeSelect}\n              updateType={showRecurrenceUpdateTypeSelector}\n            />\n          </IonModal>\n\n        </IonContent>\n\n        <IonFooter className=\"outer-content footer\">\n          <EventReqeustEditor\n            auth={auth}\n            eventType={editorValues.eventType}\n            eventEnd={editorValues.eventEnd}\n            eventStatus={editorValues.eventStatus}\n            eventEmployeeId={editorValues.employee.id}\n            eventPositionId={editorValues.position.position.id}\n            scheduleEventId={editorValues.scheduleEventId}\n            locationId={editorValues.locationId}\n            eventEditAuth={eventEditAuth}\n            update={updateEditorValues}\n            cancelEditModal={(message) => onDismissModal(message)}\n            setUsageText={() => {}}\n          />\n          <IonButton\n              className=\"apply-button\"\n              expand=\"block\"\n              onClick={onCreateOrUpdateClick}\n              disabled={!editorValues.isDirty || !editorValues.valid}\n              hidden={editorValues.isReadonly}\n            >\n              {buttonText}\n          </IonButton>\n          <IonButton\n            className=\"delete-button\"\n            expand=\"block\"\n            onClick={onDeleteClick}\n            hidden={editorValues.isReadonly || editorValues.scheduleEventId <= 0}\n          >\n            DELETE\n          </IonButton>\n        </IonFooter>\n      </>\n    );\n\n  }\n};\n\nexport default EditEventModal;\n","import { IonToast } from '@ionic/react';\nimport React, { useState } from \"react\";\n\nfunction useSimpleToast() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [toastData, setToastData] = useState({message: \"\"});\n\n  const showToast = (message: string) => {\n    setToastData({\n      message,\n    });\n\n    setIsOpen(true);\n  };\n\n  const simpleToastJsx = (\n    <IonToast\n      isOpen={isOpen}\n      onDidDismiss={() => setIsOpen(false)}\n      position=\"top\"\n      message={toastData.message}\n      duration={500}\n    />\n  );\n\n  return {\n    showToast,\n    simpleToastJsx\n  }\n}\n\nexport default useSimpleToast;\n","export enum ClockInRequirement {\n  MatchingShift = 1,\n  AnyShift = 2,\n  NoShift = 3\n}\n","import React from 'react';\nimport './EventCard.scss';\nimport Skeleton from \"react-loading-skeleton\";\n\ninterface EventCardSkeletonProps {\n  threeRows?: boolean;\n}\n\nconst EventCardSkeleton: React.FC<EventCardSkeletonProps> = ({threeRows}) => {\n  return (\n    <button\n      className=\"event\"\n    >\n      <div  className=\"card-first-col\">\n        <div className=\"day-name\"><Skeleton /> </div>\n        <div className=\"day-number\"><Skeleton /></div>\n      </div>\n      <div style={{padding: \"3px\"}}>\n        <Skeleton width={5} height={45} />\n      </div>\n      <div className=\"card-second-col\" >\n        <div className=\"time-row\">\n          <span >\n                <Skeleton width={150} height={9} />&nbsp;&nbsp;\n              </span>\n          <Skeleton />\n        </div>\n        {threeRows && (\n          <div ><Skeleton width={80} height={10} /></div>\n        )}\n        <div className=\"position-row\">\n          <Skeleton width={150} height={10} />&nbsp;&nbsp;\n        </div>\n      </div>\n    </button>\n  );\n};\n\nexport default EventCardSkeleton;\n","import React from 'react';\nimport './NoEventsToShow.scss';\n\n// --------------------------------------------------------------------------------------\nconst NoEventsToShow: React.FC = () => {\n\n  return (\n    <div className=\"no-events-wrapper\">\n      <span className=\"no-events-span\">No Events</span>\n    </div>\n  )\n};\n\nexport default NoEventsToShow;\n","import React, { useState, useEffect } from 'react';\nimport { IonTitle, IonToolbar, IonContent, IonPage, IonModal, IonButtons, IonMenuButton, IonSegment, IonSegmentButton, IonButton, IonIcon, IonHeader} from '@ionic/react';\nimport { funnel, add } from 'ionicons/icons';\nimport './SchedulePage.scss';\nimport { getWeekStart } from '../util/time-helper';\nimport { addDays, startOfDay } from 'date-fns';\nimport { AuthorizedLocation } from '../orbital-interfaces/authorized-items';\nimport ScheduleEventsAPI from '../api/ScheduleEventsAPI';\nimport { DailyNotes } from '../orbital-interfaces/DailyNotes';\nimport { RefresherEventDetail } from '@ionic/core';\nimport { EventInformation, HoursList } from '../orbital-interfaces/TEC';\nimport { EventFilter, initialEventFilter } from '../orbital-interfaces/EventFilter'\nimport WeekChooser  from '../components/SchedulePageComponents/WeekChooser';\nimport EventList from '../components/SchedulePageComponents/EventList';\nimport ScheduleFilterModal from \"../components/SchedulePageComponents/ScheduleFilterModal\";\nimport useIonicRefresher from '../hooks/useIonicRefresher';\nimport EditEventModal from '../components/EditEvent/EditEventModal';\nimport useSimpleToast from \"../hooks/useSimpleToast\";\nimport {AuthorizedItemsContext} from \"../context/AuthorizedItemsContext\";\nimport { ApplicationUserContext } from '../context/ApplicationUserContext';\nimport {RouteComponentProps} from \"react-router\";\nimport Skeleton from \"react-loading-skeleton\";\nimport EventCardSkeleton from \"../components/SchedulePageComponents/EventCardSkeleton\";\nimport {EventEditAuthorization, getEventNewAuthorization} from \"../components/EditEvent/EditEventAuthorization\";\nimport NoEventsToShow from \"../components/SchedulePageComponents/NoEventsToShow\";\n\nconst initialEvents: EventInformation[] = [];\nconst initialDailyNotes: DailyNotes[] = [];\n\ninterface SchedulePageProps extends RouteComponentProps<{\n  scheduleEventId?: string\n}> {}\n\nconst SchedulePage: React.FC<SchedulePageProps> = ({match}) => {\n  // ------------------------------------------------------------------------------------\n  const { user } = React.useContext(ApplicationUserContext);\n  const { auth, refreshAuth } = React.useContext(AuthorizedItemsContext);\n  const toast = useSimpleToast();\n\n  const doRefresh = (e: CustomEvent<RefresherEventDetail>) => {\n    setRefreshing(true);\n    refreshAuth(true, user).then((newAuth) => {\n      console.log(\"yo\");\n      if (newAuth) {\n        getScheduleEvents(newAuth.locations, filter, segment, e);\n      }\n    });\n  };\n\n  const [ filterAppliedClass, setFilterAppliedClass ] = useState(\"filter-not-applied\");\n  const refresher = useIonicRefresher(doRefresh);\n  const startDate = (auth && auth.locations && auth.locations.length > 0)\n    ? getWeekStart(startOfDay(new Date()), auth.locations[0].settings.DayWeekStartsOn, auth.locations[0].settings.DayStartTime)\n    : getWeekStart(startOfDay(new Date()), \"Monday\", \"\");\n\n  const [myScheduleEvents, setMyScheduleEvents] = useState(initialEvents);\n  const [myDailyNotes, setMyDailyNotes] = useState(initialDailyNotes);\n  const [myHoursPerDay, setMyHoursPerDay] = useState([] as HoursList[]);\n  const [requestScheduleEvents, setRequestScheduleEvents] = useState(initialEvents);\n  const [requestDailyNotes, setRequestDailyNotes] = useState(initialDailyNotes);\n  const [requestHoursPerDay, setRequestHoursPerDay] = useState([] as HoursList[]);\n  const [allScheduleEvents, setAllScheduleEvents] = useState(initialEvents);\n  const [allDailyNotes, setAllDailyNotes] = useState(initialDailyNotes);\n  const [allHoursPerDay, setAllHoursPerDay] = useState([] as HoursList[]);\n\n  const [showLoading, setShowLoading] = useState(true);\n  const [segment, setSegment] = useState<'my' | 'requests' | 'all'>('my');\n  const [showFilterModal, setShowFilterModal] = useState(false);\n  const [refreshing, setRefreshing] = useState(true);\n  const [showEventModal, setShowEventModal] = useState(false);\n  const [editEventId, setEditEventId] = useState(null as number | null);\n  const [eventEditAuth, setEventEditAuth] = useState(null as EventEditAuthorization | null);\n  const [filter, setFilter] = useState( {\n    ...initialEventFilter,\n    start: startDate,\n    end: addDays(startDate, 6),\n    positionIds: auth.locations.flatMap(l => l.departments.flatMap(d =>  d.positions.map(p => p.id))),\n    filterByEmployee: true\n  });\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (auth && auth.locations && auth.locations.length > 0) {\n      const newFilter = {\n        ...filter,\n        positionIds: auth.locations.flatMap(l => l.departments.flatMap(d =>  d.positions.map(p => p.id))),\n        dnLocIds: auth.locations.map(l => l.id),\n        settingsLocId: auth.locations[0].id\n      };\n\n      setFilter(newFilter);\n\n      if (\n        (segment === 'my' && myScheduleEvents.length === 0) ||\n        (segment === 'requests' && requestScheduleEvents.length === 0) ||\n        (segment === 'all' && allScheduleEvents.length === 0)\n      ) {\n        setShowLoading(true);\n      }\n\n      if (myScheduleEvents.length === 0){\n        getScheduleEvents(auth.locations, newFilter, 'my', undefined);\n      }\n\n      if (requestScheduleEvents.length === 0) {\n        getScheduleEvents(auth.locations, newFilter, 'requests', undefined);\n      }\n\n      if (allScheduleEvents.length === 0) {\n        getScheduleEvents(auth.locations, newFilter, 'all', undefined);\n      }\n    } else if (auth && auth.employeeId === 0) {\n      setMyScheduleEvents([]);\n      setRequestScheduleEvents([]);\n      setAllScheduleEvents([]);\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [auth]);\n\n  useEffect(() => {\n    if (match.params.scheduleEventId) {\n      setEditEventId(parseInt(match.params.scheduleEventId));\n      setShowEventModal(true);\n    }\n  }, [match.params.scheduleEventId]);\n\n  // ------------------------------------------------------------------------------------\n  const getScheduleEvents = (locations: AuthorizedLocation[], f: EventFilter, curSegment: 'my' | 'requests' | 'all',  e?: CustomEvent<RefresherEventDetail>) => {\n      const actualFilter1 = {\n        ...f,\n        filterByEmployee: curSegment === 'my',\n        eventTypeId: curSegment === 'requests' ? -1 : f.eventTypeId,\n        eventStatusId: curSegment === 'requests' ? 2 : f.eventStatusId\n      };\n      getScheduleEventsByFilterInternal(actualFilter1, curSegment, e);\n\n      setMyScheduleEvents([]);\n      setRequestScheduleEvents([]);\n      setAllScheduleEvents([]);\n\n      if (curSegment === 'my') {\n        const actualFilter2 = {\n          ...f,\n          filterByEmployee: false,\n          eventTypeId: -1,\n          eventStatusId: 2\n        };\n        getScheduleEventsByFilterInternal(actualFilter2, 'requests', e);\n\n        const actualFilter3 = {\n          ...f,\n          filterByEmployee: false,\n        };\n        getScheduleEventsByFilterInternal(actualFilter3, 'all', e);\n      } else if (curSegment === 'requests') {\n        const actualFilter4 = {\n          ...f,\n          filterByEmployee: true\n        };\n        getScheduleEventsByFilterInternal(actualFilter4, 'my', e);\n\n        const actualFilter5 = {\n          ...f,\n          filterByEmployee: false\n        };\n        getScheduleEventsByFilterInternal(actualFilter5, 'all', e);\n      } else if (curSegment === 'all') {\n        const actualFilter6 = {\n          ...f,\n          filterByEmployee: true\n        };\n        getScheduleEventsByFilterInternal(actualFilter6, 'my', e);\n\n        const actualFilter7 = {\n          ...f,\n          filterByEmployee: false,\n          eventTypeId: -1,\n          eventStatusId: 2\n        };\n        getScheduleEventsByFilterInternal(actualFilter7, 'requests', e);\n      }\n  };\n\n  // ------------------------------------------------------------------------------------\n  const getScheduleEventsByFilterInternal = (f: EventFilter, curSegment: 'my' | 'requests' | 'all', e?: CustomEvent<RefresherEventDetail>) => {\n    if (f.settingsLocId === 0) {\n      setShowLoading(false);\n      setRefreshing(false);\n      if (e) {\n        e.detail.complete();\n      }\n\n      return;\n    }\n\n    ScheduleEventsAPI.getScheduleEventsByFilter(user, f).then(res => {\n      if (e) {\n        e.detail.complete();\n      }\n\n      switch(curSegment) {\n        case 'my':\n          setMyScheduleEvents(res.events);\n          setMyDailyNotes(res.dailyNotes);\n          setMyHoursPerDay(res.hoursPerDay);\n        break;\n        case 'requests':\n          setRequestScheduleEvents(res.events);\n          setRequestDailyNotes(res.dailyNotes);\n          setRequestHoursPerDay(res.hoursPerDay);\n        break;\n        case 'all':\n          setAllScheduleEvents(res.events);\n          setAllDailyNotes(res.dailyNotes);\n          setAllHoursPerDay(res.hoursPerDay);\n        break;\n      }\n\n      setShowLoading(false);\n      setRefreshing(false);\n    });\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onEventClick = (ev: EventInformation, newEventEditAuth: EventEditAuthorization) => {\n    setEditEventId(ev.ScheduleEventId);\n    setEventEditAuth(newEventEditAuth);\n    setShowEventModal(true);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onEventUpdated = (toastMessage?: string) => {\n    if (toastMessage) {\n      toast.showToast(toastMessage!);\n    }\n\n    getScheduleEvents(auth.locations, filter, segment, undefined);\n    setShowEventModal(false);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const setStartDate = (date: Date) => {\n    const newFilter = {\n      ...filter,\n      start: date,\n      end: addDays(date, 6)\n    };\n\n    setFilter(newFilter);\n    getScheduleEvents(auth.locations, newFilter, segment,undefined);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onDismissFilterModal = (f: EventFilter, filterApplied: boolean) => {\n    setFilter(f);\n    console.log(\"Filter applied? \", filterApplied);\n    setFilterAppliedClass((filterApplied) ? \"filter-applied\" : \"filter-not-applied\");\n    setShowFilterModal(false);\n    getScheduleEvents(auth.locations, f, segment, undefined);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onSegmentChange = (segmentName: 'my' | 'requests' | 'all') => {\n    setSegment(segmentName);\n\n    if (\n          (segmentName === 'my' && myScheduleEvents.length === 0) ||\n          (segmentName === 'requests' && requestScheduleEvents.length === 0) ||\n          (segmentName === 'all' && allScheduleEvents.length === 0)\n    ) {\n      setShowLoading(true);\n      getScheduleEvents(auth.locations, filter, segmentName, undefined);\n    }\n\n  };\n\n  if (!auth || !auth.locations || auth.locations.length === 0) {\n    return <div>-</div>\n  }\n\n  return (\n    <IonPage id=\"schedule-page\">\n      <IonHeader>\n        <IonToolbar mode=\"md\">\n          <IonButtons slot=\"start\">\n            <IonMenuButton />\n          </IonButtons>\n          <IonTitle slot=\"start\">Schedule</IonTitle>\n          <IonButtons slot=\"end\">\n            <IonButton onClick={() => {\n              setEditEventId(null);\n              setEventEditAuth(getEventNewAuthorization(auth));\n              setShowEventModal(true);\n            }}>\n              <IonIcon icon={add} mode=\"md\" slot=\"icon-only\" />\n            </IonButton>\n            <IonButton onClick={() => setShowFilterModal(true)}>\n              <div className={filterAppliedClass} >&#183;</div>\n              <IonIcon icon={funnel} mode=\"ios\" slot=\"icon-only\" />\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonSegment\n        mode=\"md\"\n        value={segment}\n      >\n        <IonSegmentButton\n          mode=\"md\"\n          value=\"my\"\n          onClick={() => onSegmentChange('my')}\n          checked={segment === 'my'}\n        >\n          MY\n        </IonSegmentButton>\n        <IonSegmentButton\n          mode=\"md\"\n          value=\"requests\"\n          onClick={() => onSegmentChange('requests')}\n          checked={segment === 'requests'}\n        >\n          REQUESTS\n        </IonSegmentButton>\n        <IonSegmentButton\n          mode=\"md\"\n          value=\"all\"\n          onClick={() => onSegmentChange('all')}\n          checked={segment === 'all'}\n        >\n          ALL\n        </IonSegmentButton>\n      </IonSegment>\n        <WeekChooser startDate={getWeekStart(filter.start, auth.locations[0].settings.DayWeekStartsOn, auth.locations[0].settings.DayStartTime)} setStartDate={setStartDate} />\n        <IonContent>\n        {refresher.ionicRefresherJsx}\n\n        {!showLoading && !refreshing && segment === 'my' && myScheduleEvents.length === 0 && (\n          <NoEventsToShow />\n        )}\n\n        {!(showLoading || refreshing) && segment === 'my' && myScheduleEvents.length > 0 && (\n          <EventList\n            events={myScheduleEvents}\n            listType={segment}\n            notes={myDailyNotes}\n            hoursPerDay={myHoursPerDay}\n            auth={auth}\n            onEdit={onEventClick} />\n        )}\n\n\n        {!showLoading && !refreshing && segment === 'requests' && requestScheduleEvents.length === 0 && (\n          <NoEventsToShow />\n        )}\n\n        {!(showLoading || refreshing) && segment === 'requests' && requestScheduleEvents.length > 0 && (\n          <EventList\n            events={requestScheduleEvents}\n            listType={segment}\n            notes={requestDailyNotes}\n            hoursPerDay={requestHoursPerDay}\n            auth={auth}\n            onEdit={onEventClick} />\n        )}\n\n\n        {!showLoading && !refreshing && segment === 'all' && allScheduleEvents.length === 0 && (\n          <NoEventsToShow />\n        )}\n\n        {!(showLoading || refreshing) && segment === 'all' && allScheduleEvents.length > 0 && (\n          <EventList\n            events={allScheduleEvents}\n            listType={segment}\n            notes={allDailyNotes}\n            hoursPerDay={allHoursPerDay}\n            auth={auth}\n            onEdit={onEventClick} />\n        )}\n\n        {(showLoading || refreshing) && (\n          <>\n            <div style={{marginTop: \"10px\"}} />\n            <Skeleton height={24} width={220} /><br/>\n            <EventCardSkeleton threeRows={segment !== 'my'}/>\n            <EventCardSkeleton threeRows={segment !== 'my'}/>\n            <EventCardSkeleton threeRows={segment !== 'my'}/>\n          </>\n        )}\n\n      </IonContent>\n\n      {toast.simpleToastJsx}\n\n      <IonModal\n        isOpen={showFilterModal}\n        onDidDismiss={() => setShowFilterModal(false)}>\n        <ScheduleFilterModal\n          filter={filter}\n          auth={auth}\n          onDismissModal={onDismissFilterModal}\n          isOpen={showFilterModal}\n          onCancelModal={() => setShowFilterModal(false)}\n        />\n      </IonModal>\n\n      <IonModal\n        isOpen={showEventModal}\n        onDidDismiss={() => setShowEventModal(false)}\n      >\n        <EditEventModal\n          isOpen={showEventModal}\n          auth={auth}\n          onCancelModal={() => setShowEventModal(false)}\n          onDismissModal={(toastMessage) => onEventUpdated(toastMessage)}\n          scheduleEventId={editEventId}\n          eventEditAuth={eventEditAuth!}\n        />\n      </IonModal>\n    </IonPage>\n  );\n};\n\nexport default SchedulePage;\n","import React, {useEffect, useState} from 'react';\nimport {IonButton, IonButtons, IonIcon, IonContent, IonFooter, IonHeader, IonTitle, IonToolbar} from '@ionic/react';\nimport { arrowRoundBack } from 'ionicons/icons';\nimport '../SchedulePageComponents/ScheduleFilterModal.scss';\nimport {AuthorizedItems, UnscheduledBreakOptions, BreakType} from \"../../orbital-interfaces/authorized-items\";\nimport { TimeClockSettingsData } from '../../orbital-interfaces/TimeClockSettingsData';\nimport { getEventBreakStartEndString } from '../../util/time-helper';\n\ninterface ScheduleFilterModalProps {\n  auth: AuthorizedItems;\n  tcData: TimeClockSettingsData;\n  onDismissModal: (selection: BreakItem) => void;\n}\n\nexport interface BreakItem {\n  key: string;\n  name: string;\n  breakType: BreakType;\n}\n\n// --------------------------------------------------------------------------------------\nconst BreakSelectionModal: React.FC<ScheduleFilterModalProps> = ({ auth, onDismissModal, tcData}) => {\n  const [breakList, setBreakList] = useState([] as BreakItem[]);\n  const cancelOption = { key: \"Cancel\", name: \"\", breakType: BreakType.UnscheduledUnpaid};\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (auth.locations.length === 0 || !tcData.ClockedInScheduleEvent) {\n      return;\n    }\n\n    const locSettings = auth.locations.filter(l => l.id === tcData.ClockedInScheduleEvent!.LocationId)[0].settings;\n    const breaks: BreakItem[] = [];\n\n    if (tcData.ScheduleEventsForClockIn.length > 0) {\n      tcData.ScheduleEventsForClockIn[0].EventBreaks.map(b => {\n        return breaks.push({\n          key: b.BreakStart,\n          name: getEventBreakStartEndString(b),\n          breakType: BreakType.Scheduled\n        });\n      });\n    }\n\n    switch (locSettings.UnscheduledBreakOptions) {\n      case UnscheduledBreakOptions.Both:\n        breaks.push({ key: \"UnScheduledUnpaid\", name: \"Unscheduled\", breakType: BreakType.UnscheduledUnpaid });\n        breaks.push({ key: \"UnScheduledPaid\", name: \"Unscheduled $\", breakType: BreakType.UnscheduledPaid});\n        break;\n\n      case UnscheduledBreakOptions.Paid:\n          breaks.push({ key: \"UnScheduledPaid\", name: \"Unscheduled $\", breakType: BreakType.UnscheduledPaid});\n          break;\n\n      case UnscheduledBreakOptions.Unpaid:\n          breaks.push({ key: \"UnScheduledUnpaid\", name: \"Unscheduled\", breakType: BreakType.UnscheduledUnpaid });\n          break;\n\n      default:\n        break;\n    }\n\n    setBreakList(breaks);\n  }, [tcData, auth]);\n\n  return (\n    <>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonButton onClick={() => onDismissModal(cancelOption)}>\n                <IonIcon icon={arrowRoundBack} mode=\"md\" slot=\"icon-only\" />\n            </IonButton>\n          </IonButtons>\n          <IonTitle>\n            Choose Break\n          </IonTitle>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent class=\"outer-content\">\n\n        {breakList.map(brk => (\n          <IonButton\n            className=\"apply-button\"\n            expand=\"block\"\n            key={brk.key}\n            color=\"secondary\"\n            onClick={() => {onDismissModal(brk)}}\n          >\n            {brk.name}\n          </IonButton>\n        ))}\n\n      </IonContent>\n\n      <IonFooter>\n        <IonButton\n          className=\"cancel-button\"\n          expand=\"block\"\n          color=\"tertiary\"\n          onClick={() => onDismissModal(cancelOption)}>\n          CANCEL\n        </IonButton>\n      </IonFooter>\n    </>\n  )\n};\n\nexport default BreakSelectionModal;\n","export enum StartBreakResponseCode\n{\n    Success,\n    BreakAlreadyExists,\n    AlreadyOnBreak,\n    ErrorInsertingBreak,\n    UserNotAtSpecifiedLocation,\n    EventDoesNotMatchCurrentUser,\n    InvalidUnscheduledBreak\n}\n","export enum EndBreakResponseCode\n{\n    Success,\n    CannotEndRestrictedBreakEarly,\n    ErrorUpdatingEventBreak,\n    UserNotAtSpecifiedLocation,\n    EventDoesNotMatchCurrentUser,\n    BreakNoLongerExists\n}\n","import { EndBreakResponse } from '../orbital-interfaces/EndBreakResponse';\nimport { StartBreakResponse } from '../orbital-interfaces/StartBreakResponse';\nimport { BreakType } from '../orbital-interfaces/authorized-items';\nimport { ScheduleEvent } from '../orbital-interfaces/ScheduleEvent';\nimport { ClockOutResponse } from '../orbital-interfaces/ClockOutResponse';\nimport { ClockInResponse } from '../orbital-interfaces/ClockInResponse';\nimport { SwitchPositionOrTagResponse } from '../orbital-interfaces/SwitchPositionOrTagResponse';\nimport { TimeClockSettingsData } from '../orbital-interfaces/TimeClockSettingsData';\nimport { ApplicationUser } from '../context/ApplicationUserContext';\nimport apiHelper from './OrbitalApiHelper';\n\n// ----------------------------------------------------------------------------------------------\nconst getTimeClockSettings = async(user: ApplicationUser) => {\n  return await apiHelper.get(user,  `api/v1/employee/timeclock/?lat=${user.latitude}&lng=${user.longitude}`) as TimeClockSettingsData;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst clockIn = async(user: ApplicationUser, positionId: number, tagId: number | null) => {\n  const baseUrl = `/api/v2/employee/timeclock/clockin/${positionId}/${tagId}?lat=${user.latitude}&lng=${user.longitude}`\n  return await apiHelper.post(user, baseUrl, {}) as ClockInResponse;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst clockOut = async(user: ApplicationUser, clockOutValue?: number) => {\n  const clockoutDataModel = {\n    ClockOutValue: clockOutValue,\n    TimeClockBreak: null,\n    BreakStart: null\n  };\n\n  return await apiHelper.post(\n    user,\n    `/api/v2/employee/timeclock/clockout?lat=${user.latitude}&lng=${user.longitude}`,\n    clockoutDataModel) as ClockOutResponse;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst switchPositionOrTag = async(user: ApplicationUser, positionId: number, tagId: number | null, clockOutValue?: number) => {\n  const baseUrl = `/api/v2/employee/timeclock/switch/${positionId}/${tagId}?lat=${user.latitude}&lng=${user.longitude}`;\n  const clockoutDataModel = {\n    ClockOutValue: clockOutValue,\n    TimeClockBreak: null,\n    BreakStart: null\n  };\n\n  return await apiHelper.post(user, baseUrl, clockoutDataModel) as SwitchPositionOrTagResponse;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst startBreak = async(user: ApplicationUser, clockEvent: ScheduleEvent, shiftEvent: ScheduleEvent | null, breakType: BreakType, breakStart?: string) => {\n  const baseUrl = `/api/v2/employee/timeclock/startbreak?lat=${user.latitude}&lng=${user.longitude}`;\n  const breakStartOptions = {\n    clockEventId: clockEvent.ScheduleEventId,\n    shiftEventId: shiftEvent ? shiftEvent!.ScheduleEventId : null,\n    shiftBreakStart: breakStart,\n    breakType\n  }\n\n  return await apiHelper.post(user, baseUrl, breakStartOptions) as StartBreakResponse;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst endBreak = async(user: ApplicationUser, clockEvent: ScheduleEvent, shiftEvent: ScheduleEvent | null) => {\n  const shiftEventId = (shiftEvent) ? shiftEvent.ScheduleEventId : '';\n  const baseUrl = `/api/v2/employee/timeclock/endbreak/${clockEvent.ScheduleEventId}/${shiftEventId}?lat=${user.latitude}&lng=${user.longitude}`;\n\n  return await apiHelper.post(user, baseUrl, {}) as EndBreakResponse;\n}\n\nexport default {\n  getTimeClockSettings,\n  clockIn,\n  clockOut,\n  switchPositionOrTag,\n  startBreak,\n  endBreak\n}\n","import React, {useState} from 'react';\nimport { IonButton, IonCol, IonContent, IonFooter, IonInput, IonGrid, IonHeader, IonRow, IonTitle, IonToolbar} from '@ionic/react';\nimport './ClockoutModal.scss';\nimport {LocationSettings} from \"../../orbital-interfaces/authorized-items\";\n\ninterface ClockoutModalProps {\n  onCancel: () => void;\n  onOk: (clockoutValue?: number) => void;\n  locSettings: LocationSettings;\n}\n\n// --------------------------------------------------------------------------------------\nconst ClockoutModal: React.FC<ClockoutModalProps> = ({onCancel, onOk, locSettings }) => {\n  const [clockoutValue, setClockoutValue] = useState(undefined as number | undefined);\n\n  // --------------------------------------------------------------------------------------\n  const onOkClick = () => {\n    onOk(clockoutValue);\n  };\n\n  // --------------------------------------------------------------------------------------\n  function onClockoutValueUpdate(val: string | undefined | null) {\n    if (!val) {\n      if (clockoutValue !== undefined) {\n        setClockoutValue(undefined);\n      }\n\n      return;\n    }\n\n    setClockoutValue(parseFloat(val));\n  }\n\n  return (\n    <>\n      <IonContent>\n        <IonHeader mode=\"ios\">\n          <IonToolbar>\n            <IonTitle>Clock Out</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        <IonGrid>\n          <IonRow>\n            <IonCol className=\"label\" size=\"12\">{locSettings.ClockOutValueLabel}</IonCol>\n          </IonRow>\n          <IonRow>\n            <IonCol size=\"2\"/>\n            <IonCol size=\"8\">\n              <IonInput\n                placeholder=\"Enter value\"\n                type=\"number\"\n                className=\"input\"\n                autoCorrect=\"off\"\n                clearInput={true}\n                value={clockoutValue?.toString()}\n                onIonChange={(e) => {onClockoutValueUpdate(e.detail.value)}}\n\n              />\n\n            </IonCol>\n            <IonCol size=\"2\"/>\n          </IonRow>\n        </IonGrid>\n      </IonContent>\n      <IonFooter>\n        <IonButton\n          expand=\"block\"\n          onClick={onOkClick}\n          className=\"clockout-button\"\n        >\n          CLOCK OUT\n        </IonButton>\n\n        <IonButton\n          expand=\"block\"\n          className=\"cancel-button\"\n          onClick={onCancel}\n        >\n          CANCEL\n        </IonButton>\n      </IonFooter>\n    </>\n  );\n};\n\nexport default ClockoutModal;\n","import React, { useState, useEffect } from 'react';\nimport './ClockPanel.scss';\nimport {IonButton} from \"@ionic/react\";\nimport {LocationSettings} from \"../../orbital-interfaces/authorized-items\";\nimport {TimeClockSettingsData} from \"../../orbital-interfaces/TimeClockSettingsData\";\n\ninterface SwitchPositionOrTagButtonProps {\n  tcData: TimeClockSettingsData;\n  locSettings: LocationSettings;\n  selectedPosId: number;\n  selectedTagId: number | null;\n  onSwitch: () => void;\n}\n\nconst SwitchPositionOrTagButton: React.FC<SwitchPositionOrTagButtonProps> = ({tcData, locSettings, selectedPosId, selectedTagId, onSwitch}) => {\n  const [disabled, setDisabled] = useState(true);\n\n  const hiddenJsx = (\n    <span/>\n  );\n\n  useEffect(() => {\n    if (tcData.UserClockedIn) {\n      const curPosId = tcData.ClockedInScheduleEvent!.PositionId;\n      let curTagId = tcData.ClockedInScheduleEvent!.TagId;\n      if (!curTagId) {\n        curTagId = -1;\n      }\n\n      if (curPosId !== selectedPosId)\n      {\n        setDisabled(false);\n      } else if (curTagId !== selectedTagId) {\n        setDisabled(false);\n      } else {\n        setDisabled(true);\n      }\n\n    }\n  }, [tcData.UserClockedIn, tcData.ClockedInScheduleEvent, selectedPosId, selectedTagId]);\n\n  if (!locSettings.ClockInWithDifferentTag &&\n    !locSettings.EnablePositionChangeForEmployeePosition)  {\n    return hiddenJsx;\n  }\n\n  if (!tcData.UserClockedIn) {\n    return hiddenJsx;\n  }\n\n  return (\n    <div className=\"switch-button-container\">\n      <IonButton\n        className=\"switch-button\"\n        disabled={disabled}\n        color=\"secondary\"\n        expand=\"block\"\n        onClick={onSwitch}\n      >\n        SWITCH\n      </IonButton>\n    </div>\n  );\n};\n\nexport default SwitchPositionOrTagButton;\n","import React, { useState, useEffect } from 'react';\nimport { IonAlert, IonToast, IonLoading, IonSelect, IonModal, IonItem, IonLabel, IonSelectOption, IonIcon, IonButton } from '@ionic/react';\nimport './ClockPanel.scss';\nimport { UnscheduledBreakOptions, LocationSettings, BreakType } from '../../orbital-interfaces/authorized-items';\nimport { TimeClockSettingsData } from '../../orbital-interfaces/TimeClockSettingsData';\nimport {time, cafe} from 'ionicons/icons';\nimport { ClockInRequirement } from '../../enums/ClockInRequirement';\nimport BreakSelectorModal, { BreakItem } from './BreakSelectorModal';\nimport arrayHelper from '../../util/array-helper';\nimport timeClockApi from '../../api/TimeClockAPI';\nimport { format, parseISO } from 'date-fns';\nimport { StartBreakResponseCode } from '../../enums/StartBreakResponseCode';\nimport { EndBreakResponseCode } from '../../enums/EndBreakResponseCode';\nimport { ApplicationUserContext } from '../../context/ApplicationUserContext';\nimport {AuthorizedItemsContext} from \"../../context/AuthorizedItemsContext\";\nimport ClockoutModal from './ClockoutModal';\nimport SwitchPositionOrTagButton from \"./SwitchPositionOrTagButton\";\n\ninterface ClockPanelProps {\n  onUpdate: () => void;\n  refreshToggle: boolean;\n}\n\ninterface List {\n  id: number,\n  name: string;\n}\n\nconst ClockPanel: React.FC<ClockPanelProps> = ({onUpdate, refreshToggle }) => {\n  const { user } = React.useContext(ApplicationUserContext);\n  const { auth } = React.useContext(AuthorizedItemsContext);\n  const [posList, setPosList] = useState([] as List[]);\n  const [selectedPosId, setSelectedPosId] = useState(0);\n  const [tagSwitchingEnabled, setTagSwitchingEnabled] = useState(false);\n  const [tagList, setTagList] = useState([] as List[]);\n  const [selectedTagId, setSelectedTagId] = useState(null as number | null);\n  const [breakSetting, setBreakSetting] = useState<\"START BREAK\" | \"END BREAK\" | \"NONE\">(\"START BREAK\");\n  const [locSettings, setLocSettings] = useState({} as LocationSettings);\n  const [showBreakSelectorModal, setShowBreakSelectorModal] = useState(false);\n  const [showLoading, setShowLoading] = useState(false);\n  const [loadingMessage, setLoadingMessage] = useState(\"Please wait...\");\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [showToast, setShowToast] = useState(false);\n  const [showAlertData, setShowAlertData] = useState({show: false, header: \"Alert\", message: \"\"});\n  const [tcData, setTCData] = useState(null as TimeClockSettingsData | null);\n  const [showClockoutModal, setShowClockoutModal] = useState(false);\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    updateTimeClockData();\n\n    // eslint-disable-next-line\n  }, [auth, refreshToggle]);\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!tcData || !auth || !auth.locations || auth.locations.length === 0) {\n      return;\n    }\n\n    if (tcData.ShowTimeClock) {\n      const uniqueLocationIds = arrayHelper.unique(tcData.PositionsToClockInto.map(p => p.LocationId));\n      const uniqueDeptIds = arrayHelper.unique(tcData.PositionsToClockInto.map(p => p.DepartmentId));\n      let plist: List[];\n      if (uniqueLocationIds.length > 1) {\n        plist = tcData.PositionsToClockInto.map(p => {return { id: p.PositionId, name: p.PositionNameWithLocAndDeptAbbreviation}});\n      } else if (uniqueDeptIds.length > 1) {\n        plist = tcData.PositionsToClockInto.map(p => {return {id: p.PositionId, name: p.PositionNameWithDeptAbbreviation}});\n      } else {\n        plist = tcData.PositionsToClockInto.map(p => {return {id: p.PositionId, name: p.PositionName}});\n      }\n\n      let curPosId: number;\n      if (tcData.UserClockedIn) {\n        curPosId = tcData.ClockedInScheduleEvent!.PositionId;\n        setSelectedPosId(curPosId);\n      } else if (plist.length > 0) {\n        curPosId = plist[0].id;\n        setSelectedPosId(curPosId);\n      } else {\n        curPosId = 0;\n      }\n\n      const curLocId = (tcData.UserClockedIn)\n        ? tcData.ClockedInScheduleEvent!.LocationId\n        : curPosId !== 0\n            ? auth.locations.filter(l => l.departments.flatMap(d => d.positions.flatMap(p => p.id === curPosId)))[0].id\n            : auth.locations[0].id;\n\n      const locSettings = auth.locations.filter(l => l.id === curLocId)[0].settings;\n      setLocSettings(locSettings);\n\n      if (locSettings.EnableEnhancedBreakManagement &&\n          (locSettings.UnscheduledBreakOptions !== UnscheduledBreakOptions.None ||\n          (tcData.ClockedInScheduleEvent!.EventBreaks && tcData.ClockedInScheduleEvent!.EventBreaks.length > 0))) {\n        setBreakSetting(tcData.UserClockedIn && tcData.CurrentEventBreak\n          ? \"END BREAK\"\n          : \"START BREAK\");\n      } else {\n        setBreakSetting(\"NONE\");\n      }\n\n      setPosList(plist);\n      setTags(curPosId);\n    }\n    // eslint-disable-next-line\n  }, [auth, tcData]);\n\n  // ------------------------------------------------------------------------------------\n  const updateTimeClockData = () => {\n    timeClockApi.getTimeClockSettings(user).then(results => {\n      setTCData(results);\n    });\n  };\n\n // ------------------------------------------------------------------------------------\n const setTags = (currentPositionId: number): number => {\n    if (!tcData) {\n      return -1;\n    }\n\n    const curLocId = (tcData.UserClockedIn)\n      ? tcData.ClockedInScheduleEvent!.LocationId\n      : auth.locations.filter(l => l.departments.flatMap(d => d.positions.flatMap(p => p.id === currentPositionId)))[0].id;\n    const locSettings = auth.locations.filter(l => l.id === curLocId)[0].settings;\n\n\n    if (locSettings.ClockInWithDifferentTag &&\n        tcData.TagsPerPosition[currentPositionId] &&\n        tcData.TagsPerPosition[currentPositionId].length > 1) {\n      setTagSwitchingEnabled(true);\n      let tagList = tcData.TagsPerPosition[currentPositionId].map(t => {return { id: t.TagId, name: t.TagName}});\n      tagList.unshift({id: -1, name: \"NONE\"});\n      setTagList(tagList);\n\n    } else {\n      setTagSwitchingEnabled(false);\n    }\n\n    let tagId = -1;\n    if (tcData.UserClockedIn) {\n      if (tcData.ClockedInScheduleEvent!.TagId) {\n        tagId = tcData.ClockedInScheduleEvent!.TagId;\n      } else if (tcData.ClockedInScheduleEvent!.TagId === null) {\n        tagId = -1;\n      } else {\n        tagId = -1;\n      }\n    } else if (tcData.TagsPerPosition[currentPositionId] && tcData.TagsPerPosition[currentPositionId].length > 0) {\n\n      if (tcData.ScheduleEventsForClockIn && tcData.ScheduleEventsForClockIn[0] && tcData.ScheduleEventsForClockIn[0].TagId) {\n        tagId = tcData.ScheduleEventsForClockIn[0].TagId;\n      } else {\n        tagId = -1;\n      }\n    }\n\n    setSelectedTagId(tagId);\n    return tagId;\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onPositionChange = (newVal: number) => {\n    setSelectedPosId(newVal);\n    setTags(newVal);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onTagChange = (newVal: number) => {\n    setSelectedTagId(newVal);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const showAlert = (header: string, message: string) => {\n    setShowAlertData({show: true, header, message});\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onBreakSelectorModalClose = (brk: BreakItem) => {\n    if (!tcData) {\n      return;\n    }\n\n    setShowBreakSelectorModal(false);\n    if (brk.key === \"Cancel\") {\n      return;\n    }\n\n    setLoadingMessage(\"Starting Break...\");\n    setShowLoading(true);\n\n    timeClockApi.startBreak(\n      user,\n      tcData.ClockedInScheduleEvent!,\n      tcData.ScheduleEventsForClockIn[0],\n      brk.breakType,\n      brk.breakType === BreakType.Scheduled ? brk.key : undefined).then(response => {\n        setShowLoading(false);\n        if (response.StartBreakResponseCode === StartBreakResponseCode.Success) {\n          setToastMessage(\"Break started at \" + format(parseISO(response.BreakStart), 'h:mmaaa'));\n          setShowToast(true);\n          onUpdate();\n          updateTimeClockData();\n        } else {\n          showAlert(\"Could not start break\", `Unable to start break, ${response.Message}`);\n        }\n      });\n  };\n\n  // ------------------------------------------------------------------------------------\n  const clockout = (clockOutValue?: number) => {\n    if (showClockoutModal) {\n      setShowClockoutModal(false);\n    }\n\n    setLoadingMessage(\"Clocking Out...\");\n    setShowLoading(true);\n\n    timeClockApi.clockOut(user, clockOutValue).then(response => {\n      setShowLoading(false);\n      if (response.ClockOutResponseCode === 0) {\n        setToastMessage(\"Clocked out at \" + format(parseISO(response.ClockOutEvent.EventEnd), 'h:mmaaa'));\n        setShowToast(true);\n        onUpdate();\n        updateTimeClockData();\n      } else {\n        showAlert(\"Could not Clock Out\", `Unable to Clock out, ${response.Message}`);\n      }\n    });\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onClockOutClick = () => {\n    if (locSettings.ClockOutValueLabel)\n    {\n      setShowClockoutModal(true);\n    } else {\n      clockout();\n    }\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onClockInClick = () => {\n    setLoadingMessage(\"Clocking in...\");\n    setShowLoading(true);\n\n    timeClockApi.clockIn(user, selectedPosId, selectedTagId).then(response => {\n      setShowLoading(false);\n      if (response.ClockInResponseCode === 0) {\n        setToastMessage(\"Clocked in at \" + format(parseISO(response.ClockInEvent.EventStart), 'h:mmaaa'));\n        setShowToast(true);\n        onUpdate();\n        updateTimeClockData();\n      } else {\n        showAlert(\"Could not Clock In\", `Unable to Clock in, ${response.Message}`);\n      }\n    });\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onBreakButtonClick = () => {\n    if (breakSetting === \"NONE\" || !tcData) {\n      return;\n    }\n\n    if (breakSetting === \"END BREAK\") {\n      setLoadingMessage(\"Ending Break...\");\n      setShowLoading(true);\n\n      timeClockApi.endBreak(\n        user,\n        tcData.ClockedInScheduleEvent!,\n        tcData.ScheduleEventsForClockIn.length > 0 ? tcData.ScheduleEventsForClockIn[0] : null).then(response => {\n          setShowLoading(false);\n          if (response.EndBreakResponseCode === EndBreakResponseCode.Success) {\n            setToastMessage(\"Ended break at \" + format(parseISO(response.BreakEnd), 'h:mmaaa'));\n            setShowToast(true);\n            onUpdate();\n            updateTimeClockData();\n          } else {\n            showAlert(\"Did not come off break\", response.Message);\n          }\n      });\n\n      return;\n    }\n\n    if (locSettings.UnscheduledBreakOptions !== UnscheduledBreakOptions.None ||\n        (tcData.ClockedInScheduleEvent!.EventBreaks && tcData.ClockedInScheduleEvent!.EventBreaks.length > 0)) {\n      setShowBreakSelectorModal(true);\n    } else {\n      showAlert(\"No implemented\", \"Not implemented in ClockPanel.tsx for this scenario\");\n    }\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onSwitchClick = () => {\n    setLoadingMessage(\"Switching...\");\n    setShowLoading(true);\n\n    timeClockApi.switchPositionOrTag(user, selectedPosId, selectedTagId).then(response => {\n      setShowLoading(false);\n      if (response.AllowedToSwitchPositions || response.AllowedToSwitchTags) {\n        setToastMessage(\"Switched\");\n        setShowToast(true);\n        onUpdate();\n        updateTimeClockData();\n      } else {\n        showAlert(\"Could not switch\", `${response.ClockInMessage} ${response.ClockOutMessage}`);\n      }\n    });\n  };\n\n  if (!auth || !tcData) {\n    return <div>Loading...</div>\n  }\n\n  return (\n    <>\n      <IonLoading\n        isOpen={showLoading}\n        onDidDismiss={() => setShowLoading(false)}\n        spinner=\"dots\"\n        message={loadingMessage}\n      />\n\n      <div className=\"clock-controls\">\n\n        {tcData.PositionsToClockInto && tcData.PositionsToClockInto.length > 1 && (\n          <IonItem>\n            <IonLabel>Position</IonLabel>\n            <IonSelect\n              interface=\"action-sheet\"\n              onIonChange={(e) => onPositionChange(e.detail.value)}\n              disabled={!( ((tcData.UserClockedIn && tcData.UserMayClockOut) || (!tcData.UserClockedIn && tcData.UserMayClockIn)) && locSettings.ClockInRequirement !== ClockInRequirement.MatchingShift)}\n              value={selectedPosId}\n            >\n                {posList.map(pos => (\n                  <IonSelectOption key={pos.id} value={pos.id}>{pos.name}</IonSelectOption>\n                ))}\n            </IonSelect>\n          </IonItem>\n        )}\n\n        {tagSwitchingEnabled && (\n          <IonItem>\n            <IonLabel>~Tag</IonLabel>\n            <IonSelect\n              interface=\"action-sheet\"\n              onIonChange={(e) => onTagChange(e.detail.value)}\n              disabled={!( ((tcData.UserClockedIn && tcData.UserMayClockOut) || (!tcData.UserClockedIn && tcData.UserMayClockIn)) && locSettings.ClockInRequirement !== ClockInRequirement.MatchingShift)}\n              value={selectedTagId}\n            >\n              {tagList.map(t => (\n                <IonSelectOption key={t.id} value={t.id}>{t.name}</IonSelectOption>\n              ))}\n            </IonSelect>\n          </IonItem>\n        )}\n\n        <SwitchPositionOrTagButton\n          tcData={tcData}\n          locSettings={locSettings}\n          selectedPosId={selectedPosId}\n          selectedTagId={selectedTagId}\n          onSwitch={onSwitchClick}\n        />\n        {!tcData.UserClockedIn && (\n          <div className=\"clockin-button-container\">\n            <IonButton\n              className=\"clockin-button\"\n              onClick={onClockInClick}\n              disabled={!tcData.UserMayClockIn}\n            >\n              <IonIcon mode=\"md\" style={{paddingRight: \"5px\"}} icon={time}/> CLOCK IN\n            </IonButton>\n          </div>\n        )}\n        {tcData.UserClockedIn && (\n          <div className=\"clockout-button-container\">\n            <IonButton\n              className=\"clockout-button\"\n              disabled={!tcData.UserMayClockOut}\n              expand=\"block\"\n              onClick={onClockOutClick}\n            >\n              CLOCK OUT <IonIcon mode=\"md\" style={{paddingLeft: \"5px\"}} icon={time}/>\n            </IonButton>\n\n            {breakSetting !== \"NONE\" && (\n              <IonButton\n                onClick={onBreakButtonClick}\n                expand=\"block\"\n                className=\"break-button\"\n                disabled={!tcData.UserMayClockOut}\n              >\n                <IonIcon icon={cafe} />\n                {breakSetting}\n              </IonButton>\n            )}\n\n          </div>\n        )}\n      </div>\n\n      <IonToast\n            isOpen={showToast}\n            message={toastMessage}\n            duration={2000}\n            onDidDismiss={() => setShowToast(false)}\n      />\n\n      <IonModal\n        isOpen={showBreakSelectorModal}\n        cssClass=\"break-selector-modal\"\n      >\n        <BreakSelectorModal\n          auth={auth}\n          tcData={tcData}\n          onDismissModal={(selection) => onBreakSelectorModalClose(selection)}\n        />\n      </IonModal>\n\n      <IonModal\n        cssClass=\"clockout-modal\"\n        isOpen={showClockoutModal}\n        onDidDismiss={() => {setShowClockoutModal(false);}}\n      >\n        <ClockoutModal\n          onCancel={() => {setShowClockoutModal(false);}}\n          onOk={clockout}\n          locSettings={locSettings}\n        />\n      </IonModal>\n\n      <IonAlert\n        isOpen={showAlertData.show}\n        onDidDismiss={() => setShowAlertData({...showAlertData, show: false})}\n        header={showAlertData.header}\n        message={showAlertData.message}\n        buttons={['OK']}\n      />\n\n    </>\n  );\n};\n\nexport default ClockPanel;\n","import React from 'react';\nimport './PayrollPeriodChooser.scss';\nimport { IonIcon } from '@ionic/react';\nimport { arrowBack, arrowForward, arrowDropdown } from 'ionicons/icons';\nimport {addDays, format} from \"date-fns\";\n\ninterface PayrollPeriodChooserProps {\n  startDate: Date | null;\n  endDate: Date | null;\n  onNextPayPeriod: () => void;\n  onPrevPayPeriod: () => void;\n}\n\nfunction getPayPeriodDateText(start: Date | null, end: Date | null) {\n  if (!start || !end) {\n    return \" \";\n  }\n\n  if (start.getMonth() !== end.getMonth()) {\n    return format(start, \"MMM d\").toUpperCase() + \" - \" + format(addDays(end, -1), \"MMM d\").toUpperCase();\n  }\n\n  return format(start, \"MMM d\").toUpperCase() + \" - \" + format(addDays(end, -1), \"d\");\n}\n\n// --------------------------------------------------------------------------------------\nconst PayrollPeriodChooser: React.FC<PayrollPeriodChooserProps> = ({ startDate, endDate, onNextPayPeriod, onPrevPayPeriod}) => {\n  const isLoading = startDate === null || endDate === null;\n  const payPeriodDateText = (isLoading) ? \"\" : getPayPeriodDateText(startDate, endDate);\n\n  return (\n    <div className=\"chooser\">\n      <div className=\"top\">\n        <button\n          onClick={onPrevPayPeriod}\n          className=\"arrow\"\n          key={-1}>\n          <IonIcon mode=\"ios\" icon={arrowBack}/>\n        </button>\n        <div className=\"month-year-container\">\n          <div className=\"datetime-picker-container\">\n            <div className=\"datetime-picker\" >{payPeriodDateText}</div>\n            <IonIcon\n              mode=\"md\"\n              icon={arrowDropdown}\n              hidden={isLoading}\n            />\n          </div>\n        </div>\n        <button\n          onClick={onNextPayPeriod}\n          className=\"arrow\"\n          key={7}>\n          <IonIcon\n            mode=\"ios\"\n            icon={arrowForward}\n          />\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default PayrollPeriodChooser;\n","import { ApplicationUser } from '../context/ApplicationUserContext';\nimport apiHelper from './OrbitalApiHelper';\nimport {formatDateTimeAsMvcString} from \"../util/time-helper\";\nimport {OrbitalTime} from \"../orbital-interfaces/OrbitalTime\";\n\nexport interface PayrollPeriodHoursPerAbsent {\n  absentId: number;\n  time: OrbitalTime;\n}\n\nexport interface PayrollPeriodDateItem {\n  date: string;\n  regular: OrbitalTime;\n  dailyOvertime: OrbitalTime;\n  weeklyOvertime: OrbitalTime;\n  special: OrbitalTime;\n  absent: OrbitalTime;\n  timePerAbsent: PayrollPeriodHoursPerAbsent[];\n}\n\nexport interface PayrollPeriodData {\n  start: string;\n  end: string;\n  list: PayrollPeriodDateItem[];\n  error: boolean;\n  message: string;\n  totalRegular: OrbitalTime;\n  totalWeeklyOvertime: OrbitalTime;\n  totalDailyOvertime: OrbitalTime;\n  totalAbsent: OrbitalTime;\n  totalSpecial: OrbitalTime;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst getPayPeriodDateForEmployee = async (user: ApplicationUser, locationId: number, date: Date) => {\n  const dateStr = formatDateTimeAsMvcString(date);\n  return await apiHelper.get(user, 'api/v2/payroll/get/' + locationId + '/' + dateStr) as PayrollPeriodData;\n};\n\n\nexport default {\n  getPayPeriodDateForEmployee\n}\n","import React from 'react';\nimport {OrbitalTime} from \"../../orbital-interfaces/OrbitalTime\";\nimport {LocationSettings} from \"../../orbital-interfaces/authorized-items\";\nimport { getTimeStringFromOrbitalTime } from '../../util/time-helper';\ninterface PayrollDetailListProps {\n  time: OrbitalTime | null;\n  locSettings: LocationSettings;\n  fontColor: string;\n}\n\nfunction getHoursString(locsettings: LocationSettings, time: OrbitalTime) {\n  return getTimeStringFromOrbitalTime(locsettings, time);\n}\n\n// --------------------------------------------------------------------------------------\nconst PayrollOrbitalTimeItem: React.FC<PayrollDetailListProps> = ({ time, locSettings, fontColor }) => {\n\n  if (time  === null) {\n    return <span> -- </span>\n  }\n\n  const displayColor = (time.ActualHours === 0.0) ? \"lightgray\" : fontColor;\n\n  return (\n    <span style={{color: displayColor}}>{getHoursString(locSettings, time)}</span>\n  );\n};\n\nexport default PayrollOrbitalTimeItem;\n","import React, {useContext} from 'react';\nimport { IonContent, IonRow, IonCol, IonButton, IonFooter, IonGrid, IonHeader, IonTitle, IonToolbar } from '@ionic/react';\nimport './PayrollDetailModal.scss';\nimport { parseISO,  } from 'date-fns';\nimport {PayrollPeriodDateItem} from \"../../api/PayrollPeriodAPI\";\nimport { getDateString } from '../../util/time-helper';\nimport {AuthorizedItems, LocationSettings} from \"../../orbital-interfaces/authorized-items\";\nimport PayrollOrbitalTimeItem from \"./PayrollOrbitalTimeItem\";\nimport {AuthorizedItemsContext} from \"../../context/AuthorizedItemsContext\";\n\ninterface AddBreakModalProps {\n  onClose: () => void;\n  data: PayrollPeriodDateItem;\n  locSettings: LocationSettings;\n}\n\nfunction getAbsentName(auth: AuthorizedItems, id: number) {\n  return auth.payrollEvents.filter(pe => pe.id === id)[0].name;\n}\n\n// --------------------------------------------------------------------------------------\nconst PayrollDetailModal: React.FC<AddBreakModalProps> = ({onClose, data, locSettings}) => {\n  const {auth} = useContext(AuthorizedItemsContext);\n\n  if (!data) {\n    return (\n      <div>loading</div>\n    )\n  }\n\n  return (\n    <>\n      <IonContent>\n        <IonHeader mode=\"ios\">\n          <IonToolbar>\n            <IonTitle>{getDateString(parseISO(data.date))}</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        <IonGrid>\n          {data.regular.ActualHours > 0.0 && (\n            <IonRow>\n              <IonCol size=\"7\">\n                Regular\n              </IonCol>\n              <IonCol size=\"5\">\n                <PayrollOrbitalTimeItem time={data.regular} locSettings={locSettings} fontColor=\"black\" />\n              </IonCol>\n            </IonRow>\n          )}\n\n          {data.dailyOvertime.ActualHours > 0.0 && (\n            <IonRow>\n              <IonCol size=\"7\">\n                Daily Overtime\n              </IonCol>\n              <IonCol size=\"5\">\n                <PayrollOrbitalTimeItem time={data.dailyOvertime} locSettings={locSettings} fontColor=\"red\" />\n              </IonCol>\n            </IonRow>\n          )}\n\n          {data.weeklyOvertime.ActualHours > 0.0 && (\n            <IonRow>\n              <IonCol size=\"7\">\n                Weekly Overtime\n              </IonCol>\n              <IonCol size=\"5\">\n                <PayrollOrbitalTimeItem time={data.weeklyOvertime} locSettings={locSettings} fontColor=\"red\" />\n              </IonCol>\n            </IonRow>\n          )}\n\n          {data.special.ActualHours > 0.0 && (\n            <IonRow>\n              <IonCol size=\"7\">\n                Special Dates\n              </IonCol>\n              <IonCol size=\"5\">\n                <PayrollOrbitalTimeItem time={data.special} locSettings={locSettings} fontColor=\"black\" />\n              </IonCol>\n            </IonRow>\n          )}\n\n          {data.timePerAbsent && data.timePerAbsent.map(hpa => {\n            return (\n              <IonRow key={hpa.absentId}>\n                <IonCol size=\"7\">\n                  {getAbsentName(auth, hpa.absentId)}\n                </IonCol>\n                <IonCol size=\"5\">\n                  <PayrollOrbitalTimeItem time={hpa.time} locSettings={locSettings} fontColor=\"#AD850C\" />\n                </IonCol>\n              </IonRow>\n            )\n          })}\n\n        </IonGrid>\n      </IonContent>\n      <IonFooter>\n        <IonButton\n          expand=\"block\"\n          onClick={onClose}\n        >\n          CLOSE\n        </IonButton>\n      </IonFooter>\n    </>\n  );\n};\n\nexport default PayrollDetailModal;\n","import React, {useContext, useState} from 'react';\nimport {IonRow, IonCol, IonModal} from '@ionic/react';\nimport {format, parseISO} from \"date-fns\";\nimport {PayrollPeriodDateItem} from \"../../api/PayrollPeriodAPI\";\nimport PayrollOrbitalTimeItem from \"./PayrollOrbitalTimeItem\";\nimport {AuthorizedItemsContext} from \"../../context/AuthorizedItemsContext\";\nimport authHelper from '../../util/authitems-helper';\nimport {ColumnEnum} from \"./PayrollDetailList\";\nimport PayrollDetailModal from \"./PayrollDetailModal\";\nimport Skeleton from \"react-loading-skeleton\";\n\ninterface PayrollDetailListProps {\n  payrollRow: PayrollPeriodDateItem | null;\n  colsToDisplay: ColumnEnum;\n  colSize: string;\n}\n\nfunction formatDateString(d: string) {\n  return format(parseISO(d), \"EEE d\").toUpperCase();\n}\n\n// --------------------------------------------------------------------------------------\nconst PayrollDetailRow: React.FC<PayrollDetailListProps> = ({ payrollRow, colsToDisplay, colSize }) => {\n  const {auth} = useContext(AuthorizedItemsContext);\n  const locSettings = authHelper.getLocSettingsForLocationId(auth, auth.locations[0].id);\n  const [showDetailModal, setShowDetailModal] = useState(false);\n\n  if (payrollRow === null) {\n    return (\n      <IonRow>\n        <IonCol size=\"3\"><Skeleton width={50} /></IonCol>\n        <IonCol size=\"3\"><Skeleton width={50} /></IonCol>\n        <IonCol size=\"3\"><Skeleton width={50} /></IonCol>\n        <IonCol size=\"3\"><Skeleton width={50} /></IonCol>\n      </IonRow>\n    )\n  }\n\n  return (\n      <>\n        <IonRow>\n          <IonCol size={colSize}>\n            <button\n              style={{fontSize: \"16px\", backgroundColor: \"white\", border: \"none\", outline: \"none\"}}\n              onClick={() => setShowDetailModal(true)}\n            >\n            {formatDateString(payrollRow!.date)}\n            </button>\n          </IonCol>\n\n          <IonCol\n            size={colSize}\n            color=\"secondary\"\n            hidden={(colsToDisplay & ColumnEnum.Regular) !== ColumnEnum.Regular}\n          >\n            <PayrollOrbitalTimeItem\n              time={payrollRow?.regular}\n              locSettings={locSettings}\n              fontColor=\"black\"\n            />\n          </IonCol>\n\n          <IonCol\n            size={colSize}\n            hidden={(colsToDisplay & ColumnEnum.DailyOvertime) !== ColumnEnum.DailyOvertime}\n          >\n            <PayrollOrbitalTimeItem\n              time={payrollRow?.dailyOvertime}\n              locSettings={locSettings}\n              fontColor=\"red\"\n            />\n          </IonCol>\n\n          <IonCol\n            size={colSize}\n            hidden={(colsToDisplay & ColumnEnum.WeeklyOvertime) !== ColumnEnum.WeeklyOvertime}\n          >\n            <PayrollOrbitalTimeItem\n              time={payrollRow?.weeklyOvertime}\n              locSettings={locSettings}\n              fontColor=\"red\"\n            />\n          </IonCol>\n\n          <IonCol\n            size={colSize}\n            hidden={(colsToDisplay & ColumnEnum.Special) !== ColumnEnum.Special}\n          >\n            <PayrollOrbitalTimeItem\n              time={payrollRow?.special}\n              locSettings={locSettings}\n              fontColor=\"black\"\n            />\n          </IonCol>\n\n          <IonCol\n            size={colSize}\n            hidden={(colsToDisplay & ColumnEnum.Absent) !== ColumnEnum.Absent}\n          >\n            <PayrollOrbitalTimeItem\n              time={payrollRow?.absent}\n              locSettings={locSettings}\n              fontColor=\"black\"\n            />\n          </IonCol>\n        </IonRow>\n\n        <IonModal\n          cssClass=\"detail-modal\"\n          isOpen={showDetailModal}\n          onDidDismiss={() => setShowDetailModal(false)}\n        >\n          <PayrollDetailModal\n            onClose={() => setShowDetailModal(false)}\n            locSettings={locSettings}\n            data={payrollRow!}\n            />\n        </IonModal>\n      </>\n  );\n};\n\nexport default PayrollDetailRow;\n","import React, {useContext, useEffect, useState} from 'react';\nimport {IonGrid, IonRow, IonCol} from '@ionic/react';\nimport {PayrollPeriodData } from \"../../api/PayrollPeriodAPI\";\nimport './PayrollDetailList.scss';\nimport PayrollDetailRow from \"./PayrollDetailRow\";\nimport {AuthorizedItemsContext} from \"../../context/AuthorizedItemsContext\";\nimport authHelper from \"../../util/authitems-helper\";\nimport PayrollOrbitalTimeItem from \"./PayrollOrbitalTimeItem\";\nimport Skeleton from \"react-loading-skeleton\";\n\ninterface PayrollDetailListProps {\n  payrollData: PayrollPeriodData | null;\n}\n\nexport enum ColumnEnum {\n  None = 0,\n  Regular = 1        << 0,\n  DailyOvertime  = 1 << 1,\n  WeeklyOvertime = 1 << 2,\n  Special        = 1 << 3,\n  Absent         = 1 << 4,\n  All       = ~(~0 << 5)\n}\n\nfunction getColumnsToDisplay(payrollData : PayrollPeriodData) : { count: number, cols: ColumnEnum} {\n  let cols = ColumnEnum.Regular;\n  let count = 2;\n\n  if (payrollData.totalDailyOvertime.ActualHours > 0.0) {\n    cols |= ColumnEnum.DailyOvertime;\n    count++;\n  }\n\n  if (payrollData.totalWeeklyOvertime.ActualHours > 0.0) {\n    cols |= ColumnEnum.WeeklyOvertime;\n    count++;\n  }\n\n  if (payrollData.totalSpecial.ActualHours > 0.0) {\n    cols |= ColumnEnum.Special;\n    count++;\n  }\n\n  if (payrollData.totalAbsent.ActualHours > 0.0) {\n    cols |= ColumnEnum.Absent;\n    count++;\n  }\n\n  return { cols, count};\n}\n// --------------------------------------------------------------------------------------\nconst PayrollDetailList: React.FC<PayrollDetailListProps> = ({ payrollData }) => {\n  const {auth} = useContext(AuthorizedItemsContext);\n  const locSettings = authHelper.getLocSettingsForLocationId(auth, auth.locations[0].id);\n  const [colsToDisplay, setColsToDisplay] = useState(ColumnEnum.None);\n  const [colSize, setColSize] = useState(\"3\");\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!payrollData) {\n      return;\n    }\n\n    const { count, cols } = getColumnsToDisplay(payrollData);\n    setColsToDisplay(cols);\n    setColSize((count >= 5) ? \"2\" : \"3\");\n  }, [payrollData]);\n\n  if (payrollData === null) {\n    return (\n      <div className=\"grid-container\">\n        <IonGrid class=\"ion-text-end\" >\n          <IonRow className=\"list-header\" class=\"ion-text-center\">\n            <IonCol size=\"3\"><Skeleton width={60} /></IonCol>\n            <IonCol size=\"3\"><Skeleton width={60} /></IonCol>\n            <IonCol size=\"3\"><Skeleton width={60} /></IonCol>\n            <IonCol size=\"3\"><Skeleton width={60} /></IonCol>\n          </IonRow>\n          {[1,2,3,4,5,6,7,8,9,10].map(x => {\n            return (\n              <PayrollDetailRow\n                payrollRow={null}\n                colSize=\"3\"\n                colsToDisplay={ColumnEnum.None}\n                key={x}\n              />\n            )\n          })}\n        </IonGrid>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"grid-container\">\n    <IonGrid class=\"ion-text-end\" >\n      <IonRow className=\"list-header\" class=\"ion-text-center\">\n        <IonCol\n          size={colSize}\n        >DATE</IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.Regular) !== ColumnEnum.Regular}\n        >\n          REG\n        </IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.DailyOvertime) !== ColumnEnum.DailyOvertime}\n        >\n          DAILY OT\n        </IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.WeeklyOvertime) !== ColumnEnum.WeeklyOvertime}\n        >\n          WKLY OT\n        </IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.Special) !== ColumnEnum.Special}\n        >\n          SPECIAL\n        </IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.Absent) !== ColumnEnum.Absent}\n        >\n          ABSENT\n        </IonCol>\n      </IonRow>\n      {payrollData?.list.map(row => (\n        <PayrollDetailRow\n          key={row.date}\n          payrollRow={row}\n          colsToDisplay={colsToDisplay}\n          colSize={colSize}\n        />\n      ))}\n      <IonRow style={{fontWeight: \"bold\"}}>\n        <IonCol size={colSize}>TOTAL</IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.Regular) !== ColumnEnum.Regular}\n        >\n          <PayrollOrbitalTimeItem\n            time={payrollData?.totalRegular}\n            locSettings={locSettings}\n            fontColor=\"black\"\n          />\n        </IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.DailyOvertime) !== ColumnEnum.DailyOvertime}\n        >\n          <PayrollOrbitalTimeItem\n            time={payrollData?.totalDailyOvertime}\n            locSettings={locSettings}\n            fontColor=\"red\"\n          />\n        </IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.WeeklyOvertime) !== ColumnEnum.WeeklyOvertime}\n        >\n          <PayrollOrbitalTimeItem\n            time={payrollData?.totalWeeklyOvertime}\n            locSettings={locSettings}\n            fontColor=\"red\"\n          />\n        </IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.Special) !== ColumnEnum.Special}\n        >\n          <PayrollOrbitalTimeItem\n            time={payrollData?.totalSpecial}\n            locSettings={locSettings}\n            fontColor=\"black\"\n          />\n        </IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.Absent) !== ColumnEnum.Absent}\n        >\n          <PayrollOrbitalTimeItem\n            time={payrollData?.totalAbsent}\n            locSettings={locSettings}\n            fontColor=\"black\"\n          />\n        </IonCol>\n      </IonRow>\n    </IonGrid>\n    </div>\n  );\n};\n\nexport default PayrollDetailList;\n","import React, { useState, useEffect } from 'react';\nimport './ClockPanel.scss';\nimport {addDays, parseISO} from 'date-fns';\nimport { ApplicationUserContext } from '../../context/ApplicationUserContext';\nimport {AuthorizedItemsContext} from \"../../context/AuthorizedItemsContext\";\nimport PayrollPeriodChooser from \"./PayrollPeriodChooser\";\nimport PayrollPeriodAPI, {PayrollPeriodData} from \"../../api/PayrollPeriodAPI\";\nimport useDialogBox from \"../../hooks/useDialogBox\";\nimport PayrollDetailList from \"./PayrollDetailList\";\nimport {RefresherEventDetail} from \"@ionic/core\";\nimport useIonicRefresher from \"../../hooks/useIonicRefresher\";\n\ninterface PayrollPeriodsTabProps {\n  date: Date | null;\n}\n\nconst PayrollPeriodsTab: React.FC<PayrollPeriodsTabProps> = ({ date }) => {\n  const { user } = React.useContext(ApplicationUserContext);\n  const { auth } = React.useContext(AuthorizedItemsContext);\n  const [ currentDate, setCurrentDate ] = useState(null as Date | null);\n  const [ startDate, setStartDate ] = useState(null as Date | null);\n  const [ endDate, setEndDate ] = useState(null as Date | null);\n  const [ payrollData, setPayrollData] = useState(null as PayrollPeriodData | null);\n  const dlg = useDialogBox();\n\n  // ------------------------------------------------------------------------------------\n  const doRefresh = (e: CustomEvent<RefresherEventDetail>) => {\n    getData(e);\n  };\n\n  const refresher = useIonicRefresher(doRefresh);\n\n  // --------------------------------------------------------------------------------------------------------\n  useEffect(() => {\n    let newStartDate = date;\n    if (date === null) {\n      newStartDate = new Date();\n    }\n\n    setCurrentDate(newStartDate);\n\n  }, [date]);\n\n  // --------------------------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (currentDate == null) {\n      return;\n    }\n\n    getData();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentDate]);\n\n  // --------------------------------------------------------------------------------------------------------\n  function getData(e?: CustomEvent<RefresherEventDetail>) {\n    PayrollPeriodAPI.getPayPeriodDateForEmployee(user, auth.locations[0].id, currentDate!).then((data) => {\n      if (data.error) {\n        dlg.showAlert(\"Error\", \"Could not retrieve Payroll data: \" + data.message, () => {});\n        return;\n      }\n\n      setStartDate(parseISO(data.start));\n      setEndDate(parseISO(data.end));\n      setPayrollData(data);\n      if (e) {\n        e.detail.complete();\n      }\n    });\n  }\n\n  // --------------------------------------------------------------------------------------------------------\n  const onNextPayPeriod = () => {\n    setCurrentDate(addDays(endDate!, 1));\n  };\n\n  // --------------------------------------------------------------------------------------------------------\n  const onPrevPayPeriod = () => {\n    setCurrentDate(addDays(startDate!, -1));\n  };\n\n  return (\n    <>\n      <PayrollPeriodChooser\n        startDate={startDate}\n        endDate={endDate}\n        onNextPayPeriod={onNextPayPeriod}\n        onPrevPayPeriod={onPrevPayPeriod}\n      />\n      <PayrollDetailList\n        payrollData={payrollData}\n      />\n      {dlg.alertBoxJsx}\n      {refresher.ionicRefresherJsx}\n    </>\n\n  );\n};\n\nexport default PayrollPeriodsTab;\n","import React from 'react';\nimport { DailyNotes } from '../orbital-interfaces/DailyNotes';\nimport './TodayDailyNoteCard.scss';\nimport { AuthorizedItems } from '../orbital-interfaces/authorized-items';\n\ninterface TodayNoteCardProps {\n  oneLine: boolean,\n  dailyNote?: DailyNotes,\n  authItems: AuthorizedItems\n}\n\n// ---------------------------------------------------------------------------------\nconst getDeptName = (note: DailyNotes, authItems: AuthorizedItems) => {\n  let dept = '';\n  if (authItems.locations.length >= 1) {\n    dept = authItems.locations.filter(l => l.id === note.LocationId)[0].abbr + '/';\n  }\n\n  return (note.DepartmentId === -1)\n    ? dept + 'All Departments'\n    : dept + note.DepartmentName;\n};\n\n// ==============================================================================\nconst TodayNoteCard: React.FC<TodayNoteCardProps> = ({ authItems, oneLine, dailyNote }) => {\n  if (!dailyNote) {\n    return <div />\n  }\n\n  return (\n    <button className=\"daily-note\">\n      <div className=\"event-color-col\" />\n      <div className=\"card-second-col\">\n        <div className=\"dept-row\">{getDeptName(dailyNote, authItems)}</div>\n        <div className={oneLine ? 'note-text-row-oneline' : 'note-text-row'}>\n          {dailyNote.Notes}\n        </div>\n      </div>\n    </button>\n  );\n};\n\nexport default TodayNoteCard;\n","import React, {CSSProperties, useContext} from 'react';\nimport {IonIcon} from '@ionic/react';\nimport './TodayEventCard.scss';\nimport {getBreakStartEnd, getDurationStringFromTimeSpan, getEventStartEnd, getStartTime} from '../util/time-helper';\nimport {AuthorizedLocation} from '../orbital-interfaces/authorized-items';\nimport EventType from '../enums/EventType';\nimport EventStatus from '../enums/EventStatus';\nimport {cafe, time} from 'ionicons/icons';\nimport {EventInformation} from '../orbital-interfaces/TEC';\nimport {getEventEditAuthorization, EventEditAuthorization} from './EditEvent/EditEventAuthorization';\nimport {AuthorizedItemsContext} from \"../context/AuthorizedItemsContext\";\n\ninterface TodayEventCardProps {\n  event?: EventInformation;\n  locations: AuthorizedLocation[];\n  onEdit: (ev: EventInformation, eventEditAuth: EventEditAuthorization) => void;\n}\n\nconst colorMap: any = {\n  1: '#9CBA6A',\n  2: '#BFBFBF',\n  3: '#FFAD00',\n  4: '#C41A26',\n  6: '#677A46',\n  7: '#FFAD00'\n};\n\nconst statusTimeColor: any = {\n  1: { color: 'black'},\n  2: { color: '#C41A26'},\n  4: { color: '#BCBCBC'}\n};\n\n// --------------------------------------------------------------------------------------\nfunction getPosition(locations: AuthorizedLocation[], ev: any) {\n    const thisLocation = locations.filter(loc => loc.id === ev.LocationId)[0];\n    const multiLocation = locations.filter(l => l.departments.filter(d => d.positions.filter(p => p.hasPosition))).length > 1;\n    const multiDepartment = (multiLocation)\n      ? true\n      : thisLocation.departments.filter(d => d.positions.filter(p => p.hasPosition)).length > 1;\n\n\n    let posDisplay = '';\n    if (multiLocation) {\n      if (ev.AbbreviatedLocationName) {\n        posDisplay = ev.AbbreviatedLocationName + '/';\n      } else if (ev.LocationAbbreviation) {\n        posDisplay = ev.LocationAbbreviation + '/';\n      }\n    }\n\n    if (multiDepartment) {\n      if (ev.AbbreviatedDepartmentName) {\n        posDisplay += ev.AbbreviatedDepartmentName + '/';\n      } else if (ev.DepartmentAbbreviation) {\n        posDisplay += ev.DepartmentAbbreviation + '/';\n      }\n    }\n\n    posDisplay += ev.PositionName;\n\n    return posDisplay;\n}\n\n// --------------------------------------------------------------------------------------\nconst TodayEventCard: React.FC<TodayEventCardProps> = ({ event, locations, onEdit }) => {\n  const { auth } = useContext(AuthorizedItemsContext);\n\n  if (!event || !auth || !auth.locations || auth.locations.length === 0) {\n    return <div />\n  }\n\n  const noEndTime = new Date(9000, 1,1);\n  const onClock = event.EventTypeId === EventType.Clock &&\n                  event.EventStatusId === EventStatus.Approved &&\n                  event.IsClockedIn;\n  const onBreak = event.EventTypeId === EventType.Clock &&\n                  event.EventStatusId === EventStatus.Approved &&\n                  event.EventBreaks.filter(b => !b.BreakEnd || b.BreakEnd > noEndTime).length > 0;\n  const timeColor: CSSProperties = statusTimeColor[event.EventStatusId];\n\n\n  const displayIcon = (onClock && onBreak) ? cafe : time;\n  const rangeDisplay = (onClock) ? (\n    <div className=\"time-row\"><IonIcon icon={displayIcon} /><span style={timeColor}>{getStartTime(event)}</span> {getDurationStringFromTimeSpan(event.EventDuration)} </div>\n  ) : (\n    <div className=\"time-row\"><span style={timeColor}>{getEventStartEnd(event)}</span> {getDurationStringFromTimeSpan(event.EventDuration)} </div>\n  );\n\n  // ------------------------------------------------------------------------------------\n  const onButtonClick = () => {\n    const eventEditAuth = getEventEditAuthorization(event.EventTypeId, event.EventStatusId, event.EmployeeId, event.EventStart, event.EventEnd, event.LocationId, event.DepartmentId!, event.PositionId, event.IsConfirmed, auth);\n    if (eventEditAuth === null) {\n      return;\n    }\n\n    onEdit(event, eventEditAuth);\n  };\n\n  const tag = event.Tag ? \" ~\" + event.Tag : \"\";\n\n  const eventTypeBorder = { borderLeft: `5px solid ${colorMap[event.EventTypeId]} `};\n  return (\n    <button\n      onClick={onButtonClick}\n      className=\"event\"\n    >\n      <div className=\"card-second-col\" style={eventTypeBorder}>\n        {rangeDisplay}\n        <div className=\"position-row\">\n          {getPosition(locations, event)} {tag}\n        </div>\n        {event.EventBreaks && event.EventBreaks.map(brk => (\n          <div key={brk.BreakStart} className=\"break-div\">\n            (B) {getBreakStartEnd(brk)}\n          </div>\n        ))}\n      </div>\n    </button>\n  );\n};\n\nexport default TodayEventCard;\n","import React from 'react';\nimport './TodayEventCard.scss';\nimport Skeleton from \"react-loading-skeleton\";\n\ninterface TodayEventCardProps {\n}\n\n// --------------------------------------------------------------------------------------\nconst TodayEventCardSkeleton: React.FC<TodayEventCardProps> = () => {\n  return (\n    <button\n      className=\"event\"\n    >\n      <div style={{paddingLeft: \"20px\", paddingRight: \"2px\"}}>\n        <Skeleton width={5} height={40} />\n      </div>\n      <div className=\"card-second-col\">\n        <Skeleton width={150} />\n        <div className=\"position-row\">\n          <Skeleton width={150} />\n        </div>\n      </div>\n    </button>\n  );\n};\n\nexport default TodayEventCardSkeleton;\n","import React, { useState, useEffect } from 'react';\nimport './ClockPanel.scss';\nimport { ApplicationUserContext } from '../../context/ApplicationUserContext';\nimport useDialogBox from \"../../hooks/useDialogBox\";\nimport { IonItem, IonLabel, IonList, IonListHeader, IonModal, IonSpinner } from \"@ionic/react\";\nimport {getDateString} from \"../../util/time-helper\";\nimport TodayDailyNoteCard from \"../TodayDailyNoteCard\";\nimport TodayEventCard from \"../TodayEventCard\";\nimport {EventInformation} from \"../../orbital-interfaces/TEC\";\nimport EditEventModal from \"../EditEvent/EditEventModal\";\nimport {RefresherEventDetail} from \"@ionic/core\";\nimport UserAPI from \"../../api/UserAPI\";\nimport useIonicRefresher from \"../../hooks/useIonicRefresher\";\nimport {initialHomePageData} from \"../../orbital-interfaces/authorized-items\";\nimport TodayEventCardSkeleton from \"../TodayEventCardSkeleton\";\nimport {EventEditAuthorization} from \"../EditEvent/EditEventAuthorization\";\n\ninterface ClockTodayTabProps {\n  refreshToggle: boolean;\n  onUpdate: () => void;\n}\n\nconst ClockTodayTab: React.FC<ClockTodayTabProps> = ({refreshToggle, onUpdate}) => {\n  const doRefresh = (e: CustomEvent<RefresherEventDetail>) => {\n    getData(e);\n  };\n\n  const [homePageData, setHomePageData] = useState(initialHomePageData);\n  const refresher = useIonicRefresher(doRefresh);\n  const { user, refreshGeoLocation } = React.useContext(ApplicationUserContext);\n  const dlg = useDialogBox();\n  const [showEventModal, setShowEventModal] = useState(false);\n  const [editEventId, setEditEventId] = useState(null as number | null);\n  const [eventEditAuth, setEventEditAuth] = useState(null as EventEditAuthorization | null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // ------------------------------------------------------------------------------------\n  const onEventClick = (ev: EventInformation, newEventEditAuth: EventEditAuthorization | null) => {\n    setEditEventId(ev.ScheduleEventId);\n    setEventEditAuth(newEventEditAuth);\n    setShowEventModal(true);\n  };\n\n  // ------------------------------------------------------------------------------------\n  function getData(e?: CustomEvent<RefresherEventDetail>) {\n    refreshGeoLocation().then(() => {\n      UserAPI.getHomePageData(user).then(response => {\n        setHomePageData(response);\n        setIsLoading(false);\n        if (e) {\n          e.detail.complete();\n          onUpdate();\n        }\n      });\n    });\n  }\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    // eslint-disable-next-line\n    if (user && user.isLoggedin) {\n      setIsLoading(true);\n      getData(undefined);\n    }\n\n    // eslint-disable-next-line\n  }, [refreshToggle]);\n\n\n  // ------------------------------------------------------------------------------------\n  const onEventUpdated = () => {\n    getData(undefined);\n    setShowEventModal(false);\n  };\n\n  return (\n    <>\n      <IonList className=\"todaylist\" lines=\"none\">\n        <IonListHeader mode=\"ios\">\n          <IonLabel className=\"label\"  mode=\"ios\">{getDateString(new Date())}</IonLabel>\n        </IonListHeader>\n        {isLoading && ( (homePageData.dailyNotes && homePageData.dailyNotes.length > 0) || (homePageData.currentEvents && homePageData.currentEvents.length > 0)) && (\n          <IonSpinner className=\"center\" name=\"dots\" />\n        )}\n\n        {isLoading && ( (!homePageData.dailyNotes || homePageData.dailyNotes.length === 0) || (!homePageData.currentEvents || homePageData.currentEvents.length === 0)) && (\n          <>\n            <TodayEventCardSkeleton/>\n            <TodayEventCardSkeleton/>\n          </>\n        )}\n\n\n        {homePageData.dailyNotes && homePageData.dailyNotes.map(note => (\n          <IonItem key={note.DailyNoteId} >\n            <TodayDailyNoteCard authItems={homePageData.auth}  oneLine={false} dailyNote={note} />\n          </IonItem>\n        ))}\n        {homePageData.currentEvents.map( ev => (\n          <IonItem key={ev.ScheduleEventId}>\n            <TodayEventCard onEdit={onEventClick} locations={homePageData.auth.locations} event={ev} />\n          </IonItem>\n        ))}\n      </IonList>\n      <IonModal\n        isOpen={showEventModal}\n        onDidDismiss={() => setShowEventModal(false)}\n      >\n        <EditEventModal\n          isOpen={showEventModal}\n          auth={homePageData.auth}\n          onCancelModal={() => setShowEventModal(false)}\n          onDismissModal={() => onEventUpdated()}\n          scheduleEventId={editEventId}\n          eventEditAuth={eventEditAuth!}\n        />\n      </IonModal>\n\n\n      {dlg.alertBoxJsx}\n      {refresher.ionicRefresherJsx}\n    </>\n\n  );\n};\n\nexport default ClockTodayTab;\n","import React, { useState } from 'react';\nimport { IonFooter, IonSegment, IonSegmentButton, IonHeader, IonToolbar, IonTitle, IonContent, IonPage, IonButtons, IonMenuButton } from '@ionic/react';\nimport './ClockPage.scss';\nimport ClockPanel from '../components/ClockPageComponents/ClockPanel';\nimport PayrollPeriodsTab from \"../components/ClockPageComponents/PayrollPeriodsTab\";\nimport ClockTodayTab from \"../components/ClockPageComponents/ClockTodayTab\";\n\nconst ClockPage: React.FC = () => {\n  const [segment, setSegment] = useState<'today' | 'pay-periods'>('today');\n  const [refreshToggle, setRefreshToggle] = useState(false);\n  const [refreshTimeClockToggle, setRefreshTimeClockToggle] = useState(false);\n\n  // ------------------------------------------------------------------------------------\n  const onClockPanelUpdate = () => {\n    setRefreshToggle(!refreshToggle);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onTodayPanelUpdate = () => {\n    setRefreshTimeClockToggle(!refreshTimeClockToggle);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onSegmentChange = (segmentName: any) => {\n    setSegment(segmentName);\n  };\n\n  return (\n    <IonPage id=\"clock-page\" >\n      <IonHeader mode=\"ios\">\n        <IonToolbar  mode=\"md\">\n          <IonButtons slot=\"start\">\n            <IonMenuButton />\n          </IonButtons>\n          <IonTitle slot=\"start\">Clock</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonSegment mode=\"md\" onIonChange={(e) => onSegmentChange(e.detail.value)}>\n        <IonSegmentButton mode=\"md\" value=\"today\" checked={segment === 'today'}>\n          TODAY\n        </IonSegmentButton>\n        <IonSegmentButton\n          mode=\"md\"\n          value=\"pay-periods\"\n          checked={segment === 'pay-periods'}\n        >\n          PAY PERIOD\n        </IonSegmentButton>\n      </IonSegment>\n\n      <IonContent className=\"outer-content\">\n\n        {segment === \"today\" && (\n          <ClockTodayTab\n            refreshToggle={refreshToggle}\n            onUpdate={onTodayPanelUpdate}\n          />\n        )}\n\n        {segment === 'pay-periods' && (\n          <PayrollPeriodsTab\n            date={null}\n          />\n        )}\n\n      </IonContent>\n\n      <IonFooter className=\"footer\">\n        {segment === \"today\" && (\n          <ClockPanel\n            refreshToggle={refreshTimeClockToggle}\n            onUpdate={onClockPanelUpdate}\n          />\n        )}\n      </IonFooter>\n\n    </IonPage>\n  );\n};\n\nexport default ClockPage;\n","import React from 'react';\nimport { Message } from '../../orbital-interfaces/Message';\nimport { messageDateString } from '../../util/time-helper';\nimport './MessageItem.scss';\nimport {bookmark} from 'ionicons/icons';\nimport {IonIcon} from \"@ionic/react\";\n\ninterface MessageItemProps {\n  message: Message;\n  onMessageClick: () => void;\n}\n\n// ==============================================================================\nconst MessageItem: React.FC<MessageItemProps> = ({ message, onMessageClick }) => {\n  if (!message) {\n    return <div />\n  }\n\n  const fontWeightForSubject = (message.isViewed) ? \"normal\" : \"bold\";\n\n  return (\n    <button\n      className=\"message\"\n      onClick={onMessageClick}\n    >\n      <div className=\"top-line\">\n        <span className=\"subject\" style={{fontWeight: fontWeightForSubject}}>\n          {(message.isPinned) && (\n            <IonIcon icon={bookmark} style={{color: \"gray\"}} />\n          )}\n          {message.subject}\n        </span>\n        <span className=\"time\">{messageDateString(message.deliveryDateTime)} </span>\n      </div>\n      <div className=\"bottom-line\">\n        {message.previewLine}\n      </div>\n    </button>\n  );\n};\n\nexport default MessageItem;\n","import React, {useState} from 'react';\nimport {IonButton, IonButtons, IonIcon, IonContent, IonFooter, IonHeader, IonItem, IonLabel, IonSelect, IonSelectOption, IonTitle, IonToolbar} from '@ionic/react';\nimport { arrowRoundBack } from 'ionicons/icons';\nimport '../SchedulePageComponents/ScheduleFilterModal.scss';\nimport ToggleListEx from \"../ToggleListEx\";\nimport {NotificationTypeModel} from \"../../orbital-interfaces/NotificationTypeModel\";\n\nexport interface FilterData {\n  msgTypes: { messageTypeId: number, name: string}[];\n  employees: { employeeId: number, name: string}[];\n}\n\nexport interface FilterResult {\n  msgTypeIds: number[];\n  employeeId: number;\n}\n\ninterface MessagesFilterModalProps {\n  onDismissModal: (result: FilterResult) => void;\n  onCancelModal: () => void;\n  filterData: FilterData;\n}\n\nconst MessagesFilterModal: React.FC<MessagesFilterModalProps> = ({ onDismissModal, onCancelModal, filterData}) => {\n  const [filterResult, setFilterResult] = useState({\n    msgTypeIds: filterData.msgTypes ? filterData.msgTypes.map(mt => mt.messageTypeId) : [] as number[],\n    employeeId: -1\n  } as FilterResult);\n\n  // --------------------------------------------------------------------------------------\n  const onCloseModal = () => {\n    onDismissModal(filterResult);\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onCancel = () => {\n    onCancelModal();\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onResetAll = () => {\n    setFilterResult({msgTypeIds: filterData.msgTypes.map(mt => mt.messageTypeId), employeeId: -1});\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onMessageTypeChange = (newSelection: NotificationTypeModel[]) => {\n    setFilterResult({ ...filterResult, msgTypeIds: newSelection.map(mt => mt.id)});\n  };\n\n  return (\n    <>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonButton onClick={onCancel}>\n                <IonIcon icon={arrowRoundBack} mode=\"md\" slot=\"icon-only\" />\n            </IonButton>\n          </IonButtons>\n          <IonTitle>\n            Filter\n          </IonTitle>\n          <IonButtons slot=\"end\">\n            <IonButton onClick={onResetAll}>\n              RESET ALL\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent class=\"outer-content\">\n        <IonItem>\n          <IonLabel>From</IonLabel>\n          <IonSelect\n            value={filterResult.employeeId}\n            onIonChange={(e) => setFilterResult({...filterResult, employeeId: e.detail.value})}\n            interface=\"action-sheet\">\n            <IonSelectOption key={-1} value={-1}>EVERYONE</IonSelectOption>\n            {filterData && filterData.employees && filterData.employees.map(emp => (\n              <IonSelectOption\n                key={emp.employeeId}\n                value={emp.employeeId}>\n                {emp.name}\n              </IonSelectOption>\n            ))}\n          </IonSelect>\n        </IonItem>\n        <IonItem>\n          <IonLabel>Message Types</IonLabel>\n        </IonItem>\n        {(filterData.msgTypes) && (\n          <ToggleListEx\n            list={filterData.msgTypes.map(mt => { return { id: mt.messageTypeId, name: mt.name, description: \"\"}})}\n            selected={filterData.msgTypes.filter(mt => filterResult.msgTypeIds.includes(mt.messageTypeId)).map(mt => { return { id: mt.messageTypeId, name: mt.name, description: \"\"}})}\n            selectionChanged={onMessageTypeChange}\n          />\n        )}\n\n      </IonContent>\n\n      <IonFooter className=\"outer-content footer\">\n          <IonButton\n            className=\"apply-button\"\n            expand=\"block\"\n            onClick={onCloseModal}>\n            APPLY FILTER\n          </IonButton>\n          <IonButton\n            className=\"apply-button\"\n            expand=\"block\"\n            onClick={onCancel}\n            color=\"tertiary\"\n          >\n            BACK\n          </IonButton>\n\n      </IonFooter>\n    </>\n  )\n};\n\nexport default MessagesFilterModal;\n","import { KeyedCollection } from './../util/KeyedCollection';\n\nexport interface MessageType {\n  id: number;\n  typeName: string;\n  description: string;\n}\n\nconst types: MessageType[] = [\n  { id: 1, typeName: \"CoverRequestMessage\", description: \"Cover-Request\"},\n  { id: 2, typeName: \"CoverApprovedMessage\", description: \"Cover-Approved\"},\n  { id: 3, typeName: \"DirectCoverRequestMessage\", description: \"Direct Cover-Request\"},\n  { id: 5, typeName: \"ShiftRequestMessage\", description: \"Shift-Request\"},\n  { id: 6, typeName: \"ShiftRequestDeniedMessage\", description: \"Shift-Denied\"},\n  { id: 10, typeName: \"ShiftRequestReceivedMessage\", description: \"Shift-Request Received\"},\n  { id: 20, typeName: \"NoClockInAlertMessage\", description: \"No Clock In Alert\"},\n  { id: 21, typeName: \"NoClockOutAlertMessage\", description: \"No Clock Out Alert\"},\n  { id: 22, typeName: \"LateClockInMessage\", description: \"Late Clock In Alert\"},\n  { id: 23, typeName: \"EarlyClockOutAlertMessage\", description: \"Early Clock Out Alert\"},\n  { id: 50, typeName: \"ScheduleEventUpdatedMessage\", description: \"Schedule Event Updated\"},\n  { id: 60, typeName: \"PublishedScheduleUpdatedMessage\", description: \"Published Schedule Updated\"},\n  { id: 80, typeName: \"PasswordRecoveryMessage\", description: \"Password Recovery\"},\n  { id: 81, typeName: \"VerifyCellPhoneMessage\", description: \"Verify Cell Phone\"},\n  { id: 82, typeName: \"VerifyCellPhoneCompleteMessage\", description: \"Verify Cell Phone Completed\"},\n  { id: 83, typeName: \"VerifyEmailMessage\", description: \"Verify Email\"},\n  { id: 100, typeName: \"CustomMessage\", description: \"Custom Messages\"},\n  { id: 101, typeName: \"WeeklyScheduleForEmployeeMessage\", description: \"Employee Weekly Schedule\"},\n  { id: 555, typeName: \"WelcomeMessage\", description: \"Welcome\"},\n  { id: 603, typeName: \"UpdatePaymentInformationMessage\", description: \"Update Payment Information\"},\n  { id: 700, typeName: \"UpgradeSubscriptionMessage\", description: \"Upgrade Subscription (to Orbital)\"},\n  { id: 701, typeName: \"FailedSignupMessage\", description: \"Failed Signup\"},\n  { id: 702, typeName: \"GenericErrorMessage\", description: \"Error Message\"},\n  { id: 704, typeName: \"SignupMessage\", description: \"Signup Completed\"},\n  { id: 705, typeName: \"DatesOutOfSyncMessage\", description: \"Dates Out of Sync\"},\n  { id: 708, typeName: \"CancelSubscriptionMessage\", description: \"Canceled Subscription  \"}\n];\n\nexport const messageTypes = new KeyedCollection<MessageType>();\n\ntypes.map(t => messageTypes.Add(\"\" + t.id, t));\n\n","import { Message } from '../orbital-interfaces/Message';\nimport { ApplicationUser } from '../context/ApplicationUserContext';\nimport apiHelper from './OrbitalApiHelper';\n\n\n// ----------------------------------------------------------------------------------------------\nconst getUserMessage = async (user: ApplicationUser, msgId: number) => {\n  return await apiHelper.get(user, 'api/v2/employee/messages/' + msgId) as Message;\n};\n\n\n// ----------------------------------------------------------------------------------------------\nconst getUserMessages = async (user: ApplicationUser) => {\n  return await apiHelper.get(user, 'api/v2/employee/messages') as Message[];\n};\n\n// ----------------------------------------------------------------------------------------------\nconst getReadCount = async (user: ApplicationUser, msgId: number) => {\n  return await apiHelper.get(user, 'api/v1/employee/messages/' + msgId + '/readCount') as number;\n};\n\n// ----------------------------------------------------------------------------------------------\nconst setIsPinned = async(user: ApplicationUser, msgId: number, isPinned: boolean) => {\n  return await apiHelper.post(\n    user,\n    'api/v1/employee/messages/' + msgId + '/togglePin',\n    {isPinned}\n  );\n};\n\n// ----------------------------------------------------------------------------------------------\nconst setIsViewed = async(user: ApplicationUser, msgId: number, isViewed: boolean) => {\n  return await apiHelper.post(user,'api/v1/employee/messages/' + msgId + '/toggleView',{isViewed});\n};\n\n// ----------------------------------------------------------------------------------------------\nconst deleteMessage = async(user: ApplicationUser, msgId: number) => {\n  return await apiHelper.del(user, 'api/v1/employee/messages/' + msgId);\n};\n\nexport default {\n  getUserMessage,\n  getUserMessages,\n  getReadCount,\n  setIsPinned,\n  setIsViewed,\n  deleteMessage\n}\n","import { IonAlert } from '@ionic/react';\nimport React, { useState } from \"react\";\n\nfunction useYesOrCancelDialogBox() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [alertData, setAlertData] = useState({message: \"\", onCancel: () => {}, onYes: () => {}});\n\n  const showDialog = (message: string, onYes: () => void, onCancel: () => void) => {\n    setAlertData({\n      message,\n      onYes,\n      onCancel\n    });\n\n    setIsOpen(true);\n  };\n\n  const dialogJsx = (\n    <IonAlert\n      isOpen={isOpen}\n      onDidDismiss={() => { setIsOpen(false); alertData.onCancel();}}\n      message={alertData.message}\n      buttons={[\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: alertData.onCancel\n        },\n\n        {\n          text: 'Yes',\n          handler: alertData.onYes\n        }\n      ]}\n    />\n  );\n\n  return {\n    showDialog,\n    dialogJsx\n  }\n}\n\nexport default useYesOrCancelDialogBox;\n","import React, {useEffect, useState} from 'react';\nimport { IonButton, IonButtons, IonIcon, IonContent, IonFooter, IonHeader, IonGrid, IonRow, IonCol, IonToolbar, } from '@ionic/react';\nimport { arrowRoundBack, bookmark, trash } from 'ionicons/icons';\nimport '../EditEvent/EditEventModal.scss';\nimport { ApplicationUserContext } from '../../context/ApplicationUserContext';\nimport useDialogBox from '../../hooks/useDialogBox';\nimport {Message} from \"../../orbital-interfaces/Message\";\nimport {AuthorizedItemsContext} from \"../../context/AuthorizedItemsContext\";\nimport {getMessageDeliveryTimeString} from '../../util/time-helper';\nimport scheduleEventAPI from '../../api/ScheduleEventsAPI';\nimport messageAPI from '../../api/MessageAPI';\nimport {ScheduleEvent} from \"../../orbital-interfaces/ScheduleEvent\";\nimport EventReqeustEditor from '../EditEvent/editor/EventRequestEditor';\nimport './ViewMessageModal.scss';\nimport { MessagesReducerAction } from '../../pages/MessagesPage';\nimport useYesOrCancelDialogBox from '../../hooks/useYesOrCancelDialogBox';\nimport {getEventEditAuthorization, EventEditAuthorization} from '../EditEvent/EditEventAuthorization';\n\ninterface ViewMessageModalProps {\n  message: Message | null;\n  onCloseModal: (msg: string | null) => void;\n  updateMessages: React.Dispatch<MessagesReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst ViewMessagetModal: React.FC<ViewMessageModalProps> = ({ message, onCloseModal, updateMessages }) => {\n  const dlg = useDialogBox();\n  const yesCancelDlg = useYesOrCancelDialogBox();\n  const { user } = React.useContext(ApplicationUserContext);\n  const { auth } = React.useContext(AuthorizedItemsContext);\n  const [ scheduleEvent, setScheduleEvent ] = useState(null as ScheduleEvent | null);\n  const [ eventEditAuth, setEventEditAuth] = useState(null as EventEditAuthorization | null);\n  const [ readCount, setReadCount] = useState(null as number | null);\n  const [ usageText, setUsageText] = useState(null as string | null);\n  const [ pinned, setPinned] = useState(false);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!message) {\n      return;\n    }\n\n    if (message.scheduleEventId) {\n      scheduleEventAPI.getScheduleEvent(user, message.scheduleEventId).then(event => {\n        if (event) {\n          setScheduleEvent(event);\n          const newEventEditAuth = getEventEditAuthorization(\n            event.EventTypeId,\n            event.EventStatusId,\n            event.EmployeeId,\n            event.EventStart,\n            event.EventEnd,\n            event.LocationId,\n            event.DepartmentId,\n            event.PositionId,\n            (event.ConfirmedBy !== null && event.ConfirmedBy !== undefined && event.ConfirmedBy !== ''),\n            auth);\n          setEventEditAuth(newEventEditAuth);\n        }\n      });\n    } else {\n      if (scheduleEvent) {\n        setScheduleEvent(null);\n        setUsageText(null);\n      }\n    }\n\n    messageAPI.getReadCount(user, message.messageId).then(newReadCount => {\n      setReadCount(newReadCount);\n    });\n\n    if (!message.isViewed) {\n      messageAPI.setIsViewed(user, message.messageId, true).then(() => {\n        updateMessages({type: \"UPDATE-VIEWED\", msgId: message.messageId, isViewed: true});\n      });\n    }\n\n    setPinned(message.isPinned);\n\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [message?.messageId]);\n\n  // --------------------------------------------------------------------------------------\n  const onPinnedClick = () => {\n    const newPinValue = !pinned;\n    messageAPI.setIsPinned(user, message!.messageId, newPinValue).then(() => {\n      setPinned(newPinValue);\n      updateMessages({ type: 'UPDATE-PINNED', msgId: message!.messageId, isPinned: newPinValue});\n    });\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onDeleteClick = () => {\n    yesCancelDlg.showDialog(\"Delete this message?\", () => {\n      messageAPI.deleteMessage(user, message!.messageId).then(() => {\n        updateMessages({ type: 'DELETE', msgId: message!.messageId});\n        onCancel(\"Message Deleted\");\n      });\n    }, () => {});\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onCancel = (msg: string | null) => {\n    onCloseModal(msg);\n  };\n\n  if (!message || !auth || !auth.locations || auth.locations.length === 0) {\n    return (\n      <>\n        <div>Loading</div>\n        {dlg.alertBoxJsx}\n      </>\n    )\n  } else {\n    return (\n      <>\n        <IonHeader>\n          <IonToolbar>\n            <IonButtons slot=\"start\">\n              <IonButton onClick={() => { onCancel(null)}}>\n                <IonIcon icon={arrowRoundBack} mode=\"md\" slot=\"icon-only\" />\n              </IonButton>\n            </IonButtons>\n            <IonButtons slot=\"end\">\n              <IonButton\n                onClick={() => { onPinnedClick()}}\n              >\n                <IonIcon\n                  icon={bookmark}\n                  style={pinned ? { color: \"black\"} : { color: \"lightgray\"}}\n                />\n              </IonButton>\n              <IonButton\n                onClick={() => { onDeleteClick() }}\n              >\n                <IonIcon icon={trash} />\n              </IonButton>\n            </IonButtons>\n          </IonToolbar>\n        </IonHeader>\n\n        <IonContent class=\"outer-content\">\n          <IonGrid>\n            <IonRow>\n              <IonCol size=\"12\">\n                {message!.subject}<br/>\n                From: {message!.fromEmployeeFirstName} {message!.fromEmployeeLastName}\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol size=\"9\" style={{paddingLeft: \"15px\", color: \"lightgray\"}}>{getMessageDeliveryTimeString(message!.deliveryDateTime)}</IonCol>\n              <IonCol size=\"3\" style={{color: \"lightgray\"}}>\n                {(readCount !== null) && (\n                  <span>{readCount} Read</span>\n                )}\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol size=\"1\" />\n              <IonCol size=\"9\">\n                 <div dangerouslySetInnerHTML={{ __html: message?.messageText}} />\n              </IonCol>\n            </IonRow>\n\n            {(usageText !== null) && (\n              <IonRow>\n                <IonCol size=\"12\">\n                  {usageText}\n                </IonCol>\n              </IonRow>\n            )}\n\n          </IonGrid>\n\n          {dlg.alertBoxJsx}\n          {yesCancelDlg.dialogJsx}\n\n        </IonContent>\n\n        <IonFooter className=\"outer-content footer\">\n          {(scheduleEvent !== null) && (\n            <EventReqeustEditor\n              auth={auth}\n              eventEnd={scheduleEvent.EventEnd}\n              eventType={scheduleEvent.EventTypeId}\n              eventStatus={scheduleEvent.EventStatusId}\n              eventEmployeeId={scheduleEvent.EmployeeId}\n              eventPositionId={scheduleEvent.PositionId}\n              scheduleEventId={scheduleEvent.ScheduleEventId}\n              locationId={scheduleEvent.LocationId}\n              update={() => {}}\n              cancelEditModal={onCancel}\n              eventEditAuth={eventEditAuth}\n              setUsageText={setUsageText}\n            />\n          )}\n          <IonButton\n            className=\"apply-button\"\n            expand=\"block\"\n            onClick={() => { onCancel(null)}}\n            color=\"tertiary\"\n          >\n            BACK\n          </IonButton>\n        </IonFooter>\n      </>\n    );\n\n  }\n};\n\nexport default ViewMessagetModal;\n","import React, {useState, useEffect, useReducer} from 'react';\nimport { IonModal, IonHeader, IonButton, IonIcon, IonToolbar, IonTitle, IonContent, IonPage, IonButtons, IonMenuButton } from '@ionic/react';\nimport './MessagesPage.scss';\nimport { funnel, add } from 'ionicons/icons';\nimport useIonicRefresher from '../hooks/useIonicRefresher';\nimport { Message } from '../orbital-interfaces/Message';\nimport MessageItem from '../components/MessagesPageComponents/MessageItem';\nimport MessagesFilterModal, { FilterData, FilterResult } from \"../components/MessagesPageComponents/MessagesFilterModal\";\nimport { messageTypes } from '../orbital-interfaces/MessageTypes';\nimport arrayHelper from '../util/array-helper';\nimport messageApi from '../api/MessageAPI';\nimport { ApplicationUserContext } from '../context/ApplicationUserContext';\nimport { RefresherEventDetail } from '@ionic/core';\nimport ViewMessagetModal from \"../components/MessagesPageComponents/ViewMessageModal\";\nimport useSimpleToast from \"../hooks/useSimpleToast\";\nimport {RouteComponentProps} from \"react-router\";\nimport Skeleton from \"react-loading-skeleton\";\n\nconst initialMessages: Message[] = [];\n\nexport type MessagesReducerAction =\n  | { type: 'LOADED-FROM-API', data: Message[]}\n  | { type: 'CLEAR'}\n  | { type: 'UPDATE-PINNED', msgId: number, isPinned: boolean }\n  | { type: 'UPDATE-VIEWED', msgId: number, isViewed: boolean }\n  | { type: 'DELETE', msgId: number }\n\n\n// ------------------------------------------------------------------------------------------------\nexport const messagesReducer = (currentState: Message[], action: MessagesReducerAction): Message[] => {\n  console.log(\"REDUCER: ACTION =\", action.type);\n\n  switch (action.type) {\n    case 'LOADED-FROM-API':\n      return action.data;\n    case 'CLEAR':\n      return [] as Message[];\n    case 'UPDATE-PINNED':\n      return currentState.map(m =>\n        (m.messageId === action.msgId)\n          ? { ...m, isPinned: action.isPinned }\n          : m\n      );\n    case 'UPDATE-VIEWED':\n      return currentState.map(m => {\n        return (m.messageId === action.msgId)\n          ? { ...m, isViewed: action.isViewed }\n          : m;\n      });\n    case 'DELETE':\n      return currentState.filter(m => m.messageId !== action.msgId);\n  }\n};\n\n\ninterface MessagesPageProps extends RouteComponentProps<{\n  messageId?: string\n}> {}\n\n\nconst MessagesPage: React.FC<MessagesPageProps> = ({match, history}) => {\n  const { user } = React.useContext(ApplicationUserContext);\n\n  // ------------------------------------------------------------------------------------\n  const doRefresh = (e: CustomEvent<RefresherEventDetail>) => {\n    updateMessages({ type: 'CLEAR'});\n    refreshMessages(e);\n  };\n\n  const refresher = useIonicRefresher(doRefresh);\n  const [showFilterModal, setShowFilterModal] = useState(false);\n  const [isLoadingMessages, setIsLoadingMessages] = useState(true);\n  const [messages, updateMessages] = useReducer(messagesReducer, []);\n  const [filteredMessages, setFilteredMessages] = useState(initialMessages);\n  const [filterData, setFilterData] = useState({} as FilterData);\n  const [filterResult, setFilterResult] = useState({} as FilterResult);\n  const [viewMessage, setViewMessage] = useState(null as Message | null);\n  const toast = useSimpleToast();\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (user && user.isLoggedin) {\n      return refreshMessages(undefined);\n    }\n\n    // eslint-disable-next-line\n  }, [user]);\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    filterMessages(filterResult, messages);\n\n    // eslint-disable-next-line\n  }, [messages]);\n\n  useEffect(() => {\n    if (match.params.messageId && viewMessage === null) {\n      messageApi.getUserMessage(user, parseInt(match.params.messageId)).then(msg => {\n        if (!msg) {\n          toast.showToast(\"The requested message has been removed\");\n          history.push('/tabs/messages/');\n        }\n\n        setViewMessage(msg);\n      });\n    }\n\n    // eslint-disable-next-line\n  }, [match.params.messageId]);\n\n  // ------------------------------------------------------------------------------------\n  const refreshMessages = (e?: CustomEvent<RefresherEventDetail>) => {\n    let isSubscribed = true;\n    setIsLoadingMessages(true);\n    messageApi.getUserMessages(user).then(msgs => {\n      if (!isSubscribed) {\n        return;\n      }\n\n      updateMessages({ type: 'LOADED-FROM-API', data: msgs  });\n      filterMessages(filterResult, msgs);\n      setIsLoadingMessages(false);\n\n      if (e) {\n        e.detail.complete();\n      }\n    });\n\n    return () => { isSubscribed = false };\n  };\n\n  // ------------------------------------------------------------------------------------\n  const filterClose = (updatedFilter: FilterResult) => {\n    setFilterResult(updatedFilter);\n    filterMessages(updatedFilter, messages);\n    setShowFilterModal(false);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const filterMessages = (f: FilterResult, msgs: Message[]) => {\n    if (!f || !f.msgTypeIds) {\n      setFilteredMessages(msgs);\n      return;\n    }\n\n    if (f.employeeId !== -1) {\n      if (f.msgTypeIds.length > 0) {\n        setFilteredMessages(msgs.filter(m =>\n          m.fromEmployeeId === f.employeeId &&\n          arrayHelper.contains(f.msgTypeIds, m.messageTypeId)\n        ));\n      } else {\n        setFilteredMessages(msgs.filter(m => m.fromEmployeeId === f.employeeId));\n      }\n    } else if (f.msgTypeIds.length > 0) {\n      console.log(f.msgTypeIds);\n      setFilteredMessages(msgs.filter(m => arrayHelper.contains(f.msgTypeIds, m.messageTypeId)));\n    } else {\n      setFilteredMessages(msgs);\n    }\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onCloseMessageModal = (msg: string | null) => {\n    setViewMessage(null);\n    if (msg) {\n      toast.showToast(msg);\n    }\n  };\n\n  // ------------------------------------------------------------------------------------\n  const showFilter = () => {\n    const employees = arrayHelper.uniqueObject(\n      messages.map(msg => { return { employeeId: msg.fromEmployeeId, name: msg.fromEmployeeFirstName + \" \" + msg.fromEmployeeLastName}}),\n      (x,y) => {return x.employeeId === y.employeeId});\n    const msgTypes =  arrayHelper.uniqueObject(\n      messages.map(msg => { return { messageTypeId: msg.messageTypeId, name: messageTypes.Item(String(msg.messageTypeId)).description }}),\n      (x,y) => { return x.messageTypeId === y.messageTypeId} );\n\n    setFilterData({ msgTypes, employees});\n\n    setShowFilterModal(true);\n  };\n\n  return (\n    <IonPage id=\"clock-page\" >\n      <IonHeader mode=\"ios\">\n        <IonToolbar  mode=\"md\">\n          <IonButtons slot=\"start\">\n            <IonMenuButton />\n          </IonButtons>\n          <IonTitle slot=\"start\">Messages</IonTitle>\n          <IonButtons slot=\"end\">\n            <IonButton>\n              <IonIcon icon={add} mode=\"md\" slot=\"icon-only\" />\n            </IonButton>\n            <IonButton onClick={showFilter}>\n              <IonIcon icon={funnel} mode=\"ios\" slot=\"icon-only\" />\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent className=\"outer-content\">\n        {refresher.ionicRefresherJsx}\n        {isLoadingMessages && (\n          <>\n          {[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map(x => {\n            return (\n              <div key={x} style={{margin: \"10px 8px\"}}>\n                <Skeleton width={360} height={45}  />\n              </div>\n            )\n          })}\n          </>\n        )}\n        {!isLoadingMessages && filteredMessages.length === 0 && (\n          <div>\n            No Messages to show\n          </div>\n        )}\n        <div className=\"message-list\">\n          {!isLoadingMessages && filteredMessages.length > 0 && filteredMessages.filter(m => m.isPinned).map(msg => (\n            <MessageItem key={msg.messageId} message={msg} onMessageClick={() => setViewMessage(msg)} />\n          ))}\n        </div>\n        <div style={{height: \"1px\", borderTop: \"1px solid lightgray\", width: \"100%\"}} />\n        <div className=\"message-list\">\n          {!isLoadingMessages && filteredMessages.length > 0 && filteredMessages.filter(m => !m.isPinned).map(msg => (\n            <MessageItem key={msg.messageId} message={msg} onMessageClick={() => setViewMessage(msg)} />\n          ))}\n        </div>\n      </IonContent>\n\n      <IonModal\n        isOpen={showFilterModal}\n        >\n        <MessagesFilterModal\n          filterData={filterData}\n          onDismissModal={filterClose}\n          onCancelModal={() => setShowFilterModal(false)}\n        />\n      </IonModal>\n\n      <IonModal\n        isOpen={viewMessage !== null}\n      >\n        <ViewMessagetModal\n          message={viewMessage}\n          updateMessages={updateMessages}\n          onCloseModal={onCloseMessageModal}\n        />\n      </IonModal>\n\n      {toast.simpleToastJsx}\n\n    </IonPage>\n  );\n};\n\nexport default MessagesPage;\n","import React  from 'react';\nimport { IonTabs, IonRouterOutlet, IonTabBar, IonTabButton, IonIcon, IonLabel } from '@ionic/react';\nimport { Route, Redirect } from 'react-router';\nimport { calendar, chatboxes, clock } from 'ionicons/icons';\nimport SchedulePage from './SchedulePage';\nimport ClockPage from './ClockPage';\nimport MessagesPage from './MessagesPage';\n\ninterface MainTabsProps { }\n\nconst MainTabs: React.FC<MainTabsProps> = () => {\n  return (\n    <IonTabs>\n      <IonRouterOutlet>\n        <Redirect exact={true} path=\"/tabs\" to=\"/tabs/schedule\" />\n\n        {/* KENKEN: TODO: Bring the dashboard back in.\n        <Route path=\"/tabs/dashboard\" render={() => <Dashboard />} exact={true} />\n        */}\n\n        <Route path=\"/tabs/schedule/:scheduleEventId\" render={(routeProps) => (\n          <SchedulePage {...routeProps} />\n        )} />\n\n        <Route path=\"/tabs/schedule\" render={(routeProps) => (\n          <SchedulePage {...routeProps} />\n        )} exact={true} />\n\n        <Route path=\"/tabs/messages/:messageId\" render={(routeProps) => (\n          <MessagesPage {...routeProps} />\n        )} />\n\n        <Route path=\"/tabs/messages\" render={(routeProps) => (\n          <MessagesPage {...routeProps} />\n        )} exact={true} />\n\n\n        <Route path=\"/tabs/clock\" render={() => <ClockPage />} exact={true} />\n      </IonRouterOutlet>\n      <IonTabBar slot=\"bottom\">\n        {/*\n        <IonTabButton tab=\"dashboard\" href=\"/tabs/dashboard\">\n          <IonIcon src=\"assets/img/OS Symbol - 8pt Rounded Black.svg\" />\n          <IonLabel>Dashboard</IonLabel>\n        </IonTabButton>\n        */}\n        <IonTabButton tab=\"schedule\" href=\"/tabs/schedule\">\n          <IonIcon icon={calendar} />\n          <IonLabel>Schedule</IonLabel>\n        </IonTabButton>\n        <IonTabButton tab=\"clock\" href=\"/tabs/clock\">\n          <IonIcon icon={clock} />\n          <IonLabel>Clock</IonLabel>\n        </IonTabButton>\n        <IonTabButton tab=\"map\" href=\"/tabs/messages\">\n          <IonIcon icon={chatboxes} />\n          <IonLabel>Messages</IonLabel>\n        </IonTabButton>\n      </IonTabBar>\n    </IonTabs>\n  );\n};\n\nexport default MainTabs;\n","import React from 'react';\nimport { Redirect } from 'react-router';\nimport MainTabs from './../pages/MainTabs';\nimport { ApplicationUserContext } from '../context/ApplicationUserContext';\n\ninterface StateProps {\n}\n\nconst AuthGate: React.FC<StateProps> = () => {\n  const { user } = React.useContext(ApplicationUserContext);\n\n  if (user.loading) {\n    return (\n      <div>Loading user info</div>\n    );\n  }\n\n  if (user.isLoggedin) {\n    return (\n      <MainTabs />\n    );\n  }\n\n  return (\n    <Redirect to=\"/login\" />\n  );\n};\n\nexport default AuthGate;\n","import React from 'react';\nimport { IonContent, IonPage, useIonViewDidEnter } from '@ionic/react';\nimport { RouteComponentProps } from 'react-router';\nimport { ApplicationUserContext } from '../context/ApplicationUserContext';\nimport './Logout.scss';\nimport { log } from '../util/logger';\nimport {AuthorizedItemsContext} from \"../context/AuthorizedItemsContext\";\n\ninterface LogoutProps extends RouteComponentProps {}\n\nconst Logout: React.FC<LogoutProps> = ({history}) => {\n  const {user, logout } = React.useContext(ApplicationUserContext);\n  const {clearAuth} = React.useContext(AuthorizedItemsContext);\n\n  useIonViewDidEnter(() => {\n    log('logout', { user: user.username});\n    clearAuth();\n    logout().then(() => {\n      setTimeout(() => {\n        history.push('/login', {direction: 'none'});\n        history.goForward();\n      }, 1500);\n    });\n  });\n\n  return (\n    <IonPage id=\"logout-page\">\n      <IonContent className=\"logout-content\">\n\n        <div className=\"login-logo\">\n            <img className=\"logo\" src=\"assets/img/OS Logo - 4pt Rounded _ 2 Tone Orange.svg\" alt=\"Orbital Shift Logo\" />\n        </div>\n\n        <div className=\"label\">You were logged out</div>\n\n      </IonContent>\n\n    </IonPage>\n  );\n};\n\nexport default Logout;\n","import React, {useEffect} from 'react';\nimport { Route, BrowserRouter, Redirect } from 'react-router-dom';\nimport { IonApp, IonRouterOutlet, IonSplitPane } from '@ionic/react';\nimport { IonReactRouter } from '@ionic/react-router';\nimport Menu from './components/Menu';\nimport { initialize, log } from './util/logger';\n\n/* Core CSS required for Ionic components to work properly */\nimport '@ionic/react/css/core.css';\n\n/* Basic CSS for apps built with Ionic */\nimport '@ionic/react/css/normalize.css';\nimport '@ionic/react/css/structure.css';\nimport '@ionic/react/css/typography.css';\n\n/* Optional CSS utils that can be commented out */\nimport '@ionic/react/css/padding.css';\nimport '@ionic/react/css/float-elements.css';\nimport '@ionic/react/css/text-alignment.css';\nimport '@ionic/react/css/text-transformation.css';\nimport '@ionic/react/css/flex-utils.css';\nimport '@ionic/react/css/display.css';\n\n/* Theme variables */\nimport './theme/variables.css';\nimport Login from './pages/Login';\nimport AuthGate from './components/AuthGate';\n\nimport {ApplicationUserContextProvider} from './context/ApplicationUserContext';\nimport Logout from './pages/Logout';\nimport {AuthorizedItemsContextProvider} from \"./context/AuthorizedItemsContext\";\nimport env from \"./api/environment\";\nimport {ScreenOrientation} from \"@ionic-native/screen-orientation\";\n\n\nconst MyApp: React.FC = () => {\n\n  useEffect(() => {\n    if (env.settings.hasCapacitor) {\n      ScreenOrientation.lock(ScreenOrientation.ORIENTATIONS.PORTRAIT).then(() => {\n        console.log(\"screen locked to portrait\");\n      });\n    }\n\n    initialize();\n    log('app_render', { vers: env.settings.appVersionString, platform: env.settings.platform});\n  }, []);\n\n  return (\n    <IonApp>\n      <IonReactRouter>\n        <IonReactRouter>\n          <IonSplitPane contentId=\"main\">\n            <Menu />\n            <IonRouterOutlet id=\"main\">\n\n              <Route path=\"/login\" render={(routeProps) => (\n                <Login {...routeProps} />\n              )} />\n\n              <Route path=\"/logout\" render={(routeProps) => (\n                <Logout {...routeProps} />\n              )} />\n\n              <Route path=\"/tabs\" render={(routeProps) => (\n                <AuthGate {...routeProps} />\n              )}  />\n\n              <Route path=\"/\" exact={true}  >\n                <Redirect to=\"/tabs/schedule\" />\n              </Route>\n\n            </IonRouterOutlet>\n          </IonSplitPane>\n        </IonReactRouter>\n      </IonReactRouter>\n    </IonApp>\n  )\n}\n\nconst App: React.FC = () => {\n  return (\n    <BrowserRouter>\n      <ApplicationUserContextProvider>\n        <AuthorizedItemsContextProvider>\n          <MyApp />\n        </AuthorizedItemsContextProvider>\n      </ApplicationUserContextProvider>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}