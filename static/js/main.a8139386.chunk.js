(this["webpackJsonpcom.orbitalshift.app"]=this["webpackJsonpcom.orbitalshift.app"]||[]).push([[8],{138:function(e,t,n){e.exports=n(188)},144:function(e,t,n){var a={"./ion-action-sheet-controller_8.entry.js":[196,43],"./ion-action-sheet-ios.entry.js":[197,44],"./ion-action-sheet-md.entry.js":[198,45],"./ion-alert-ios.entry.js":[199,24],"./ion-alert-md.entry.js":[200,25],"./ion-app_8-ios.entry.js":[201,11],"./ion-app_8-md.entry.js":[202,12],"./ion-avatar_3-ios.entry.js":[203,46],"./ion-avatar_3-md.entry.js":[204,47],"./ion-back-button-ios.entry.js":[205,48],"./ion-back-button-md.entry.js":[206,49],"./ion-backdrop-ios.entry.js":[207,81],"./ion-backdrop-md.entry.js":[208,82],"./ion-button_2-ios.entry.js":[209,50],"./ion-button_2-md.entry.js":[210,51],"./ion-card_5-ios.entry.js":[211,52],"./ion-card_5-md.entry.js":[212,53],"./ion-checkbox-ios.entry.js":[213,54],"./ion-checkbox-md.entry.js":[214,55],"./ion-chip-ios.entry.js":[215,56],"./ion-chip-md.entry.js":[216,57],"./ion-col_3.entry.js":[217,83],"./ion-datetime_3-ios.entry.js":[218,20],"./ion-datetime_3-md.entry.js":[219,21],"./ion-fab_3-ios.entry.js":[220,58],"./ion-fab_3-md.entry.js":[221,59],"./ion-img.entry.js":[222,84],"./ion-infinite-scroll_2-ios.entry.js":[223,39],"./ion-infinite-scroll_2-md.entry.js":[224,40],"./ion-input-ios.entry.js":[225,60],"./ion-input-md.entry.js":[226,61],"./ion-item-option_3-ios.entry.js":[227,62],"./ion-item-option_3-md.entry.js":[228,63],"./ion-item_8-ios.entry.js":[229,64],"./ion-item_8-md.entry.js":[230,65],"./ion-loading-ios.entry.js":[231,26],"./ion-loading-md.entry.js":[232,27],"./ion-menu_4-ios.entry.js":[233,18],"./ion-menu_4-md.entry.js":[234,19],"./ion-modal-ios.entry.js":[235,14],"./ion-modal-md.entry.js":[236,15],"./ion-nav_5.entry.js":[237,13],"./ion-popover-ios.entry.js":[238,16],"./ion-popover-md.entry.js":[239,17],"./ion-progress-bar-ios.entry.js":[240,66],"./ion-progress-bar-md.entry.js":[241,67],"./ion-radio_2-ios.entry.js":[242,32],"./ion-radio_2-md.entry.js":[243,33],"./ion-range-ios.entry.js":[244,68],"./ion-range-md.entry.js":[245,69],"./ion-refresher_2-ios.entry.js":[246,41],"./ion-refresher_2-md.entry.js":[247,42],"./ion-reorder_2-ios.entry.js":[248,37],"./ion-reorder_2-md.entry.js":[249,38],"./ion-ripple-effect.entry.js":[250,85],"./ion-route_4.entry.js":[251,70],"./ion-searchbar-ios.entry.js":[252,28],"./ion-searchbar-md.entry.js":[253,29],"./ion-segment_2-ios.entry.js":[254,71],"./ion-segment_2-md.entry.js":[255,72],"./ion-select_3-ios.entry.js":[256,34],"./ion-select_3-md.entry.js":[257,35],"./ion-slide_2-ios.entry.js":[258,86],"./ion-slide_2-md.entry.js":[259,87],"./ion-spinner.entry.js":[260,73],"./ion-split-pane-ios.entry.js":[261,88],"./ion-split-pane-md.entry.js":[262,89],"./ion-tab-bar_2-ios.entry.js":[263,74],"./ion-tab-bar_2-md.entry.js":[264,75],"./ion-tab_2.entry.js":[265,36],"./ion-text.entry.js":[266,76],"./ion-textarea-ios.entry.js":[267,77],"./ion-textarea-md.entry.js":[268,78],"./ion-toast-ios.entry.js":[269,30],"./ion-toast-md.entry.js":[270,31],"./ion-toggle-ios.entry.js":[271,22],"./ion-toggle-md.entry.js":[272,23],"./ion-virtual-scroll.entry.js":[273,90]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=144,e.exports=r},145:function(e,t,n){var a={"./ion-icon.entry.js":[277,98]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=145,e.exports=r},150:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){},188:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(43),c=n.n(o),l=n(13),s=n(45),i=n(1),u=n(57),d=n(3),m=n(282),p=n(283),E=n(284),v=n(285),f=(n(150),n(5)),b=n(4),h=n.n(b),g=n(137),y=function(){return Object(g.a)("osKeyStore",1,{upgrade:function(e){e.createObjectStore("userStore"),e.createObjectStore("authItems")}})},O={getKeyStore:y,putUserState:function(e){var t;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(y());case 2:return t=n.sent,n.next=5,h.a.awrap(t.put("userStore",e,"user"));case 5:case"end":return n.stop()}}))},getUserState:function(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.awrap(y());case 2:return e=t.sent,t.next=5,h.a.awrap(e.get("userStore","user"));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}))},getAccessToken:function(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.awrap(y());case 2:return e=t.sent,t.next=5,h.a.awrap(e.get("userStore","user").then((function(e){return e?e.access_token:void 0})));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}))},putAuthItems:function(e){var t;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(y());case 2:return t=n.sent,n.next=5,h.a.awrap(t.put("authItems",e,"authItems"));case 5:case"end":return n.stop()}}))},getAuthItems:function(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.awrap(y());case 2:return e=t.sent,t.abrupt("return",e.get("authItems","authItems"));case 4:case"end":return t.stop()}}))}},k=n(47),S=n(59),C=(n(189),{apiKey:"AIzaSyAS526InuG-53VGKi5SA780Mh0YwHkhMDE",authDomain:"orbital-shift-team-dashboard.firebaseapp.com",databaseURL:"https://orbital-shift-team-dashboard.firebaseio.com",projectId:"orbital-shift-team-dashboard",storageBucket:"orbital-shift-team-dashboard.appspot.com",messagingSenderId:"475985033328",appId:"1:475985033328:web:77740655a89e28de035cb5",measurementId:"G-TGE8788D28"});function I(e,t){S.analytics().logEvent(e,t)}var j=n(9),T=n(10),N=function(){function e(){Object(j.a)(this,e),this.items={},this.count=0}return Object(T.a)(e,[{key:"ContainsKey",value:function(e){return this.items.hasOwnProperty(e)}},{key:"Count",value:function(){return this.count}},{key:"Add",value:function(e,t){this.items.hasOwnProperty(e)||this.count++,this.items[e]=t}},{key:"Remove",value:function(e){var t=this.items[e];return delete this.items[e],this.count--,t}},{key:"Item",value:function(e){return this.items[e]}},{key:"Keys",value:function(){var e=[];for(var t in this.items)this.items.hasOwnProperty(t)&&e.push(t);return e}},{key:"Values",value:function(){var e=[];for(var t in this.items)this.items.hasOwnProperty(t)&&e.push(this.items[t]);return e}}]),e}(),D=new N;[{key:"prod",name:"Production",url:"https://api.orbitalshift.com/"},{key:"sbx",name:"Sandbox",url:"https://sandboxapi.orbitalshift.com/"},{key:"loc",name:"Local",url:"http://localhost:54825/"},{key:"emu",name:"Local (Emu)",url:"http://10.0.2.2:54825/"},{key:"tst",name:"TestServer",url:"http://TestServer:8000/"}].map((function(e){return D.Add(e.key,e)}));var x,A={env:D,versionName:"2.0.0",versionCode:"6070",revisionHash:"f811743",appVersionString:"2.0.0.6070 (f811743)",hasCapacitor:!!Object(i.U)("capacitor"),platform:Object(i.U)("ios")?"ios":Object(i.U)("android")?"android":"other"},w={settings:A,getApiUrl:function(e,t){return A.env.Item(e.environment).url+t},getUserAndEnvironmentFromInput:function(e){if(e.length<4)return{username:e,env:A.env.Item("prod")};var t=e.toLowerCase().substring(0,4),n=e.substring(4);switch(t){case"sbx ":return{username:n,env:A.env.Item("sbx")};case"loc ":return{username:n,env:A.env.Item("loc")};case"emu ":return{username:n,env:A.env.Item("emu")};case"tst ":return{username:n,env:A.env.Item("tst")};default:return{username:e,env:A.env.Item("prod")}}}},M=function(e,t,n){var a,r,o,c;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return a=w.getApiUrl(e,t),l.prev=1,r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.access_token),AppVersion:w.settings.appVersionString},body:null},n&&(r.body=JSON.stringify(n)),l.next=6,h.a.awrap(fetch(a,r));case 6:return o=l.sent,l.next=9,h.a.awrap(o.json());case 9:return c=l.sent,I("api_succeeded",{method:"GET",baseUrl:t,username:e.username}),l.abrupt("return",c);case 14:throw l.prev=14,l.t0=l.catch(1),I("api_err",{method:"GET",baseUrl:t,username:null===e||void 0===e?void 0:e.username,appVersion:w.settings.appVersionString}),console.error("Error calling get against url, "+t+": "+l.t0),l.t0;case 19:case"end":return l.stop()}}),null,null,[[1,14]])},R=function(e,t,n){var a,r,o,c;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return a=w.getApiUrl(e,t),l.prev=1,l.next=4,h.a.awrap(fetch(a,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.access_token),AppVersion:w.settings.appVersionString}}));case 4:if(r=l.sent,!(o=r.headers.get("content-type"))||-1===o.indexOf("application/json")){l.next=12;break}return l.next=9,h.a.awrap(r.json());case 9:return c=l.sent,I("api_succeeded",{method:"POST",baseUrl:t,username:e.username}),l.abrupt("return",c);case 12:I("api_succeeded",{method:"POST",baseUrl:t,username:e.username}),l.next=20;break;case 15:throw l.prev=15,l.t0=l.catch(1),I("api_err",Object(f.a)({method:"POST",baseUrl:t,username:null===e||void 0===e?void 0:e.username},n,{appVersion:w.settings.appVersionString})),console.error("Error calling post against url, "+t+": "+l.t0),l.t0;case 20:case"end":return l.stop()}}),null,null,[[1,15]])},P=function(e,t,n){var a,r,o,c,l;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=w.getApiUrl(e,t),r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.access_token),AppVersion:w.settings.appVersionString}},n&&(r.body=JSON.stringify(n)),s.prev=3,s.next=6,h.a.awrap(fetch(a,r));case 6:if(o=s.sent,!(c=o.headers.get("content-type"))||-1===c.indexOf("application/json")){s.next=14;break}return s.next=11,h.a.awrap(o.json());case 11:return l=s.sent,I("api_succeeded",{method:"PUT",baseUrl:t,username:e.username}),s.abrupt("return",l);case 14:I("api_succeeded",{method:"PUT",baseUrl:t,username:e.username}),s.next=22;break;case 17:throw s.prev=17,s.t0=s.catch(3),I("api_err",Object(f.a)({method:"PUT",baseUrl:t,username:null===e||void 0===e?void 0:e.username},n,{appVersion:w.settings.appVersionString})),console.error("Error calling put against url, "+t+": "+s.t0),s.t0;case 22:case"end":return s.stop()}}),null,null,[[3,17]])},U=function(e,t,n){var a,r,o,c;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return a=w.getApiUrl(e,t),l.prev=1,console.log("BING"),console.log(JSON.stringify(n)),console.log("BONG"),r=JSON.stringify(n),console.log("GONG"),l.next=9,h.a.awrap(fetch(a,{method:"PUT",body:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.access_token),AppVersion:w.settings.appVersionString}}));case 9:return o=l.sent,l.next=12,h.a.awrap(o.json());case 12:return c=l.sent,I("api_succeeded",{method:"PUT",baseUrl:t,username:e.username}),l.abrupt("return",c);case 17:throw l.prev=17,l.t0=l.catch(1),I("api_err",Object(f.a)({method:"PUT",baseUrl:t,username:null===e||void 0===e?void 0:e.username},n,{appVersion:w.settings.appVersionString})),console.error("Error calling putData against url, "+t+": "+l.t0),l.t0;case 22:case"end":return l.stop()}}),null,null,[[1,17]])},L=function(e,t,n){var a,r,o,c;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return a=w.getApiUrl(e,t),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.access_token),AppVersion:w.settings.appVersionString}},n&&(r.body=JSON.stringify(n)),l.prev=3,l.next=6,h.a.awrap(fetch(a,r));case 6:if(o=l.sent,!(c=o.headers.get("content-type"))||-1===c.indexOf("application/json")){l.next=13;break}return I("api_succeeded",{method:"DELETE",baseUrl:t,username:e.username}),l.next=12,h.a.awrap(o.json());case 12:return l.abrupt("return",l.sent);case 13:return I("api_succeeded",{method:"DELETE",baseUrl:t,username:e.username}),l.abrupt("return");case 17:throw l.prev=17,l.t0=l.catch(3),I("api_err",Object(f.a)({method:"DELETE",baseUrl:t,username:null===e||void 0===e?void 0:e.username},n,{appVersion:w.settings.appVersionString})),console.error("Error calling delete against url, "+t+": "+l.t0),l.t0;case 22:case"end":return l.stop()}}),null,null,[[3,17]])};!function(e){e[e.iOS=1]="iOS",e[e.Android=2]="Android"}(x||(x={}));var B=function(e,t){var n;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return"api/v1/employee/notifications/subscribe",n="ios"===w.settings.platform?x.iOS:x.Android,I("pushNotifications_subscribeCalled",{token:t,operatingSystem:n,username:e.username,access_token:e.access_token}),a.next=5,h.a.awrap(U(e,"api/v1/employee/notifications/subscribe",{TokenId:t,OperatingSystem:n}));case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}))},F=function(e){return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return"api/v1/employee/notifications/types",t.next=3,h.a.awrap(M(e,"api/v1/employee/notifications/types"));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}))},z=function(e,t){var n;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return"api/v1/employee/notifications/types",n={ids:t},a.next=4,h.a.awrap(P(e,"api/v1/employee/notifications/types",n));case 4:return a.abrupt("return",a.sent);case 5:case"end":return a.stop()}}))},V=function(e){return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return"api/v1/employee/notifications/list-types",t.next=3,h.a.awrap(M(e,"api/v1/employee/notifications/list-types"));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}))},q=n(21),W=k.b.PushNotifications,_=function(e,t,n){var a=Object(q.a)({forceRefresh:!0});W.register().then((function(){console.log("PushNotificationController: register called and returned")})),W.addListener("registration",(function(a){B(e,a.value),t(!0),n("Push registration success, token: "+a.value),I("pushNotifications_registered",{token:a.value,platform:w.settings.platform})})),W.addListener("registrationError",(function(e){n("Error on registration: "+JSON.stringify(e)),I("pushNotifications_registrationError",{error:e,platform:w.settings.platform})})),W.addListener("pushNotificationReceived",(function(e){var t;e&&(e.data&&e.data.MessageId?(n("NOTIFICATION: "+e.title+": "+e.body+" id:"+e.data.MessageId),a.push("/tabs/messages/"+e.data.MessageId),a.goForward()):n("NOTIFICATION: "+e.title+": "+e.body+" (no id)"),I("pushNotifications_receivedWhenOpen",{title:e.title,body:e.body,messageId:null!==(t=e.data.MessageId)&&void 0!==t?t:-123}))})),W.addListener("pushNotificationActionPerformed",(function(e){var t;e.notification.data&&e.notification.data.MessageId?(n("TAPPED ON NOTIFICATION: "+e.notification.title+": "+e.notification.body+" id:"+e.notification.data.MessageId),a.push("/tabs/messages/"+e.notification.data.MessageId),a.goForward()):n("TAPPED ON NOTIFICATION: "+e.notification.title+": "+e.notification.body+" (no id)"),I("pushNotifications_actionPerformed",{title:e.notification.title,body:e.notification.body,messageId:null!==(t=e.notification.data.MessageId)&&void 0!==t?t:-123})}))},G={isLoggedin:!1,access_token:void 0,username:"",darkMode:!1,loading:!0,latitude:void 0,longitude:void 0,lastLocationUpdate:void 0,environment:"prod",isPushEnabled:!1},Y={user:G,logout:function(){return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))},userLoggedIn:function(e,t,n){return new Promise((function(){return G}))},refreshGeoLocation:function(){return new Promise((function(){}))},pushEnabled:function(e){}},K=r.a.createContext(Y),H=function(e){var t=Object(a.useState)(Object(f.a)({},G)),n=Object(d.a)(t,2),o=n[0],c=n[1];Object(a.useEffect)((function(){var e=!0;return Promise.all([O.getUserState()]).then((function(t){if(e){var n=t[0];c(n?Object(f.a)({},n,{loading:!1}):Object(f.a)({},o,{loading:!1}))}})),function(){e=!1}}),[]),Object(a.useEffect)((function(){o&&!o.isPushEnabled&&o.access_token&&o.access_token.length>0&&"other"!==w.settings.platform&&_(o,l,(function(){}))}),[o.isPushEnabled,o.access_token]);var l=function(e){c(Object(f.a)({},o,{isPushEnabled:e}))};return r.a.createElement(K.Provider,{value:{user:o,userLoggedIn:function(e,t,n){var a,r,o,l;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.a.awrap(O.getUserState());case 2:return a=s.sent,s.prev=3,s.next=6,h.a.awrap(k.a.getCurrentPosition());case 6:return r=s.sent,o={username:e,access_token:t,environment:n,isLoggedin:!0,darkMode:a?a.darkMode:G.darkMode,loading:!1,latitude:r.coords.latitude,longitude:r.coords.longitude,isPushEnabled:!1},s.next=10,h.a.awrap(O.putUserState(o));case 10:return c(o),console.log("ApplicationUserContextProvider: userLoggedin. ",o.isLoggedin),s.abrupt("return",o);case 15:return s.prev=15,s.t0=s.catch(3),console.log("Error trying to get geolocation: "+s.t0.message),l={username:e,access_token:t,environment:n,isLoggedin:!0,darkMode:a?a.darkMode:G.darkMode,loading:!1,latitude:null===a||void 0===a?void 0:a.latitude,longitude:null===a||void 0===a?void 0:a.longitude,isPushEnabled:!1},s.next=21,h.a.awrap(O.putUserState(l));case 21:return c(l),s.abrupt("return",l);case 23:case"end":return s.stop()}}),null,null,[[3,15]])},logout:function(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(f.a)({},o,{isLoggedin:!1,access_token:void 0}),c(e),t.next=4,h.a.awrap(O.putUserState(e));case 4:console.log("ApplicationUserContextProvider: logout. ",e.isLoggedin);case 5:case"end":return t.stop()}}))},refreshGeoLocation:function(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.awrap(k.a.getCurrentPosition());case 3:e=t.sent,c(Object(f.a)({},o,{latitude:e.coords.latitude,longitude:e.coords.longitude})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error trying to get geo location: "+t.t0.message);case 10:case"end":return t.stop()}}),null,null,[[0,7]])},pushEnabled:l}},e.children)};var J,Q=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)({header:"",message:"",onDismiss:function(){}}),l=Object(d.a)(c,2),s=l[0],u=l[1];return{showAlert:function(e,t,n){u({header:e,message:t,onDismiss:n}),o(!0)},alertBoxJsx:r.a.createElement(i.b,{isOpen:n,onDidDismiss:function(){o(!1),s.onDismiss()},header:s.header,message:s.message,buttons:["OK"]})}},$=n(281),X=function(e){var t=e.list,n=e.selected,a=e.selectionChanged,o=function(e){if(!n||0===n.length)return!1;for(var t=0;t<n.length;t++)if(n[t].id===e)return!0;return!1};return t?r.a.createElement(i.o,null,r.a.createElement(i.r,null,r.a.createElement(i.o,{key:-1},r.a.createElement(i.Q,{mode:"md",key:-1,checked:(null===t||void 0===t?void 0:t.length)===(null===n||void 0===n?void 0:n.length),onClick:function(){return function(){var e=(null===t||void 0===t?void 0:t.length)!==(null===n||void 0===n?void 0:n.length);if((null===t||void 0===t?void 0:t.length)===(null===n||void 0===n?void 0:n.length)){if(e)return;a([])}else{if(!e)return;a(null===t||void 0===t?void 0:t.slice())}}()}}),r.a.createElement(i.p,null,"SELECT ALL")),t&&t.map((function(e){return r.a.createElement(i.o,{key:e.id},r.a.createElement(i.Q,{mode:"md",key:e.id,onClick:function(){!function(e){if(null!==n)if(!n.map((function(e){return e.id})).includes(e.id)){var t=n.slice();t.push(e),a(t)}else{var r=n.filter((function(t){return t.id!==e.id}));a(r)}}(e)},checked:o(e.id)}),r.a.createElement(i.p,null,e.name))})))):r.a.createElement("div",null,"Loading...")},Z=function(e){var t=e.onDismissModal,n=e.isOpen,o=Object(a.useContext)(K).user,c=Object(a.useState)(null),l=Object(d.a)(c,2),s=l[0],u=l[1],m=Object(a.useState)(null),p=Object(d.a)(m,2),E=p[0],v=p[1];Object(a.useEffect)((function(){if(!n)return v(null),void u(null);var e=!0;return Promise.all([F(o),V(o)]).then((function(t){e&&(v(t[0]),u(t[1]))})),function(){e=!1}}),[n,o]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.l,null,r.a.createElement(i.R,null,r.a.createElement(i.e,{slot:"start"},r.a.createElement(i.d,{onClick:function(){t()}},r.a.createElement(i.m,{icon:$.a,mode:"md",slot:"icon-only"}))),r.a.createElement(i.O,null,"Notifications"))),r.a.createElement(i.h,{class:"outer-content"},r.a.createElement(X,{list:s,selected:E,selectionChanged:function(e){var t=e.map((function(e){return e.id}));z(o,t).then((function(){v(e)}))}})),r.a.createElement(i.j,null,r.a.createElement(i.R,null)))},ee=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,1)[0],n=r.a.useContext(K).user,o=w.settings.env.Item(n.environment),c="prod"!==o.key?n.username.substr(4):n.username,l=Q(),s=Object(a.useState)(!1),u=Object(d.a)(s,2),f=u[0],b=u[1];return r.a.createElement(i.u,{type:"overlay",disabled:t,contentId:"main"},r.a.createElement(i.l,null,r.a.createElement(i.R,null,r.a.createElement(i.O,null,"Menu"))),r.a.createElement(i.h,{class:"outer-content"},"prod"!==o.key&&r.a.createElement("div",{className:"header"},c.toUpperCase()," (",o.name.toUpperCase(),")"),"prod"===o.key&&r.a.createElement("div",{className:"header"},c),r.a.createElement(i.r,null,r.a.createElement(i.w,{"auto-hide":"false"},r.a.createElement(i.o,{button:!0,routerLink:"/account",routerDirection:"none"},r.a.createElement(i.p,null,"Settings"),r.a.createElement(i.m,{slot:"end",icon:m.a}))),r.a.createElement(i.w,{"auto-hide":"false"},r.a.createElement(i.o,{button:!0,onClick:function(){b(!0)}},r.a.createElement(i.p,null,"Notifications"),r.a.createElement(i.m,{slot:"end",icon:p.a}))),r.a.createElement(i.w,{"auto-hide":"false"},r.a.createElement(i.o,{button:!0,routerLink:"/account",routerDirection:"none"},r.a.createElement(i.p,null,"Submit a Ticket"),r.a.createElement(i.m,{slot:"end",icon:E.a}))),r.a.createElement(i.w,{"auto-hide":"false"},r.a.createElement(i.o,{button:!0,routerLink:"/logout",routerDirection:"none"},r.a.createElement(i.m,{slot:"end",icon:v.a}),r.a.createElement(i.p,null,"Logout")))),l.alertBoxJsx),r.a.createElement(i.j,{className:"footer"},r.a.createElement("div",{className:"version"},"Version: ",w.settings.appVersionString," ")),r.a.createElement(i.x,{isOpen:f},r.a.createElement(Z,{onDismissModal:function(){b(!1)},isOpen:f})))},te=(n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),{authenticateUser:function(e,t,n){var a,r,o,c;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return console.log("Authenticating against ".concat(w.settings.env.Item(n).name," (").concat(w.settings.env.Item(n).url,")")),a=w.settings.env.Item(n).url+"token",r="grant_type=password&username=".concat(e,"&password=").concat(t),l.prev=3,l.next=6,h.a.awrap(fetch(a,{method:"POST",body:r}));case 6:return o=l.sent,l.next=9,h.a.awrap(o.json());case 9:if(!(c=l.sent).error&&!c.error_description){l.next=12;break}return l.abrupt("return",{loggedIn:!1,error:c.error_description,access_token:""});case 12:return l.abrupt("return",{loggedIn:!0,access_token:c.access_token});case 15:return l.prev=15,l.t0=l.catch(3),console.error("Error returned from authentication request: "+l.t0),l.abrupt("return",{loggedIn:!1,err:l.t0,error:"Error attempting to log in",access_token:""});case 19:case"end":return l.stop()}}),null,null,[[3,15]])},getHomePageData:function(e){return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.awrap(M(e,"api/v3/home/get/0"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},getAuthorizedItems:function(e){var t;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(M(e,"api/v3/home/get-auth"));case 2:return t=n.sent,console.log(t),n.abrupt("return",t);case 5:case"end":return n.stop()}}))}});!function(e){e.Employee="Employee",e.Admin="Admin",e.LocationAdmin="Location Admin",e.BusinessAdmin="Business Admin",e.Orbital="Orbital"}(J||(J={}));var ne,ae,re,oe,ce,le,se={auth:{locations:[],tags:[],payrollEvents:[],employeeId:0,loading:!1,role:J.Employee},currentEvents:[],nextEvent:void 0,dailyNotes:[]};!function(e){e[e.HoursMinutes=0]="HoursMinutes",e[e.HoursAndDecimals=1]="HoursAndDecimals"}(ne||(ne={})),function(e){e[e.Unit=1]="Unit",e[e.Money=2]="Money"}(ae||(ae={})),function(e){e[e.None=0]="None",e[e.CanViewWages=1]="CanViewWages",e[e.CanEditPublishedTo=2]="CanEditPublishedTo",e[e.CanEditTemplates=4]="CanEditTemplates",e[e.CanEditSchedules=8]="CanEditSchedules",e[e.CanEditEmployeeClockEvents=16]="CanEditEmployeeClockEvents",e[e.CanEditOwnClockEvents=32]="CanEditOwnClockEvents",e[e.CanEditUserAccounts=64]="CanEditUserAccounts"}(re||(re={})),function(e){e[e.Both=0]="Both",e[e.Unpaid=1]="Unpaid",e[e.Paid=2]="Paid",e[e.None=3]="None"}(oe||(oe={})),function(e){e[e.UnscheduledUnpaid=0]="UnscheduledUnpaid",e[e.UnscheduledPaid=1]="UnscheduledPaid",e[e.Scheduled=2]="Scheduled"}(ce||(ce={})),function(e){e[e.FirstName=1]="FirstName",e[e.LastName=2]="LastName",e[e.EmploymentStart=3]="EmploymentStart",e[e.EarliestEventStart=4]="EarliestEventStart"}(le||(le={}));var ie={employeeId:0,role:J.Employee,locations:[],loading:!1,payrollEvents:[],tags:[]},ue={auth:ie,refreshAuth:function(e,t){return new Promise((function(){}))},clearAuth:function(){},authLoading:!1},de=r.a.createContext(ue);function me(e,t,n){var a,r;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(0===e.employeeId||n){o.next=2;break}return o.abrupt("return",e);case 2:if(n){o.next=8;break}return o.next=5,h.a.awrap(O.getAuthItems());case 5:if(!((a=o.sent)&&a.locations&&a.locations.length>0)){o.next=8;break}return o.abrupt("return",a);case 8:return o.next=10,h.a.awrap(te.getAuthorizedItems(t));case 10:if(!((r=o.sent)&&r.locations&&r.locations.length>0)){o.next=16;break}return O.putAuthItems(r).then((function(){return console.log("auth items stored in indexdb")})),o.abrupt("return",r);case 16:return console.log("got nothing from auth api"),o.abrupt("return",null);case 18:case"end":return o.stop()}}))}var pe=function(e){var t=Object(a.useState)(Object(f.a)({},ie)),n=Object(d.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(!1),s=Object(d.a)(l,2),i=s[0],u=s[1],m=Object(a.useContext)(K).user;Object(a.useEffect)((function(){var e=!0;if(u(!0),m&&m.isLoggedin)return me(o,m,!1).then((function(t){e&&(u(!1),t&&c(t))})),function(){e=!1}}),[m,o]);return r.a.createElement(de.Provider,{value:{auth:o,refreshAuth:function(e,t){var n;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return u(!0),a.next=3,h.a.awrap(me(o,t,e));case 3:return n=a.sent,u(!1),n&&c(n),a.abrupt("return",n);case 7:case"end":return a.stop()}}))},clearAuth:function(){c(ie),O.putAuthItems(ie).then((function(e){console.log("Cleared Authorized Items from db")}))},authLoading:i}},e.children)};function Ee(e,t){return e.length>0&&t.length>5}var ve=function(e){var t=e.history,n=Q(),o=n.alertBoxJsx,c=n.showAlert,l=r.a.useContext(K),s=l.user,u=l.userLoggedIn,m=r.a.useContext(de).refreshAuth,p=Object(a.useState)(!1),E=Object(d.a)(p,2),v=E[0],f=E[1],b=Object(a.useState)(""),g=Object(d.a)(b,2),y=g[0],O=g[1],k=Object(a.useState)(""),S=Object(d.a)(k,2),C=S[0],j=S[1],T=Object(a.useState)(""),N=Object(d.a)(T,1)[0],D=Object(a.useState)(""),x=Object(d.a)(D,1)[0],A=Object(a.useState)(!1),M=Object(d.a)(A,2),R=M[0],P=M[1];return Object(i.W)((function(){console.log("Entering login, is user logged in? ",s.isLoggedin),s.isLoggedin&&(t.push("/tabs/schedule",{direction:"forward"}),t.goForward())})),r.a.createElement(i.y,{id:"login-page"},r.a.createElement(i.h,{className:"login-content"},r.a.createElement("div",{className:"login-logo"},r.a.createElement("img",{className:"logo",src:"assets/img/OS Logo - 4pt Rounded _ 2 Tone Orange.svg",alt:"Orbital Shift Logo"})),r.a.createElement(i.t,{isOpen:v,onDidDismiss:function(){return f(!1)},spinner:"dots",message:"Logging in...",duration:5e3}),o,r.a.createElement(i.r,{className:"form-list"},r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"label"},"User"),r.a.createElement("div",{className:"field-container"},r.a.createElement("input",{className:"input",id:"username",name:"username",type:"text",value:y,onChange:function(e){var t;t=e.target.value,O(t),P(Ee(t,C))}}))),N.length>0&&r.a.createElement(i.M,{color:"light"},r.a.createElement("p",{className:"ion-padding-start"},N)),r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"label"},"Password"),r.a.createElement("div",{className:"field-container"},r.a.createElement("input",{className:"input",id:"password",name:"password",type:"password",value:C,onChange:function(e){var t;t=e.target.value,j(t),P(Ee(y,t))}}))),x.length>0&&r.a.createElement(i.M,{color:"light"},r.a.createElement("p",{className:"ion-padding-start"},x))),r.a.createElement(i.C,null,r.a.createElement(i.g,null,r.a.createElement(i.d,{className:"login-button",type:"submit",onClick:function(){var e,n,a,r;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!y||!C){o.next=23;break}return e=w.getUserAndEnvironmentFromInput(y),f(!0),o.next=5,h.a.awrap(te.authenticateUser(e.username,C,e.env.key));case 5:if(!(n=o.sent).loggedIn){o.next=19;break}return o.next=9,h.a.awrap(u(y,n.access_token,e.env.key));case 9:return a=o.sent,o.next=12,h.a.awrap(m(!0,a));case 12:return f(!1),I("login",{username:e.username,appVersion:w.settings.appVersionString,environment:e.env.name}),t.push("/tabs/schedule",{direction:"none"}),t.goForward(),o.abrupt("return");case 19:f(!1),I("login_failure",{username:e.username,appVersion:w.settings.appVersionString,environment:e.env.name}),r=n.error?n.error:"Could not log in",c("Failed to log in",r,(function(){j(""),P(!1)}));case 23:case"end":return o.stop()}}))},expand:"block",disabled:!R},"LOG IN")))))},fe=n(302),be=n(307),he=n(308),ge=n(298),ye=n(304),Oe=(n(164),n(286)),ke=n(311),Se=n(309),Ce=n(310),Ie=n(287),je=(n(312),n(288)),Te=n(289),Ne=new Date(9e3,1,1);function De(e){if(!e)return 0;var t,n,a=e.split(":");if(a[0].indexOf(".")>=0){var r=a[0].split(".");t=24*parseInt(r[0])+parseInt(r[1]),n=parseInt(a[1])}else t=parseInt(a[0]),n=parseInt(a[1]);return 60*t+n}function xe(e){if(!e)return"(0m)";var t,n,a=e.split(":");if(a[0].indexOf(".")>=0){var r=a[0].split(".");t=24*parseInt(r[0])+parseInt(r[1]),n=parseInt(a[1])}else t=parseInt(a[0]),n=parseInt(a[1]);return t>0?"(".concat(t,"h ").concat(n,"m)"):"(".concat(n,"m)")}function Ae(e){return Object(Se.a)(e,"EEE MMM d, yyyy").toUpperCase()}function we(e){var t=Object(Se.a)(Object(Oe.a)(e.BreakStart),"h:mmaaa").replace("M","");if(!e.BreakEnd||e.BreakEnd>Ne)return t;var n=Object(Se.a)(Object(Oe.a)(e.BreakEnd),"h:mmaaa").replace("M","");return"".concat(t," - ").concat(n)}function Me(e){var t=Object(Se.a)(Object(Oe.a)(e.BreakStart),"h:mmaa").replace("M",""),n=e.BreakEnd?Object(Se.a)(Object(Oe.a)(e.BreakEnd),"h:mmaa").replace("M",""):Object(Se.a)(new Date,"h:mmaa").replace("M","");return"".concat(t," - ").concat(n)}function Re(e,t,n){var a=!n||n.indexOf("T")<0?0:De(n.split("T")[1]),r=e;r.setHours(0,a,0,0);for(var o=0;Object(Se.a)(r,"EEEE")!==t&&o<20;)r=Object(je.a)(r,-1),o++;return o>15&&console.error("Could not calculate week start based on date ".concat(e,' and weekStartsOn "').concat(t,'"')),r}function Pe(e){return e instanceof Date?e.getFullYear()+"-"+Le(e.getMonth()+1,2)+"-"+Le(e.getDate(),2)+"T"+Le(e.getHours(),2)+":"+Le(e.getMinutes(),2)+":00":(console.error("ERROR: passed-in object to formatDateTimeAsMvcString is not a Date: "+e),"")}function Ue(e,t,n){var a=Number(e).toFixed(n).toString(),r="";0===a.indexOf("-")&&(a=a.substring(1),r="-");var o="0000000000"+a;return-1===a.indexOf(".")?r+o.substr(o.length-Math.max(a.length,t)):r+o.substr(o.length-Math.max(a.length,t+n+1))}function Le(e,t){var n="0000000000"+e;return n.substr(n.length-t)}var Be,Fe=n(38),ze={getScheduleEvent:function(e,t){var n;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(M(e,"api/v2/employee/schedule-events/get/"+t));case 2:if(!(n=a.sent).error){a.next=5;break}return a.abrupt("return",null);case 5:return a.abrupt("return",n);case 6:case"end":return a.stop()}}))},getScheduleEventsByFilter:function(e,t){var n;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=Object(f.a)({start:Pe(t.start),end:Pe(t.end)},t),a.next=3,h.a.awrap(R(e,"api/v2/employee/schedule-events/filter",n));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},getDailyNotesByFilter:function(e,t){var n;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=Object(f.a)({start:Pe(t.start),end:Pe(t.end)},t),a.next=3,h.a.awrap(R(e,"api/v2/daily-notes/filter",n));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},updateScheduleEvent:function(e,t,n){var a,r;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return r={scheduleEventId:t.scheduleEventId,eventType:t.eventType,eventStatus:t.eventStatus,isConfirmed:t.isConfirmed,positionId:t.position.position.id,employeeId:t.employee.id,eventStart:t.eventStart,eventEnd:t.eventEnd,tagId:null===(a=t.tag)||void 0===a?void 0:a.id,eventBreaks:t.eventBreaks,isClockedIn:t.isClockedIn,breakStart:null,breakDuration:null,clockOutValue:t.clockoutValue,absentTime:t.absentTimeMinutes,notes:t.notes,sendMessage:!1,recurrenceId:t.recurrenceId,recurrenceStart:t.recurrenceStart,recurrenceEnd:t.recurrenceEnd,recurrenceType:t.recurrenceType,repeatInterval:t.repeatInterval,repeatWeekdays:t.repeatWeekdays,recurrenceUpdateType:n},o.next=3,h.a.awrap(R(e,"api/v2/employee/schedule-events/update",r));case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}}))},createScheduleEvent:function(e,t,n){var a,r;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return r={sceduleEventId:0,eventType:t.eventType,eventStatus:t.eventStatus,isConfirmed:t.isConfirmed,positionId:t.position.position.id,employeeId:t.employee.id,eventStart:t.eventStart,eventEnd:t.eventEnd,tagId:null===(a=t.tag)||void 0===a?void 0:a.id,eventBreaks:t.eventBreaks,isClockedIn:t.isClockedIn,breakStart:null,breakDuration:null,clockOutValue:t.clockoutValue,absentTime:t.absentTimeMinutes,notes:t.notes,sendMessage:!1,recurrenceId:t.recurrenceId,recurrenceStart:t.recurrenceStart,recurrenceEnd:t.recurrenceEnd,recurrenceType:t.recurrenceType,repeatInterval:t.repeatInterval,repeatWeekdays:t.repeatWeekdays,recurrenceUpdateType:n},o.next=3,h.a.awrap(R(e,"api/v2/employee/schedule-events/create",r));case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}}))},deleteScheduleEvent:function(e,t,n){var a;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a={scheduleEventId:t,recurrenceUpdateType:n,sendMessage:!1},r.next=3,h.a.awrap(R(e,"api/v2/employee/schedule-events/delete",a));case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}))}},Ve={settingsLocId:0,dnLocIds:[],start:new Date,end:new Date,filterByEmployee:!1,filterByPosition:!0,positionIds:[],eventTypeId:-1,eventStatusId:-1,tagId:void 0},qe=(n(165),n(280)),We=n(290),_e=n(279),Ge=function(e){var t=e.startDate,n=e.setStartDate;return r.a.createElement("div",{className:"chooser"},r.a.createElement("div",{className:"top"},r.a.createElement("button",{onClick:function(){return n(Object(je.a)(t,-7))},className:"arrow",key:-1},r.a.createElement(i.m,{mode:"ios",icon:qe.a})),r.a.createElement("div",{className:"month-year-container"},r.a.createElement("div",{className:"datetime-picker-container"},r.a.createElement(i.i,{className:"datetime-picker",displayFormat:"MMM YYYY",pickerFormat:"MMM DD YYYY",min:"2005-01-01",max:"2030-01-01",value:t.toISOString(),onIonChange:function(e){n(Object(Oe.a)(e.detail.value))}}),r.a.createElement(i.m,{mode:"md",icon:We.a}))),r.a.createElement("button",{onClick:function(){return n(Object(je.a)(t,7))},className:"arrow",key:7},r.a.createElement(i.m,{mode:"ios",icon:_e.a}))),r.a.createElement("div",{className:"weekday-list"},[0,1,2,3,4,5,6].map((function(e){var n=Object(je.a)(t,e),a=Object(ke.a)(n)?"today":"not-today";return r.a.createElement("div",{key:e,className:"weekday-button"},r.a.createElement("div",{className:"weekday-abbr"},Object(Se.a)(n,"EEE")),r.a.createElement("div",{className:a}),r.a.createElement("div",{className:"weekday-num"},Object(Se.a)(n,"d")))}))))},Ye=(n(67),n(292)),Ke=(n(68),n(291));!function(e){e[e.Shift=1]="Shift",e[e.Unavailable=2]="Unavailable",e[e.Vacation=3]="Vacation",e[e.Cover=4]="Cover",e[e.Clock=6]="Clock",e[e.Absent=7]="Absent"}(Be||(Be={}));var He,Je=Be;!function(e){e[e.Approved=1]="Approved",e[e.Request=2]="Request",e[e.RequestDenied=4]="RequestDenied"}(He||(He={}));var Qe,$e=He,Xe=function(e,t){if(!e||!e.locations||0===e.locations.length)throw new Error("getLocSettingsForLocationId: called with invalid auth parameter");return 0===t?e.locations[0].settings:e.locations.filter((function(e){return e.id===t}))[0].settings},Ze=function(e,t){if(!e||!e.locations||0===e.locations.length)return null;if(t<=0)return null;var n=null;return e.locations.flatMap((function(e){return e.departments.map((function(e){return 1===e.positions.filter((function(e){return e.id===t})).length?(n=e,e):null}))})),n},et=function(e){return e===Je.Shift||e===Je.Cover||e===Je.Clock||e===Je.Absent},tt=function(e,t,n){return(e.locations.filter((function(e){return e.id===t}))[0].departments.filter((function(e){return e.id===n}))[0].adminAuth&re.CanEditSchedules)===re.CanEditSchedules},nt=function(e,t){return e.locations.flatMap((function(e){return e.departments.filter((function(e){return e.id===t}))}))[0].adminAuth},at=function(e,t){return e.role===J.Admin&&e.locations.flatMap((function(e){return e.departments.filter((function(e){return e.id===t}))}))[0].positions.filter((function(e){return e.hasPosition})).length>0},rt=function(e,t){var n=e.locations.flatMap((function(e){return e.departments.filter((function(e){return e.id===t}))}))[0];return(n.adminAuth&re.CanEditSchedules)===re.CanEditSchedules&&n.positions.filter((function(e){return e.hasPosition})).length>0},ot=function(e,t){return e===Je.Shift&&t===$e.Approved||e===Je.Cover&&t===$e.Request||e===Je.Cover&&t===$e.RequestDenied},ct=function(e,t,n){var a=e.filter((function(e){return e.id===t}))[0],r=a.departments.flatMap((function(e){return e.positions.filter((function(e){return e.id===n}))}))[0];return{location:a,position:r}},lt=function(e,t){for(var n=0;n<e.length;n++)for(var a=0;a<e[n].departments.length;a++)for(var r=0;r<e[n].departments[a].positions.length;r++)if(e[n].departments[a].positions[r].id===t)return{location:e[n],position:e[n].departments[a].positions[r]};return{location:{},position:{}}};!function(e){e[e.None=0]="None",e[e.UndoCoverRequest=1]="UndoCoverRequest",e[e.CreateShiftRequest=2]="CreateShiftRequest",e[e.DeleteShiftRequest=3]="DeleteShiftRequest",e[e.CreateCoverRequest=4]="CreateCoverRequest",e[e.Delete=5]="Delete"}(Qe||(Qe={}));var st,it=function(e,t,n,a,r,o,c,l,s,i){var u=ct(i.locations,o,l),d=dt(i,u,n,t,!0),m=ut(i,u,n),p={buttonText:"",enableConfirm:!0,isReadonly:!1,text:"",usage:Qe.None,eventTypeOptionList:m,eventStatusOptionList:d};if(i.role===J.BusinessAdmin)return p;if(i.role===J.LocationAdmin)return et(e)&&0===i.locations.filter((function(e){return e.id===o})).length?null:p;var E=Object(Oe.a)(r),v=new Date,b=Object(Te.a)(v,E),h=!1,g=nt(i,c);if(i.role===J.Admin)if(n===i.employeeId){if(e===Je.Clock)return(g&re.CanEditOwnClockEvents)===re.CanEditOwnClockEvents?p:null;if((g&re.CanEditSchedules)===re.CanEditSchedules)return p;h=!0}else{if(e===Je.Clock)return(g&re.CanEditEmployeeClockEvents)===re.CanEditEmployeeClockEvents?p:null;if(tt(i,o,c))return p;if(!at(i,c))return null;h=!0}return i.role===J.Employee||h?n===i.employeeId?b?null:e===Je.Clock?null:e===Je.Shift?t===$e.Approved?Object(f.a)({},p,{buttonText:"Create Cover-Request",isReadonly:!0,usage:Qe.CreateCoverRequest}):t===$e.Request?Object(f.a)({},p,{buttonText:"Undo Shift-Request",enableConfirm:!1,isReadonly:!0,text:"Click OK to remove your Shift-Request",usage:Qe.DeleteShiftRequest}):null:e===Je.Cover?t===$e.Request?Object(f.a)({},p,{buttonText:"Undo Cover-Request",enableConfirm:!0,isReadonly:!0,usage:Qe.UndoCoverRequest}):null:!et(e)&&rt(i,c)?Object(f.a)({},p,{buttonText:"Delete Request",enableConfirm:!1,isReadonly:!0,text:"Click OK to delete this event",usage:Qe.Delete}):null:e===Je.Cover&&t===$e.Request?Object(f.a)({},p,{buttonText:"Make Shift-Request",enableConfirm:!1,isReadonly:!0,text:"",usage:Qe.CreateShiftRequest}):null:null},ut=function(e,t,n){if(!e||!e.locations||0===e.locations.length||!t||!t.location||!t.location.settings)return[];var a=[{value:Je.Shift,text:"SHIFT",color:"green"}],r=t.location.settings,o=Ze(e,t.position.id),c=nt(e,o.id);if(e.role===J.BusinessAdmin||e.role===J.LocationAdmin?a.push({value:Je.Clock,text:"CLOCK",color:"green"}):e.role===J.Admin&&(e.employeeId===n&&(c&re.CanEditOwnClockEvents)===re.CanEditOwnClockEvents?a.push({value:Je.Clock,text:"CLOCK",color:"green"}):e.employeeId!==n&&(c&re.CanEditEmployeeClockEvents)===re.CanEditEmployeeClockEvents&&a.push({value:Je.Clock,text:"CLOCK",color:"green"})),e.role===J.BusinessAdmin||e.role===J.LocationAdmin?a.push({value:Je.Cover,text:"COVER",color:"red"}):e.role===J.Admin&&(c&re.CanEditSchedules)===re.CanEditSchedules&&a.push({value:Je.Cover,text:"COVER",color:"red"}),r.ShowUnavailableEventType&&a.push({value:Je.Unavailable,text:"UNAVAILABLE",color:"yellow"}),r.ShowVacationEventType&&a.push({value:Je.Vacation,text:"VACATION",color:"yellow"}),r.ShowAbsentEventType){var l=e.payrollEvents.filter((function(e){return e.positionIds.includes(t.position.id)&&!e.name.startsWith("--")})).map((function(e){return{value:e.id,text:e.name,color:"yellow"}}));return a.concat(l)}return a},dt=function(e,t,n,a,r){var o=[],c=Ze(e,t.position.id),l=nt(e,c.id);if(e.role===J.LocationAdmin||e.role===J.BusinessAdmin?o.push({value:$e.Approved,text:"APPROVED",color:"black"}):e.role===J.Admin&&(l&re.CanEditSchedules)===re.CanEditSchedules&&o.push({value:$e.Approved,text:"APPROVED",color:"black"}),o.push({value:$e.Request,text:"REQUEST",color:"red"}),e.role===J.LocationAdmin||e.role===J.BusinessAdmin?o.push({value:$e.RequestDenied,text:"REQUEST-DENIED",color:"black"}):e.role===J.Admin&&(l&re.CanEditSchedules)===re.CanEditSchedules&&o.push({value:$e.RequestDenied,text:"REQUEST-DENIED",color:"black"}),r&&0===o.filter((function(e){return e.value===a})).length)switch(a){case $e.Approved:o.push({value:$e.Approved,text:"APPROVED",color:"black"});break;case $e.Request:o.push({value:$e.Request,text:"REQUEST",color:"red"});break;case $e.RequestDenied:o.push({value:$e.RequestDenied,text:"REQUEST-DENIED",color:"black"})}return o},mt={1:"#9CBA6A",2:"#BFBFBF",3:"#FFAD00",4:"#C41A26",6:"#677A46",7:"#FFAD00"},pt={1:{color:"black"},2:{color:"#C41A26"},4:{color:"#BCBCBC"}},Et=function(e){var t=e.location,n=e.event,o=e.multiLocation,c=e.showEmployeeName,l=e.onEdit,s=Object(a.useContext)(de).auth,u=c?{display:"inline-block"}:{display:"none"},d=Object(Oe.a)(n.EventStart),m=!!o||t.departments.filter((function(e){return e.positions.filter((function(e){return e.hasPosition}))})).length>1,p="";o&&n.AbbreviatedLocationName&&(p=n.AbbreviatedLocationName+"/"),m&&n.AbbreviatedDepartmentName&&(p+=n.AbbreviatedDepartmentName+"/"),p+=n.PositionName;var E={borderLeft:"6px solid ".concat(mt[n.EventTypeId]," ")},v=pt[n.EventStatusId];return r.a.createElement("button",{className:"event",onClick:function(){!function(){var e=it(n.EventTypeId,n.EventStatusId,n.EmployeeId,n.EventStart,n.EventEnd,n.LocationId,n.DepartmentId,n.PositionId,n.IsConfirmed,s);null!==e&&l(n,e)}()}},r.a.createElement("div",{className:"card-first-col"},r.a.createElement("div",{className:"day-name"},Object(Se.a)(d,"EEE")," "),r.a.createElement("div",{className:"day-number"},Object(Se.a)(d,"dd"))),r.a.createElement("div",{className:"card-second-col",style:E},r.a.createElement("div",{className:"time-row"},n.IsClockedIn&&r.a.createElement(i.m,{icon:Ke.a}),r.a.createElement("span",{style:v},function(e){var t=Object(Se.a)(Object(Oe.a)(e.EventStart),"h:mmaaa").replace("M",""),n=Object(Se.a)(Object(Oe.a)(e.EventEnd),"h:mmaaa").replace("M","");return"".concat(t," - ").concat(n)}(n),"\xa0\xa0"),xe(n.EventDuration)),r.a.createElement("div",{className:"name-row",style:u},n.FirstName," ",n.LastName),r.a.createElement("div",{className:"position-row"},p,"\xa0\xa0",n.Tag&&"~".concat(n.Tag))))},vt=(n(166),function(e){var t=e.note,n=Object(Oe.a)(t.EventStart),a=-1===t.DepartmentId?"All Depts":t.DepartmentName;return r.a.createElement("button",{className:"daily-note"},r.a.createElement("div",{className:"card-first-col"},r.a.createElement("div",{className:"day-name"},Object(Se.a)(n,"EEE")," "),r.a.createElement("div",{className:"day-number"},Object(Se.a)(n,"dd"))),r.a.createElement("div",{className:"card-second-col"},r.a.createElement("div",{className:"first-row"},a,": ",t.Notes)))}),ft=(n(167),function(e){var t=e.locations,n=e.header,a=e.events,o=e.notes,c=e.showEmployeeNames,l=e.onEdit,s=t.filter((function(e){return e.departments.filter((function(e){return e.positions.filter((function(e){return e.hasPosition}))}))})).length>1;return 0===a.length?r.a.createElement("div",null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},n),r.a.createElement("div",{className:"daily-notes-list"},o.map((function(e){return r.a.createElement(vt,{key:e.DailyNoteId,note:e,location:t.filter((function(t){return t.id===e.LocationId}))[0]})}))),r.a.createElement("div",{className:"event-list"},a.map((function(e){return r.a.createElement(Et,{onEdit:l,key:e.ScheduleEventId,event:e,location:t.filter((function(t){return t.id===e.LocationId}))[0],multiLocation:s,showEmployeeName:c})}))))}),bt=function(e,t,n,a){var r=new N;if(0===e.length&&0===t.length)return r;var o=new Date(2199,1,1);if(e.length>0&&(o=Re(Object(Oe.a)(e[0].EventStart),n.DayWeekStartsOn,n.DayStartTime)),t.length>0){var c=Re(Object(Oe.a)(t[0].EventStart),n.DayWeekStartsOn,n.DayStartTime);Object(Ye.a)(c,o)&&(o=c)}var l=Object(je.a)(o,6),s="".concat(Object(Se.a)(o,"MMM d")," - ").concat(Object(Se.a)(l,"MMM d")).toUpperCase()+" "+function(e){if(e<60)return"(".concat(e,"m)");var t="(".concat(Math.floor(e/60),"h");return e%60===0?t+")":t+" ".concat(e%60,"m)")}(a.map((function(e){return De(e.time)})).reduce((function(e,t){return e+t}),0));return r.Add(s,{events:e,notes:t}),r},ht=function(e){var t=e.events,n=e.listType,a=e.notes,o=e.hoursPerDay,c=e.auth,l=e.onEdit;if(0===t.length)return r.a.createElement("div",null,"No Events");var s=new N;switch(n){case"requests":s=function(e,t,n){var a=new N;return a.Add("MY REQUESTS",{events:e.filter((function(e){return e.EmployeeId===n})),notes:[]}),a.Add("CO-WORKERS",{events:e.filter((function(e){return e.EmployeeId!==n})),notes:[]}),a}(t,0,c.employeeId);break;case"my":s=bt(t,a,c.locations[0].settings,o);break;default:s=function(e,t){var n=new N;return e.map((function(e){var a=Object(Se.a)(Object(Oe.a)(e.EventStart).setHours(0,0,0,0),"MMM dd, yyyy").toUpperCase();if(!n.ContainsKey(a)){var r=t.filter((function(e){return Object(Se.a)(Object(Oe.a)(e.EventStart).setHours(0,0,0,0),"MMM dd, yyyy").toUpperCase()===a}));n.Add(a,{notes:r,events:[]})}return n.Item(a).events.push(e),a})),n}(t,a)}return r.a.createElement(r.a.Fragment,null,s.Keys().map((function(e){return r.a.createElement(ft,{onEdit:l,key:e,header:e,locations:c.locations,events:s.Item(e).events,notes:s.Item(e).notes,showEmployeeNames:"my"!==n&&"MY REQUESTS"!==e,showTotalDuration:"requests"!==n})})))};n(56);!function(e){e[e.All=-1]="All",e[e.Scheduled=-2]="Scheduled",e[e.DontWork=-3]="DontWork",e[e.ClockAndSched=-6]="ClockAndSched",e[e.Custom=0]="Custom"}(st||(st={}));var gt=st,yt=function(e,t){if(!e||!e.locations||0===e.locations.length)return[];var n=e.locations[0].settings,a=[{value:Je.Shift,text:"SHIFT",color:"green"},{value:Je.Cover,text:"COVER",color:"red"}];if(t&&a.unshift({value:-1,text:"ALL",color:"black"}),a.push({value:Je.Clock,text:"CLOCK",color:"green"}),n.ShowUnavailableEventType&&a.push({value:Je.Unavailable,text:"UNAVAILABLE",color:"yellow"}),n.ShowVacationEventType&&a.push({value:Je.Vacation,text:"VACATION",color:"yellow"}),n.ShowAbsentEventType){var r=[],o={};return e.locations.flatMap((function(e){return e.departments.flatMap((function(t){return t.positions.map((function(t){return o[t.id]=e}))}))})),e.payrollEvents.map((function(e){return e.name.startsWith("--")?null:(t?e.positionIds.some((function(e){return t.positionIds.indexOf(e)>=0}))&&r.push({value:e.id,text:"".concat(e.name," (").concat(o[e.positionIds[0]].name,")"),color:"yellow"}):r.push({value:e.id,text:"".concat(e.name," (").concat(o[e.positionIds[0]].name,")"),color:"yellow"}),e)})),r.sort((function(e,t){return e.text>t.text?1:-1})),a.concat(r)}return a},Ot={areEqual:function(e,t){if(!e&&t||e&&!t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!Ot.contains(t,e[n]))return!1;return!0},contains:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},containsAny:function(e,t){for(var n=0;n<e.length;n++)if(t.includes(e[n]))return!0;return!1},unique:function(e){var t=[];return e.map((function(e){Ot.contains(t,e)||t.push(e)})),t},uniqueObject:function(e,t){var n=[];return e.map((function(e){for(var a=!1,r=0;r<n.length;r++)if(t(n[r],e)){a=!0;break}a||n.push(e)})),n}},kt=Ot,St=function(e){var t=e.auth,n=e.filter,o=e.onDismissModal,c=e.onCancelModal,l=e.isOpen,s=Object(a.useState)(n),u=Object(d.a)(s,2),m=u[0],p=u[1],E=Object(a.useState)(!1),v=Object(d.a)(E,2),b=v[0],h=v[1],g=Object(a.useState)(gt.ClockAndSched),y=Object(d.a)(g,2),O=y[0],k=y[1],S=Object(a.useState)(yt(t,n)),C=Object(d.a)(S,2),I=C[0],j=C[1],T=Object(a.useState)(t.locations.map((function(e){return""+e.id}))),N=Object(d.a)(T,2),D=N[0],x=N[1],A=Object(a.useState)(t.locations.flatMap((function(e){return e.departments})).map((function(e){return""+e.id}))),w=Object(d.a)(A,2),M=w[0],R=w[1],P=Object(a.useState)(t.locations.flatMap((function(e){return e.departments})).flatMap((function(e){return e.positions})).map((function(e){return""+e.id}))),U=Object(d.a)(P,2),L=U[0],B=U[1],F=Object(a.useState)(!1),z=Object(d.a)(F,2),V=z[0],q=z[1];Object(a.useEffect)((function(){p(n)}),[n]),Object(a.useEffect)((function(){l&&q(!1)}),[l]);var W=function(e){return Object(f.a)({},Ve,{start:n.start,end:n.end,tagId:-1,positionIds:e.locations.flatMap((function(e){return e.departments.flatMap((function(e){return e.positions.map((function(e){return e.id}))}))})),dnLocIds:e.locations.map((function(e){return e.id})),settingsLocId:e.locations[0].id})},_=function(e){var t,n;k(e),q(!0),p((t=m,(n=e)===gt.Custom?Object(f.a)({},t,{eventTypeId:-1,eventStatusId:-1}):Object(f.a)({},t,{eventTypeId:n,eventStatusId:n}))),h(e===gt.Custom)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.l,null,r.a.createElement(i.R,null,r.a.createElement(i.e,{slot:"start"},r.a.createElement(i.d,{onClick:function(){c()}},r.a.createElement(i.m,{icon:$.a,mode:"md",slot:"icon-only"}))),r.a.createElement(i.O,null,"Filter"),r.a.createElement(i.e,{slot:"end"},r.a.createElement(i.d,{onClick:function(){h(!1),k(gt.ClockAndSched),j(yt(t,n)),x(t.locations.map((function(e){return""+e.id}))),R(t.locations.flatMap((function(e){return e.departments})).map((function(e){return""+e.id}))),B(t.locations.flatMap((function(e){return e.departments})).flatMap((function(e){return e.positions})).map((function(e){return""+e.id}))),p(W(t)),q(!0)}},"RESET")))),r.a.createElement(i.h,{class:"outer-content"},r.a.createElement(i.o,null,r.a.createElement(i.p,null,"Events"),r.a.createElement(i.F,{value:O,onIonChange:function(e){return _(e.detail.value)},interface:"action-sheet"},r.a.createElement(i.G,{value:gt.ClockAndSched},"Clock + Sched"),r.a.createElement(i.G,{value:gt.Scheduled},"Scheduled"),r.a.createElement(i.G,{value:gt.DontWork},"Don't Work"),r.a.createElement(i.G,{value:gt.Custom},"Custom"),r.a.createElement(i.G,{value:gt.All},"All"))),b&&r.a.createElement(i.o,null,r.a.createElement(i.p,null,"Type"),r.a.createElement(i.F,{value:m.eventTypeId,onIonChange:function(e){return p(Object(f.a)({},m,{eventTypeId:e.detail.value}))},interface:"action-sheet"},I.map((function(e){return r.a.createElement(i.G,{key:e.value,value:e.value},e.text)})))),b&&r.a.createElement(i.o,null,r.a.createElement(i.p,null,"Status"),r.a.createElement(i.F,{value:m.eventStatusId,onIonChange:function(e){return p(Object(f.a)({},m,{eventStatusId:e.detail.value}))},interface:"action-sheet"},r.a.createElement(i.G,{value:-1},"All"),r.a.createElement(i.G,{value:1},"Approved"),r.a.createElement(i.G,{value:2},"Request"),r.a.createElement(i.G,{value:4},"Request Denied"))),r.a.createElement(i.o,null,r.a.createElement(i.p,null,"Tags"),r.a.createElement(i.F,{value:m.tagId||-1,onIonChange:function(e){p(Object(f.a)({},m,{tagId:e.detail.value})),q(!0)},interface:"action-sheet"},r.a.createElement(i.G,{key:-1,value:-1},"ALL"),t.tags.map((function(e){return r.a.createElement(i.G,{key:e.id,value:e.id},"~",e.name)})))),t.locations.length>1&&r.a.createElement(i.o,null,r.a.createElement(i.p,null,"Locations"),r.a.createElement(i.F,{multiple:!0,onIonChange:function(e){return n=e.detail.value,x(n),q(!0),R(t.locations.filter((function(e){return n.indexOf(e.id.toString())>=0})).flatMap((function(e){return e.departments})).map((function(e){return""+e.id}))),void j(yt(t,m));var n},value:D},t.locations.map((function(e){return r.a.createElement(i.G,{key:e.id,value:e.id.toString()},e.name)})))),t.locations.flatMap((function(e){return e.departments})).length>1&&r.a.createElement(i.o,null,r.a.createElement(i.p,null,"Departments"),r.a.createElement(i.F,{multiple:!0,onIonChange:function(e){return n=e.detail.value,R(n),q(!0),void B(t.locations.filter((function(e){return D.indexOf(e.id.toString())>=0})).flatMap((function(e){return e.departments})).flatMap((function(e){return e.positions})).map((function(e){return""+e.id})));var n},value:M},t.locations.filter((function(e){return D.indexOf(e.id.toString())>=0})).map((function(e){return e.departments.map((function(t){return r.a.createElement(i.G,{key:t.id,value:t.id.toString()},e.abbr,"/",t.name)}))})))),t.locations.flatMap((function(e){return e.departments})).flatMap((function(e){return e.positions})).length>1&&r.a.createElement(i.o,null,r.a.createElement(i.p,null,"Positions"),r.a.createElement(i.F,{multiple:!0,onIonChange:function(e){return t=e.detail.value,B(t),void q(!0);var t},value:L},t.locations.filter((function(e){return D.indexOf(e.id.toString())>=0})).flatMap((function(e){return e.departments})).filter((function(e){return M.indexOf(e.id.toString())>=0})).map((function(e){return e.positions.map((function(e){return r.a.createElement(i.G,{key:e.id,value:e.id.toString()},e.name)}))})))),r.a.createElement(i.d,{className:"apply-button",expand:"block",onClick:function(){var e=L.map((function(e){return parseInt(e)})),n=W(t),a=Object(f.a)({},m,{positionIds:e}),r=!(n.eventTypeId===a.eventTypeId&&n.eventStatusId===a.eventStatusId&&n.tagId===a.tagId&&kt.areEqual(n.positionIds,a.positionIds));o(a,r)},disabled:!V},"APPLY FILTER")),r.a.createElement(i.j,null,r.a.createElement(i.R,null)))};var Ct,It=function(e){var t=Object(a.useRef)(null),n={ionicRefresherJsx:r.a.createElement(i.z,{slot:"fixed",ref:t,onIonRefresh:e},r.a.createElement(i.A,{pullingText:"Pull down to refresh",refreshingSpinner:"dots",refreshingText:"Refreshing...",style:{backgroundColor:"white"}}))};return Object(f.a)({},n)},jt=(n(69),n(168),function(e){var t=e.auth,n=e.editorValues,o=e.update,c=e.eventTypes,l=e.eventStatuses,s=Object(a.useState)(yt(t,void 0)),u=Object(d.a)(s,2),m=u[0],p=u[1],E=Object(a.useState)(Je.Shift),v=Object(d.a)(E,2),f=v[0],b=v[1],h=Object(a.useState)(null),g=Object(d.a)(h,2),y=g[0],O=g[1],k=Object(a.useState)($e.Approved),S=Object(d.a)(k,2),C=S[0],I=S[1],j=Object(a.useState)("Ex: 00:00"),T=Object(d.a)(j,2),N=T[0],D=T[1],x=Object(a.useState)(null),A=Object(d.a)(x,2),w=A[0],M=A[1],R=Object(a.useState)(null),P=Object(d.a)(R,2),U=P[0],L=P[1];Object(a.useEffect)((function(){p(c),O(l),t.role===J.Employee&&n.scheduleEventId<=0&&C!==$e.Request&&o({type:"TYPESTATUS-UPDATED",eventType:f,eventStatus:$e.Request,absentId:n.absentId,absentTimeMinutes:n.absentTimeMinutes}),n.absentId?b(n.absentId):b(n.eventType),I(l[0].value)}),[t,n.eventType,n.eventStatus,n.position,n.absentId,n.scheduleEventId]),Object(a.useEffect)((function(){w&&L(null===n.absentTimeMinutes?null:function(e,t){if(e.TimeFormat===ne.HoursMinutes){if(null===t)return"00:00";var n=Math.floor(t/60),a=t%60;return"".concat(Le(n,2),":").concat(Le(a,2))}return null===t?"0":Ue(t/60,e.TimeFormatDigits,e.TimeFormatDecimals)}(w,n.absentTimeMinutes))}),[w,n.absentTimeMinutes]),Object(a.useEffect)((function(){if((!w||n.locationId!==w.LocationId)&&t&&t.locations&&0!==t.locations.length){var e=Xe(t,n.locationId);M(e),D(e.TimeFormat===ne.HoursMinutes?"Ex: 00:00":"Ex: 0.0")}}),[n.locationId]),Object(a.useEffect)((function(){n.scheduleEventId>0&&I(n.eventStatus)}),[n.eventStatus,n.scheduleEventId]);var B=function(e){if(void 0===e&&(e=null),null!=e){var t=function(e,t){if(!t||0===t.length)return 0;if(e.TimeFormat===ne.HoursMinutes){if(!/^\d*(:\d{2})?$/.test(t))return 0;if(":"===t[0])return parseInt(t.substring(1));var n=t.split(":");return 1===n.length?60*parseInt(t):60*parseInt(n[0])+parseInt(n[1])}return/^\d+(.\d*)?$/.test(t)?Math.round(60*parseFloat(t)):0}(w,e);t!==n.absentTimeMinutes&&o({type:"TYPESTATUS-UPDATED",eventType:f,eventStatus:C,absentId:f>=100?f:void 0,absentTimeMinutes:t})}else o({type:"TYPESTATUS-UPDATED",eventType:f,eventStatus:C,absentId:f>=100?f:void 0,absentTimeMinutes:null})};return null===w?r.a.createElement("div",null,"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.C,{className:"edit-row"},r.a.createElement(i.g,{size:"3"},r.a.createElement(i.p,{className:"label"},"Type")),r.a.createElement(i.g,{size:"9"},r.a.createElement(i.F,{className:"select",interface:"popover",disabled:n.isReadonly,value:f,onIonChange:function(e){!function(e){if(e!==n.eventType){b(e);var t=e!==Je.Absent&&e<100?null:n.absentTimeMinutes;o({type:"TYPESTATUS-UPDATED",eventType:e,eventStatus:C,absentId:e>=100?e:void 0,absentTimeMinutes:t})}}(e.detail.value)}},m.map((function(e){return r.a.createElement(i.G,{key:e.value,value:e.value},e.text)}))))),r.a.createElement(i.C,{className:"edit-row"},r.a.createElement(i.g,{size:"3"},r.a.createElement(i.p,{className:"label"},"Status")),r.a.createElement(i.g,{size:"9"},r.a.createElement(i.F,{className:"select",interface:"popover",disabled:n.isReadonly||t.role===J.Employee&&n.scheduleEventId<=0,value:C,onIonChange:function(e){var t;(t=e.detail.value)!==n.eventStatus&&(I(t),o({type:"TYPESTATUS-UPDATED",eventType:f,eventStatus:t,absentId:f>=100?f:void 0,absentTimeMinutes:n.absentTimeMinutes}))}},y&&y.map((function(e){return r.a.createElement(i.G,{key:e.value,value:e.value},e.text)}))))),r.a.createElement(i.C,{className:f>100?"visible edit-row":"invisible"},r.a.createElement(i.g,{size:"3"},r.a.createElement(i.p,{className:"label"},"Hours")),r.a.createElement(i.g,{size:"9"},r.a.createElement(i.n,{className:"input-textbox",placeholder:N,disabled:n.isReadonly,value:U,onIonChange:function(e){e.detail.value&&L(e.detail.value)},onIonBlur:function(){B(U)}}))))}),Tt=function(e){var t=e.auth,n=e.editorValues,o=e.update,c=Object(a.useState)({location:{},position:{}}),l=Object(d.a)(c,2),s=l[0],u=l[1],m=Object(a.useState)([]),p=Object(d.a)(m,2),E=p[0],v=p[1];Object(a.useEffect)((function(){if(t&&t.locations&&t.locations.length>0)if(n.position&&n.scheduleEventId>0){var e=ct(t.locations,n.position.location.id,n.position.position.id);e.position.id!==s.position.id&&u(e)}else{var a=ct(t.locations,t.locations[0].id,t.locations[0].departments[0].positions[0].id);u(a)}}),[n.position,t]),Object(a.useEffect)((function(){t&&t.locations&&t.locations.length>0&&v(function(e){var t=e.length>1;return e.flatMap((function(e){return e.departments.flatMap((function(n){return n.positions.map((function(a){var r=e.departments.length>1,o="";return t&&(o+=(e.abbr?e.abbr:e.name)+"/"),r&&(o+=(n.abbr?n.abbr:n.name)+"/"),o+=a.name,{id:a.id,name:o}}))}))}))}(t.locations))}),[t]);return r.a.createElement(i.C,{className:"edit-row"},r.a.createElement(i.g,{size:"3"},r.a.createElement(i.p,{className:"label"},"Position")),r.a.createElement(i.g,{size:"9"},r.a.createElement(i.F,{className:"select",interface:"popover",disabled:n.isReadonly,value:s.position.id,onIonChange:function(e){return function(e){var a=lt(t.locations,e);a.position.id!==n.position.position.id&&(u(a),o({type:"POSITION-UPDATED",selectedPosition:a}))}(e.detail.value)}},E.map((function(e){return r.a.createElement(i.G,{key:e.id,value:e.id},e.name)})))))},Nt=function(e,t,n,a,r,o){var c;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return c={locId:t,posId:n,start:Pe(a),end:Pe(r),sort:o},l.next=3,h.a.awrap(R(e,"api/v2/employees/at-position",c));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}}))},Dt=function(e){var t=e.auth,n=e.editorValues,o=e.update,c=Object(a.useState)([]),l=Object(d.a)(c,2),s=l[0],u=l[1],m=Object(a.useState)(!1),p=Object(d.a)(m,2),E=p[0],v=p[1],f=Object(a.useState)(-1),b=Object(d.a)(f,2),h=b[0],g=b[1],y=Object(a.useContext)(K).user;Object(a.useEffect)((function(){y&&y.isLoggedin&&-1!==n.scheduleEventId&&(v(!0),O(n))}),[y,n.position,n.scheduleEventId]);var O=function(e){Nt(y,n.position.location.id,n.position.position.id,Object(Oe.a)(n.eventStart),Object(Oe.a)(n.eventEnd),n.position.location.settings.EmployeeSort).then((function(a){u(a);var r=a.map((function(e){return e.EmployeeId}));if(0===n.scheduleEventId&&r.includes(t.employeeId)){g(t.employeeId);var c=a.filter((function(e){return e.EmployeeId===t.employeeId}))[0];o({type:"EMPLOYEE-UPDATED",employee:{id:c.EmployeeId,name:c.FullName}})}else{var l=r.includes(e.employee.id)?e.employee.id:-1;g(l)}v(!1)}))};return E||-1===n.scheduleEventId||0===s.length?r.a.createElement(i.C,{className:"edit-row"},r.a.createElement(i.g,{size:"3"},r.a.createElement(i.p,{className:"label"},"Employee")),r.a.createElement(i.g,{size:"9"},r.a.createElement(i.F,{className:"select",interface:"popover",value:-5},r.a.createElement(i.G,{key:"-5",value:"-5"},n.employee.name)))):r.a.createElement(i.C,{className:"edit-row"},r.a.createElement(i.g,{size:"3"},r.a.createElement(i.p,{className:"label"},"Employee")),r.a.createElement(i.g,{size:"9"},r.a.createElement(i.F,{className:"select",interface:"popover",disabled:n.isReadonly,value:h,onIonChange:function(e){!function(e){if(-5!==e&&e!==n.employee.id){g(e);var t=s.filter((function(t){return t.EmployeeId===e}))[0];o(-1===e?{type:"EMPLOYEE-UPDATED",employee:{id:-1,name:"SELECT EMPLOYEE"}}:{type:"EMPLOYEE-UPDATED",employee:{id:e,name:t.FullName}})}}(e.detail.value)}},r.a.createElement(i.G,{key:-1,value:-1},"Select Employee"),s.map((function(e){return r.a.createElement(i.G,{key:e.EmployeeId,value:e.EmployeeId},e.FullName)})))))},xt=function(e){e.auth;var t=e.editorValues,n=e.update;return t&&t.eventStart?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.C,{className:"edit-row"},r.a.createElement(i.g,{size:"3"},r.a.createElement(i.p,{className:"label"},"Start")),r.a.createElement(i.g,{size:"9"},r.a.createElement(i.i,{className:"select",displayFormat:"M/D/YY h:mma",disabled:t.isReadonly,pickerFormat:"MMM DD YYYY h:mm A",min:"2005-01-01",max:"2030-01-01",minuteValues:"0,5,10,15,20,25,30,35,40,45,50,55",value:t.eventStart,onIonChange:function(e){var a;(a=e.detail.value)&&Object(Oe.a)(a)!==Object(Oe.a)(t.eventStart)&&n({type:"START-UPDATED",eventStart:a})}}))),r.a.createElement(i.C,{className:"edit-row"},r.a.createElement(i.g,{size:"3"},r.a.createElement(i.p,{className:"label"},"End")),r.a.createElement(i.g,{size:"9"},r.a.createElement(i.i,{className:"select",displayFormat:"M/D/YY h:mma",disabled:t.isReadonly||t.isClockedIn,pickerFormat:"MMM DD YYYY h:mm A",min:"2005-01-01",max:"2030-01-01",minuteValues:"0,5,10,15,20,25,30,35,40,45,50,55",value:t.eventEnd,onIonChange:function(e){var a;(a=e.detail.value)&&Object(Oe.a)(a)!==Object(Oe.a)(t.eventEnd)&&n({type:"END-UPDATED",eventEnd:a})}})))):r.a.createElement("div",null,"Loading")},At=n(136),wt=(n(169),n(296)),Mt=n(297),Rt=n(299),Pt=(n(170),n(293)),Ut=n(294),Lt=n(295),Bt=function(e,t,n){var a=e,r=t,o=!1;return n.map((function(e){var t=Object(Pt.a)(Object(Oe.a)(e.BreakStart),3),n=e.BreakEnd?Object(Pt.a)(Object(Oe.a)(e.BreakEnd),-3):new Date(2200,1,1);return a<n&&r>t&&(o=!0),o})),o},Ft=function(e){var t=e.onCancel,n=e.onAdd,o=e.currentBreaks,c=e.eventStart,l=e.eventEnd,s=Object(a.useState)(Object(Ut.a)(Object(Lt.a)(new Date,12),0)),u=Object(d.a)(s,2),m=u[0],p=u[1],E=Object(a.useState)(Object(Ut.a)(Object(Lt.a)(new Date,13),0)),v=Object(d.a)(E,2),f=v[0],b=v[1],h=Object(a.useState)(!1),g=Object(d.a)(h,2),y=g[0],O=g[1],k=Object(a.useState)(!1),S=Object(d.a)(k,2),C=S[0],I=S[1],j=Object(a.useState)(""),T=Object(d.a)(j,2),N=T[0],D=T[1],x=Object(a.useState)(!0),A=Object(d.a)(x,2),w=A[0],M=A[1],R=Q();return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.h,null,r.a.createElement(i.l,{mode:"ios"},r.a.createElement(i.R,null,r.a.createElement(i.O,null,"Add Break"))),r.a.createElement(i.k,null,r.a.createElement(i.C,null,r.a.createElement(i.g,{className:"label",size:"3"},"Start"),r.a.createElement(i.g,{size:"9"},r.a.createElement(i.i,{className:"select",displayFormat:"h:mm a",pickerFormat:"h:mm A",min:"2005-01-01",max:"2030-01-01",minuteValues:"0,5,10,15,20,25,30,35,40,45,50,55",value:m.toISOString(),onIonChange:function(e){return function(e){var t=Object(Oe.a)(e);p(t),console.log(o),Object(Ye.a)(t,f)?Object(Oe.a)(c)>t?(M(!1),D("Start before Event begins")):Bt(t,f,o)?(M(!1),D("Pre-existing break overlaps")):(M(!0),D("")):(M(!1),D("Start must be before End"))}(e.detail.value)}}))),r.a.createElement(i.C,null,r.a.createElement(i.g,{className:"label",size:"3"},"End"),r.a.createElement(i.g,{size:"9"},r.a.createElement(i.i,{className:"select",displayFormat:"h:mm a",pickerFormat:"h:mm A",min:"2005-01-01",max:"2030-01-01",minuteValues:"0,5,10,15,20,25,30,35,40,45,50,55",value:f.toISOString(),onIonChange:function(e){return function(e){var t=Object(Oe.a)(e);b(t),Object(Te.a)(t,m)?t>Object(Oe.a)(l)?(M(!1),D("End after Event ends")):Bt(m,t,o)?(M(!1),D("Pre-existing break overlaps")):(M(!0),D("")):(M(!1),D("End must be after Start"))}(e.detail.value)}}))),r.a.createElement(i.C,null,r.a.createElement(i.g,{className:"label",size:"3"}),r.a.createElement(i.g,{size:"9",className:"error-message"},N)),r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"12"},r.a.createElement("div",{style:{width:"100%",borderBottom:"1px solid #AAA"}}))),r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"3"},r.a.createElement(i.f,{className:"checkbox",checked:y,onIonChange:function(e){O(e.detail.checked)}})),r.a.createElement(i.g,{className:"label",size:"9"},"Restricted Break")),r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"3"},r.a.createElement(i.f,{className:"checkbox",onIonChange:function(e){I(e.detail.checked)}})),r.a.createElement(i.g,{className:"label",size:"9"},"Paid Break")))),r.a.createElement(i.j,null,r.a.createElement(i.d,{expand:"block",color:"secondary",onClick:function(){m>f?R.showAlert("Invalid Start / End","Start of break cannot come after end of break.",(function(){})):n(m,f,y,C)},disabled:!w},"ADD"),r.a.createElement(i.d,{expand:"block",onClick:t},"CANCEL")),R.alertBoxJsx)},zt=function(e){e.auth;var t=e.editorValues,n=e.update,o=Object(a.useState)([]),c=Object(d.a)(o,2),l=c[0],s=c[1],u=Object(a.useState)(!1),m=Object(d.a)(u,2),p=m[0],E=m[1];Object(a.useEffect)((function(){s(t.eventBreaks)}),[t.eventBreaks]);return t.eventType===Je.Clock||ot(t.eventType,t.eventStatus)?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.C,{className:"edit-row",style:{marginBottom:"20px"}},r.a.createElement(i.g,{size:"3"},r.a.createElement(i.d,{color:"light",disabled:t.isReadonly,onClick:function(){E(!0)}},r.a.createElement(i.m,{slot:"icon-only",icon:ge.a,color:"dark"}))),r.a.createElement(i.g,{size:"9"},(!l||0===l.length)&&r.a.createElement("div",{className:"break-div"},"(B) NONE"),l&&l.map((function(e){return r.a.createElement("div",{key:e.BreakStart,className:"break-div"},"(B) ",we(e),e.IsPaidBreak?r.a.createElement(i.m,{className:"paid-icon",icon:Mt.a}):r.a.createElement("span",null),function(e){return e.IsRestricted?r.a.createElement(i.m,{className:"restricted-icon",icon:wt.a}):r.a.createElement("span",null)}(e),r.a.createElement("button",{disabled:t.isReadonly,onClick:function(){!function(e){var t=l.filter((function(t){return t.BreakStart!==e}));s(t),n({type:"EVENTBREAKS-UPDATED",breaks:t})}(e.BreakStart)}},r.a.createElement(i.m,{slot:"icon-only",mode:"ios",icon:Rt.a,color:"gray"})))})))),r.a.createElement(i.x,{isOpen:p,cssClass:"add-break-modal",onDidDismiss:function(){return E(!1)}},r.a.createElement(Ft,{onCancel:function(){E(!1)},onAdd:function(e,a,r,o){E(!1);var c={BreakStart:Pe(e),BreakEnd:Pe(a),IsRestricted:r,IsPaidBreak:o,ScheduleEventId:t.scheduleEventId},i=[].concat(Object(At.a)(l),[c]);s(i),n({type:"EVENTBREAKS-UPDATED",breaks:i})},currentBreaks:l,eventStart:t.eventStart,eventEnd:t.eventEnd}))):r.a.createElement("div",null)},Vt=function(e){var t=e.auth,n=e.editorValues,o=e.update,c=Object(a.useState)(-1),l=Object(d.a)(c,2),s=l[0],u=l[1],m=Object(a.useState)([]),p=Object(d.a)(m,2),E=p[0],v=p[1];Object(a.useEffect)((function(){if(t&&t.locations&&t.locations.length>0){var e=t.tags.filter((function(e){return e.positionIds.includes(n.position.position.id)})).map((function(e){return{id:e.id,name:e.name}}));v(e);var a=e.map((function(e){return e.id}));a.includes(s)||(n.tag&&n.tag.id&&a.includes(n.tag.id)?u(n.tag.id):u(-1))}}),[t,n.position]);return r.a.createElement(i.C,{className:"edit-row"},r.a.createElement(i.g,{size:"3"},r.a.createElement(i.p,{className:"label"},"Tag")),r.a.createElement(i.g,{size:"9"},r.a.createElement(i.F,{className:"select",interface:"popover",disabled:n.isReadonly,value:s,onIonChange:function(e){!function(e){if(u(e),e!==n.tag.id)if(-1===e)o({type:"TAG-UPDATED",tag:{id:-1,name:"NONE"}});else{var t=E.filter((function(t){return t.id===e}))[0];o({type:"TAG-UPDATED",tag:t})}}(e.detail.value)}},r.a.createElement(i.G,{value:-1},"NONE"),E.map((function(e){return r.a.createElement(i.G,{key:e.id,value:e.id},e.name)})))))},qt=function(e){var t=e.auth,n=e.editorValues,o=e.update,c=Object(a.useState)(!1),l=Object(d.a)(c,2),s=l[0],u=l[1],m=Object(a.useState)(!1),p=Object(d.a)(m,2),E=p[0],v=p[1];Object(a.useEffect)((function(){t&&t.locations&&t.locations.length>0&&u(n.isConfirmed)}),[t,n.eventStart,n.eventEnd,n.isClockedIn]),Object(a.useEffect)((function(){var e=n.eventType===Je.Shift&&n.eventStatus===$e.Approved||n.eventType===Je.Cover&&(n.eventStatus===$e.Request||n.eventStatus===$e.RequestDenied);v(e)}),[n.eventType,n.eventStatus]);return E?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.g,{size:"1"},r.a.createElement(i.f,{checked:s,onIonChange:function(e){var t;(t=e.detail.checked)!==s&&E&&(u(t),o({type:"CONFIRM-UPDATED",isConfirmed:t}))}})),r.a.createElement(i.g,{size:"2"},r.a.createElement(i.p,{className:"label"},"Confirm"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.g,{size:"1"},r.a.createElement("span",null)),r.a.createElement(i.g,{size:"2"},r.a.createElement("span",null)))},Wt=function(e){var t=e.auth,n=e.editorValues,o=e.update,c=Object(a.useState)(!1),l=Object(d.a)(c,2),s=l[0],u=l[1],m=Object(a.useState)(!1),p=Object(d.a)(m,2),E=p[0],v=p[1];Object(a.useEffect)((function(){t&&t.locations&&t.locations.length>0&&u(n.isClockedIn)}),[t,n.eventStart,n.eventEnd,n.isClockedIn]),Object(a.useEffect)((function(){v(n.eventType===Je.Clock)}),[n.eventType,n.eventStatus]);return E?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.g,{size:"1"},r.a.createElement(i.f,{checked:s,onIonChange:function(e){var t;(t=e.detail.checked)!==s&&E&&(u(t),o({type:"ISCLOCKEDIN-UPDATED",isClockedIn:t}))}})),r.a.createElement(i.g,{size:"4"},r.a.createElement(i.p,{className:"label"},r.a.createElement(i.m,{icon:Ke.a,style:{paddingRight:"5px",marginLeft:"-5px"}}),"Clocked In"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.g,{size:"1"},r.a.createElement("span",null)),r.a.createElement(i.g,{size:"4"},r.a.createElement("span",null)))},_t=n(300);!function(e){e[e.Daily=0]="Daily",e[e.Weekly=1]="Weekly",e[e.MonthlyByDayOfMonth=2]="MonthlyByDayOfMonth",e[e.MonthlyByDayOfWeek=3]="MonthlyByDayOfWeek",e[e.Yearly=4]="Yearly"}(Ct||(Ct={}));var Gt,Yt=function(e,t){return e.locations.filter((function(e){return e.id===t}))[0]},Kt=function(e,t){return e.locations.flatMap((function(e){return e.departments.flatMap((function(e){return e.positions.filter((function(e){return e.id===t}))}))}))[0]},Ht=function(e,t){var n=Object(Oe.a)(e),a=Object(Oe.a)(t);return!!Object(_t.a)(n,a)||Object(Te.a)(a,n)},Jt=function(e,t,n){if(!n)return!0;if(!t.ClockOutValueLabel||0===t.ClockOutValueLabel.length)return!1;return/^\d*(\.\d{0,2})?$/.test(n)},Qt=function(e){return e.validEventStartEnd&&e.validEmployee&&e.validTag&&e.validEventTypeStatus&&e.validClockoutValue&&e.validRecurrenceStartEnd&&e.validRepeatInterval&&e.validRepeatWeekdays},$t={scheduleEventId:-1,locationId:0,isUpdating:!1,eventType:Je.Shift,eventStatus:$e.Approved,isConfirmed:!1,position:{location:{},position:{}},employee:{id:-1,name:"SELECT EMPLOYEE"},eventStart:Pe(Object(Lt.a)(Object(Ut.a)(new Date,0),8)),eventEnd:Pe(Object(Lt.a)(Object(Ut.a)(new Date,0),17)),tag:{id:-1,name:"SELECT TAG"},eventBreaks:[],isClockedIn:!1,isDirty:!1,valid:!0,validEventStartEnd:!0,validEmployee:!0,validTag:!0,validEventTypeStatus:!0,validClockoutValue:!0,validRecurrenceStartEnd:!0,validRepeatInterval:!0,validRepeatWeekdays:!0,absentId:void 0,absentName:void 0,absentTimeMinutes:null,notes:"",clockoutValue:void 0,isReadonly:!1},Xt=function(e,t){switch(console.log("REDUCER: ACTION =",t.type,"   Current State Emp =",e.employee.id),t.type){case"BEGIN-UPDATE":var n=t.ev,a=t.auth,r=function(e){return Object(Oe.a)(e.EventEnd)>new Date(2199,1,1)}(n);return{scheduleEventId:n.ScheduleEventId,locationId:n.LocationId,isUpdating:!1,eventType:n.EventTypeId,eventStatus:n.EventStatusId,isConfirmed:void 0!==n.ConfirmedBy&&null!==n.ConfirmedBy,position:{location:Yt(a,n.LocationId),position:Kt(a,n.PositionId)},employee:{id:n.EmployeeId,name:n.FirstName+" "+n.LastName},eventStart:n.EventStart,eventEnd:r?Pe(new Date):n.EventEnd,tag:{id:n.TagId?n.TagId:-1,name:""},eventBreaks:n.EventBreaks,isClockedIn:r,isDirty:!1,valid:!0,validEventStartEnd:!0,validEmployee:!0,validTag:!0,validEventTypeStatus:!0,validClockoutValue:!0,absentName:n.AbsentName,absentId:n.AbsentId,absentTimeMinutes:n.AbsentTimeMinutes?n.AbsentTimeMinutes:null,notes:n.Notes,clockoutValue:n.ClockOutValue,isReadonly:t.eventEditAuth.isReadonly,recurrenceId:n.EventRecurrenceId,recurrenceStart:n.EventRecurrenceStart,recurrenceEnd:n.EventRecurrenceEnd,recurrenceType:n.RepeatType,repeatInterval:n.RepeatInterval,repeatWeekdays:n.RepeatWeekdays,validRecurrenceStartEnd:!0,validRepeatInterval:!0,validRepeatWeekdays:!0};case"CANCEL":return $t;case"POSITION-UPDATED":var o=t.selectedPosition;return Object(f.a)({},e,{position:o,isDirty:!0});case"CREATE-EVENT":var c=t.auth.locations[0];return Object(f.a)({},$t,{position:{location:c,position:c.departments[0].positions[0]},scheduleEventId:0,isDirty:!0});case"SET-READONLY":return Object(f.a)({},e,{isReadonly:t.isReadonly});case"TYPESTATUS-UPDATED":var l=Object(f.a)({},e,{eventType:t.eventType,eventStatus:t.eventStatus,absentId:t.absentId,absentTimeMinutes:t.absentTimeMinutes,isDirty:!0,validEventTypeStatus:!(t.absentId&&null===t.absentTimeMinutes)});return l.valid=Qt(l),l;case"CLOCKOUTVALUE-UPDATED":var s=Object(f.a)({},e,{clockoutValue:t.clockoutValue,validClockoutValue:Jt(0,t.locSettings,t.clockoutValue),isDirty:!0});return s.valid=Qt(s),s;case"EMPLOYEE-UPDATED":var i=Object(f.a)({},e,{employee:t.employee,isDirty:!0,validEmployee:t.employee.id>0});return i.valid=Qt(i),i;case"START-UPDATED":var u=Object(f.a)({},e,{eventStart:t.eventStart,isDirty:!0,validEventStartEnd:Ht(t.eventStart,e.eventEnd)});return u.valid=Qt(u),u;case"END-UPDATED":var d=Object(f.a)({},e,{eventEnd:t.eventEnd,isDirty:!0,validEventStartEnd:Ht(e.eventStart,t.eventEnd)});return d.valid=Qt(d),d;case"EVENTBREAKS-UPDATED":return Object(f.a)({},e,{eventBreaks:t.breaks,isDirty:!0});case"TAG-UPDATED":var m=Object(f.a)({},e,{tag:t.tag,isDirty:!0,validTag:!0});return m.valid=Qt(m),m;case"CONFIRM-UPDATED":var p=Object(f.a)({},e,{isConfirmed:t.isConfirmed,isDirty:!0});return p.valid=Qt(p),p;case"NOTES-UPDATED":return Object(f.a)({},e,{notes:t.notes,isDirty:!0});case"ISCLOCKEDIN-UPDATED":var E=Object(f.a)({},e,{isClockedIn:t.isClockedIn,isDirty:!0});if(t.isClockedIn){var v=Pe(new Date);E.eventStart=v,E.eventEnd=v}return E.valid=Qt(E),E;case"REPEATING-UPDATED":var b=Object(f.a)({},e,{recurrenceStart:t.recurrenceStart,recurrenceEnd:t.recurrenceEnd,recurrenceType:t.recurrenceType,repeatInterval:t.repeatInterval,repeatWeekdays:t.repeatWeekDays,isDirty:!0});return b.recurrenceStart&&(b.repeatInterval===Ct.Weekly?b.validRepeatWeekdays=null!==b.repeatWeekdays&&void 0!==b.repeatWeekdays&&b.repeatWeekdays.length>0:(b.repeatWeekdays=void 0,b.validRepeatWeekdays=!0),b.recurrenceEnd?b.validRecurrenceStartEnd=Object(Ye.a)(Object(Oe.a)(b.recurrenceStart),Object(Oe.a)(b.recurrenceEnd)):b.validRecurrenceStartEnd=!1,b.validRepeatInterval=null!==b.repeatInterval&&void 0!==b.repeatInterval&&b.repeatInterval>0),b.valid=Qt(b),b;default:return console.error("ERROR in editorValueReducer, could not find action for "+t.type),e}},Zt=function(e){e.auth;var t=e.editorValues,n=e.update;Object(a.useEffect)((function(){}));return r.a.createElement(i.C,{className:"edit-row"},r.a.createElement(i.g,{size:"3"},r.a.createElement(i.p,{className:"label"},"Notes")),r.a.createElement(i.g,{size:"9"},r.a.createElement(i.N,{className:"textarea",maxlength:200,rows:4,value:t.notes,disabled:t.isReadonly,onIonChange:function(e){return(a=e.detail.value)||(a=""),void(a!==t.notes&&n({type:"NOTES-UPDATED",notes:a}));var a}})))},en=function(e){var t=e.auth,n=e.editorValues,o=e.update,c=Object(a.useState)(!1),l=Object(d.a)(c,2),s=l[0],u=l[1],m=Object(a.useState)(null),p=Object(d.a)(m,2),E=p[0],v=p[1];Object(a.useEffect)((function(){if(!(0===n.locationId||E&&n.locationId===E.LocationId)&&t&&t.locations&&0!==t.locations.length&&n.locationId){var e=Xe(t,n.locationId);v(e)}}),[n.locationId,t]),Object(a.useEffect)((function(){E&&u(void 0!==E.ClockOutValueLabel&&null!==E.ClockOutValueLabel&&E.ClockOutValueLabel.length>0&&n.eventType===Je.Clock&&!n.isClockedIn)}),[n.eventType,n.isClockedIn,E]);return s&&null!==E?r.a.createElement(i.C,{className:"edit-row"},r.a.createElement(i.g,{size:"3"},r.a.createElement(i.p,{className:"label"},E.ClockOutValueLabel)),r.a.createElement(i.g,{size:"9"},r.a.createElement(i.n,{className:"input-textbox",value:n.clockoutValue,onIonChange:function(e){return null===(t=e.detail.value)&&(t=void 0),void(t!==n.clockoutValue&&o({type:"CLOCKOUTVALUE-UPDATED",locSettings:E,clockoutValue:t}));var t}}))):r.a.createElement("div",null)},tn=(n(171),n(172),function(e,t){var n;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n="api/v1/employee/schedule-events/cover-request/undo?scheduleEventId=".concat(t),a.next=3,h.a.awrap(P(e,n));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))}),nn=function(e,t,n,a,r,o,c){var l;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return"api/v1/employee/schedule-events/cover-request/submit",l={ScheduleEventId:t,LocationId:n,BusinessId:a,BroadcastCoverRequestMessage:r,CoverMessage:o,DirectToEmployeeId:c},s.next=4,h.a.awrap(P(e,"api/v1/employee/schedule-events/cover-request/submit",l));case 4:return s.abrupt("return",s.sent);case 5:case"end":return s.stop()}}))},an=function(e,t,n,a,r,o){var c;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return"api/v2/requests/shift-request/submit",c={ScheduleEventId:t,LocationId:n,BusinessId:a,BroadcastCoverRequestMessage:r,CoverMessage:o},l.next=4,h.a.awrap(P(e,"api/v2/requests/shift-request/submit",c));case 4:return l.abrupt("return",l.sent);case 5:case"end":return l.stop()}}))},rn=function(e,t,n,a,r,o){var c;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return"api/v1/employee/schedule-events/delete",c={LocationId:t,ScheduleEventId:n,EventTypeId:a,EventStatusId:r,RecUpdateType:o},l.next=4,h.a.awrap(R(e,"api/v1/employee/schedule-events/delete",c));case 4:return l.abrupt("return",l.sent);case 5:case"end":return l.stop()}}))},on=function(e,t,n,a,r,o){var c;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return"api/v1/employee/schedule-events/delete",c={LocationId:t,ScheduleEventId:n,EventTypeId:a,EventStatusId:r,RecUpdateType:o},l.next=4,h.a.awrap(R(e,"api/v1/employee/schedule-events/delete",c));case 4:return l.abrupt("return",l.sent);case 5:case"end":return l.stop()}}))},cn=function(e,t,n){var a;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return"api/v2/requests/transfers/to-list",a={scheduleEventId:t,directCoverList:n},r.next=4,h.a.awrap(R(e,"api/v2/requests/transfers/to-list",a));case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}))},ln=function(e){var t=e.onCancel,n=e.onOk,o=e.eventEditAuth,c=e.locSettings,l=e.scheduleEventId,s=Object(a.useContext)(K).user,u=Object(a.useState)(""),m=Object(d.a)(u,2),p=m[0],E=m[1],v=Object(a.useState)(null),f=Object(d.a)(v,2),b=f[0],h=f[1],g=Object(a.useState)(null),y=Object(d.a)(g,2),O=y[0],k=y[1];Object(a.useEffect)((function(){o.usage===Qe.CreateCoverRequest&&l>0&&cn(s,l,!0).then((function(e){k(e),e&&e.length>0&&h(e[0].value)}))}),[l,o.usage]);return o.usage===Qe.None?r.a.createElement("div",null):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.h,null,r.a.createElement(i.l,{mode:"ios"},r.a.createElement(i.R,null,r.a.createElement(i.O,null,o.buttonText))),r.a.createElement(i.k,null,r.a.createElement(i.C,{hidden:!c.EnableDirectCoverRequest||o.usage!==Qe.CreateCoverRequest},r.a.createElement(i.g,{className:"label",size:"3"},"To"),r.a.createElement(i.g,{size:"9"},r.a.createElement(i.F,{className:"select",value:b,onIonChange:function(e){h(parseInt(e.detail.value))}},O&&O.map((function(e){return r.a.createElement(i.G,{key:e.value,value:e.value,disabled:e.disabled},e.text)}))))),r.a.createElement(i.C,{hidden:o.usage===Qe.CreateCoverRequest},r.a.createElement(i.g,{size:"12"},r.a.createElement("div",{className:"usage-message"},o.text))),r.a.createElement(i.C,{hidden:o.usage!==Qe.CreateCoverRequest},r.a.createElement(i.g,{className:"label",size:"3"},"Notes"),r.a.createElement(i.g,{size:"9"},r.a.createElement(i.N,{className:"select",maxlength:200,rows:4,value:p,onIonChange:function(e){E(e.detail.value)}}))),r.a.createElement(i.C,null,r.a.createElement(i.g,{className:"label",size:"3"}),r.a.createElement(i.g,{size:"9",className:"error-message"},r.a.createElement("div",null))))),r.a.createElement(i.j,null,r.a.createElement(i.d,{expand:"block",color:"secondary",onClick:function(){n(b,null!==p&&void 0!==p?p:"",!1)}},"OK"),r.a.createElement(i.d,{expand:"block",onClick:t},"CANCEL")))},sn=function(e){var t=e.auth,n=(e.update,e.cancelEditModal),o=(e.eventEnd,e.eventType),c=e.eventStatus,l=(e.eventEmployeeId,e.scheduleEventId),s=(e.eventPositionId,e.locationId),u=(e.setUsageText,e.eventEditAuth),m=Object(a.useContext)(K).user,p=Object(a.useState)(!1),E=Object(d.a)(p,2),v=E[0],f=E[1],b=Q(),h=function(e){f(!1),n(e)};return!u||!t||!t.locations||0===t.locations.length||u.usage===Qe.None||l<=0?r.a.createElement("div",null):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.d,{className:"apply-button",expand:"block",onClick:function(){f(!0)}},u.buttonText),r.a.createElement(i.x,{isOpen:v,cssClass:"event-request-modal",onDidDismiss:function(){return f(!1)}},r.a.createElement(ln,{onCancel:function(){f(!1)},onOk:function(e,t,n){switch(u.usage){case Qe.CreateCoverRequest:nn(m,l,s,0,n,t,e).then((function(){h("Cover-Request Created")}));break;case Qe.CreateShiftRequest:an(m,l,s,0,n,t).then((function(e){e.error?b.showAlert("Shift-Request Failed",e.message,(function(){})):h(e.message)}));break;case Qe.DeleteShiftRequest:rn(m,s,l,o,c,void 0).then((function(){h("Shift-Request Removed")}));break;case Qe.UndoCoverRequest:tn(m,l).then((function(){h("Removed Cover-Request")}));break;case Qe.Delete:on(m,s,l,o,c,void 0).then((function(){h("Deleted")}))}},auth:t,eventEditAuth:u,scheduleEventId:l,locSettings:Xe(t,s)}),b.alertBoxJsx))},un=(n(173),n(303)),dn=(n(174),n(301)),mn=function(e){var t=e.locSettings,n=e.editorValues,o=e.update,c=Object(a.useState)([!1,!1,!1,!1,!1,!1,!1]),l=Object(d.a)(c,2),s=l[0],u=l[1];if(Object(a.useEffect)((function(){if(n.repeatWeekdays){for(var e=[!1,!1,!1,!1,!1,!1,!1],t=0;t<n.repeatWeekdays.length;t++)e[parseInt(n.repeatWeekdays[t])]=!0;u(e)}else u([!1,!1,!1,!1,!1,!1,!1])}),[n.repeatWeekdays]),null===t)return r.a.createElement("div",null);var m=Re(new Date,t.DayWeekStartsOn,t.DayStartTime);return r.a.createElement("div",{className:"weeklist-container"},[0,1,2,3,4,5,6].map((function(e){var t=Object(je.a)(m,e),a=Object(dn.a)(t);return r.a.createElement("span",{key:e,className:"day"},r.a.createElement(i.f,{className:"day-checkbox",disabled:n.isReadonly,onClick:function(){return function(e){var t=s.slice(),a=!s[e];t[e]=a,u(t);for(var r="",c=0;c<t.length;c++)t[c]&&(r+=c);o({type:"REPEATING-UPDATED",repeatWeekDays:r,repeatInterval:n.repeatInterval,recurrenceType:n.recurrenceType,recurrenceEnd:n.recurrenceEnd,recurrenceStart:n.recurrenceStart})}(a)},checked:s[a]}),r.a.createElement("span",{className:"day-abbr"},Object(Se.a)(t,"EE").substr(0,2)))})))},pn=function(e){var t=e.auth,n=e.editorValues,o=e.update,c=Object(a.useState)(null),l=Object(d.a)(c,2),s=l[0],u=l[1],m=Object(a.useState)(!1),p=Object(d.a)(m,2),E=p[0],v=p[1],f=Object(a.useState)(!1),b=Object(d.a)(f,2),h=b[0],g=b[1];return Object(a.useEffect)((function(){n.locationId>0?u(Xe(t,n.locationId)):0===n.locationId&&u(t.locations[0].settings)}),[n.locationId]),Object(a.useEffect)((function(){v(n.eventType===Je.Shift||n.eventType===Je.Unavailable)}),[n.eventType]),Object(a.useEffect)((function(){E&&n.recurrenceStart&&g(!0)}),[h,E,n.recurrenceStart]),E?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"4"},r.a.createElement(i.f,{checked:h,onClick:function(){o(h?{type:"REPEATING-UPDATED",repeatWeekDays:void 0,repeatInterval:void 0,recurrenceType:void 0,recurrenceEnd:void 0,recurrenceStart:void 0}:{type:"REPEATING-UPDATED",repeatWeekDays:void 0,repeatInterval:1,recurrenceType:Ct.Weekly,recurrenceEnd:void 0,recurrenceStart:Pe(new Date)}),g(!h)},disabled:n.isReadonly}),r.a.createElement(i.p,{className:"label",style:{paddingLeft:"10px"}},"(R)epeating")),h&&r.a.createElement(i.g,{size:"8"},r.a.createElement("div",{style:{borderBottom:"1px solid gray",height:"12px"}}))),h&&r.a.createElement(r.a.Fragment,null,r.a.createElement(i.C,{className:"edit-row"},r.a.createElement(i.g,{size:"2"}),r.a.createElement(i.g,{size:"1"},r.a.createElement(i.m,{icon:fe.a,mode:"md"})),r.a.createElement(i.g,{size:"4"},r.a.createElement(i.i,{value:n.recurrenceStart,className:"select",displayFormat:"M/D/YY",pickerFormat:"MMM DD YYYY",disabled:n.isReadonly,min:"2005-01-01",max:"2030-01-01",onIonChange:function(e){var t;t=e.detail.value,o(t?{type:"REPEATING-UPDATED",repeatWeekDays:n.repeatWeekdays,repeatInterval:n.repeatInterval,recurrenceType:n.recurrenceType,recurrenceEnd:n.recurrenceEnd,recurrenceStart:t}:{type:"REPEATING-UPDATED",repeatWeekDays:n.repeatWeekdays,repeatInterval:n.repeatInterval,recurrenceType:n.recurrenceType,recurrenceEnd:n.recurrenceEnd,recurrenceStart:void 0})}})),r.a.createElement(i.g,{size:"1"},r.a.createElement(i.m,{icon:fe.a,mode:"md",style:{textAlign:"right"}})),r.a.createElement(i.g,{size:"4"},r.a.createElement(i.i,{value:n.recurrenceEnd,className:"select",displayFormat:"M/D/YY",pickerFormat:"MMM DD YYYY",disabled:n.isReadonly,min:"2005-01-01",max:"2030-01-01",onIonChange:function(e){var t;t=e.detail.value,o(t?{type:"REPEATING-UPDATED",repeatWeekDays:n.repeatWeekdays,repeatInterval:n.repeatInterval,recurrenceType:n.recurrenceType,recurrenceEnd:t,recurrenceStart:n.recurrenceStart}:{type:"REPEATING-UPDATED",repeatWeekDays:n.repeatWeekdays,repeatInterval:n.repeatInterval,recurrenceType:n.recurrenceType,recurrenceEnd:void 0,recurrenceStart:n.recurrenceStart})}}))),r.a.createElement(i.C,{className:"edit-row"},r.a.createElement(i.g,{size:"2"}),r.a.createElement(i.g,{size:"1"},r.a.createElement(i.m,{icon:un.a,mode:"md"})),r.a.createElement(i.g,{size:"4"},r.a.createElement(i.F,{className:"select",value:n.recurrenceType,disabled:n.isReadonly,onIonChange:function(e){var t;t=e.detail.value,o(t?{type:"REPEATING-UPDATED",repeatWeekDays:n.repeatWeekdays,repeatInterval:n.repeatInterval,recurrenceType:parseInt(t),recurrenceEnd:n.recurrenceEnd,recurrenceStart:n.recurrenceStart}:{type:"REPEATING-UPDATED",repeatWeekDays:n.repeatWeekdays,repeatInterval:n.repeatInterval,recurrenceType:void 0,recurrenceEnd:n.recurrenceEnd,recurrenceStart:n.recurrenceStart})}},r.a.createElement(i.G,{value:Ct.Weekly},"Weekly"),r.a.createElement(i.G,{value:Ct.MonthlyByDayOfMonth},"Monthly (Day of Month)"),r.a.createElement(i.G,{value:Ct.MonthlyByDayOfWeek},"Monthly (Day of Week)"))),r.a.createElement(i.g,{size:"1"},"#"),r.a.createElement(i.g,{size:"4"},r.a.createElement(i.n,{className:"input-textbox",disabled:n.isReadonly,value:n.repeatInterval?n.repeatInterval.toString():void 0,onIonChange:function(e){return t=e.detail.value,void o(t?{type:"REPEATING-UPDATED",repeatWeekDays:n.repeatWeekdays,repeatInterval:parseInt(t),recurrenceType:n.recurrenceType,recurrenceEnd:n.recurrenceEnd,recurrenceStart:n.recurrenceStart}:{type:"REPEATING-UPDATED",repeatWeekDays:n.repeatWeekdays,repeatInterval:void 0,recurrenceType:n.recurrenceType,recurrenceEnd:n.recurrenceEnd,recurrenceStart:n.recurrenceStart});var t}}))),r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"3"}),r.a.createElement(i.g,{size:"9"},r.a.createElement(mn,{locSettings:s,editorValues:n,update:o}))),r.a.createElement(i.C,{className:"edit-row"},r.a.createElement(i.g,{size:"12"},r.a.createElement("div",{style:{borderTop:"1px solid gray",width:"100%"}}))))):r.a.createElement("span",null)};!function(e){e[e.UpdateSingleEvent=0]="UpdateSingleEvent",e[e.UpdateEntireSeries=1]="UpdateEntireSeries",e[e.UpdateSeriesForward=2]="UpdateSeriesForward"}(Gt||(Gt={}));n(175);var En=function(e){var t=e.onSelect,n=e.updateType;if("NO"===n)return r.a.createElement("div",null);var a=function(e){t(e)},o="UPDATE"===n?"Update Recurring Events":"Delete Recurring Events";return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.h,null,r.a.createElement(i.l,{mode:"ios"},r.a.createElement(i.R,null,r.a.createElement(i.O,null,o))),r.a.createElement(i.k,null,r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"12"},r.a.createElement(i.d,{expand:"block",color:"danger",className:"apply-button",onClick:function(){return a(Gt.UpdateSingleEvent)}},"This event"))),r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"12"},r.a.createElement(i.d,{expand:"block",color:"danger",className:"apply-button",onClick:function(){return a(Gt.UpdateEntireSeries)}},"Entire series"))),r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"12"},r.a.createElement(i.d,{expand:"block",color:"danger",className:"apply-button",onClick:function(){return a(Gt.UpdateSeriesForward)}},"This event forward"))),r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"12"},r.a.createElement(i.d,{expand:"block",className:"cancel-btn",onClick:function(){return a(null)}},"Cancel"))))))};n(176);var vn=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)({header:"",message:"",options:[],onDismiss:function(e){}}),l=Object(d.a)(c,2),s=l[0],u=l[1],m=function(e){o(!1),s.onDismiss(e)};return{showDialog:function(e,t,n,a){u({header:e,message:t,options:n,onDismiss:a}),o(!0)},dialogBoxJsx:r.a.createElement(i.x,{isOpen:n,cssClass:"orbital-dialog-modal",onDidDismiss:function(){return m(null)}},r.a.createElement(i.h,{className:"modal-content"},r.a.createElement(i.l,{mode:"ios"},r.a.createElement(i.R,null,r.a.createElement(i.O,null,s.header))),r.a.createElement(i.k,null,s.options.map((function(e){return r.a.createElement(i.C,{key:e.value},r.a.createElement(i.g,{size:"12"},r.a.createElement(i.d,{expand:"block",color:e.color,className:"apply-button",onClick:function(){return m(e.value)}},e.text)))})),r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"12"},r.a.createElement(i.d,{expand:"block",className:"cancel-btn",onClick:function(){return m(null)}},"Cancel"))))))}},fn=function(e){var t=e.auth,n=e.scheduleEventId,o=e.onDismissModal,c=e.onCancelModal,l=e.isOpen,s=e.eventEditAuth,u=Q(),m=r.a.useContext(K).user,p=Object(a.useReducer)(Xt,$t),E=Object(d.a)(p,2),v=E[0],f=E[1],b=Object(a.useState)(null),h=Object(d.a)(b,2),g=h[0],y=h[1],O=Object(a.useState)(null),k=Object(d.a)(O,2),S=k[0],C=k[1],I=Object(a.useState)("NO"),j=Object(d.a)(I,2),T=j[0],N=j[1],D=Object(a.useState)("NONE"),x=Object(d.a)(D,2),A=x[0],w=x[1],M=null!==n,R=vn(),P="New Event",U="CREATE";M&&(P="Edit Event",U="UPDATE"),Object(a.useEffect)((function(){l&&t&&t.locations&&0!==t.locations.length&&(n?ze.getScheduleEvent(m,n).then((function(e){e?(y(e),f({type:"BEGIN-UPDATE",ev:e,auth:t,eventEditAuth:s})):u.showAlert("No Event","The event may have been removed or you no longer have access",z)})):(null!==g&&y(null),f({type:"CREATE-EVENT",auth:t})))}),[n,m,l,t]),Object(a.useEffect)((function(){null!==S&&"NONE"!==A&&("CREATEUPDATE"===A?L():B(null!==v.recurrenceId&&void 0!==v.recurrenceId))}),[S,A]);var L=function(){(0===v.scheduleEventId?ze.createScheduleEvent:ze.updateScheduleEvent)(m,v,S).then((function(e){e.error?u.showAlert("Cannot update",e.message,(function(){o("Could not update event")})):o("Event Updated")}))},B=function(e){var t=function(){ze.deleteScheduleEvent(m,v.scheduleEventId,S).then((function(e){e.error?u.showAlert("Cannot delete",e.message,(function(){o("Could not delete event")})):o("Deleted Event")}))};e?t():R.showDialog("Delete event?","",[{text:"Delete",color:"danger",value:1}],(function(e){1===e&&t()}))},F=function(e){N("NO"),C(e),null===e&&w("NONE")},z=function(){f({type:"CANCEL"}),Object(q.a)().push("/tabs/schedule"),c()};return l&&t&&t.locations&&0!==t.locations.length&&-1!==v.scheduleEventId?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.l,null,r.a.createElement(i.R,null,r.a.createElement(i.e,{slot:"start"},r.a.createElement(i.d,{onClick:z},r.a.createElement(i.m,{icon:$.a,mode:"md",slot:"icon-only"}))),r.a.createElement(i.O,null,P))),r.a.createElement(i.h,{class:"outer-content"},r.a.createElement(i.k,null,r.a.createElement(jt,{editorValues:v,update:f,auth:t,eventTypes:s.eventTypeOptionList,eventStatuses:s.eventStatusOptionList}),r.a.createElement(i.C,{className:"edit-row"},r.a.createElement(qt,{auth:t,editorValues:v,update:f}),r.a.createElement(Wt,{auth:t,editorValues:v,update:f})),r.a.createElement(i.C,{className:"edit-row"},r.a.createElement(i.g,{size:"12"},r.a.createElement("div",{style:{width:"100%",borderBottom:"1px solid #AAA"}}))),r.a.createElement(Tt,{auth:t,editorValues:v,update:f}),r.a.createElement(Dt,{auth:t,editorValues:v,update:f}),r.a.createElement(xt,{auth:t,editorValues:v,update:f}),r.a.createElement(pn,{auth:t,editorValues:v,update:f}),r.a.createElement(zt,{auth:t,editorValues:v,update:f}),r.a.createElement(Vt,{auth:t,editorValues:v,update:f}),r.a.createElement(en,{auth:t,editorValues:v,update:f}),r.a.createElement(Zt,{auth:t,editorValues:v,update:f})),u.alertBoxJsx,R.dialogBoxJsx,r.a.createElement(i.x,{isOpen:"NO"!==T,onDidDismiss:function(){F(null)},cssClass:"recurrence-update-modal"},r.a.createElement(En,{onSelect:F,updateType:T}))),r.a.createElement(i.j,{className:"outer-content footer"},r.a.createElement(sn,{auth:t,eventType:v.eventType,eventEnd:v.eventEnd,eventStatus:v.eventStatus,eventEmployeeId:v.employee.id,eventPositionId:v.position.position.id,scheduleEventId:v.scheduleEventId,locationId:v.locationId,eventEditAuth:s,update:f,cancelEditModal:function(e){return o(e)},setUsageText:function(){}}),r.a.createElement(i.d,{className:"apply-button",expand:"block",onClick:function(){w("CREATEUPDATE"),v.recurrenceId?null!==S?L():N("UPDATE"):L()},disabled:!v.isDirty||!v.valid,hidden:v.isReadonly},U),r.a.createElement(i.d,{className:"delete-button",expand:"block",onClick:function(){w("DELETE"),v.recurrenceId?null!==S?B(null!==v.recurrenceId&&void 0!==v.recurrenceId):N("DELETE"):B(null!==v.recurrenceId&&void 0!==v.recurrenceId)},hidden:v.isReadonly||v.scheduleEventId<=0},"DELETE"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Loading"),u.alertBoxJsx)};var bn,hn=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)({message:""}),l=Object(d.a)(c,2),s=l[0],u=l[1];return{showToast:function(e){u({message:e}),o(!0)},simpleToastJsx:r.a.createElement(i.P,{isOpen:n,onDidDismiss:function(){return o(!1)},position:"top",message:s.message,duration:500})}},gn=n(8),yn=n.n(gn),On=function(e){var t=e.threeRows;return r.a.createElement("button",{className:"event"},r.a.createElement("div",{className:"card-first-col"},r.a.createElement("div",{className:"day-name"},r.a.createElement(yn.a,null)," "),r.a.createElement("div",{className:"day-number"},r.a.createElement(yn.a,null))),r.a.createElement("div",{style:{padding:"3px"}},r.a.createElement(yn.a,{width:5,height:45})),r.a.createElement("div",{className:"card-second-col"},r.a.createElement("div",{className:"time-row"},r.a.createElement("span",null,r.a.createElement(yn.a,{width:150,height:9}),"\xa0\xa0"),r.a.createElement(yn.a,null)),t&&r.a.createElement("div",null,r.a.createElement(yn.a,{width:80,height:10})),r.a.createElement("div",{className:"position-row"},r.a.createElement(yn.a,{width:150,height:10}),"\xa0\xa0")))},kn=[],Sn=[],Cn=function(e){var t=e.match,n=r.a.useContext(K).user,o=r.a.useContext(de),c=o.auth,l=o.refreshAuth,s=hn(),u=Object(a.useState)("filter-not-applied"),m=Object(d.a)(u,2),p=m[0],E=m[1],v=It((function(e){Oe(!0),l(!0,n).then((function(t){console.log("yo"),t&&We(t.locations,Be,ie,e)}))})),b=c&&c.locations&&c.locations.length>0?Re(Object(Fe.a)(new Date),c.locations[0].settings.DayWeekStartsOn,c.locations[0].settings.DayStartTime):Re(Object(Fe.a)(new Date),"Monday",""),h=Object(a.useState)(kn),g=Object(d.a)(h,2),y=g[0],O=g[1],k=Object(a.useState)(Sn),S=Object(d.a)(k,2),C=S[0],I=S[1],j=Object(a.useState)([]),T=Object(d.a)(j,2),N=T[0],D=T[1],x=Object(a.useState)(kn),A=Object(d.a)(x,2),w=A[0],M=A[1],R=Object(a.useState)(Sn),P=Object(d.a)(R,2),U=P[0],L=P[1],B=Object(a.useState)([]),F=Object(d.a)(B,2),z=F[0],V=F[1],q=Object(a.useState)(kn),W=Object(d.a)(q,2),_=W[0],G=W[1],Y=Object(a.useState)(Sn),H=Object(d.a)(Y,2),Q=H[0],$=H[1],X=Object(a.useState)([]),Z=Object(d.a)(X,2),ee=Z[0],te=Z[1],ne=Object(a.useState)(!0),ae=Object(d.a)(ne,2),oe=ae[0],ce=ae[1],le=Object(a.useState)("my"),se=Object(d.a)(le,2),ie=se[0],ue=se[1],me=Object(a.useState)(!1),pe=Object(d.a)(me,2),Ee=pe[0],ve=pe[1],fe=Object(a.useState)(!0),be=Object(d.a)(fe,2),he=be[0],Oe=be[1],ke=Object(a.useState)(!1),Se=Object(d.a)(ke,2),Ce=Se[0],Ie=Se[1],Te=Object(a.useState)(null),Ne=Object(d.a)(Te,2),De=Ne[0],xe=Ne[1],Ae=Object(a.useState)(null),we=Object(d.a)(Ae,2),Me=we[0],Pe=we[1],Ue=Object(a.useState)(Object(f.a)({},Ve,{start:b,end:Object(je.a)(b,6),positionIds:c.locations.flatMap((function(e){return e.departments.flatMap((function(e){return e.positions.map((function(e){return e.id}))}))})),filterByEmployee:!0})),Le=Object(d.a)(Ue,2),Be=Le[0],qe=Le[1];Object(a.useEffect)((function(){if(c&&c.locations&&c.locations.length>0){var e=Object(f.a)({},Be,{positionIds:c.locations.flatMap((function(e){return e.departments.flatMap((function(e){return e.positions.map((function(e){return e.id}))}))})),dnLocIds:c.locations.map((function(e){return e.id})),settingsLocId:c.locations[0].id});qe(e),("my"===ie&&0===y.length||"requests"===ie&&0===w.length||"all"===ie&&0===_.length)&&ce(!0),0===y.length&&We(c.locations,e,"my",void 0),0===w.length&&We(c.locations,e,"requests",void 0),0===_.length&&We(c.locations,e,"all",void 0)}else c&&0===c.employeeId&&(O([]),M([]),G([]))}),[c]),Object(a.useEffect)((function(){t.params.scheduleEventId&&(xe(parseInt(t.params.scheduleEventId)),Ie(!0))}),[t.params.scheduleEventId]);var We=function(e,t,n,a){var r=Object(f.a)({},t,{filterByEmployee:"my"===n,eventTypeId:"requests"===n?-1:t.eventTypeId,eventStatusId:"requests"===n?2:t.eventStatusId});if(_e(r,n,a),O([]),M([]),G([]),"my"===n){var o=Object(f.a)({},t,{filterByEmployee:!1,eventTypeId:-1,eventStatusId:2});_e(o,"requests",a);var c=Object(f.a)({},t,{filterByEmployee:!1});_e(c,"all",a)}else if("requests"===n){var l=Object(f.a)({},t,{filterByEmployee:!0});_e(l,"my",a);var s=Object(f.a)({},t,{filterByEmployee:!1});_e(s,"all",a)}else if("all"===n){var i=Object(f.a)({},t,{filterByEmployee:!0});_e(i,"my",a);var u=Object(f.a)({},t,{filterByEmployee:!1,eventTypeId:-1,eventStatusId:2});_e(u,"requests",a)}},_e=function(e,t,a){if(0===e.settingsLocId)return ce(!1),Oe(!1),void(a&&a.detail.complete());ze.getScheduleEventsByFilter(n,e).then((function(e){switch(a&&a.detail.complete(),t){case"my":O(e.events),I(e.dailyNotes),D(e.hoursPerDay);break;case"requests":M(e.events),L(e.dailyNotes),V(e.hoursPerDay);break;case"all":G(e.events),$(e.dailyNotes),te(e.hoursPerDay)}ce(!1),Oe(!1)}))},Ye=function(e,t){xe(e.ScheduleEventId),Pe(t),Ie(!0)},Ke=function(e){ue(e),("my"===e&&0===y.length||"requests"===e&&0===w.length||"all"===e&&0===_.length)&&(ce(!0),We(c.locations,Be,e,void 0))};return c&&c.locations&&0!==c.locations.length?r.a.createElement(i.y,{id:"schedule-page"},r.a.createElement(i.l,null,r.a.createElement(i.R,{mode:"md"},r.a.createElement(i.e,{slot:"start"},r.a.createElement(i.v,null)),r.a.createElement(i.O,{slot:"start"},"Schedule"),r.a.createElement(i.e,{slot:"end"},r.a.createElement(i.d,{onClick:function(){xe(null),Pe(function(e){for(var t=e.locations[0],n=e.locations[0].departments[0],a=e.locations[0].departments[0].positions[0],r=!1,o=0;o<e.locations.length&&!r;o++)for(var c=0;c<e.locations[o].departments.length&&!r;c++)for(var l=0;c<e.locations[o].departments[c].positions.length&&!r;l++)e.locations[o].departments[c].positions[l].hasPosition&&(t=e.locations[o],n=e.locations[o].departments[c],a=e.locations[o].departments[c].positions[l],r=!0);var s={location:t,position:a},i=$e.Request;e.role===J.BusinessAdmin||e.role===J.LocationAdmin?i=$e.Approved:e.role===J.Admin&&(n.adminAuth&re.CanEditSchedules)===re.CanEditSchedules&&(i=$e.Approved);var u=dt(e,s,e.employeeId,i,!1),d=ut(e,s,e.employeeId);return{buttonText:"",enableConfirm:!0,isReadonly:!1,text:"",usage:Qe.None,eventTypeOptionList:d,eventStatusOptionList:u}}(c)),Ie(!0)}},r.a.createElement(i.m,{icon:ge.a,mode:"md",slot:"icon-only"})),r.a.createElement(i.d,{onClick:function(){return ve(!0)}},r.a.createElement("div",{className:p},"\xb7"),r.a.createElement(i.m,{icon:ye.a,mode:"ios",slot:"icon-only"}))))),r.a.createElement(i.D,{mode:"md",value:ie},r.a.createElement(i.E,{mode:"md",value:"my",onClick:function(){return Ke("my")},checked:"my"===ie},"MY"),r.a.createElement(i.E,{mode:"md",value:"requests",onClick:function(){return Ke("requests")},checked:"requests"===ie},"REQUESTS"),r.a.createElement(i.E,{mode:"md",value:"all",onClick:function(){return Ke("all")},checked:"all"===ie},"ALL")),r.a.createElement(Ge,{startDate:Re(Be.start,c.locations[0].settings.DayWeekStartsOn,c.locations[0].settings.DayStartTime),setStartDate:function(e){var t=Object(f.a)({},Be,{start:e,end:Object(je.a)(e,6)});qe(t),We(c.locations,t,ie,void 0)}}),r.a.createElement(i.h,null,v.ionicRefresherJsx,!oe&&!he&&"my"===ie&&0===y.length&&r.a.createElement("h3",null,"No events to show"),!(oe||he)&&"my"===ie&&y.length>0&&r.a.createElement(ht,{events:y,listType:ie,notes:C,hoursPerDay:N,auth:c,onEdit:Ye}),!oe&&!he&&"requests"===ie&&0===w.length&&r.a.createElement("h3",null,"No events to show"),!(oe||he)&&"requests"===ie&&w.length>0&&r.a.createElement(ht,{events:w,listType:ie,notes:U,hoursPerDay:z,auth:c,onEdit:Ye}),!oe&&!he&&"all"===ie&&0===_.length&&r.a.createElement("h3",null,"No events to show"),!(oe||he)&&"all"===ie&&_.length>0&&r.a.createElement(ht,{events:_,listType:ie,notes:Q,hoursPerDay:ee,auth:c,onEdit:Ye}),(oe||he)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginTop:"10px"}}),r.a.createElement(yn.a,{height:24,width:220}),r.a.createElement("br",null),r.a.createElement(On,{threeRows:"my"!==ie}),r.a.createElement(On,{threeRows:"my"!==ie}),r.a.createElement(On,{threeRows:"my"!==ie}))),s.simpleToastJsx,r.a.createElement(i.x,{isOpen:Ee,onDidDismiss:function(){return ve(!1)}},r.a.createElement(St,{filter:Be,auth:c,onDismissModal:function(e,t){qe(e),console.log("Filter applied? ",t),E(t?"filter-applied":"filter-not-applied"),ve(!1),We(c.locations,e,ie,void 0)},isOpen:Ee,onCancelModal:function(){return ve(!1)}})),r.a.createElement(i.x,{isOpen:Ce,onDidDismiss:function(){return Ie(!1)}},r.a.createElement(fn,{isOpen:Ce,auth:c,onCancelModal:function(){return Ie(!1)},onDismissModal:function(e){return function(e){e&&s.showToast(e),We(c.locations,Be,ie,void 0),Ie(!1)}(e)},scheduleEventId:De,eventEditAuth:Me}))):r.a.createElement("div",null,"-")},In=(n(178),n(50),n(305));!function(e){e[e.MatchingShift=1]="MatchingShift",e[e.AnyShift=2]="AnyShift",e[e.NoShift=3]="NoShift"}(bn||(bn={}));var jn,Tn,Nn=function(e){var t=e.auth,n=e.onDismissModal,o=e.tcData,c=Object(a.useState)([]),l=Object(d.a)(c,2),s=l[0],u=l[1],m={key:"Cancel",name:"",breakType:ce.UnscheduledUnpaid};return Object(a.useEffect)((function(){if(0!==t.locations.length&&o.ClockedInScheduleEvent){var e=t.locations.filter((function(e){return e.id===o.ClockedInScheduleEvent.LocationId}))[0].settings,n=[];switch(o.ScheduleEventsForClockIn.length>0&&o.ScheduleEventsForClockIn[0].EventBreaks.map((function(e){return n.push({key:e.BreakStart,name:Me(e),breakType:ce.Scheduled})})),e.UnscheduledBreakOptions){case oe.Both:n.push({key:"UnScheduledUnpaid",name:"Unscheduled",breakType:ce.UnscheduledUnpaid}),n.push({key:"UnScheduledPaid",name:"Unscheduled $",breakType:ce.UnscheduledPaid});break;case oe.Paid:n.push({key:"UnScheduledPaid",name:"Unscheduled $",breakType:ce.UnscheduledPaid});break;case oe.Unpaid:n.push({key:"UnScheduledUnpaid",name:"Unscheduled",breakType:ce.UnscheduledUnpaid})}u(n)}}),[o,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.l,null,r.a.createElement(i.R,null,r.a.createElement(i.e,{slot:"start"},r.a.createElement(i.d,{onClick:function(){return n(m)}},r.a.createElement(i.m,{icon:$.a,mode:"md",slot:"icon-only"}))),r.a.createElement(i.O,null,"Choose Break"))),r.a.createElement(i.h,{class:"outer-content"},s.map((function(e){return r.a.createElement(i.d,{className:"apply-button",expand:"block",key:e.key,color:"secondary",onClick:function(){n(e)}},e.name)}))),r.a.createElement(i.j,null,r.a.createElement(i.d,{className:"cancel-button",expand:"block",color:"tertiary",onClick:function(){return n(m)}},"CANCEL")))},Dn=function(e){return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.awrap(M(e,"api/v1/employee/timeclock/?lat=".concat(e.latitude,"&lng=").concat(e.longitude)));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},xn=function(e,t,n){var a;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a="/api/v2/employee/timeclock/clockin/".concat(t,"/").concat(n,"?lat=").concat(e.latitude,"&lng=").concat(e.longitude),r.next=3,h.a.awrap(R(e,a,{}));case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}))},An=function(e,t){var n;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n={ClockOutValue:t,TimeClockBreak:null,BreakStart:null},a.next=3,h.a.awrap(R(e,"/api/v2/employee/timeclock/clockout?lat=".concat(e.latitude,"&lng=").concat(e.longitude),n));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},wn=function(e,t,n,a){var r,o;return h.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return r="/api/v2/employee/timeclock/switch/".concat(t,"/").concat(n,"?lat=").concat(e.latitude,"&lng=").concat(e.longitude),o={ClockOutValue:a,TimeClockBreak:null,BreakStart:null},c.next=4,h.a.awrap(R(e,r,o));case 4:return c.abrupt("return",c.sent);case 5:case"end":return c.stop()}}))},Mn=function(e,t,n,a,r){var o,c;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return o="/api/v2/employee/timeclock/startbreak?lat=".concat(e.latitude,"&lng=").concat(e.longitude),c={clockEventId:t.ScheduleEventId,shiftEventId:n?n.ScheduleEventId:null,shiftBreakStart:r,breakType:a},l.next=4,h.a.awrap(R(e,o,c));case 4:return l.abrupt("return",l.sent);case 5:case"end":return l.stop()}}))},Rn=function(e,t,n){var a,r;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a=n?n.ScheduleEventId:"",r="/api/v2/employee/timeclock/endbreak/".concat(t.ScheduleEventId,"/").concat(a,"?lat=").concat(e.latitude,"&lng=").concat(e.longitude),o.next=4,h.a.awrap(R(e,r,{}));case 4:return o.abrupt("return",o.sent);case 5:case"end":return o.stop()}}))};!function(e){e[e.Success=0]="Success",e[e.BreakAlreadyExists=1]="BreakAlreadyExists",e[e.AlreadyOnBreak=2]="AlreadyOnBreak",e[e.ErrorInsertingBreak=3]="ErrorInsertingBreak",e[e.UserNotAtSpecifiedLocation=4]="UserNotAtSpecifiedLocation",e[e.EventDoesNotMatchCurrentUser=5]="EventDoesNotMatchCurrentUser",e[e.InvalidUnscheduledBreak=6]="InvalidUnscheduledBreak"}(jn||(jn={})),function(e){e[e.Success=0]="Success",e[e.CannotEndRestrictedBreakEarly=1]="CannotEndRestrictedBreakEarly",e[e.ErrorUpdatingEventBreak=2]="ErrorUpdatingEventBreak",e[e.UserNotAtSpecifiedLocation=3]="UserNotAtSpecifiedLocation",e[e.EventDoesNotMatchCurrentUser=4]="EventDoesNotMatchCurrentUser",e[e.BreakNoLongerExists=5]="BreakNoLongerExists"}(Tn||(Tn={}));n(179);var Pn=function(e){var t=e.onCancel,n=e.onOk,o=e.locSettings,c=Object(a.useState)(void 0),l=Object(d.a)(c,2),s=l[0],u=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.h,null,r.a.createElement(i.l,{mode:"ios"},r.a.createElement(i.R,null,r.a.createElement(i.O,null,"Clock Out"))),r.a.createElement(i.k,null,r.a.createElement(i.C,null,r.a.createElement(i.g,{className:"label",size:"12"},o.ClockOutValueLabel)),r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"2"}),r.a.createElement(i.g,{size:"8"},r.a.createElement(i.n,{placeholder:"Enter value",type:"number",className:"input",autoCorrect:"off",clearInput:!0,value:null===s||void 0===s?void 0:s.toString(),onIonChange:function(e){var t;(t=e.detail.value)?u(parseFloat(t)):void 0!==s&&u(void 0)}})),r.a.createElement(i.g,{size:"2"})))),r.a.createElement(i.j,null,r.a.createElement(i.d,{expand:"block",onClick:function(){n(s)},className:"clockout-button"},"CLOCK OUT"),r.a.createElement(i.d,{expand:"block",className:"cancel-button",onClick:t},"CANCEL")))},Un=function(e){var t=e.tcData,n=e.locSettings,o=e.selectedPosId,c=e.selectedTagId,l=e.onSwitch,s=Object(a.useState)(!0),u=Object(d.a)(s,2),m=u[0],p=u[1],E=r.a.createElement("span",null);return Object(a.useEffect)((function(){if(t.UserClockedIn){var e=t.ClockedInScheduleEvent.PositionId,n=t.ClockedInScheduleEvent.TagId;n||(n=-1),p(e===o&&n===c)}}),[t.UserClockedIn,t.ClockedInScheduleEvent,o,c]),(n.ClockInWithDifferentTag||n.EnablePositionChangeForEmployeePosition)&&t.UserClockedIn?r.a.createElement("div",{className:"switch-button-container"},r.a.createElement(i.d,{className:"switch-button",disabled:m,color:"secondary",expand:"block",onClick:l},"SWITCH")):E},Ln=function(e){var t=e.onUpdate,n=e.refreshToggle,o=r.a.useContext(K).user,c=r.a.useContext(de).auth,l=Object(a.useState)([]),s=Object(d.a)(l,2),u=s[0],m=s[1],p=Object(a.useState)(0),E=Object(d.a)(p,2),v=E[0],b=E[1],h=Object(a.useState)(!1),g=Object(d.a)(h,2),y=g[0],O=g[1],k=Object(a.useState)([]),S=Object(d.a)(k,2),C=S[0],I=S[1],j=Object(a.useState)(null),T=Object(d.a)(j,2),N=T[0],D=T[1],x=Object(a.useState)("START BREAK"),A=Object(d.a)(x,2),w=A[0],M=A[1],R=Object(a.useState)({}),P=Object(d.a)(R,2),U=P[0],L=P[1],B=Object(a.useState)(!1),F=Object(d.a)(B,2),z=F[0],V=F[1],q=Object(a.useState)(!1),W=Object(d.a)(q,2),_=W[0],G=W[1],Y=Object(a.useState)("Please wait..."),H=Object(d.a)(Y,2),J=H[0],Q=H[1],$=Object(a.useState)(""),X=Object(d.a)($,2),Z=X[0],ee=X[1],te=Object(a.useState)(!1),ne=Object(d.a)(te,2),ae=ne[0],re=ne[1],le=Object(a.useState)({show:!1,header:"Alert",message:""}),se=Object(d.a)(le,2),ie=se[0],ue=se[1],me=Object(a.useState)(null),pe=Object(d.a)(me,2),Ee=pe[0],ve=pe[1],fe=Object(a.useState)(!1),be=Object(d.a)(fe,2),he=be[0],ge=be[1];Object(a.useEffect)((function(){ye()}),[c,n]),Object(a.useEffect)((function(){if(Ee&&c&&c.locations&&0!==c.locations.length&&Ee.ShowTimeClock){var e,t,n=kt.unique(Ee.PositionsToClockInto.map((function(e){return e.LocationId}))),a=kt.unique(Ee.PositionsToClockInto.map((function(e){return e.DepartmentId})));e=n.length>1?Ee.PositionsToClockInto.map((function(e){return{id:e.PositionId,name:e.PositionNameWithLocAndDeptAbbreviation}})):a.length>1?Ee.PositionsToClockInto.map((function(e){return{id:e.PositionId,name:e.PositionNameWithDeptAbbreviation}})):Ee.PositionsToClockInto.map((function(e){return{id:e.PositionId,name:e.PositionName}})),Ee.UserClockedIn?(t=Ee.ClockedInScheduleEvent.PositionId,b(t)):e.length>0?(t=e[0].id,b(t)):t=0;var r=Ee.UserClockedIn?Ee.ClockedInScheduleEvent.LocationId:0!==t?c.locations.filter((function(e){return e.departments.flatMap((function(e){return e.positions.flatMap((function(e){return e.id===t}))}))}))[0].id:c.locations[0].id,o=c.locations.filter((function(e){return e.id===r}))[0].settings;L(o),o.EnableEnhancedBreakManagement&&(o.UnscheduledBreakOptions!==oe.None||Ee.ClockedInScheduleEvent.EventBreaks&&Ee.ClockedInScheduleEvent.EventBreaks.length>0)?M(Ee.UserClockedIn&&Ee.CurrentEventBreak?"END BREAK":"START BREAK"):M("NONE"),m(e),ke(t)}}),[c,Ee]);var ye=function(){Dn(o).then((function(e){ve(e)}))},ke=function(e){if(!Ee)return-1;var t=Ee.UserClockedIn?Ee.ClockedInScheduleEvent.LocationId:c.locations.filter((function(t){return t.departments.flatMap((function(t){return t.positions.flatMap((function(t){return t.id===e}))}))}))[0].id;if(c.locations.filter((function(e){return e.id===t}))[0].settings.ClockInWithDifferentTag&&Ee.TagsPerPosition[e]&&Ee.TagsPerPosition[e].length>1){O(!0);var n=Ee.TagsPerPosition[e].map((function(e){return{id:e.TagId,name:e.TagName}}));n.unshift({id:-1,name:"NONE"}),I(n)}else O(!1);var a=-1;return Ee.UserClockedIn?a=Ee.ClockedInScheduleEvent.TagId?Ee.ClockedInScheduleEvent.TagId:(Ee.ClockedInScheduleEvent.TagId,-1):Ee.TagsPerPosition[e]&&Ee.TagsPerPosition[e].length>0&&(a=Ee.ScheduleEventsForClockIn&&Ee.ScheduleEventsForClockIn[0]&&Ee.ScheduleEventsForClockIn[0].TagId?Ee.ScheduleEventsForClockIn[0].TagId:-1),D(a),a},Ce=function(e,t){ue({show:!0,header:e,message:t})},Ie=function(e){he&&ge(!1),Q("Clocking Out..."),G(!0),An(o,e).then((function(e){G(!1),0===e.ClockOutResponseCode?(ee("Clocked out at "+Object(Se.a)(Object(Oe.a)(e.ClockOutEvent.EventEnd),"h:mmaaa")),re(!0),t(),ye()):Ce("Could not Clock Out","Unable to Clock out, ".concat(e.Message))}))};return c&&Ee?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.t,{isOpen:_,onDidDismiss:function(){return G(!1)},spinner:"dots",message:J}),r.a.createElement("div",{className:"clock-controls"},Ee.PositionsToClockInto&&Ee.PositionsToClockInto.length>1&&r.a.createElement(i.o,null,r.a.createElement(i.p,null,"Position"),r.a.createElement(i.F,{interface:"action-sheet",onIonChange:function(e){return t=e.detail.value,b(t),void ke(t);var t},disabled:!((Ee.UserClockedIn&&Ee.UserMayClockOut||!Ee.UserClockedIn&&Ee.UserMayClockIn)&&U.ClockInRequirement!==bn.MatchingShift),value:v},u.map((function(e){return r.a.createElement(i.G,{key:e.id,value:e.id},e.name)})))),y&&r.a.createElement(i.o,null,r.a.createElement(i.p,null,"~Tag"),r.a.createElement(i.F,{interface:"action-sheet",onIonChange:function(e){return t=e.detail.value,void D(t);var t},disabled:!((Ee.UserClockedIn&&Ee.UserMayClockOut||!Ee.UserClockedIn&&Ee.UserMayClockIn)&&U.ClockInRequirement!==bn.MatchingShift),value:N},C.map((function(e){return r.a.createElement(i.G,{key:e.id,value:e.id},e.name)})))),r.a.createElement(Un,{tcData:Ee,locSettings:U,selectedPosId:v,selectedTagId:N,onSwitch:function(){Q("Switching..."),G(!0),wn(o,v,N).then((function(e){G(!1),e.AllowedToSwitchPositions||e.AllowedToSwitchTags?(ee("Switched"),re(!0),t(),ye()):Ce("Could not switch","".concat(e.ClockInMessage," ").concat(e.ClockOutMessage))}))}}),!Ee.UserClockedIn&&r.a.createElement("div",{className:"clockin-button-container"},r.a.createElement(i.d,{className:"clockin-button",onClick:function(){Q("Clocking in..."),G(!0),xn(o,v,N).then((function(e){G(!1),0===e.ClockInResponseCode?(ee("Clocked in at "+Object(Se.a)(Object(Oe.a)(e.ClockInEvent.EventStart),"h:mmaaa")),re(!0),t(),ye()):Ce("Could not Clock In","Unable to Clock in, ".concat(e.Message))}))},disabled:!Ee.UserMayClockIn},r.a.createElement(i.m,{mode:"md",style:{paddingRight:"5px"},icon:Ke.a})," CLOCK IN")),Ee.UserClockedIn&&r.a.createElement("div",{className:"clockout-button-container"},r.a.createElement(i.d,{className:"clockout-button",disabled:!Ee.UserMayClockOut,expand:"block",onClick:function(){U.ClockOutValueLabel?ge(!0):Ie()}},"CLOCK OUT ",r.a.createElement(i.m,{mode:"md",style:{paddingLeft:"5px"},icon:Ke.a})),"NONE"!==w&&r.a.createElement(i.d,{onClick:function(){if("NONE"!==w&&Ee)return"END BREAK"===w?(Q("Ending Break..."),G(!0),void Rn(o,Ee.ClockedInScheduleEvent,Ee.ScheduleEventsForClockIn.length>0?Ee.ScheduleEventsForClockIn[0]:null).then((function(e){G(!1),e.EndBreakResponseCode===Tn.Success?(ee("Ended break at "+Object(Se.a)(Object(Oe.a)(e.BreakEnd),"h:mmaaa")),re(!0),t(),ye()):Ce("Did not come off break",e.Message)}))):void(U.UnscheduledBreakOptions!==oe.None||Ee.ClockedInScheduleEvent.EventBreaks&&Ee.ClockedInScheduleEvent.EventBreaks.length>0?V(!0):Ce("No implemented","Not implemented in ClockPanel.tsx for this scenario"))},expand:"block",className:"break-button",disabled:!Ee.UserMayClockOut},r.a.createElement(i.m,{icon:In.a}),w))),r.a.createElement(i.P,{isOpen:ae,message:Z,duration:2e3,onDidDismiss:function(){return re(!1)}}),r.a.createElement(i.x,{isOpen:z,cssClass:"break-selector-modal"},r.a.createElement(Nn,{auth:c,tcData:Ee,onDismissModal:function(e){return n=e,void(Ee&&(V(!1),"Cancel"!==n.key&&(Q("Starting Break..."),G(!0),Mn(o,Ee.ClockedInScheduleEvent,Ee.ScheduleEventsForClockIn[0],n.breakType,n.breakType===ce.Scheduled?n.key:void 0).then((function(e){G(!1),e.StartBreakResponseCode===jn.Success?(ee("Break started at "+Object(Se.a)(Object(Oe.a)(e.BreakStart),"h:mmaaa")),re(!0),t(),ye()):Ce("Could not start break","Unable to start break, ".concat(e.Message))})))));var n}})),r.a.createElement(i.x,{cssClass:"clockout-modal",isOpen:he,onDidDismiss:function(){ge(!1)}},r.a.createElement(Pn,{onCancel:function(){ge(!1)},onOk:Ie,locSettings:U})),r.a.createElement(i.b,{isOpen:ie.show,onDidDismiss:function(){return ue(Object(f.a)({},ie,{show:!1}))},header:ie.header,message:ie.message,buttons:["OK"]})):r.a.createElement("div",null,"Loading...")};n(180);var Bn=function(e){var t,n,a=e.startDate,o=e.endDate,c=e.onNextPayPeriod,l=e.onPrevPayPeriod,s=null===a||null===o,u=s?"":(n=o,(t=a)&&n?t.getMonth()!==n.getMonth()?Object(Se.a)(t,"MMM d").toUpperCase()+" - "+Object(Se.a)(Object(je.a)(n,-1),"MMM d").toUpperCase():Object(Se.a)(t,"MMM d").toUpperCase()+" - "+Object(Se.a)(Object(je.a)(n,-1),"d"):" ");return r.a.createElement("div",{className:"chooser"},r.a.createElement("div",{className:"top"},r.a.createElement("button",{onClick:l,className:"arrow",key:-1},r.a.createElement(i.m,{mode:"ios",icon:qe.a})),r.a.createElement("div",{className:"month-year-container"},r.a.createElement("div",{className:"datetime-picker-container"},r.a.createElement("div",{className:"datetime-picker"},u),r.a.createElement(i.m,{mode:"md",icon:We.a,hidden:s}))),r.a.createElement("button",{onClick:c,className:"arrow",key:7},r.a.createElement(i.m,{mode:"ios",icon:_e.a}))))},Fn={getPayPeriodDateForEmployee:function(e,t,n){var a;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a=Pe(n),r.next=3,h.a.awrap(M(e,"api/v2/payroll/get/"+t+"/"+a));case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}))}};n(181);function zn(e,t){return function(e,t){if("00:00:00"===t.ActualTime)return e.TimeFormat===ne.HoursMinutes?"00:00":Ue(0,e.TimeFormatDigits,e.TimeFormatDecimals);if(e.TimeFormat===ne.HoursMinutes){var n=t.ActualTime.split(":");if(3!==n.length)return t.ActualTime;if(n[0].includes(".")){var a=n[0].split("."),r=24*parseInt(a[0])+parseInt(a[1]);return"".concat(r,":").concat(n[1])}var o=parseInt(n[0]);return"".concat(o,":").concat(n[1])}return Ue(t.ActualHours,e.TimeFormatDigits,e.TimeFormatDecimals)}(e,t)}var Vn=function(e){var t=e.time,n=e.locSettings,a=e.fontColor;if(null===t)return r.a.createElement("span",null," -- ");var o=0===t.ActualHours?"lightgray":a;return r.a.createElement("span",{style:{color:o}},zn(n,t))};n(182);var qn=function(e){var t=e.onClose,n=e.data,o=e.locSettings,c=Object(a.useContext)(de).auth;return n?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.h,null,r.a.createElement(i.l,{mode:"ios"},r.a.createElement(i.R,null,r.a.createElement(i.O,null,Ae(Object(Oe.a)(n.date))))),r.a.createElement(i.k,null,n.regular.ActualHours>0&&r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"7"},"Regular"),r.a.createElement(i.g,{size:"5"},r.a.createElement(Vn,{time:n.regular,locSettings:o,fontColor:"black"}))),n.dailyOvertime.ActualHours>0&&r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"7"},"Daily Overtime"),r.a.createElement(i.g,{size:"5"},r.a.createElement(Vn,{time:n.dailyOvertime,locSettings:o,fontColor:"red"}))),n.weeklyOvertime.ActualHours>0&&r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"7"},"Weekly Overtime"),r.a.createElement(i.g,{size:"5"},r.a.createElement(Vn,{time:n.weeklyOvertime,locSettings:o,fontColor:"red"}))),n.special.ActualHours>0&&r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"7"},"Special Dates"),r.a.createElement(i.g,{size:"5"},r.a.createElement(Vn,{time:n.special,locSettings:o,fontColor:"black"}))),n.timePerAbsent&&n.timePerAbsent.map((function(e){return r.a.createElement(i.C,{key:e.absentId},r.a.createElement(i.g,{size:"7"},function(e,t){return e.payrollEvents.filter((function(e){return e.id===t}))[0].name}(c,e.absentId)),r.a.createElement(i.g,{size:"5"},r.a.createElement(Vn,{time:e.time,locSettings:o,fontColor:"#AD850C"})))})))),r.a.createElement(i.j,null,r.a.createElement(i.d,{expand:"block",onClick:t},"CLOSE"))):r.a.createElement("div",null,"loading")};var Wn,_n=function(e){var t,n=e.payrollRow,o=e.colsToDisplay,c=e.colSize,l=Object(a.useContext)(de).auth,s=Xe(l,l.locations[0].id),u=Object(a.useState)(!1),m=Object(d.a)(u,2),p=m[0],E=m[1];return null===n?r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"3"},r.a.createElement(yn.a,{width:50})),r.a.createElement(i.g,{size:"3"},r.a.createElement(yn.a,{width:50})),r.a.createElement(i.g,{size:"3"},r.a.createElement(yn.a,{width:50})),r.a.createElement(i.g,{size:"3"},r.a.createElement(yn.a,{width:50}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.C,null,r.a.createElement(i.g,{size:c},r.a.createElement("button",{style:{fontSize:"16px",backgroundColor:"white",border:"none",outline:"none"},onClick:function(){return E(!0)}},(t=n.date,Object(Se.a)(Object(Oe.a)(t),"EEE d").toUpperCase()))),r.a.createElement(i.g,{size:c,color:"secondary",hidden:(o&Wn.Regular)!==Wn.Regular},r.a.createElement(Vn,{time:null===n||void 0===n?void 0:n.regular,locSettings:s,fontColor:"black"})),r.a.createElement(i.g,{size:c,hidden:(o&Wn.DailyOvertime)!==Wn.DailyOvertime},r.a.createElement(Vn,{time:null===n||void 0===n?void 0:n.dailyOvertime,locSettings:s,fontColor:"red"})),r.a.createElement(i.g,{size:c,hidden:(o&Wn.WeeklyOvertime)!==Wn.WeeklyOvertime},r.a.createElement(Vn,{time:null===n||void 0===n?void 0:n.weeklyOvertime,locSettings:s,fontColor:"red"})),r.a.createElement(i.g,{size:c,hidden:(o&Wn.Special)!==Wn.Special},r.a.createElement(Vn,{time:null===n||void 0===n?void 0:n.special,locSettings:s,fontColor:"black"})),r.a.createElement(i.g,{size:c,hidden:(o&Wn.Absent)!==Wn.Absent},r.a.createElement(Vn,{time:null===n||void 0===n?void 0:n.absent,locSettings:s,fontColor:"black"}))),r.a.createElement(i.x,{cssClass:"detail-modal",isOpen:p,onDidDismiss:function(){return E(!1)}},r.a.createElement(qn,{onClose:function(){return E(!1)},locSettings:s,data:n})))};!function(e){e[e.None=0]="None",e[e.Regular=1]="Regular",e[e.DailyOvertime=2]="DailyOvertime",e[e.WeeklyOvertime=4]="WeeklyOvertime",e[e.Special=8]="Special",e[e.Absent=16]="Absent",e[e.All=31]="All"}(Wn||(Wn={}));var Gn=function(e){var t=e.payrollData,n=Object(a.useContext)(de).auth,o=Xe(n,n.locations[0].id),c=Object(a.useState)(Wn.None),l=Object(d.a)(c,2),s=l[0],u=l[1],m=Object(a.useState)("3"),p=Object(d.a)(m,2),E=p[0],v=p[1];return Object(a.useEffect)((function(){if(t){var e=function(e){var t=Wn.Regular,n=2;return e.totalDailyOvertime.ActualHours>0&&(t|=Wn.DailyOvertime,n++),e.totalWeeklyOvertime.ActualHours>0&&(t|=Wn.WeeklyOvertime,n++),e.totalSpecial.ActualHours>0&&(t|=Wn.Special,n++),e.totalAbsent.ActualHours>0&&(t|=Wn.Absent,n++),{cols:t,count:n}}(t),n=e.count,a=e.cols;u(a),v(n>=5?"2":"3")}}),[t]),null===t?r.a.createElement("div",{className:"grid-container"},r.a.createElement(i.k,{class:"ion-text-end"},r.a.createElement(i.C,{className:"list-header",class:"ion-text-center"},r.a.createElement(i.g,{size:"3"},r.a.createElement(yn.a,{width:60})),r.a.createElement(i.g,{size:"3"},r.a.createElement(yn.a,{width:60})),r.a.createElement(i.g,{size:"3"},r.a.createElement(yn.a,{width:60})),r.a.createElement(i.g,{size:"3"},r.a.createElement(yn.a,{width:60}))),[1,2,3,4,5,6,7,8,9,10].map((function(e){return r.a.createElement(_n,{payrollRow:null,colSize:"3",colsToDisplay:Wn.None,key:e})})))):r.a.createElement("div",{className:"grid-container"},r.a.createElement(i.k,{class:"ion-text-end"},r.a.createElement(i.C,{className:"list-header",class:"ion-text-center"},r.a.createElement(i.g,{size:E},"DATE"),r.a.createElement(i.g,{size:E,hidden:(s&Wn.Regular)!==Wn.Regular},"REG"),r.a.createElement(i.g,{size:E,hidden:(s&Wn.DailyOvertime)!==Wn.DailyOvertime},"DAILY OT"),r.a.createElement(i.g,{size:E,hidden:(s&Wn.WeeklyOvertime)!==Wn.WeeklyOvertime},"WKLY OT"),r.a.createElement(i.g,{size:E,hidden:(s&Wn.Special)!==Wn.Special},"SPECIAL"),r.a.createElement(i.g,{size:E,hidden:(s&Wn.Absent)!==Wn.Absent},"ABSENT")),null===t||void 0===t?void 0:t.list.map((function(e){return r.a.createElement(_n,{key:e.date,payrollRow:e,colsToDisplay:s,colSize:E})})),r.a.createElement(i.C,{style:{fontWeight:"bold"}},r.a.createElement(i.g,{size:E},"TOTAL"),r.a.createElement(i.g,{size:E,hidden:(s&Wn.Regular)!==Wn.Regular},r.a.createElement(Vn,{time:null===t||void 0===t?void 0:t.totalRegular,locSettings:o,fontColor:"black"})),r.a.createElement(i.g,{size:E,hidden:(s&Wn.DailyOvertime)!==Wn.DailyOvertime},r.a.createElement(Vn,{time:null===t||void 0===t?void 0:t.totalDailyOvertime,locSettings:o,fontColor:"red"})),r.a.createElement(i.g,{size:E,hidden:(s&Wn.WeeklyOvertime)!==Wn.WeeklyOvertime},r.a.createElement(Vn,{time:null===t||void 0===t?void 0:t.totalWeeklyOvertime,locSettings:o,fontColor:"red"})),r.a.createElement(i.g,{size:E,hidden:(s&Wn.Special)!==Wn.Special},r.a.createElement(Vn,{time:null===t||void 0===t?void 0:t.totalSpecial,locSettings:o,fontColor:"black"})),r.a.createElement(i.g,{size:E,hidden:(s&Wn.Absent)!==Wn.Absent},r.a.createElement(Vn,{time:null===t||void 0===t?void 0:t.totalAbsent,locSettings:o,fontColor:"black"})))))},Yn=function(e){var t=e.date,n=r.a.useContext(K).user,o=r.a.useContext(de).auth,c=Object(a.useState)(null),l=Object(d.a)(c,2),s=l[0],i=l[1],u=Object(a.useState)(null),m=Object(d.a)(u,2),p=m[0],E=m[1],v=Object(a.useState)(null),f=Object(d.a)(v,2),b=f[0],h=f[1],g=Object(a.useState)(null),y=Object(d.a)(g,2),O=y[0],k=y[1],S=Q(),C=It((function(e){I(e)}));function I(e){Fn.getPayPeriodDateForEmployee(n,o.locations[0].id,s).then((function(t){t.error?S.showAlert("Error","Could not retrieve Payroll data: "+t.message,(function(){})):(E(Object(Oe.a)(t.start)),h(Object(Oe.a)(t.end)),k(t),e&&e.detail.complete())}))}Object(a.useEffect)((function(){var e=t;null===t&&(e=new Date),i(e)}),[t]),Object(a.useEffect)((function(){null!=s&&I()}),[s]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Bn,{startDate:p,endDate:b,onNextPayPeriod:function(){i(Object(je.a)(b,1))},onPrevPayPeriod:function(){i(Object(je.a)(p,-1))}}),r.a.createElement(Gn,{payrollData:O}),S.alertBoxJsx,C.ionicRefresherJsx)},Kn=(n(183),function(e){var t=e.authItems,n=e.oneLine,a=e.dailyNote;return a?r.a.createElement("button",{className:"daily-note"},r.a.createElement("div",{className:"event-color-col"}),r.a.createElement("div",{className:"card-second-col"},r.a.createElement("div",{className:"dept-row"},function(e,t){var n="";return t.locations.length>=1&&(n=t.locations.filter((function(t){return t.id===e.LocationId}))[0].abbr+"/"),-1===e.DepartmentId?n+"All Departments":n+e.DepartmentName}(a,t)),r.a.createElement("div",{className:n?"note-text-row-oneline":"note-text-row"},a.Notes))):r.a.createElement("div",null)}),Hn=(n(71),{1:"#9CBA6A",2:"#BFBFBF",3:"#FFAD00",4:"#C41A26",6:"#677A46",7:"#FFAD00"}),Jn={1:{color:"black"},2:{color:"#C41A26"},4:{color:"#BCBCBC"}};var Qn=function(e){var t=e.event,n=e.locations,o=e.onEdit,c=Object(a.useContext)(de).auth;if(!t||!c||!c.locations||0===c.locations.length)return r.a.createElement("div",null);var l,s=new Date(9e3,1,1),u=t.EventTypeId===Je.Clock&&t.EventStatusId===$e.Approved&&t.IsClockedIn,d=t.EventTypeId===Je.Clock&&t.EventStatusId===$e.Approved&&t.EventBreaks.filter((function(e){return!e.BreakEnd||e.BreakEnd>s})).length>0,m=Jn[t.EventStatusId],p=u&&d?In.a:Ke.a,E=u?r.a.createElement("div",{className:"time-row"},r.a.createElement(i.m,{icon:p}),r.a.createElement("span",{style:m},(l=t,Object(Se.a)(Object(Oe.a)(l.EventStart),"h:mmaaa").replace("M","")))," ",xe(t.EventDuration)," "):r.a.createElement("div",{className:"time-row"},r.a.createElement("span",{style:m},function(e){var t=Object(Se.a)(Object(Oe.a)(e.EventStart),"h:mmaaa").replace("M",""),n=Object(Se.a)(Object(Oe.a)(e.EventEnd),"h:mmaaa").replace("M","");return"".concat(t," - ").concat(n)}(t))," ",xe(t.EventDuration)," "),v=t.Tag?" ~"+t.Tag:"",f={borderLeft:"5px solid ".concat(Hn[t.EventTypeId]," ")};return r.a.createElement("button",{onClick:function(){var e=it(t.EventTypeId,t.EventStatusId,t.EmployeeId,t.EventStart,t.EventEnd,t.LocationId,t.DepartmentId,t.PositionId,t.IsConfirmed,c);null!==e&&o(t,e)},className:"event"},r.a.createElement("div",{className:"card-second-col",style:f},E,r.a.createElement("div",{className:"position-row"},function(e,t){var n=e.filter((function(e){return e.id===t.LocationId}))[0],a=e.filter((function(e){return e.departments.filter((function(e){return e.positions.filter((function(e){return e.hasPosition}))}))})).length>1,r=!!a||n.departments.filter((function(e){return e.positions.filter((function(e){return e.hasPosition}))})).length>1,o="";return a&&(t.AbbreviatedLocationName?o=t.AbbreviatedLocationName+"/":t.LocationAbbreviation&&(o=t.LocationAbbreviation+"/")),r&&(t.AbbreviatedDepartmentName?o+=t.AbbreviatedDepartmentName+"/":t.DepartmentAbbreviation&&(o+=t.DepartmentAbbreviation+"/")),o+=t.PositionName}(n,t)," ",v),t.EventBreaks&&t.EventBreaks.map((function(e){return r.a.createElement("div",{key:e.BreakStart,className:"break-div"},"(B) ",we(e))}))))},$n=function(){return r.a.createElement("button",{className:"event"},r.a.createElement("div",{style:{paddingLeft:"20px",paddingRight:"2px"}},r.a.createElement(yn.a,{width:5,height:40})),r.a.createElement("div",{className:"card-second-col"},r.a.createElement(yn.a,{width:150}),r.a.createElement("div",{className:"position-row"},r.a.createElement(yn.a,{width:150}))))},Xn=function(e){var t=e.refreshToggle,n=e.onUpdate,o=Object(a.useState)(se),c=Object(d.a)(o,2),l=c[0],s=c[1],u=It((function(e){M(e)})),m=r.a.useContext(K),p=m.user,E=m.refreshGeoLocation,v=Q(),f=Object(a.useState)(!1),b=Object(d.a)(f,2),h=b[0],g=b[1],y=Object(a.useState)(null),O=Object(d.a)(y,2),k=O[0],S=O[1],C=Object(a.useState)(null),I=Object(d.a)(C,2),j=I[0],T=I[1],N=Object(a.useState)(!1),D=Object(d.a)(N,2),x=D[0],A=D[1],w=function(e,t){S(e.ScheduleEventId),T(t),g(!0)};function M(e){E().then((function(){te.getHomePageData(p).then((function(t){s(t),A(!1),e&&(e.detail.complete(),n())}))}))}Object(a.useEffect)((function(){p&&p.isLoggedin&&(A(!0),M(void 0))}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.r,{className:"todaylist",lines:"none"},r.a.createElement(i.s,{mode:"ios"},r.a.createElement(i.p,{className:"label",mode:"ios"},Ae(new Date))),x&&(l.dailyNotes&&l.dailyNotes.length>0||l.currentEvents&&l.currentEvents.length>0)&&r.a.createElement(i.H,{className:"center",name:"dots"}),x&&(!l.dailyNotes||0===l.dailyNotes.length||!l.currentEvents||0===l.currentEvents.length)&&r.a.createElement(r.a.Fragment,null,r.a.createElement($n,null),r.a.createElement($n,null)),l.dailyNotes&&l.dailyNotes.map((function(e){return r.a.createElement(i.o,{key:e.DailyNoteId},r.a.createElement(Kn,{authItems:l.auth,oneLine:!1,dailyNote:e}))})),l.currentEvents.map((function(e){return r.a.createElement(i.o,{key:e.ScheduleEventId},r.a.createElement(Qn,{onEdit:w,locations:l.auth.locations,event:e}))}))),r.a.createElement(i.x,{isOpen:h,onDidDismiss:function(){return g(!1)}},r.a.createElement(fn,{isOpen:h,auth:l.auth,onCancelModal:function(){return g(!1)},onDismissModal:function(){return M(void 0),void g(!1)},scheduleEventId:k,eventEditAuth:j})),v.alertBoxJsx,u.ionicRefresherJsx)},Zn=function(){var e=Object(a.useState)("today"),t=Object(d.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!1),l=Object(d.a)(c,2),s=l[0],u=l[1],m=Object(a.useState)(!1),p=Object(d.a)(m,2),E=p[0],v=p[1];return r.a.createElement(i.y,{id:"clock-page"},r.a.createElement(i.l,{mode:"ios"},r.a.createElement(i.R,{mode:"md"},r.a.createElement(i.e,{slot:"start"},r.a.createElement(i.v,null)),r.a.createElement(i.O,{slot:"start"},"Clock"))),r.a.createElement(i.D,{mode:"md",onIonChange:function(e){return t=e.detail.value,void o(t);var t}},r.a.createElement(i.E,{mode:"md",value:"today",checked:"today"===n},"TODAY"),r.a.createElement(i.E,{mode:"md",value:"pay-periods",checked:"pay-periods"===n},"PAY PERIOD")),r.a.createElement(i.h,{className:"outer-content"},"today"===n&&r.a.createElement(Xn,{refreshToggle:s,onUpdate:function(){v(!E)}}),"pay-periods"===n&&r.a.createElement(Yn,{date:null})),r.a.createElement(i.j,{className:"footer"},"today"===n&&r.a.createElement(Ln,{refreshToggle:E,onUpdate:function(){u(!s)}})))},ea=(n(184),n(185),n(306)),ta=function(e){var t=e.message,n=e.onMessageClick;if(!t)return r.a.createElement("div",null);var a=t.isViewed?"normal":"bold";return r.a.createElement("button",{className:"message",onClick:n},r.a.createElement("div",{className:"top-line"},r.a.createElement("span",{className:"subject",style:{fontWeight:a}},t.isPinned&&r.a.createElement(i.m,{icon:ea.a,style:{color:"gray"}}),t.subject),r.a.createElement("span",{className:"time"},function(e){var t=Object(Oe.a)(e),n=new Date;return Object(ke.a)(t)?Object(Se.a)(t,"h:mmaaa").replace("M",""):Object(Ce.a)(n,t)<7?Object(Se.a)(t,"EEE").toUpperCase():Object(Ie.a)(t,n)?Object(Se.a)(t,"MMM d"):Object(Se.a)(t,"M/d/yyyy")}(t.deliveryDateTime)," ")),r.a.createElement("div",{className:"bottom-line"},t.previewLine))},na=function(e){var t=e.onDismissModal,n=e.onCancelModal,o=e.filterData,c=Object(a.useState)({msgTypeIds:o.msgTypes?o.msgTypes.map((function(e){return e.messageTypeId})):[],employeeId:-1}),l=Object(d.a)(c,2),s=l[0],u=l[1],m=function(){n()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.l,null,r.a.createElement(i.R,null,r.a.createElement(i.e,{slot:"start"},r.a.createElement(i.d,{onClick:m},r.a.createElement(i.m,{icon:$.a,mode:"md",slot:"icon-only"}))),r.a.createElement(i.O,null,"Filter"),r.a.createElement(i.e,{slot:"end"},r.a.createElement(i.d,{onClick:function(){u({msgTypeIds:o.msgTypes.map((function(e){return e.messageTypeId})),employeeId:-1})}},"RESET ALL")))),r.a.createElement(i.h,{class:"outer-content"},r.a.createElement(i.o,null,r.a.createElement(i.p,null,"From"),r.a.createElement(i.F,{value:s.employeeId,onIonChange:function(e){return u(Object(f.a)({},s,{employeeId:e.detail.value}))},interface:"action-sheet"},r.a.createElement(i.G,{key:-1,value:-1},"EVERYONE"),o&&o.employees&&o.employees.map((function(e){return r.a.createElement(i.G,{key:e.employeeId,value:e.employeeId},e.name)})))),r.a.createElement(i.o,null,r.a.createElement(i.p,null,"Message Types")),o.msgTypes&&r.a.createElement(X,{list:o.msgTypes.map((function(e){return{id:e.messageTypeId,name:e.name,description:""}})),selected:o.msgTypes.filter((function(e){return s.msgTypeIds.includes(e.messageTypeId)})).map((function(e){return{id:e.messageTypeId,name:e.name,description:""}})),selectionChanged:function(e){u(Object(f.a)({},s,{msgTypeIds:e.map((function(e){return e.id}))}))}})),r.a.createElement(i.j,{className:"outer-content footer"},r.a.createElement(i.d,{className:"apply-button",expand:"block",onClick:function(){t(s)}},"APPLY FILTER"),r.a.createElement(i.d,{className:"apply-button",expand:"block",onClick:m,color:"tertiary"},"BACK")))},aa=new N;[{id:1,typeName:"CoverRequestMessage",description:"Cover-Request"},{id:2,typeName:"CoverApprovedMessage",description:"Cover-Approved"},{id:3,typeName:"DirectCoverRequestMessage",description:"Direct Cover-Request"},{id:5,typeName:"ShiftRequestMessage",description:"Shift-Request"},{id:6,typeName:"ShiftRequestDeniedMessage",description:"Shift-Denied"},{id:10,typeName:"ShiftRequestReceivedMessage",description:"Shift-Request Received"},{id:20,typeName:"NoClockInAlertMessage",description:"No Clock In Alert"},{id:21,typeName:"NoClockOutAlertMessage",description:"No Clock Out Alert"},{id:22,typeName:"LateClockInMessage",description:"Late Clock In Alert"},{id:23,typeName:"EarlyClockOutAlertMessage",description:"Early Clock Out Alert"},{id:50,typeName:"ScheduleEventUpdatedMessage",description:"Schedule Event Updated"},{id:60,typeName:"PublishedScheduleUpdatedMessage",description:"Published Schedule Updated"},{id:80,typeName:"PasswordRecoveryMessage",description:"Password Recovery"},{id:81,typeName:"VerifyCellPhoneMessage",description:"Verify Cell Phone"},{id:82,typeName:"VerifyCellPhoneCompleteMessage",description:"Verify Cell Phone Completed"},{id:83,typeName:"VerifyEmailMessage",description:"Verify Email"},{id:100,typeName:"CustomMessage",description:"Custom Messages"},{id:101,typeName:"WeeklyScheduleForEmployeeMessage",description:"Employee Weekly Schedule"},{id:555,typeName:"WelcomeMessage",description:"Welcome"},{id:603,typeName:"UpdatePaymentInformationMessage",description:"Update Payment Information"},{id:700,typeName:"UpgradeSubscriptionMessage",description:"Upgrade Subscription (to Orbital)"},{id:701,typeName:"FailedSignupMessage",description:"Failed Signup"},{id:702,typeName:"GenericErrorMessage",description:"Error Message"},{id:704,typeName:"SignupMessage",description:"Signup Completed"},{id:705,typeName:"DatesOutOfSyncMessage",description:"Dates Out of Sync"},{id:708,typeName:"CancelSubscriptionMessage",description:"Canceled Subscription  "}].map((function(e){return aa.Add(""+e.id,e)}));var ra=function(e,t){return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(M(e,"api/v2/employee/messages/"+t));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}))},oa=function(e){return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.awrap(M(e,"api/v2/employee/messages"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},ca=function(e,t){return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(M(e,"api/v1/employee/messages/"+t+"/readCount"));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}))},la=function(e,t,n){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(R(e,"api/v1/employee/messages/"+t+"/togglePin",{isPinned:n}));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))},sa=function(e,t,n){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(R(e,"api/v1/employee/messages/"+t+"/toggleView",{isViewed:n}));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))},ia=function(e,t){return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(L(e,"api/v1/employee/messages/"+t));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}))};n(186);var ua=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)({message:"",onCancel:function(){},onYes:function(){}}),l=Object(d.a)(c,2),s=l[0],u=l[1];return{showDialog:function(e,t,n){u({message:e,onYes:t,onCancel:n}),o(!0)},dialogJsx:r.a.createElement(i.b,{isOpen:n,onDidDismiss:function(){o(!1),s.onCancel()},message:s.message,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:s.onCancel},{text:"Yes",handler:s.onYes}]})}},da=function(e){var t=e.message,n=e.onCloseModal,o=e.updateMessages,c=Q(),l=ua(),s=r.a.useContext(K).user,u=r.a.useContext(de).auth,m=Object(a.useState)(null),p=Object(d.a)(m,2),E=p[0],v=p[1],f=Object(a.useState)(null),b=Object(d.a)(f,2),h=b[0],g=b[1],y=Object(a.useState)(null),O=Object(d.a)(y,2),k=O[0],S=O[1],C=Object(a.useState)(null),I=Object(d.a)(C,2),j=I[0],T=I[1],N=Object(a.useState)(!1),D=Object(d.a)(N,2),x=D[0],A=D[1];Object(a.useEffect)((function(){t&&(t.scheduleEventId?ze.getScheduleEvent(s,t.scheduleEventId).then((function(e){if(e){v(e);var t=it(e.EventTypeId,e.EventStatusId,e.EmployeeId,e.EventStart,e.EventEnd,e.LocationId,e.DepartmentId,e.PositionId,null!==e.ConfirmedBy&&void 0!==e.ConfirmedBy&&e.ConfirmedBy,u);g(t)}})):E&&(v(null),T(null)),ca(s,t.messageId).then((function(e){S(e)})),t.isViewed||sa(s,t.messageId,!0).then((function(){o({type:"UPDATE-VIEWED",msgId:t.messageId,isViewed:!0})})),A(t.isPinned))}),[null===t||void 0===t?void 0:t.messageId]);var w,M=function(e){n(e)};return t&&u&&u.locations&&0!==u.locations.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.l,null,r.a.createElement(i.R,null,r.a.createElement(i.e,{slot:"start"},r.a.createElement(i.d,{onClick:function(){M(null)}},r.a.createElement(i.m,{icon:$.a,mode:"md",slot:"icon-only"}))),r.a.createElement(i.e,{slot:"end"},r.a.createElement(i.d,{onClick:function(){!function(){var e=!x;la(s,t.messageId,e).then((function(){A(e),o({type:"UPDATE-PINNED",msgId:t.messageId,isPinned:e})}))}()}},r.a.createElement(i.m,{icon:ea.a,style:x?{color:"black"}:{color:"lightgray"}})),r.a.createElement(i.d,{onClick:function(){l.showDialog("Delete this message?",(function(){ia(s,t.messageId).then((function(){o({type:"DELETE",msgId:t.messageId}),M("Message Deleted")}))}),(function(){}))}},r.a.createElement(i.m,{icon:Rt.a}))))),r.a.createElement(i.h,{class:"outer-content"},r.a.createElement(i.k,null,r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"12"},t.subject,r.a.createElement("br",null),"From: ",t.fromEmployeeFirstName," ",t.fromEmployeeLastName)),r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"9",style:{paddingLeft:"15px",color:"lightgray"}},(w=t.deliveryDateTime,Object(Se.a)(Object(Oe.a)(w),"M/d EEE h:mmaa").replace("M",""))),r.a.createElement(i.g,{size:"3",style:{color:"lightgray"}},null!==k&&r.a.createElement("span",null,k," Read"))),r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"1"}),r.a.createElement(i.g,{size:"9"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:null===t||void 0===t?void 0:t.messageText}}))),null!==j&&r.a.createElement(i.C,null,r.a.createElement(i.g,{size:"12"},j))),c.alertBoxJsx,l.dialogJsx),r.a.createElement(i.j,{className:"outer-content footer"},null!==E&&r.a.createElement(sn,{auth:u,eventEnd:E.EventEnd,eventType:E.EventTypeId,eventStatus:E.EventStatusId,eventEmployeeId:E.EmployeeId,eventPositionId:E.PositionId,scheduleEventId:E.ScheduleEventId,locationId:E.LocationId,update:function(){},cancelEditModal:M,eventEditAuth:h,setUsageText:T}),r.a.createElement(i.d,{className:"apply-button",expand:"block",onClick:function(){M(null)},color:"tertiary"},"BACK"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Loading"),c.alertBoxJsx)},ma=[],pa=function(e,t){switch(console.log("REDUCER: ACTION =",t.type),t.type){case"LOADED-FROM-API":return t.data;case"CLEAR":return[];case"UPDATE-PINNED":return e.map((function(e){return e.messageId===t.msgId?Object(f.a)({},e,{isPinned:t.isPinned}):e}));case"UPDATE-VIEWED":return e.map((function(e){return e.messageId===t.msgId?Object(f.a)({},e,{isViewed:t.isViewed}):e}));case"DELETE":return e.filter((function(e){return e.messageId!==t.msgId}))}},Ea=function(e){var t=e.match,n=e.history,o=r.a.useContext(K).user,c=It((function(e){y({type:"CLEAR"}),B(e)})),l=Object(a.useState)(!1),s=Object(d.a)(l,2),u=s[0],m=s[1],p=Object(a.useState)(!0),E=Object(d.a)(p,2),v=E[0],f=E[1],b=Object(a.useReducer)(pa,[]),h=Object(d.a)(b,2),g=h[0],y=h[1],O=Object(a.useState)(ma),k=Object(d.a)(O,2),S=k[0],C=k[1],I=Object(a.useState)({}),j=Object(d.a)(I,2),T=j[0],N=j[1],D=Object(a.useState)({}),x=Object(d.a)(D,2),A=x[0],w=x[1],M=Object(a.useState)(null),R=Object(d.a)(M,2),P=R[0],U=R[1],L=hn();Object(a.useEffect)((function(){if(o&&o.isLoggedin)return B(void 0)}),[o]),Object(a.useEffect)((function(){F(A,g)}),[g]),Object(a.useEffect)((function(){t.params.messageId&&null===P&&ra(o,parseInt(t.params.messageId)).then((function(e){e||(L.showToast("The requested message has been removed"),n.push("/tabs/messages/")),U(e)}))}),[t.params.messageId]);var B=function(e){var t=!0;return f(!0),oa(o).then((function(n){t&&(y({type:"LOADED-FROM-API",data:n}),F(A,n),f(!1),e&&e.detail.complete())})),function(){t=!1}},F=function(e,t){e&&e.msgTypeIds?-1!==e.employeeId?e.msgTypeIds.length>0?C(t.filter((function(t){return t.fromEmployeeId===e.employeeId&&kt.contains(e.msgTypeIds,t.messageTypeId)}))):C(t.filter((function(t){return t.fromEmployeeId===e.employeeId}))):e.msgTypeIds.length>0?(console.log(e.msgTypeIds),C(t.filter((function(t){return kt.contains(e.msgTypeIds,t.messageTypeId)})))):C(t):C(t)};return r.a.createElement(i.y,{id:"clock-page"},r.a.createElement(i.l,{mode:"ios"},r.a.createElement(i.R,{mode:"md"},r.a.createElement(i.e,{slot:"start"},r.a.createElement(i.v,null)),r.a.createElement(i.O,{slot:"start"},"Messages"),r.a.createElement(i.e,{slot:"end"},r.a.createElement(i.d,null,r.a.createElement(i.m,{icon:ge.a,mode:"md",slot:"icon-only"})),r.a.createElement(i.d,{onClick:function(){var e=kt.uniqueObject(g.map((function(e){return{employeeId:e.fromEmployeeId,name:e.fromEmployeeFirstName+" "+e.fromEmployeeLastName}})),(function(e,t){return e.employeeId===t.employeeId})),t=kt.uniqueObject(g.map((function(e){return{messageTypeId:e.messageTypeId,name:aa.Item(String(e.messageTypeId)).description}})),(function(e,t){return e.messageTypeId===t.messageTypeId}));N({msgTypes:t,employees:e}),m(!0)}},r.a.createElement(i.m,{icon:ye.a,mode:"ios",slot:"icon-only"}))))),r.a.createElement(i.h,{className:"outer-content"},c.ionicRefresherJsx,v&&r.a.createElement(r.a.Fragment,null,[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map((function(e){return r.a.createElement("div",{key:e,style:{margin:"10px 8px"}},r.a.createElement(yn.a,{width:360,height:45}))}))),!v&&0===S.length&&r.a.createElement("div",null,"No Messages to show"),r.a.createElement("div",{className:"message-list"},!v&&S.length>0&&S.filter((function(e){return e.isPinned})).map((function(e){return r.a.createElement(ta,{key:e.messageId,message:e,onMessageClick:function(){return U(e)}})}))),r.a.createElement("div",{style:{height:"1px",borderTop:"1px solid lightgray",width:"100%"}}),r.a.createElement("div",{className:"message-list"},!v&&S.length>0&&S.filter((function(e){return!e.isPinned})).map((function(e){return r.a.createElement(ta,{key:e.messageId,message:e,onMessageClick:function(){return U(e)}})})))),r.a.createElement(i.x,{isOpen:u},r.a.createElement(na,{filterData:T,onDismissModal:function(e){w(e),F(e,g),m(!1)},onCancelModal:function(){return m(!1)}})),r.a.createElement(i.x,{isOpen:null!==P},r.a.createElement(da,{message:P,updateMessages:y,onCloseModal:function(e){U(null),e&&L.showToast(e)}})),L.simpleToastJsx)},va=function(){return r.a.createElement(i.L,null,r.a.createElement(i.B,null,r.a.createElement(l.a,{exact:!0,path:"/tabs",to:"/tabs/schedule"}),r.a.createElement(l.b,{path:"/tabs/schedule/:scheduleEventId",render:function(e){return r.a.createElement(Cn,e)}}),r.a.createElement(l.b,{path:"/tabs/schedule",render:function(e){return r.a.createElement(Cn,e)},exact:!0}),r.a.createElement(l.b,{path:"/tabs/messages/:messageId",render:function(e){return r.a.createElement(Ea,e)}}),r.a.createElement(l.b,{path:"/tabs/messages",render:function(e){return r.a.createElement(Ea,e)},exact:!0}),r.a.createElement(l.b,{path:"/tabs/clock",render:function(){return r.a.createElement(Zn,null)},exact:!0})),r.a.createElement(i.J,{slot:"bottom"},r.a.createElement(i.K,{tab:"schedule",href:"/tabs/schedule"},r.a.createElement(i.m,{icon:fe.a}),r.a.createElement(i.p,null,"Schedule")),r.a.createElement(i.K,{tab:"clock",href:"/tabs/clock"},r.a.createElement(i.m,{icon:be.a}),r.a.createElement(i.p,null,"Clock")),r.a.createElement(i.K,{tab:"map",href:"/tabs/messages"},r.a.createElement(i.m,{icon:he.a}),r.a.createElement(i.p,null,"Messages"))))},fa=function(){var e=r.a.useContext(K).user;return e.loading?r.a.createElement("div",null,"Loading user info"):e.isLoggedin?r.a.createElement(va,null):r.a.createElement(l.a,{to:"/login"})},ba=(n(187),function(e){var t=e.history,n=r.a.useContext(K),a=n.user,o=n.logout,c=r.a.useContext(de).clearAuth;return Object(i.V)((function(){I("logout",{user:a.username}),c(),o().then((function(){setTimeout((function(){t.push("/login",{direction:"none"}),t.goForward()}),1500)}))})),r.a.createElement(i.y,{id:"logout-page"},r.a.createElement(i.h,{className:"logout-content"},r.a.createElement("div",{className:"login-logo"},r.a.createElement("img",{className:"logo",src:"assets/img/OS Logo - 4pt Rounded _ 2 Tone Orange.svg",alt:"Orbital Shift Logo"})),r.a.createElement("div",{className:"label"},"You were logged out")))}),ha=n(60),ga=function(){return Object(a.useEffect)((function(){w.settings.hasCapacitor&&ha.a.lock(ha.a.ORIENTATIONS.PORTRAIT).then((function(){console.log("screen locked to portrait")})),console.log("firebase initialized"),S.initializeApp(C),I("app_render",{vers:w.settings.appVersionString,platform:w.settings.platform})}),[]),r.a.createElement(i.c,null,r.a.createElement(u.a,null,r.a.createElement(u.a,null,r.a.createElement(i.I,{contentId:"main"},r.a.createElement(ee,null),r.a.createElement(i.B,{id:"main"},r.a.createElement(l.b,{path:"/login",render:function(e){return r.a.createElement(ve,e)}}),r.a.createElement(l.b,{path:"/logout",render:function(e){return r.a.createElement(ba,e)}}),r.a.createElement(l.b,{path:"/tabs",render:function(e){return r.a.createElement(fa,e)}}),r.a.createElement(l.b,{path:"/",exact:!0},r.a.createElement(l.a,{to:"/tabs/schedule"})))))))},ya=function(){return r.a.createElement(s.a,null,r.a.createElement(H,null,r.a.createElement(pe,null,r.a.createElement(ga,null))))};c.a.render(r.a.createElement(ya,null),document.getElementById("root"))},50:function(e,t,n){},56:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},71:function(e,t,n){}},[[138,9,10]]]);
//# sourceMappingURL=main.a8139386.chunk.js.map