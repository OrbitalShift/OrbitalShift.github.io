{"version":3,"sources":["../node_modules/@ionic/core/dist/esm-es5 lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/@ionic/react/node_modules/ionicons/dist/esm-es5 lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","data/dbStore.ts","util/logger.ts","util/KeyedCollection.ts","api/environment.ts","enums/DeviceOperatingSystem.ts","api/OrbitalApiHelper.ts","api/PushNotificationsAPI.ts","util/push-notifications-controller.ts","context/ApplicationUserContext.tsx","hooks/useDialogBox.tsx","orbital-interfaces/authorized-items.ts","components/ToggleListEx.tsx","components/NotificationSettingsModal.tsx","components/Menu.tsx","api/UserAPI.ts","context/AuthorizedItemsContext.tsx","pages/Login.tsx","util/time-helper.ts","enums/EventType.ts","api/ScheduleEventsAPI.ts","orbital-interfaces/EventFilter.ts","components/SchedulePageComponents/WeekChooser.tsx","enums/EventStatus.ts","components/EditEvent/EditEventAuthorization.ts","util/authitems-helper.ts","enums/EventGroup.ts","components/SchedulePageComponents/EventCard.tsx","components/SchedulePageComponents/DailyNoteCard.tsx","components/SchedulePageComponents/EventListSection.tsx","components/SchedulePageComponents/EventList.tsx","util/event-helper.ts","util/array-helper.ts","components/SchedulePageComponents/ScheduleFilterModal.tsx","hooks/useIonicRefresher.tsx","enums/RecurrenceType.ts","components/EditEvent/editor/EventTypeStatusEditor.tsx","components/EditEvent/editor/EventPositionEditor.tsx","api/EmployeesAPI.ts","components/EditEvent/editor/EventEmployeeEditor.tsx","components/EditEvent/editor/EventStartEndEditor.tsx","components/EditEvent/editor/AddBreakModal.tsx","components/EditEvent/editor/EventBreakEditor.tsx","components/EditEvent/editor/EventTagEditor.tsx","components/EditEvent/editor/EventConfirmEditor.tsx","components/EditEvent/editor/EventIsClockedInEditor.tsx","components/EditEvent/EditEventModalState.ts","enums/RecurrenceUpdateType.ts","components/EditEvent/editor/EventNotesEditor.tsx","components/EditEvent/editor/EventClockoutValueEditor.tsx","api/RequestsAPI.ts","components/EditEvent/editor/EventRequestModal.tsx","components/EditEvent/editor/EventRequestEditor.tsx","components/EditEvent/editor/WeekdayList.tsx","components/EditEvent/editor/RecurringEventSection.tsx","components/EditEvent/RecurrenceUpdateTypeSelector.tsx","hooks/useOrbitalDialogBox.tsx","components/EditEvent/EditEventModal.tsx","hooks/useSimpleToast.tsx","enums/ClockInRequirement.ts","components/SchedulePageComponents/EventCardSkeleton.tsx","components/SchedulePageComponents/NoEventsToShow.tsx","pages/SchedulePage.tsx","components/ClockPageComponents/BreakSelectorModal.tsx","enums/StartBreakResponseCode.ts","enums/EndBreakResponseCode.ts","api/TimeClockAPI.ts","components/ClockPageComponents/ClockoutModal.tsx","components/ClockPageComponents/SwitchPositionOrTagButton.tsx","components/ClockPageComponents/Map.tsx","components/ClockPageComponents/ClockPanel.tsx","hooks/useInterval.ts","components/ClockPageComponents/PayrollPeriodChooser.tsx","api/PayrollPeriodAPI.ts","components/ClockPageComponents/PayrollOrbitalTimeItem.tsx","components/ClockPageComponents/PayrollDetailModal.tsx","components/ClockPageComponents/PayrollDetailRow.tsx","components/ClockPageComponents/PayrollDetailList.tsx","components/ClockPageComponents/PayrollPeriodsTab.tsx","components/TodayDailyNoteCard.tsx","components/TodayEventCard.tsx","components/TodayEventCardSkeleton.tsx","components/ClockPageComponents/ClockTodayTab.tsx","pages/ClockPage.tsx","components/MessagesPageComponents/MessageItem.tsx","components/MessagesPageComponents/MessagesFilterModal.tsx","orbital-interfaces/MessageTypes.ts","api/MessageAPI.ts","hooks/useYesOrCancelDialogBox.tsx","components/MessagesPageComponents/ViewMessageModal.tsx","pages/MessagesPage.tsx","pages/MainTabs.tsx","components/AuthGate.tsx","pages/Logout.tsx","App.tsx","index.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","getKeyStore","openDB","upgrade","db","createObjectStore","putUserState","state","a","put","getUserState","get","getAccessToken","access_token","undefined","putAuthItems","auth","getAuthItems","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","log","eventName","eventParams","firebase","logEvent","KeyedCollection","items","_count","key","this","hasOwnProperty","value","val","keySet","prop","push","values","environments","name","url","et","add","DeviceOperatingSystem","settings","env","versionName","versionCode","revisionHash","appVersionString","hasCapacitor","isPlatform","platform","getApiUrl","user","endpoint","item","environment","getUserAndEnvironmentFromInput","input","length","username","envKey","toLowerCase","substring","post","baseUrl","data","fetch","method","body","JSON","stringify","headers","Authorization","AppVersion","response","contentType","indexOf","json","results","appVersion","console","error","putData","dataString","options","del","subscribe","token","operatingSystem","iOS","Android","apiHelper","TokenId","OperatingSystem","unsubscribe","getTypesSelectedByUser","putTypes","typeIds","listTypes","PushNotifications","Plugins","pushEnabled","showMessage","history","createBrowserHistory","forceRefresh","register","addListener","pushApi","notification","MessageId","title","goForward","messageId","INITIAL_APPLICATION_USER","isLoggedin","darkMode","loading","latitude","longitude","lastLocationUpdate","isPushEnabled","INITIAL_APPLICATION_USER_CONTEXT","logout","userLoggedIn","u","at","startWatchPosition","callback","clearWatchPosition","s","ApplicationUserContext","React","createContext","ApplicationUserContextProvider","props","useState","userState","internalSetUserState","useEffect","mounted","all","newState","PushController","enabled","currentState","Geolocation","getCurrentPosition","position","coords","msg","message","os","Provider","Capacitor","isPluginAvailable","watchId","watchPosition","enableHighAccuracy","maximumAge","err","positionChanged","reason","google","maps","geometry","spherical","computeDistanceBetween","oldPos","LatLng","newPos","distance","clearWatch","children","useDialogBox","Role","isOpen","setIsOpen","header","onDismiss","alertData","setAlertData","showAlert","alertBoxJsx","onDidDismiss","buttons","ToggleListEx","list","selected","selectionChanged","isItemChecked","i","mode","checked","onClick","slice","onAllChanged","toggle","n","includes","newList","newlist","filter","r","itemToggle","NotificationSettingsModal","onDismissModal","useContext","notifications","setNotifications","selectedNotifications","setSelectedNotifications","isSubscribed","responses","slot","icon","arrowBackOutline","class","newSelected","Menu","disableMenu","userName","substr","dlg","showNotificationsModal","setShowNotificationsModal","type","disabled","contentId","className","toUpperCase","auto-hide","button","routerLink","routerDirection","mail","logOut","authenticateUser","password","error_description","loggedIn","getHomePageData","getAuthorizedItems","result","TimeFormat","ClockOutValueType","AdminAuthorization","UnscheduledBreakOptions","BreakType","EmployeeSort","initialHomePageData","locations","tags","payrollEvents","employeeId","role","Employee","currentEvents","nextEvent","dailyNotes","INITIAL_AUTHORIZED_ITEMS","INITIAL_AUTHITEMS_CONTEXT","refreshAuth","force","newUser","clearAuth","authLoading","AuthorizedItemsContext","currentAuth","authFromStore","UserAPI","authFromApi","AuthorizedItemsContextProvider","internalSetAuth","setLoading","newAuth","validate","Login","showLoading","setShowLoading","setUsername","setPassword","usernameErrors","passwordErrors","loginEnabled","setLoginEnabled","login","envUser","direction","useIonViewWillEnter","src","alt","spinner","duration","onChange","newUsername","target","color","newPassword","expand","noEndTime","Date","getDurationFromTimeSpan","timespan","hrs","min","tok","split","hrTok","parseInt","getDurationStringFromTimeSpan","getDateString","date","format","getBreakStartEnd","brk","start","parseISO","BreakStart","replace","BreakEnd","end","getEventBreakStartEndString","getWeekStart","weekStartsOn","dayStart","dayStartMinutes","newDate","setHours","counter","addDays","formatDateTimeAsMvcString","d","getFullYear","padZeroes","getMonth","getDate","getHours","getMinutes","formatDecimal","num","digits","decimals","Number","toFixed","toString","negative","Math","max","digitCount","EventType","getScheduleEvent","scheduleEventId","getScheduleEventsByFilter","filterToSend","getDailyNotesByFilter","updateScheduleEvent","eventValues","recurrenceUpdateType","eventType","eventStatus","isConfirmed","positionId","employee","eventStart","eventEnd","tagId","tag","eventBreaks","isClockedIn","breakStart","breakDuration","clockOutValue","clockoutValue","absentTime","absentTimeMinutes","notes","sendMessage","recurrenceId","recurrenceStart","recurrenceEnd","recurrenceType","repeatInterval","repeatWeekdays","createScheduleEvent","sceduleEventId","deleteScheduleEvent","initialEventFilter","settingsLocId","dnLocIds","filterByEmployee","filterByPosition","positionIds","eventTypeId","eventStatusId","WeekChooser","startDate","setStartDate","arrowBack","displayFormat","pickerFormat","toISOString","onIonChange","detail","caretDown","arrowForward","thisDate","isTodayClass","isToday","EventStatus","EventEditEnum","locationId","loc","foundDepartment","flatMap","l","departments","positions","p","Shift","Cover","Clock","Absent","departmentId","adminAuth","CanEditSchedules","Admin","hasPosition","dept","Approved","Request","RequestDenied","locId","posId","location","locPosId","depPosId","posPosId","EventGroup","getEventEditAuthorization","eventEmployeeId","eventLocationId","eventDepartmentId","eventPositionId","eventConfirmed","selectedPosition","authHelper","eventStatusOptions","getEventStatusOptionsList","eventTypeOptions","getEventTypeOptionsList","retVal","buttonText","enableConfirm","isReadonly","text","usage","None","eventTypeOptionList","eventStatusOptionList","BusinessAdmin","LocationAdmin","endOfEvent","now","afterEnd","isAfter","employeeEvent","CanEditOwnClockEvents","CanEditEmployeeClockEvents","CreateCoverRequest","DeleteShiftRequest","UndoCoverRequest","Delete","CreateShiftRequest","locSettings","ShowUnavailableEventType","Unavailable","ShowVacationEventType","Vacation","ShowAbsentEventType","peTypes","pe","startsWith","concat","isEditingExistingEvent","es","colorMap","1","2","3","4","6","7","statusTimeColor","EventCard","event","multiLocation","showEmployeeName","onEdit","displayNameStyle","display","eventStartDate","EventStart","multiDepartment","posDisplay","AbbreviatedLocationName","AbbreviatedDepartmentName","PositionName","eventTypeBorder","borderLeft","EventTypeId","timeColor","EventStatusId","eventEditAuth","EmployeeId","EventEnd","LocationId","DepartmentId","PositionId","IsConfirmed","onUserClick","style","IsClockedIn","time","ev","getEventInformationStartEnd","EventDuration","FirstName","LastName","Tag","note","noteDate","deptName","DepartmentName","Notes","EventListSection","events","showEmployeeNames","DailyNoteId","ScheduleEventId","getSegmentsForMy","locationSettings","hoursPerDay","segments","weekStart","DayWeekStartsOn","DayStartTime","notesStart","isBefore","weekEnd","minutes","str","floor","getDurationString","h","reduce","prev","cur","EventList","listType","getSegmentsForRequests","containsKey","thisDatesNotes","getSegmentsForAll","seg","showTotalDuration","getEventTypeOptions","unshift","p2l","some","sort","p1","p2","arrayHelper","areEqual","a1","a2","contains","arr","containsAny","arr1","arr2","unique","newArr","uniqueObject","filt","found","ScheduleFilterModal","onCancelModal","myFilter","setMyFilter","showCustomEventTypes","setShowCustomEventTypes","ClockAndSched","eventGroup","setEventGroup","eventTypeList","setEventTypeList","locationIds","setLocationIds","departmentIds","setDepartmentIds","setPositionIds","isDirty","setIsDirty","getDefaultFilter","onEventGroupSelect","f","group","Custom","interface","Scheduled","DontWork","All","multiple","locIds","deptIds","abbr","posIds","pos","selectedPositionIds","defaultFilter","returnedFilter","filterApplied","useIonicRefresher","RecurrenceType","doRefresh","ionRefresherRef","useRef","ionicRefresherJsx","ref","onIonRefresh","pullingText","refreshingSpinner","refreshingText","EventTypeStatusEditor","editorValues","update","eventTypes","eventStatuses","selectedEventTypeId","setSelectedEventTypeId","eventStatusList","setEventStatusList","selectedEventStatusId","setSelectedEventStatusId","absentHoursPlaceholderText","setAbsentHoursPlaceholderText","setLocSettings","absentTimeString","setAbsentTimeString","absentId","HoursMinutes","hours","TimeFormatDigits","TimeFormatDecimals","getTimeStringFromMinutes","newLocSettings","onAbsentTimeChange","test","round","parseFloat","getMinutesFromTimeString","size","newEventType","newAbsentMinutes","onEventTypeChange","newEventStatus","placeholder","onIonBlur","EventPositionEditor","setSelectedPosition","positionList","setPositionList","selPos","isMultiLoc","isMultiDep","createPositionList","updatePosition","getEmployeesByLocationIdPositionIdAndActiveDateRange","EventEmployeeEditor","employeeList","setEmployeeList","isLoading","setIsLoading","selectedEmployeeId","setSelectedEmployeeId","getEmployees","employeeAPI","employees","empIds","thisEmp","FullName","newSelectedEmployeeId","emp","EventStartEndEditor","minuteValues","newEventStart","newEventEnd","hasOverlap","breaks","startA","endA","startB","addMinutes","endB","AddBreakModal","onCancel","onAdd","currentBreaks","setMinutes","endDate","setEndDate","isRestricted","setIsRestricted","isPaid","setIsPaid","errorMessage","setErrorMessage","isValid","setIsValid","alert","newStart","newStartDate","onStartUpdate","newEnd","newEndDate","onEndUpdate","width","borderBottom","EventBreakEditor","breakList","setBreakList","showBreakModal","setShowBreakModal","marginBottom","IsPaidBreak","logoUsd","b","IsRestricted","lockClosed","showRestricted","newBreakList","onDeleteBreak","trash","cssClass","EventTagEditor","selectedTagId","setSelectedTagId","tagList","setTagList","t","tagIds","onUpdateTag","EventConfirmEditor","setIsConfirmed","showConfirmed","setShowConfirmed","isConfirmable","EventIsClockedInEditor","setIsClockedIn","showIsClockedIn","setShowIsClockedIn","paddingRight","marginLeft","RecurrenceUpdateType","getLocationById","getPositionById","getValidStartEnd","startStr","endStr","isEqual","isClockoutValueValid","ClockOutValueLabel","isAllValid","v","validEventStartEnd","validEmployee","validTag","validEventTypeStatus","validClockoutValue","validRecurrenceStartEnd","validRepeatInterval","validRepeatWeekdays","INITIAL_EDITOR_VAUES","isUpdating","valid","absentName","editorValueReducer","action","getIsClockedIn","ConfirmedBy","TagId","EventBreaks","AbsentName","AbsentId","AbsentTimeMinutes","ClockOutValue","EventRecurrenceId","EventRecurrenceStart","EventRecurrenceEnd","RepeatType","RepeatInterval","RepeatWeekdays","newTypeStatusState","newClockoutValueState","newStartState","newEndState","newTagState","newConfirmState","newClockedInState","newRepeatState","repeatWeekDays","Weekly","EventNotesEditor","maxlength","rows","newNote","EventClockoutValueEditor","isVisible","setIsVisible","newValue","undoCoverRequest","createCoverRequest","businessId","broadCastMessage","coverMessage","toEmployeeId","BusinessId","BroadcastCoverRequestMessage","CoverMessage","DirectToEmployeeId","makeShiftRequest","removeShiftRequest","recUpdateType","RecUpdateType","deleteEvent","getCoverRequestListItems","isDirectCoverList","directCoverList","EventRequestModal","onOk","setNotes","coverList","setCoverList","requestAPI","hidden","EnableDirectCoverRequest","cover","EventRequestEditor","cancelEditModal","showRequestModal","setShowRequestModal","onComplete","reqApi","WeekdayList","checkList","setCheckList","dayOfWeek","getDay","newCheckState","onCheckboxChecked","RecurringEventSection","isChecked","setIsChecked","paddingLeft","height","calendar","textAlign","refresh","MonthlyByDayOfMonth","MonthlyByDayOfWeek","borderTop","RecurrenceUpdateTypeSelector","onSelect","updateType","onButtonClick","choice","titleText","UpdateSingleEvent","UpdateEntireSeries","UpdateSeriesForward","useOrbitalDialogBox","selection","dialogData","setDialogData","showDialog","dialogOptions","dialogBoxJsx","opt","EditEventModal","useReducer","updateEditorValues","scheduleEvent","setScheduleEvent","setRecurrenceUpdateType","showRecurrenceUpdateTypeSelector","setShowRecurrenceUpdateTypeSelector","buttonClicked","setButtonClicked","isEditing","dialog","scheduleEventApi","createOrUpdate","skipPrompt","goDelete","onRecurrenceUpdateTypeSelect","setUsageText","useSimpleToast","ClockInRequirement","toastData","setToastData","showToast","simpleToastJsx","EventCardSkeleton","threeRows","padding","NoEventsToShow","initialEvents","initialDailyNotes","SchedulePage","match","toast","filterAppliedClass","setFilterAppliedClass","refresher","setRefreshing","getScheduleEvents","segment","startOfDay","myScheduleEvents","setMyScheduleEvents","myDailyNotes","setMyDailyNotes","myHoursPerDay","setMyHoursPerDay","requestScheduleEvents","setRequestScheduleEvents","requestDailyNotes","setRequestDailyNotes","requestHoursPerDay","setRequestHoursPerDay","allScheduleEvents","setAllScheduleEvents","allDailyNotes","setAllDailyNotes","allHoursPerDay","setAllHoursPerDay","setSegment","showFilterModal","setShowFilterModal","refreshing","showEventModal","setShowEventModal","editEventId","setEditEventId","setEventEditAuth","setFilter","newFilter","params","curSegment","actualFilter1","getScheduleEventsByFilterInternal","actualFilter2","actualFilter3","actualFilter4","actualFilter5","actualFilter6","actualFilter7","complete","ScheduleEventsAPI","res","onEventClick","newEventEditAuth","onSegmentChange","segmentName","hasPositionFound","j","k","initialStatus","getEventNewAuthorization","funnel","marginTop","toastMessage","onEventUpdated","StartBreakResponseCode","EndBreakResponseCode","BreakSelectionModal","tcData","cancelOption","breakType","UnscheduledUnpaid","ClockedInScheduleEvent","ScheduleEventsForClockIn","Both","UnscheduledPaid","Paid","Unpaid","getTimeClockSettings","lat","lng","clockIn","clockOut","clockoutDataModel","TimeClockBreak","switchPositionOrTag","startBreak","clockEvent","shiftEvent","breakStartOptions","clockEventId","shiftEventId","shiftBreakStart","endBreak","getGeoLocations","ClockoutModal","setClockoutValue","autoCorrect","clearInput","SwitchPositionOrTagButton","selectedPosId","onSwitch","setDisabled","hiddenJsx","UserClockedIn","curPosId","curTagId","ClockInWithDifferentTag","EnablePositionChangeForEmployeePosition","Map","mapEle","userCircle","setMessage","geoLocations","setGeoLocations","showMap","setShowMap","calculateNearestLocationMessage","userPos","closestLocation","minDistance","curLoc","locPos","proximity","locationName","miles","EPSILON","current","center","zoom","disableDefaultUI","fullscreenControl","Circle","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","radius","timeclockApi","clockLocations","forEach","markerData","infoWindow","InfoWindow","content","addr","marker","Marker","open","addMarkers","addListenerOnce","classList","setCenter","setMap","arrowDownCircle","arrowUpCircle","ClockPanel","onUpdate","refreshToggle","posList","setPosList","setSelectedPosId","tagSwitchingEnabled","setTagSwitchingEnabled","breakSetting","setBreakSetting","showBreakSelectorModal","setShowBreakSelectorModal","loadingMessage","setLoadingMessage","setToastMessage","setShowToast","show","showAlertData","setShowAlertData","setTCData","showClockoutModal","setShowClockoutModal","setRefresh","watchPositionId","setTimeout","updateTimeClockData","useIonViewWillLeave","ShowTimeClock","plist","uniqueLocationIds","PositionsToClockInto","uniqueDeptIds","PositionNameWithLocAndDeptAbbreviation","PositionNameWithDeptAbbreviation","curLocId","EnableEnhancedBreakManagement","CurrentEventBreak","setTags","delay","savedProps","setInterval","clearInterval","useInterval","timeClockApi","currentPositionId","TagsPerPosition","TagName","clockout","ClockOutResponseCode","ClockOutEvent","Message","newVal","UserMayClockOut","UserMayClockIn","MatchingShift","AllowedToSwitchPositions","AllowedToSwitchTags","ClockInMessage","ClockOutMessage","ClockInResponseCode","ClockInEvent","Success","cafe","BreakSelectorModal","PayrollPeriodChooser","onNextPayPeriod","onPrevPayPeriod","payPeriodDateText","getPayPeriodDateForEmployee","dateStr","getHoursString","locsettings","ActualTime","dayHourTok","ActualHours","getTimeStringFromOrbitalTime","PayrollOrbitalTimeItem","fontColor","displayColor","PayrollDetailModal","onClose","regular","dailyOvertime","weeklyOvertime","special","timePerAbsent","hpa","getAbsentName","ColumnEnum","PayrollDetailRow","payrollRow","colsToDisplay","colSize","showDetailModal","setShowDetailModal","fontSize","backgroundColor","border","outline","Regular","DailyOvertime","WeeklyOvertime","Special","absent","PayrollDetailList","payrollData","setColsToDisplay","setColSize","cols","count","totalDailyOvertime","totalWeeklyOvertime","totalSpecial","totalAbsent","getColumnsToDisplay","x","row","fontWeight","totalRegular","PayrollPeriodsTab","currentDate","setCurrentDate","setPayrollData","getData","PayrollPeriodAPI","TodayNoteCard","authItems","oneLine","dailyNote","getDeptName","TodayEventCard","onClock","onBreak","displayIcon","rangeDisplay","getEventStartEnd","thisLocation","LocationAbbreviation","DepartmentAbbreviation","getPosition","TodayEventCardSkeleton","ClockTodayTab","homePageData","setHomePageData","lines","ClockPage","setRefreshToggle","refreshTimeClockToggle","setRefreshTimeClockToggle","MessageItem","onMessageClick","fontWeightForSubject","isViewed","isPinned","bookmark","subject","differenceInDays","isSameYear","messageDateString","deliveryDateTime","previewLine","MessagesFilterModal","filterData","msgTypeIds","msgTypes","mt","messageTypeId","filterResult","setFilterResult","description","newSelection","messageTypes","typeName","getUserMessage","msgId","getUserMessages","getReadCount","setIsPinned","setIsViewed","deleteMessage","useYesOrCancelDialogBox","onYes","dialogJsx","handler","ViewMessagetModal","onCloseModal","updateMessages","yesCancelDlg","readCount","setReadCount","usageText","pinned","setPinned","scheduleEventAPI","messageAPI","newReadCount","newPinValue","onPinnedClick","fromEmployeeFirstName","fromEmployeeLastName","dangerouslySetInnerHTML","__html","messageText","initialMessages","messagesReducer","m","MessagesPage","refreshMessages","isLoadingMessages","setIsLoadingMessages","messages","filteredMessages","setFilteredMessages","setFilterData","viewMessage","setViewMessage","filterMessages","messageApi","msgs","fromEmployeeId","y","String","margin","updatedFilter","MainTabs","exact","path","to","render","routeProps","tab","href","calendarOutline","timeOutline","chatbubblesOutline","AuthGate","Logout","useIonViewDidEnter","MyApp","ScreenOrientation","lock","ORIENTATIONS","PORTRAIT","vers","App","ReactDOM","document","getElementById"],"mappings":"8TAAA,IAAIA,EAAM,CACT,kCAAmC,CAClC,IACA,IAED,iCAAkC,CACjC,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,8BAA+B,CAC9B,IACA,GAED,6BAA8B,CAC7B,IACA,GAED,iCAAkC,CACjC,IACA,IAED,gCAAiC,CAChC,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,gCAAiC,CAChC,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,qBAAsB,CACrB,IACA,IAED,uCAAwC,CACvC,IACA,IAED,sCAAuC,CACtC,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,mCAAoC,CACnC,IACA,IAED,kCAAmC,CAClC,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,kCAAmC,CAClC,IACA,IAED,iCAAkC,CACjC,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,iCAAkC,CACjC,IACA,IAED,gCAAiC,CAChC,IACA,IAED,+BAAg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","file":"static/js/main.b64ac052.chunk.js","sourcesContent":["var map = {\n\t\"./ion-action-sheet-ios.entry.js\": [\n\t\t162,\n\t\t67\n\t],\n\t\"./ion-action-sheet-md.entry.js\": [\n\t\t163,\n\t\t68\n\t],\n\t\"./ion-alert-ios.entry.js\": [\n\t\t164,\n\t\t59\n\t],\n\t\"./ion-alert-md.entry.js\": [\n\t\t165,\n\t\t60\n\t],\n\t\"./ion-app_8-ios.entry.js\": [\n\t\t166,\n\t\t53\n\t],\n\t\"./ion-app_8-md.entry.js\": [\n\t\t167,\n\t\t54\n\t],\n\t\"./ion-avatar_3-ios.entry.js\": [\n\t\t168,\n\t\t8\n\t],\n\t\"./ion-avatar_3-md.entry.js\": [\n\t\t169,\n\t\t9\n\t],\n\t\"./ion-back-button-ios.entry.js\": [\n\t\t170,\n\t\t10\n\t],\n\t\"./ion-back-button-md.entry.js\": [\n\t\t171,\n\t\t11\n\t],\n\t\"./ion-backdrop-ios.entry.js\": [\n\t\t172,\n\t\t12\n\t],\n\t\"./ion-backdrop-md.entry.js\": [\n\t\t173,\n\t\t13\n\t],\n\t\"./ion-button_2-ios.entry.js\": [\n\t\t174,\n\t\t69\n\t],\n\t\"./ion-button_2-md.entry.js\": [\n\t\t175,\n\t\t70\n\t],\n\t\"./ion-card_5-ios.entry.js\": [\n\t\t176,\n\t\t14\n\t],\n\t\"./ion-card_5-md.entry.js\": [\n\t\t177,\n\t\t15\n\t],\n\t\"./ion-checkbox-ios.entry.js\": [\n\t\t178,\n\t\t16\n\t],\n\t\"./ion-checkbox-md.entry.js\": [\n\t\t179,\n\t\t17\n\t],\n\t\"./ion-chip-ios.entry.js\": [\n\t\t180,\n\t\t18\n\t],\n\t\"./ion-chip-md.entry.js\": [\n\t\t181,\n\t\t19\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t182,\n\t\t20\n\t],\n\t\"./ion-datetime_3-ios.entry.js\": [\n\t\t183,\n\t\t57\n\t],\n\t\"./ion-datetime_3-md.entry.js\": [\n\t\t184,\n\t\t58\n\t],\n\t\"./ion-fab_3-ios.entry.js\": [\n\t\t185,\n\t\t21\n\t],\n\t\"./ion-fab_3-md.entry.js\": [\n\t\t186,\n\t\t22\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t187,\n\t\t23\n\t],\n\t\"./ion-infinite-scroll_2-ios.entry.js\": [\n\t\t188,\n\t\t24\n\t],\n\t\"./ion-infinite-scroll_2-md.entry.js\": [\n\t\t189,\n\t\t25\n\t],\n\t\"./ion-input-ios.entry.js\": [\n\t\t190,\n\t\t26\n\t],\n\t\"./ion-input-md.entry.js\": [\n\t\t191,\n\t\t27\n\t],\n\t\"./ion-item-option_3-ios.entry.js\": [\n\t\t192,\n\t\t71\n\t],\n\t\"./ion-item-option_3-md.entry.js\": [\n\t\t193,\n\t\t72\n\t],\n\t\"./ion-item_8-ios.entry.js\": [\n\t\t194,\n\t\t73\n\t],\n\t\"./ion-item_8-md.entry.js\": [\n\t\t195,\n\t\t74\n\t],\n\t\"./ion-loading-ios.entry.js\": [\n\t\t196,\n\t\t28\n\t],\n\t\"./ion-loading-md.entry.js\": [\n\t\t197,\n\t\t29\n\t],\n\t\"./ion-menu_3-ios.entry.js\": [\n\t\t198,\n\t\t75\n\t],\n\t\"./ion-menu_3-md.entry.js\": [\n\t\t199,\n\t\t76\n\t],\n\t\"./ion-modal-ios.entry.js\": [\n\t\t200,\n\t\t55\n\t],\n\t\"./ion-modal-md.entry.js\": [\n\t\t201,\n\t\t56\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t202,\n\t\t66\n\t],\n\t\"./ion-popover-ios.entry.js\": [\n\t\t203,\n\t\t30\n\t],\n\t\"./ion-popover-md.entry.js\": [\n\t\t204,\n\t\t31\n\t],\n\t\"./ion-progress-bar-ios.entry.js\": [\n\t\t205,\n\t\t32\n\t],\n\t\"./ion-progress-bar-md.entry.js\": [\n\t\t206,\n\t\t33\n\t],\n\t\"./ion-radio_2-ios.entry.js\": [\n\t\t207,\n\t\t34\n\t],\n\t\"./ion-radio_2-md.entry.js\": [\n\t\t208,\n\t\t35\n\t],\n\t\"./ion-range-ios.entry.js\": [\n\t\t209,\n\t\t77\n\t],\n\t\"./ion-range-md.entry.js\": [\n\t\t210,\n\t\t78\n\t],\n\t\"./ion-refresher_2-ios.entry.js\": [\n\t\t211,\n\t\t61\n\t],\n\t\"./ion-refresher_2-md.entry.js\": [\n\t\t212,\n\t\t62\n\t],\n\t\"./ion-reorder_2-ios.entry.js\": [\n\t\t213,\n\t\t36\n\t],\n\t\"./ion-reorder_2-md.entry.js\": [\n\t\t214,\n\t\t37\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t215,\n\t\t38\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t216,\n\t\t79\n\t],\n\t\"./ion-searchbar-ios.entry.js\": [\n\t\t217,\n\t\t80\n\t],\n\t\"./ion-searchbar-md.entry.js\": [\n\t\t218,\n\t\t81\n\t],\n\t\"./ion-segment_2-ios.entry.js\": [\n\t\t219,\n\t\t82\n\t],\n\t\"./ion-segment_2-md.entry.js\": [\n\t\t220,\n\t\t83\n\t],\n\t\"./ion-select_3-ios.entry.js\": [\n\t\t221,\n\t\t84\n\t],\n\t\"./ion-select_3-md.entry.js\": [\n\t\t222,\n\t\t85\n\t],\n\t\"./ion-slide_2-ios.entry.js\": [\n\t\t223,\n\t\t86\n\t],\n\t\"./ion-slide_2-md.entry.js\": [\n\t\t224,\n\t\t87\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t225,\n\t\t39\n\t],\n\t\"./ion-split-pane-ios.entry.js\": [\n\t\t226,\n\t\t40\n\t],\n\t\"./ion-split-pane-md.entry.js\": [\n\t\t227,\n\t\t41\n\t],\n\t\"./ion-tab-bar_2-ios.entry.js\": [\n\t\t228,\n\t\t42\n\t],\n\t\"./ion-tab-bar_2-md.entry.js\": [\n\t\t229,\n\t\t43\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t230,\n\t\t44\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t231,\n\t\t45\n\t],\n\t\"./ion-textarea-ios.entry.js\": [\n\t\t232,\n\t\t46\n\t],\n\t\"./ion-textarea-md.entry.js\": [\n\t\t233,\n\t\t47\n\t],\n\t\"./ion-toast-ios.entry.js\": [\n\t\t234,\n\t\t63\n\t],\n\t\"./ion-toast-md.entry.js\": [\n\t\t235,\n\t\t64\n\t],\n\t\"./ion-toggle-ios.entry.js\": [\n\t\t236,\n\t\t48\n\t],\n\t\"./ion-toggle-md.entry.js\": [\n\t\t237,\n\t\t49\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t238,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 110;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t242,\n\t\t90\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 112;\nmodule.exports = webpackAsyncContext;","import { ApplicationUser } from \"../context/ApplicationUserContext\";\r\nimport { AuthorizedItems } from \"../orbital-interfaces/authorized-items\";\r\nimport { openDB, DBSchema, IDBPDatabase } from \"idb\";\r\n\r\nconst DB_NAME = \"osKeyStore\";\r\nconst DB_VERSION = 1;\r\n\r\ninterface OSKeyStore extends DBSchema {\r\n  userStore: {\r\n    key: \"user\";\r\n    value: ApplicationUser;\r\n  };\r\n  authItems: {\r\n    key: \"authItems\";\r\n    value: AuthorizedItems;\r\n  };\r\n}\r\n\r\n// -----------------------------------------------------------------------------------------\r\nconst getKeyStore = (): Promise<IDBPDatabase<OSKeyStore>> => {\r\n  return openDB<OSKeyStore>(DB_NAME, DB_VERSION, {\r\n    upgrade(db) {\r\n      db.createObjectStore(\"userStore\");\r\n      db.createObjectStore(\"authItems\");\r\n    },\r\n  });\r\n};\r\n\r\n// -----------------------------------------------------------------------------------------\r\nconst putUserState = async (state: ApplicationUser) => {\r\n  const db = await getKeyStore();\r\n  await db.put(\"userStore\", state, \"user\");\r\n};\r\n\r\n// -----------------------------------------------------------------------------------------\r\nconst getUserState = async (): Promise<ApplicationUser | undefined> => {\r\n  const db = await getKeyStore();\r\n  return await db.get(\"userStore\", \"user\");\r\n};\r\n\r\n// -----------------------------------------------------------------------------------------\r\nconst getAccessToken = async (): Promise<string | undefined> => {\r\n  const db = await getKeyStore();\r\n  return await db.get(\"userStore\", \"user\").then((state) => {\r\n    return state ? state.access_token : undefined;\r\n  });\r\n};\r\n\r\n// -----------------------------------------------------------------------------------------\r\nconst putAuthItems = async (auth: AuthorizedItems) => {\r\n  const db = await getKeyStore();\r\n  await db.put(\"authItems\", auth, \"authItems\");\r\n};\r\n\r\nconst getAuthItems = async () => {\r\n  const db = await getKeyStore();\r\n  return db.get(\"authItems\", \"authItems\");\r\n};\r\n\r\nexport default {\r\n  getKeyStore,\r\n  putUserState,\r\n  getUserState,\r\n  getAccessToken,\r\n  putAuthItems,\r\n  getAuthItems,\r\n};\r\n","import * as firebase from \"firebase/app\";\r\nimport \"firebase/analytics\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyAS526InuG-53VGKi5SA780Mh0YwHkhMDE\",\r\n  authDomain: \"orbital-shift-team-dashboard.firebaseapp.com\",\r\n  databaseURL: \"https://orbital-shift-team-dashboard.firebaseio.com\",\r\n  projectId: \"orbital-shift-team-dashboard\",\r\n  storageBucket: \"orbital-shift-team-dashboard.appspot.com\",\r\n  messagingSenderId: \"475985033328\",\r\n  appId: \"1:475985033328:web:77740655a89e28de035cb5\",\r\n  measurementId: \"G-TGE8788D28\",\r\n};\r\n\r\n// ------------------------------------------------------------------------------------------------\r\nexport function initialize() {\r\n  console.log(\"firebase initialized\");\r\n  firebase.initializeApp(firebaseConfig);\r\n}\r\n\r\n// ------------------------------------------------------------------------------------------------\r\nexport function log(eventName: string, eventParams?: any) {\r\n  firebase.analytics().logEvent(eventName, eventParams);\r\n}\r\n","export interface IKeyedCollection<T> {\r\n  add(key: string, value: T): void;\r\n  containsKey(key: string): boolean;\r\n  count(): number;\r\n  item(key: string): T;\r\n  keys(): string[];\r\n  remove(key: string): T;\r\n  values(): T[];\r\n}\r\n\r\nexport class KeyedCollection<T> implements IKeyedCollection<T> {\r\n  private items: { [index: string]: T } = {};\r\n\r\n  private _count: number = 0;\r\n\r\n  public containsKey(key: string): boolean {\r\n    return this.items.hasOwnProperty(key);\r\n  }\r\n\r\n  public count(): number {\r\n    return this._count;\r\n  }\r\n\r\n  public add(key: string, value: T) {\r\n    if (!this.items.hasOwnProperty(key)) this._count++;\r\n\r\n    this.items[key] = value;\r\n  }\r\n\r\n  public remove(key: string): T {\r\n    const val = this.items[key];\r\n    delete this.items[key];\r\n    this._count--;\r\n    return val;\r\n  }\r\n\r\n  public item(key: string): T {\r\n    return this.items[key];\r\n  }\r\n\r\n  public keys(): string[] {\r\n    const keySet: string[] = [];\r\n\r\n    for (const prop in this.items) {\r\n      if (this.items.hasOwnProperty(prop)) {\r\n        keySet.push(prop);\r\n      }\r\n    }\r\n\r\n    return keySet;\r\n  }\r\n\r\n  public values(): T[] {\r\n    const values: T[] = [];\r\n\r\n    for (const prop in this.items) {\r\n      if (this.items.hasOwnProperty(prop)) {\r\n        values.push(this.items[prop]);\r\n      }\r\n    }\r\n\r\n    return values;\r\n  }\r\n}\r\n","import { KeyedCollection } from \"../util/KeyedCollection\";\r\nimport { ApplicationUser } from \"../context/ApplicationUserContext\";\r\nimport { isPlatform } from \"@ionic/react\";\r\n\r\nexport interface EnvironmentType {\r\n  key: string;\r\n  name: string;\r\n  url: string;\r\n}\r\n\r\nconst envTypes: EnvironmentType[] = [\r\n  { key: \"prod\", name: \"Production\", url: \"https://api.orbitalshift.com/\" },\r\n  { key: \"sbx\", name: \"Sandbox\", url: \"https://sandboxapi.orbitalshift.com/\" },\r\n  { key: \"loc\", name: \"Local\", url: \"http://localhost:54825/\" },\r\n  { key: \"emu\", name: \"Local (Emu)\", url: \"http://10.0.2.2:54825/\" },\r\n  { key: \"tst\", name: \"TestServer\", url: \"http://TestServer:8000/\" },\r\n];\r\n\r\nconst environments = new KeyedCollection<EnvironmentType>();\r\nenvTypes.map((et) => environments.add(et.key, et));\r\n\r\n// ------------------------------------------------------------------------------------------------\r\n// NOTE: versionName, versionCode, and revisionHash should be set to _REPLACE_XXXXX_XXX_ strings\r\n//       that get replaced when 'build' is run from the command line.\r\n//       See OSROOT/_buildenv/BuildModule/CommandLineFunctions.psm1\r\nconst settings = {\r\n  env: environments,\r\n  versionName: \"2.0.0\",\r\n  versionCode: \"6098\",\r\n  revisionHash: \"65aa701\",\r\n  // eslint-disable-next-line max-len\r\n  appVersionString: `2.0.0.6098 (65aa701)`,\r\n  hasCapacitor: isPlatform(\"capacitor\"),\r\n  platform: isPlatform(\"ios\")\r\n    ? \"ios\"\r\n    : isPlatform(\"android\")\r\n    ? \"android\"\r\n    : \"other\",\r\n};\r\n\r\n// ------------------------------------------------------------------------------------------------\r\nconst getApiUrl = (user: ApplicationUser, endpoint: string): string => {\r\n  return settings.env.item(user.environment).url + endpoint;\r\n};\r\n\r\n// ------------------------------------------------------------------------------------------------\r\nconst getUserAndEnvironmentFromInput = (\r\n  input: string\r\n): { username: string; env: EnvironmentType } => {\r\n  if (input.length < 4) {\r\n    return { username: input, env: settings.env.item(\"prod\") };\r\n  }\r\n\r\n  const envKey = input.toLowerCase().substring(0, 4);\r\n  const username = input.substring(4);\r\n  switch (envKey) {\r\n    case \"sbx \":\r\n      return { username, env: settings.env.item(\"sbx\") };\r\n    case \"loc \":\r\n      return { username, env: settings.env.item(\"loc\") };\r\n    case \"emu \":\r\n      return { username, env: settings.env.item(\"emu\") };\r\n    case \"tst \":\r\n      return { username, env: settings.env.item(\"tst\") };\r\n    default:\r\n      return { username: input, env: settings.env.item(\"prod\") };\r\n  }\r\n};\r\n\r\nexport default {\r\n  settings,\r\n  getApiUrl,\r\n  getUserAndEnvironmentFromInput,\r\n};\r\n","export enum DeviceOperatingSystem {\r\n  iOS = 1,\r\n  Android = 2,\r\n}\r\n","import { ApplicationUser } from \"../context/ApplicationUserContext\";\r\nimport env from \"./environment\";\r\nimport { log } from \"../util/logger\";\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst post = async (user: ApplicationUser, baseUrl: string, data?: any) => {\r\n  const url = env.getApiUrl(user, baseUrl);\r\n\r\n  try {\r\n    const response = await fetch(url, {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${user.access_token}`,\r\n        AppVersion: env.settings.appVersionString,\r\n      },\r\n    });\r\n\r\n    const contentType = response.headers.get(\"content-type\");\r\n    if (contentType && contentType.indexOf(\"application/json\") !== -1) {\r\n      const results = await response.json();\r\n      log(\"api_succeeded\", {\r\n        method: \"POST\",\r\n        baseUrl,\r\n        username: user.username,\r\n      });\r\n      return results;\r\n    }\r\n\r\n    log(\"api_succeeded\", { method: \"POST\", baseUrl, username: user.username });\r\n  } catch (err) {\r\n    log(\"api_err\", {\r\n      method: \"POST\",\r\n      baseUrl,\r\n      username: user?.username,\r\n      ...data,\r\n      appVersion: env.settings.appVersionString,\r\n    });\r\n    console.error(\"Error calling post against url, \" + baseUrl + \": \" + err);\r\n    throw err;\r\n  }\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst putData = async (user: ApplicationUser, baseUrl: string, data: any) => {\r\n  const url = env.getApiUrl(user, baseUrl);\r\n\r\n  try {\r\n    console.log(\"BING\");\r\n    console.log(JSON.stringify(data));\r\n    console.log(\"BONG\");\r\n    const dataString = JSON.stringify(data);\r\n    console.log(\"GONG\");\r\n\r\n    const response = await fetch(url, {\r\n      method: \"PUT\",\r\n      body: dataString,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${user.access_token}`,\r\n        AppVersion: env.settings.appVersionString,\r\n      },\r\n    });\r\n\r\n    const results = await response.json();\r\n    log(\"api_succeeded\", { method: \"PUT\", baseUrl, username: user.username });\r\n    return results;\r\n  } catch (err) {\r\n    log(\"api_err\", {\r\n      method: \"PUT\",\r\n      baseUrl,\r\n      username: user?.username,\r\n      ...data,\r\n      appVersion: env.settings.appVersionString,\r\n    });\r\n    console.error(\"Error calling putData against url, \" + baseUrl + \": \" + err);\r\n    throw err;\r\n  }\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst get = async (user: ApplicationUser, baseUrl: string, data?: any) => {\r\n  const url = env.getApiUrl(user, baseUrl);\r\n\r\n  try {\r\n    const options = {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${user.access_token}`,\r\n        AppVersion: env.settings.appVersionString,\r\n      },\r\n      body: null as null | string,\r\n    };\r\n\r\n    if (data) {\r\n      options.body = JSON.stringify(data);\r\n    }\r\n\r\n    const response = await fetch(url, options);\r\n    const results = await response.json();\r\n    log(\"api_succeeded\", { method: \"GET\", baseUrl, username: user.username });\r\n    return results;\r\n  } catch (err) {\r\n    log(\"api_err\", {\r\n      method: \"GET\",\r\n      baseUrl,\r\n      username: user?.username,\r\n      appVersion: env.settings.appVersionString,\r\n    });\r\n    console.error(\"Error calling get against url, \" + baseUrl + \": \" + err);\r\n    throw err;\r\n  }\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst put = async (user: ApplicationUser, baseUrl: string, data?: any) => {\r\n  const url = env.getApiUrl(user, baseUrl);\r\n  const options = {\r\n    method: \"PUT\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${user.access_token}`,\r\n      AppVersion: env.settings.appVersionString,\r\n    },\r\n  } as any;\r\n\r\n  if (data) {\r\n    options.body = JSON.stringify(data!);\r\n  }\r\n\r\n  try {\r\n    const response = await fetch(url, options);\r\n    const contentType = response.headers.get(\"content-type\");\r\n    if (contentType && contentType.indexOf(\"application/json\") !== -1) {\r\n      const results = await response.json();\r\n      log(\"api_succeeded\", { method: \"PUT\", baseUrl, username: user.username });\r\n      return results;\r\n    }\r\n\r\n    log(\"api_succeeded\", { method: \"PUT\", baseUrl, username: user.username });\r\n  } catch (err) {\r\n    log(\"api_err\", {\r\n      method: \"PUT\",\r\n      baseUrl,\r\n      username: user?.username,\r\n      ...data,\r\n      appVersion: env.settings.appVersionString,\r\n    });\r\n    console.error(\"Error calling put against url, \" + baseUrl + \": \" + err);\r\n    throw err;\r\n  }\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst del = async (user: ApplicationUser, baseUrl: string, data?: any) => {\r\n  const url = env.getApiUrl(user, baseUrl);\r\n  const options = {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${user.access_token}`,\r\n      AppVersion: env.settings.appVersionString,\r\n    },\r\n  } as any;\r\n\r\n  if (data) {\r\n    options.body = JSON.stringify(data!);\r\n  }\r\n\r\n  try {\r\n    const response = await fetch(url, options);\r\n    const contentType = response.headers.get(\"content-type\");\r\n    if (contentType && contentType.indexOf(\"application/json\") !== -1) {\r\n      log(\"api_succeeded\", {\r\n        method: \"DELETE\",\r\n        baseUrl,\r\n        username: user.username,\r\n      });\r\n      return await response.json();\r\n    }\r\n\r\n    log(\"api_succeeded\", {\r\n      method: \"DELETE\",\r\n      baseUrl,\r\n      username: user.username,\r\n    });\r\n    return;\r\n  } catch (err) {\r\n    log(\"api_err\", {\r\n      method: \"DELETE\",\r\n      baseUrl,\r\n      username: user?.username,\r\n      ...data,\r\n      appVersion: env.settings.appVersionString,\r\n    });\r\n    console.error(\"Error calling delete against url, \" + baseUrl + \": \" + err);\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport default {\r\n  get,\r\n  post,\r\n  put,\r\n  putData,\r\n  del,\r\n};\r\n","import { ApplicationUser } from \"../context/ApplicationUserContext\";\r\nimport apiHelper from \"./OrbitalApiHelper\";\r\nimport { DeviceOperatingSystem } from \"../enums/DeviceOperatingSystem\";\r\nimport { NotificationTypeModel } from \"../orbital-interfaces/NotificationTypeModel\";\r\nimport env from \"./environment\";\r\nimport { log } from \"../util/logger\";\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst subscribe = async (user: ApplicationUser, token: string) => {\r\n  const url = `api/v1/employee/notifications/subscribe`;\r\n  const operatingSystem =\r\n    env.settings.platform === \"ios\"\r\n      ? DeviceOperatingSystem.iOS\r\n      : DeviceOperatingSystem.Android;\r\n\r\n  log(\"pushNotifications_subscribeCalled\", {\r\n    token,\r\n    operatingSystem,\r\n    username: user.username,\r\n    access_token: user.access_token,\r\n  });\r\n\r\n  return await apiHelper.putData(user, url, {\r\n    TokenId: token,\r\n    OperatingSystem: operatingSystem,\r\n  });\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst unsubscribe = async (user: ApplicationUser, token: string) => {\r\n  const url = `api/v1/employee/notifications/unsubscribe`;\r\n  const operatingSystem =\r\n    env.settings.platform === \"ios\"\r\n      ? DeviceOperatingSystem.iOS\r\n      : DeviceOperatingSystem.Android;\r\n\r\n  return await apiHelper.putData(user, url, {\r\n    TokenId: token,\r\n    OperatingSystem: operatingSystem,\r\n  });\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst getTypesSelectedByUser = async (user: ApplicationUser) => {\r\n  const url = `api/v1/employee/notifications/types`;\r\n  return (await apiHelper.get(user, url)) as NotificationTypeModel[];\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst putTypes = async (user: ApplicationUser, typeIds: number[]) => {\r\n  const url = `api/v1/employee/notifications/types`;\r\n  const data = {\r\n    ids: typeIds,\r\n  };\r\n\r\n  return (await apiHelper.put(user, url, data)) as void;\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst listTypes = async (user: ApplicationUser) => {\r\n  const url = `api/v1/employee/notifications/list-types`;\r\n\r\n  // NOTE: the API no longer really uses passed-in data since the\r\n  // \"Communications rewrite\"\r\n\r\n  return (await apiHelper.get(user, url)) as NotificationTypeModel[];\r\n};\r\n\r\nexport default {\r\n  subscribe,\r\n  unsubscribe,\r\n  getTypesSelectedByUser,\r\n  putTypes,\r\n  listTypes,\r\n};\r\n","import {\r\n  Plugins,\r\n  PushNotification,\r\n  PushNotificationToken,\r\n  PushNotificationActionPerformed,\r\n} from \"@capacitor/core\";\r\nimport { log } from \"./logger\";\r\nimport env from \"../api/environment\";\r\nimport pushApi from \"../api/PushNotificationsAPI\";\r\nimport { ApplicationUser } from \"../context/ApplicationUserContext\";\r\nimport { createBrowserHistory } from \"history\";\r\n\r\nconst { PushNotifications } = Plugins;\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst register = (\r\n  user: ApplicationUser,\r\n  pushEnabled: (enabled: boolean) => void,\r\n  showMessage: (msg: string) => void\r\n) => {\r\n  const history = createBrowserHistory({ forceRefresh: true });\r\n\r\n  PushNotifications.register().then(() => {\r\n    console.log(\"PushNotificationController: register called and returned\");\r\n  });\r\n\r\n  // On succcess, we should be able to receive notifications\r\n  PushNotifications.addListener(\r\n    \"registration\",\r\n    (token: PushNotificationToken) => {\r\n      pushApi.subscribe(user, token.value);\r\n      pushEnabled(true);\r\n      showMessage(\"Push registration success, token: \" + token.value);\r\n      log(\"pushNotifications_registered\", {\r\n        token: token.value,\r\n        platform: env.settings.platform,\r\n      });\r\n    }\r\n  );\r\n\r\n  // Some issue with your setup and push will not work\r\n  PushNotifications.addListener(\"registrationError\", (error: any) => {\r\n    showMessage(\"Error on registration: \" + JSON.stringify(error));\r\n    log(\"pushNotifications_registrationError\", {\r\n      error,\r\n      platform: env.settings.platform,\r\n    });\r\n  });\r\n\r\n  // Show us the notification payload if the app is open on our device\r\n  PushNotifications.addListener(\r\n    \"pushNotificationReceived\",\r\n    (notification: PushNotification) => {\r\n      if (notification) {\r\n        if (notification.data && notification.data.MessageId) {\r\n          showMessage(\r\n            \"NOTIFICATION: \" +\r\n              notification.title +\r\n              \": \" +\r\n              notification.body +\r\n              \" id:\" +\r\n              notification.data.MessageId\r\n          );\r\n          history.push(\"/tabs/messages/\" + notification.data.MessageId);\r\n          history.goForward();\r\n        } else {\r\n          showMessage(\r\n            \"NOTIFICATION: \" +\r\n              notification.title +\r\n              \": \" +\r\n              notification.body +\r\n              \" (no id)\"\r\n          );\r\n        }\r\n\r\n        log(\"pushNotifications_receivedWhenOpen\", {\r\n          title: notification.title,\r\n          body: notification.body,\r\n          messageId: notification.data.MessageId ?? -123,\r\n        });\r\n      }\r\n\r\n      /*\r\n      let notif = this.state.notifications;\r\n      notif.push({ id: notification.id, title: notification.title, body: notification.body })\r\n      this.setState({\r\n        notifications: notif\r\n      })\r\n      */\r\n    }\r\n  );\r\n\r\n  // Method called when tapping on a notification\r\n  PushNotifications.addListener(\r\n    \"pushNotificationActionPerformed\",\r\n    (notification: PushNotificationActionPerformed) => {\r\n      if (\r\n        notification.notification.data &&\r\n        notification.notification.data.MessageId\r\n      ) {\r\n        showMessage(\r\n          \"TAPPED ON NOTIFICATION: \" +\r\n            notification.notification.title +\r\n            \": \" +\r\n            notification.notification.body +\r\n            \" id:\" +\r\n            notification.notification.data.MessageId\r\n        );\r\n        history.push(\r\n          \"/tabs/messages/\" + notification.notification.data.MessageId\r\n        );\r\n        history.goForward();\r\n      } else {\r\n        showMessage(\r\n          \"TAPPED ON NOTIFICATION: \" +\r\n            notification.notification.title +\r\n            \": \" +\r\n            notification.notification.body +\r\n            \" (no id)\"\r\n        );\r\n      }\r\n\r\n      log(\"pushNotifications_actionPerformed\", {\r\n        title: notification.notification.title,\r\n        body: notification.notification.body,\r\n        messageId: notification.notification.data.MessageId ?? -123,\r\n      });\r\n    }\r\n  );\r\n};\r\n\r\nexport default {\r\n  register,\r\n};\r\n","/* eslint-disable */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport db from \"../data/dbStore\";\r\n// import {Geolocation} from '@ionic-native/geolocation';\r\nimport { Capacitor, Geolocation } from \"@capacitor/core\";\r\nimport { log } from \"../util/logger\";\r\n\r\nimport PushController from \"../util/push-notifications-controller\";\r\nimport env from \"../api/environment\";\r\n\r\nexport interface ApplicationUser {\r\n  isLoggedin: boolean;\r\n  access_token?: string;\r\n  username?: string;\r\n  darkMode: boolean;\r\n  loading: boolean;\r\n  latitude?: number;\r\n  longitude?: number;\r\n  lastLocationUpdate?: Date;\r\n  environment: string;\r\n  isPushEnabled: boolean;\r\n}\r\n\r\nexport interface IApplicationUserContext {\r\n  user: ApplicationUser;\r\n  logout: () => Promise<void>;\r\n  userLoggedIn: (\r\n    username: string,\r\n    access_token: string,\r\n    environment: string\r\n  ) => Promise<ApplicationUser>;\r\n  startWatchPosition: (callback: (lat: number, long: number) => void) => string;\r\n  clearWatchPosition: (watchId: string) => void;\r\n  pushEnabled: (enabled: boolean) => void;\r\n}\r\n\r\nconst INITIAL_APPLICATION_USER: ApplicationUser = {\r\n  isLoggedin: false,\r\n  access_token: undefined,\r\n  username: \"\",\r\n  darkMode: false,\r\n  loading: true,\r\n  latitude: undefined,\r\n  longitude: undefined,\r\n  lastLocationUpdate: undefined,\r\n  environment: \"prod\",\r\n  isPushEnabled: false,\r\n};\r\n\r\nconst INITIAL_APPLICATION_USER_CONTEXT = {\r\n  user: INITIAL_APPLICATION_USER,\r\n  logout: async () => {},\r\n  userLoggedIn: (u: string, at: string, e: string) => {\r\n    return new Promise<ApplicationUser>(() => {\r\n      return INITIAL_APPLICATION_USER;\r\n    });\r\n  },\r\n  startWatchPosition: (callback: (lat: number, lng: number) => void) => {\r\n    return \"\";\r\n  },\r\n  clearWatchPosition: (s: string) => {},\r\n  pushEnabled: (e: boolean) => {},\r\n};\r\n\r\nexport const ApplicationUserContext = React.createContext<\r\n  IApplicationUserContext\r\n>(INITIAL_APPLICATION_USER_CONTEXT);\r\n\r\nexport const ApplicationUserContextProvider = (props: any) => {\r\n  const [userState, internalSetUserState] = useState({\r\n    ...INITIAL_APPLICATION_USER,\r\n  });\r\n\r\n  // ----------------------------------------------------------------------------------------------\r\n  function startWatchPosition(\r\n    callback: (lat: number, lng: number) => void\r\n  ): string {\r\n    if (!Capacitor.isPluginAvailable(\"Geolocation\")) {\r\n      console.log(\r\n        \"ApplicationUserContext.startWatchPosition: Geolocation unavailable\"\r\n      );\r\n      return \"\";\r\n    }\r\n\r\n    const watchId = Geolocation.watchPosition(\r\n      {\r\n        enableHighAccuracy: true,\r\n        maximumAge: 1000,\r\n      },\r\n      (position, err) => {\r\n        if (!position || !position.coords) {\r\n          return;\r\n        }\r\n\r\n        let reason = \"unknown\";\r\n        let positionChanged: boolean;\r\n        if (\r\n          google &&\r\n          google.maps &&\r\n          google.maps.geometry &&\r\n          google.maps.geometry.spherical &&\r\n          google.maps.geometry.spherical.computeDistanceBetween &&\r\n          userState.latitude &&\r\n          userState.longitude\r\n        ) {\r\n          const oldPos = new google.maps.LatLng(\r\n            userState.latitude,\r\n            userState.longitude\r\n          );\r\n          const newPos = new google.maps.LatLng(\r\n            position.coords.latitude,\r\n            position.coords.longitude\r\n          );\r\n          const distance =\r\n            google.maps.geometry.spherical.computeDistanceBetween(\r\n              oldPos,\r\n              newPos\r\n            ) * 3.28084;\r\n          positionChanged = distance > 2.0; // we've change donly if distance is greater than 3 feet\r\n          reason = \"distance greater than 2 feet (\" + distance + \")\";\r\n        } else {\r\n          positionChanged =\r\n            userState.latitude !== position.coords.latitude ||\r\n            userState.longitude !== position.coords.longitude;\r\n          reason = \"position different\";\r\n        }\r\n\r\n        if (positionChanged) {\r\n          console.log(\r\n            \"Position changed, calling callback and setting user state, \" +\r\n              reason\r\n          );\r\n          const newState = {\r\n            ...userState,\r\n            latitude: position.coords.latitude,\r\n            longitude: position.coords.longitude,\r\n          };\r\n          internalSetUserState(newState);\r\n          callback(position.coords.latitude, position.coords.longitude);\r\n        }\r\n      }\r\n    );\r\n\r\n    console.log(\"ApplicationUserContext.startWatchPosition: start \" + watchId);\r\n    return watchId;\r\n  }\r\n\r\n  // ----------------------------------------------------------------------------------------------\r\n  function clearWatchPosition(watchId: string) {\r\n    if (watchId === \"\") {\r\n      return;\r\n    }\r\n\r\n    Geolocation.clearWatch({ id: watchId }).then(() => {\r\n      console.log(\r\n        \"ApplicationUserContext.stopWatchPosition: cleared \" + watchId\r\n      );\r\n    });\r\n  }\r\n\r\n  // ----------------------------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    let mounted = true;\r\n\r\n    Promise.all([db.getUserState()]).then((response) => {\r\n      if (mounted) {\r\n        const newState = response[0];\r\n        if (newState) {\r\n          internalSetUserState({ ...newState, loading: false });\r\n        } else {\r\n          internalSetUserState({ ...userState, loading: false });\r\n        }\r\n      }\r\n    });\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      userState &&\r\n      !userState.isPushEnabled &&\r\n      userState.access_token &&\r\n      userState.access_token.length > 0 &&\r\n      env.settings.platform !== \"other\"\r\n    ) {\r\n      PushController.register(userState, pushEnabled, () => {});\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [userState.isPushEnabled, userState.access_token]);\r\n\r\n  // ----------------------------------------------------------------------------------------------\r\n  const pushEnabled = (enabled: boolean) => {\r\n    internalSetUserState({ ...userState, isPushEnabled: enabled });\r\n  };\r\n\r\n  // ----------------------------------------------------------------------------------------------\r\n  const userLoggedIn = async (\r\n    username: string,\r\n    access_token: string,\r\n    environment: string\r\n  ): Promise<ApplicationUser> => {\r\n    const currentState = await db.getUserState();\r\n    try {\r\n      const position = await Geolocation.getCurrentPosition();\r\n      log(\"getCurrentPosition SUCCEEDED\", { ...position });\r\n      const newState = {\r\n        username,\r\n        access_token,\r\n        environment,\r\n        isLoggedin: true,\r\n        darkMode: currentState\r\n          ? currentState.darkMode\r\n          : INITIAL_APPLICATION_USER.darkMode,\r\n        loading: false,\r\n        latitude: position.coords.latitude,\r\n        longitude: position.coords.longitude,\r\n        isPushEnabled: false,\r\n      };\r\n      await db.putUserState(newState);\r\n      internalSetUserState(newState);\r\n      console.log(\r\n        \"ApplicationUserContextProvider: userLoggedin. \",\r\n        newState.isLoggedin\r\n      );\r\n      return newState;\r\n    } catch (err) {\r\n      log(\"getCurrentPosition FAILED\", {\r\n        msg: err.message,\r\n        os: env.settings.platform,\r\n        user: username,\r\n      });\r\n      console.log(\"Error trying to get geolocation: \" + err.message);\r\n      const newState = {\r\n        username,\r\n        access_token,\r\n        environment,\r\n        isLoggedin: true,\r\n        darkMode: currentState\r\n          ? currentState.darkMode\r\n          : INITIAL_APPLICATION_USER.darkMode,\r\n        loading: false,\r\n        latitude: currentState?.latitude,\r\n        longitude: currentState?.longitude,\r\n        isPushEnabled: false,\r\n      };\r\n      await db.putUserState(newState);\r\n      internalSetUserState(newState);\r\n      return newState;\r\n    }\r\n  };\r\n\r\n  // ----------------------------------------------------------------------------------------------\r\n  const logout = async () => {\r\n    const newState = {\r\n      ...userState,\r\n      isLoggedin: false,\r\n      access_token: undefined,\r\n    };\r\n    internalSetUserState(newState);\r\n    await db.putUserState(newState);\r\n    console.log(\r\n      \"ApplicationUserContextProvider: logout. \",\r\n      newState.isLoggedin\r\n    );\r\n  };\r\n\r\n  return (\r\n    <ApplicationUserContext.Provider\r\n      value={{\r\n        user: userState,\r\n        userLoggedIn,\r\n        logout,\r\n        startWatchPosition,\r\n        clearWatchPosition,\r\n        pushEnabled,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </ApplicationUserContext.Provider>\r\n  );\r\n};\r\n","import { IonAlert } from \"@ionic/react\";\r\nimport React, { useState } from \"react\";\r\n\r\nfunction useDialogBox() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [alertData, setAlertData] = useState({\r\n    header: \"\",\r\n    message: \"\",\r\n    onDismiss: () => {},\r\n  });\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const showAlert = (\r\n    header: string,\r\n    message: string,\r\n    onDismiss: () => void\r\n  ) => {\r\n    setAlertData({\r\n      header,\r\n      message,\r\n      onDismiss,\r\n    });\r\n\r\n    setIsOpen(true);\r\n  };\r\n\r\n  const alertBoxJsx = (\r\n    <IonAlert\r\n      isOpen={isOpen}\r\n      onDidDismiss={() => {\r\n        setIsOpen(false);\r\n        alertData.onDismiss();\r\n      }}\r\n      header={alertData.header}\r\n      message={alertData.message}\r\n      buttons={[\"OK\"]}\r\n    />\r\n  );\r\n\r\n  return {\r\n    showAlert,\r\n    alertBoxJsx,\r\n  };\r\n}\r\n\r\nexport default useDialogBox;\r\n","import { ClockInRequirement } from \"../enums/ClockInRequirement\";\r\nimport { EventInformation } from \"./TEC\";\r\nimport { DailyNotes } from \"./DailyNotes\";\r\n\r\nexport interface HomePageDataGet {\r\n  auth: AuthorizedItems;\r\n  currentEvents: EventInformation[];\r\n  nextEvent?: EventInformation;\r\n  dailyNotes: DailyNotes[];\r\n}\r\n\r\nexport enum Role {\r\n  Employee = \"Employee\",\r\n  Admin = \"Admin\",\r\n  LocationAdmin = \"Location Admin\",\r\n  BusinessAdmin = \"Business Admin\",\r\n  Orbital = \"Orbital\",\r\n}\r\n\r\nexport const initialHomePageData: HomePageDataGet = {\r\n  auth: {\r\n    locations: [],\r\n    tags: [],\r\n    payrollEvents: [],\r\n    employeeId: 0,\r\n    loading: false,\r\n    role: Role.Employee,\r\n  },\r\n  currentEvents: [],\r\n  nextEvent: undefined,\r\n  dailyNotes: [],\r\n};\r\n\r\nexport enum TimeFormat {\r\n  HoursMinutes = 0, // 05:59\r\n  HoursAndDecimals = 1, // 5.99\r\n}\r\n\r\nexport enum ClockOutValueType {\r\n  Unit = 1,\r\n  Money = 2,\r\n}\r\n\r\nexport enum AdminAuthorization {\r\n  None = 0,\r\n  CanViewWages = 1,\r\n  CanEditPublishedTo = 2,\r\n  CanEditTemplates = 4,\r\n  CanEditSchedules = 8,\r\n  CanEditEmployeeClockEvents = 16,\r\n  CanEditOwnClockEvents = 32,\r\n  CanEditUserAccounts = 64,\r\n}\r\n\r\nexport interface AuthorizedItems {\r\n  employeeId: number;\r\n  role: Role;\r\n  loading: boolean;\r\n  locations: AuthorizedLocation[];\r\n  tags: AuthorizedTag[];\r\n  payrollEvents: AuthorizedPayrollEvent[];\r\n}\r\n\r\nexport interface AuthorizedLocation {\r\n  id: number;\r\n  name: string;\r\n  abbr: string;\r\n  departments: AuthorizedDepartment[];\r\n  settings: LocationSettings;\r\n}\r\n\r\nexport interface AuthorizedDepartment {\r\n  id: number;\r\n  name: string;\r\n  abbr: string;\r\n  adminAuth: AdminAuthorization;\r\n  positions: AuthorizedPosition[];\r\n}\r\n\r\nexport interface AuthorizedTag {\r\n  id: number;\r\n  name: string;\r\n  locId: number;\r\n  positionIds: number[];\r\n}\r\n\r\nexport interface AuthorizedPosition {\r\n  id: number;\r\n  name: string;\r\n  hasPosition: boolean;\r\n  tagsIds: number[];\r\n  payrollEventIds: number[];\r\n}\r\n\r\nexport interface AuthorizedPayrollEvent {\r\n  id: number;\r\n  name: string;\r\n  positionIds: number[];\r\n}\r\n\r\nexport enum UnscheduledBreakOptions {\r\n  Both = 0,\r\n  Unpaid = 1,\r\n  Paid = 2,\r\n  None = 3,\r\n}\r\n\r\nexport enum BreakType {\r\n  UnscheduledUnpaid = 0,\r\n  UnscheduledPaid = 1,\r\n  Scheduled = 2,\r\n}\r\n\r\nexport enum EmployeeSort {\r\n  FirstName = 1,\r\n  LastName = 2,\r\n  EmploymentStart = 3,\r\n  EarliestEventStart = 4,\r\n}\r\n\r\nexport interface LocationSettings {\r\n  LocationId: number;\r\n  DayStartTime: any;\r\n  DayWeekStartsOn: string;\r\n  EmployeeRequestWindowStart: number;\r\n  EmployeeRequestWindowEnd: number;\r\n  EmployeeDaysToShowSchedule: number;\r\n  RequestPanelDisplayDays: number;\r\n  EmployeesShowShiftEventType: boolean;\r\n  ShowUnavailableEventType: boolean;\r\n  ShowVacationEventType: boolean;\r\n  ShowAbsentEventType: boolean;\r\n  ShowSpecialDates: boolean;\r\n  AllowEmployeesToDeleteUnavailableAndVacationApproved: boolean;\r\n  EmployeesOnlyViewOwnPositions: boolean;\r\n  EmployeesOnlyViewOwnDepartments: boolean;\r\n  EnableLegacyBreak: boolean;\r\n  EnableLegacyBreakStart: boolean;\r\n  DefaultBreakDuration: any;\r\n  DefaultBreakStartTime: any;\r\n  ShowTimeClockBreak: boolean;\r\n  EnableEnhancedBreakManagement: boolean;\r\n  TimeZoneOffset: number;\r\n  OtherEmployeesViewableTypeAndStatus: any;\r\n  NotesPanel: number;\r\n  ClockOutValueLabel: string;\r\n  ClockOutValueType: ClockOutValueType;\r\n  EnableEventConfirm: boolean;\r\n  TimeFormat: TimeFormat;\r\n  TimeFormatDigits: number;\r\n  TimeFormatDecimals: number;\r\n  LockDate: any;\r\n  HideScheduleEventsInPast: boolean;\r\n  NewEventDefaultStartTime: any;\r\n  NewEventDefaultEndTime: any;\r\n  EnableAutoAdjustingDateTimes: any;\r\n  GenericEmployeeIdName: string;\r\n  GenericEmployeeId2Name: string;\r\n  GenericEmployeeId3Name: string;\r\n  GenericEmployeePerPositionIdName: string;\r\n  GenericEmployeePerPositionId2Name: string;\r\n  GenericEmployeePerPositionId3Name: string;\r\n  GenericPositionIdName: string;\r\n  GenericPositionId2Name: string;\r\n  GenericPositionId3Name: string;\r\n  GenericDepartmentIdName: string;\r\n  GenericDepartmentId2Name: string;\r\n  GenericDepartmentId3Name: string;\r\n  GenericLocationIdName: string;\r\n  GenericLocationId2Name: string;\r\n  GenericLocationId3Name: string;\r\n  CalculatedSchedulePublishedTo: any;\r\n  RequireGeoLocation: boolean;\r\n  RequireIPAddress: boolean;\r\n  EnablePTO: boolean;\r\n  ClockInWithDifferentTag: boolean;\r\n  UnscheduledBreakOptions: UnscheduledBreakOptions;\r\n  ClockInRequirement: ClockInRequirement;\r\n  EmployeeSort: EmployeeSort;\r\n  EnableDirectCoverRequest: boolean;\r\n  EnablePositionChangeForEmployeePosition: boolean;\r\n}\r\n","import React from \"react\";\r\nimport { IonItem, IonToggle, IonList, IonLabel } from \"@ionic/react\";\r\nimport { NotificationTypeModel } from \"../orbital-interfaces/NotificationTypeModel\";\r\n\r\ninterface ToggleListExProps {\r\n  list: NotificationTypeModel[] | null;\r\n  selected: NotificationTypeModel[] | null;\r\n  selectionChanged(newSelected: NotificationTypeModel[] | null): void;\r\n}\r\n\r\nconst ToggleListEx: React.FC<ToggleListExProps> = ({\r\n  list,\r\n  selected,\r\n  selectionChanged,\r\n}: ToggleListExProps) => {\r\n  // ----------------------------------------------------------------------------------------------\r\n  const isItemChecked = (id: number) => {\r\n    if (!selected || selected.length === 0) {\r\n      return false;\r\n    }\r\n\r\n    for (let i = 0; i < selected.length; i++) {\r\n      if (selected[i].id === id) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  // ----------------------------------------------------------------------------------------------\r\n  const onAllChanged = () => {\r\n    const checked = list?.length !== selected?.length;\r\n\r\n    if (list?.length === selected?.length) {\r\n      if (checked) {\r\n        return;\r\n      }\r\n\r\n      const newSelected = [] as NotificationTypeModel[];\r\n      selectionChanged(newSelected);\r\n    } else {\r\n      if (!checked) {\r\n        return;\r\n      }\r\n\r\n      selectionChanged(list ? list.slice() : null);\r\n    }\r\n  };\r\n\r\n  // ----------------------------------------------------------------------------------------------\r\n  const itemToggle = (item: NotificationTypeModel) => {\r\n    if (selected === null) {\r\n      return;\r\n    }\r\n\r\n    const checked = !selected.map((n) => n.id).includes(item.id);\r\n\r\n    if (checked) {\r\n      const newList = selected.slice();\r\n      newList.push(item);\r\n      selectionChanged(newList);\r\n    } else {\r\n      const newlist = selected.filter((r) => r.id !== item.id);\r\n      selectionChanged(newlist);\r\n    }\r\n  };\r\n\r\n  if (!list) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <IonItem>\r\n      <IonList>\r\n        <IonItem key={-1}>\r\n          <IonToggle\r\n            mode=\"md\"\r\n            key={-1}\r\n            checked={list?.length === selected?.length}\r\n            onClick={() => onAllChanged()}\r\n          />\r\n          <IonLabel>SELECT ALL</IonLabel>\r\n        </IonItem>\r\n        {list &&\r\n          list.map((toggle) => (\r\n            <IonItem key={toggle.id}>\r\n              <IonToggle\r\n                mode=\"md\"\r\n                key={toggle.id}\r\n                onClick={() => {\r\n                  itemToggle(toggle);\r\n                }}\r\n                checked={isItemChecked(toggle.id)}\r\n              />\r\n              <IonLabel>{toggle.name}</IonLabel>\r\n            </IonItem>\r\n          ))}\r\n      </IonList>\r\n    </IonItem>\r\n  );\r\n};\r\n\r\nexport default ToggleListEx;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  IonButton,\r\n  IonButtons,\r\n  IonIcon,\r\n  IonContent,\r\n  IonFooter,\r\n  IonHeader,\r\n  IonTitle,\r\n  IonToolbar,\r\n} from \"@ionic/react\";\r\nimport { arrowBackOutline } from \"ionicons/icons\";\r\nimport ToggleListEx from \"../components/ToggleListEx\";\r\nimport pushApi from \"../api/PushNotificationsAPI\";\r\nimport { ApplicationUserContext } from \"../context/ApplicationUserContext\";\r\nimport { NotificationTypeModel } from \"../orbital-interfaces/NotificationTypeModel\";\r\n\r\ninterface NotificationSettingsModalProps {\r\n  onDismissModal: () => void;\r\n  isOpen: boolean;\r\n}\r\n\r\nconst NotificationSettingsModal: React.FC<NotificationSettingsModalProps> = ({\r\n  onDismissModal,\r\n  isOpen,\r\n}: NotificationSettingsModalProps) => {\r\n  const { user } = useContext(ApplicationUserContext);\r\n  const [notifications, setNotifications] = useState(\r\n    null as NotificationTypeModel[] | null\r\n  );\r\n  const [selectedNotifications, setSelectedNotifications] = useState(\r\n    null as NotificationTypeModel[] | null\r\n  );\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      setSelectedNotifications(null);\r\n      setNotifications(null);\r\n      return;\r\n    }\r\n\r\n    let isSubscribed = true;\r\n\r\n    Promise.all([\r\n      pushApi.getTypesSelectedByUser(user),\r\n      pushApi.listTypes(user),\r\n    ]).then((responses) => {\r\n      if (!isSubscribed) {\r\n        return;\r\n      }\r\n\r\n      setSelectedNotifications(responses[0]);\r\n      setNotifications(responses[1]);\r\n    });\r\n\r\n    return () => {\r\n      isSubscribed = false;\r\n    };\r\n  }, [isOpen, user]);\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  const onCancel = () => {\r\n    onDismissModal();\r\n  };\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  const onSelectionChanged = (newSelected: NotificationTypeModel[]) => {\r\n    const ids = newSelected.map((n) => n.id);\r\n    pushApi.putTypes(user, ids).then(() => {\r\n      setSelectedNotifications(newSelected);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonButtons slot=\"start\">\r\n            <IonButton onClick={onCancel}>\r\n              <IonIcon icon={arrowBackOutline} mode=\"md\" slot=\"icon-only\" />\r\n            </IonButton>\r\n          </IonButtons>\r\n          <IonTitle>Notifications</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonContent class=\"outer-content\">\r\n        <ToggleListEx\r\n          list={notifications}\r\n          selected={selectedNotifications}\r\n          selectionChanged={onSelectionChanged}\r\n        />\r\n      </IonContent>\r\n\r\n      <IonFooter>\r\n        <IonToolbar />\r\n      </IonFooter>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NotificationSettingsModal;\r\n","import {\r\n  IonContent,\r\n  IonHeader,\r\n  IonIcon,\r\n  IonItem,\r\n  IonLabel,\r\n  IonList,\r\n  IonMenu,\r\n  IonModal,\r\n  IonMenuToggle,\r\n  IonTitle,\r\n  IonToolbar,\r\n  IonFooter,\r\n} from \"@ionic/react\";\r\nimport { settings, notifications, mail, logOut } from \"ionicons/icons\";\r\nimport React, { useState } from \"react\";\r\nimport \"./Menu.scss\";\r\nimport { ApplicationUserContext } from \"../context/ApplicationUserContext\";\r\nimport env from \"../api/environment\";\r\nimport useDialogBox from \"../hooks/useDialogBox\";\r\nimport NotificationSettingsModal from \"./NotificationSettingsModal\";\r\n\r\nconst Menu: React.FC = () => {\r\n  const [disableMenu] = useState(false);\r\n  const { user } = React.useContext(ApplicationUserContext);\r\n  const environment = env.settings.env.item(user.environment);\r\n  const userName =\r\n    environment.key !== \"prod\" ? user.username!.substr(4) : user.username!;\r\n  const dlg = useDialogBox();\r\n  const [showNotificationsModal, setShowNotificationsModal] = useState(false);\r\n\r\n  /* tslint:disable:jsx-no-lambda */\r\n  return (\r\n    <IonMenu type=\"overlay\" disabled={disableMenu} contentId=\"main\">\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Menu</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent class=\"outer-content\">\r\n        {environment.key !== \"prod\" && (\r\n          <div className=\"header\">\r\n            {userName.toUpperCase()} ({environment.name.toUpperCase()})\r\n          </div>\r\n        )}\r\n        {environment.key === \"prod\" && <div className=\"header\">{userName}</div>}\r\n        <IonList>\r\n          <IonMenuToggle auto-hide=\"false\">\r\n            <IonItem button={true} routerLink=\"/account\" routerDirection=\"none\">\r\n              <IonLabel>Settings</IonLabel>\r\n              <IonIcon slot=\"end\" icon={settings} />\r\n            </IonItem>\r\n          </IonMenuToggle>\r\n\r\n          <IonMenuToggle auto-hide=\"false\">\r\n            <IonItem\r\n              button={true}\r\n              onClick={() => {\r\n                setShowNotificationsModal(true);\r\n              }}\r\n            >\r\n              <IonLabel>Notifications</IonLabel>\r\n              <IonIcon slot=\"end\" icon={notifications} />\r\n            </IonItem>\r\n          </IonMenuToggle>\r\n          {/* KENKEN: TODO: Add 'My Account' and 'Legend' menu items in menu\r\n          <IonMenuToggle auto-hide=\"false\">\r\n            <IonItem button={true} routerLink=\"/account\" routerDirection=\"none\">\r\n              <IonLabel>My Account</IonLabel>\r\n              <IonIcon slot=\"end\" icon={person} />\r\n            </IonItem>\r\n          </IonMenuToggle>\r\n          <IonMenuToggle auto-hide=\"false\">\r\n            <IonItem button={true} routerLink=\"/account\" routerDirection=\"none\">\r\n              <IonLabel>Legend</IonLabel>\r\n              <IonIcon slot=\"end\" icon={colorPalette} />\r\n            </IonItem>\r\n          </IonMenuToggle>\r\n          */}\r\n          <IonMenuToggle auto-hide=\"false\">\r\n            <IonItem button={true} routerLink=\"/account\" routerDirection=\"none\">\r\n              <IonLabel>Submit a Ticket</IonLabel>\r\n              <IonIcon slot=\"end\" icon={mail} />\r\n            </IonItem>\r\n          </IonMenuToggle>\r\n          <IonMenuToggle auto-hide=\"false\">\r\n            <IonItem button={true} routerLink=\"/logout\" routerDirection=\"none\">\r\n              <IonIcon slot=\"end\" icon={logOut} />\r\n              <IonLabel>Logout</IonLabel>\r\n            </IonItem>\r\n          </IonMenuToggle>\r\n        </IonList>\r\n        {dlg.alertBoxJsx}\r\n      </IonContent>\r\n      <IonFooter className=\"footer\">\r\n        <div className=\"version\">Version: {env.settings.appVersionString} </div>\r\n      </IonFooter>\r\n\r\n      <IonModal isOpen={showNotificationsModal}>\r\n        <NotificationSettingsModal\r\n          onDismissModal={() => {\r\n            setShowNotificationsModal(false);\r\n          }}\r\n          isOpen={showNotificationsModal}\r\n        />\r\n      </IonModal>\r\n    </IonMenu>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","/* eslint camelcase: 0 */\r\nimport {\r\n  HomePageDataGet,\r\n  AuthorizedItems,\r\n} from \"../orbital-interfaces/authorized-items\";\r\nimport { ApplicationUser } from \"../context/ApplicationUserContext\";\r\nimport env from \"./environment\";\r\nimport apiHelper from \"./OrbitalApiHelper\";\r\n\r\ninterface AccessTokenResponse {\r\n  access_token: string;\r\n  token_type: string;\r\n  expires_in: number;\r\n  error?: string;\r\n  error_description?: string;\r\n  [\".issued\"]: string;\r\n  [\".expires\"]: string;\r\n}\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst authenticateUser = async (\r\n  username: string,\r\n  password: string,\r\n  environment: string\r\n) => {\r\n  console.log(\r\n    `Authenticating against ${env.settings.env.item(environment).name} (${\r\n      env.settings.env.item(environment).url\r\n    })`\r\n  );\r\n  const url = env.settings.env.item(environment).url + \"token\";\r\n  const body = `grant_type=password&username=${username}&password=${password}`;\r\n  try {\r\n    const response = await fetch(url, {\r\n      method: \"POST\",\r\n      body: body,\r\n    });\r\n\r\n    const json = (await response.json()) as AccessTokenResponse;\r\n    if (json.error || json.error_description) {\r\n      return {\r\n        loggedIn: false,\r\n        error: json.error_description,\r\n        access_token: \"\",\r\n      };\r\n    }\r\n\r\n    return { loggedIn: true, access_token: json.access_token };\r\n  } catch (err) {\r\n    console.error(\"Error returned from authentication request: \" + err);\r\n    return {\r\n      loggedIn: false,\r\n      err,\r\n      error: \"Error attempting to log in\",\r\n      access_token: \"\",\r\n    };\r\n  }\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst getHomePageData = async (user: ApplicationUser) => {\r\n  return (await apiHelper.get(user, \"api/v3/home/get/0\")) as HomePageDataGet;\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst getAuthorizedItems = async (user: ApplicationUser) => {\r\n  const result = (await apiHelper.get(\r\n    user,\r\n    \"api/v3/home/get-auth\"\r\n  )) as AuthorizedItems;\r\n  console.log(result);\r\n  return result;\r\n};\r\n\r\nexport default {\r\n  authenticateUser,\r\n  getHomePageData,\r\n  getAuthorizedItems,\r\n};\r\n","/* eslint-disable */\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport { AuthorizedItems, Role } from \"../orbital-interfaces/authorized-items\";\r\nimport db from \"../data/dbStore\";\r\nimport UserAPI from \"../api/UserAPI\";\r\nimport {\r\n  ApplicationUser,\r\n  ApplicationUserContext,\r\n} from \"./ApplicationUserContext\";\r\n\r\nexport interface IAuthorizedItemsContext {\r\n  auth: AuthorizedItems;\r\n  refreshAuth: (\r\n    force: boolean,\r\n    newUser: ApplicationUser\r\n  ) => Promise<AuthorizedItems | null>;\r\n  clearAuth: () => void;\r\n  authLoading: boolean;\r\n}\r\n\r\nconst INITIAL_AUTHORIZED_ITEMS: AuthorizedItems = {\r\n  employeeId: 0,\r\n  role: Role.Employee,\r\n  locations: [],\r\n  loading: false,\r\n  payrollEvents: [],\r\n  tags: [],\r\n};\r\n\r\nconst INITIAL_AUTHITEMS_CONTEXT = {\r\n  auth: INITIAL_AUTHORIZED_ITEMS,\r\n  refreshAuth: (force: boolean, newUser: ApplicationUser) => {\r\n    return new Promise<AuthorizedItems | null>(() => {});\r\n  },\r\n  clearAuth: () => {},\r\n  authLoading: false,\r\n};\r\n\r\nexport const AuthorizedItemsContext = React.createContext<\r\n  IAuthorizedItemsContext\r\n>(INITIAL_AUTHITEMS_CONTEXT);\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nasync function getAuthItems(\r\n  currentAuth: AuthorizedItems,\r\n  user: ApplicationUser,\r\n  force: boolean\r\n) {\r\n  if (currentAuth.employeeId !== 0 && !force) {\r\n    return currentAuth;\r\n  }\r\n\r\n  if (!force) {\r\n    const authFromStore = await db.getAuthItems();\r\n    if (\r\n      authFromStore &&\r\n      authFromStore.locations &&\r\n      authFromStore.locations.length > 0\r\n    ) {\r\n      return authFromStore;\r\n    }\r\n  }\r\n\r\n  const authFromApi = await UserAPI.getAuthorizedItems(user);\r\n  if (\r\n    authFromApi &&\r\n    authFromApi.locations &&\r\n    authFromApi.locations.length > 0\r\n  ) {\r\n    db.putAuthItems(authFromApi).then(() =>\r\n      console.log(\"auth items stored in indexdb\")\r\n    );\r\n    return authFromApi;\r\n  } else {\r\n    console.log(\"got nothing from auth api\");\r\n    return null;\r\n  }\r\n}\r\n\r\nexport const AuthorizedItemsContextProvider = (props: any) => {\r\n  const [auth, internalSetAuth] = useState({ ...INITIAL_AUTHORIZED_ITEMS });\r\n  const [authLoading, setLoading] = useState(false);\r\n  const { user } = useContext(ApplicationUserContext);\r\n\r\n  // ----------------------------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    setLoading(true);\r\n\r\n    if (!user || !user.isLoggedin) {\r\n      return;\r\n    }\r\n\r\n    getAuthItems(auth, user, false).then((newAuth) => {\r\n      if (!mounted) {\r\n        return;\r\n      }\r\n\r\n      setLoading(false);\r\n\r\n      if (newAuth) {\r\n        internalSetAuth(newAuth);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [user, auth]);\r\n\r\n  // ----------------------------------------------------------------------------------------------\r\n  const refreshAuth = async (force: boolean, newUser: ApplicationUser) => {\r\n    setLoading(true);\r\n\r\n    const newAuth = await getAuthItems(auth, newUser, force);\r\n    setLoading(false);\r\n    if (newAuth) {\r\n      internalSetAuth(newAuth);\r\n    }\r\n\r\n    return newAuth;\r\n  };\r\n\r\n  // ----------------------------------------------------------------------------------------------\r\n  const clearAuth = () => {\r\n    internalSetAuth(INITIAL_AUTHORIZED_ITEMS);\r\n    db.putAuthItems(INITIAL_AUTHORIZED_ITEMS).then(() => {\r\n      console.log(\"Cleared Authorized Items from db\");\r\n    });\r\n  };\r\n\r\n  return (\r\n    <AuthorizedItemsContext.Provider\r\n      value={{\r\n        auth,\r\n        refreshAuth,\r\n        clearAuth,\r\n        authLoading,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </AuthorizedItemsContext.Provider>\r\n  );\r\n};\r\n// ---------------------------------------------------------------------------------------------\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  IonContent,\r\n  IonPage,\r\n  IonRow,\r\n  IonCol,\r\n  IonButton,\r\n  IonList,\r\n  IonText,\r\n  IonLoading,\r\n  useIonViewWillEnter,\r\n} from \"@ionic/react\";\r\nimport \"./Login.scss\";\r\nimport UserAPI from \"../api/UserAPI\";\r\nimport { RouteComponentProps } from \"react-router\";\r\nimport useDialogBox from \"../hooks/useDialogBox\";\r\nimport { ApplicationUserContext } from \"../context/ApplicationUserContext\";\r\nimport env from \"../api/environment\";\r\nimport { log } from \"../util/logger\";\r\nimport { AuthorizedItemsContext } from \"../context/AuthorizedItemsContext\";\r\n\r\ninterface LoginProps extends RouteComponentProps {}\r\n\r\nfunction validate(username: string, password: string): boolean {\r\n  return username.length > 0 && password.length > 5;\r\n}\r\n\r\nconst Login: React.FC<LoginProps> = ({ history }: LoginProps) => {\r\n  const { alertBoxJsx, showAlert } = useDialogBox();\r\n  const { user, userLoggedIn } = React.useContext(ApplicationUserContext);\r\n  const { refreshAuth } = React.useContext(AuthorizedItemsContext);\r\n  const [showLoading, setShowLoading] = useState(false);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [usernameErrors] = useState(\"\");\r\n  const [passwordErrors] = useState(\"\");\r\n  const [loginEnabled, setLoginEnabled] = useState(false);\r\n\r\n  // ----------------------------------------------------------------------------------------------\r\n  const onUsernameChange = (newUsername: string) => {\r\n    setUsername(newUsername);\r\n    setLoginEnabled(validate(newUsername, password));\r\n  };\r\n\r\n  // ----------------------------------------------------------------------------------------------\r\n  const onPasswordChange = (newPassword: string) => {\r\n    setPassword(newPassword);\r\n    setLoginEnabled(validate(username, newPassword));\r\n  };\r\n\r\n  // ----------------------------------------------------------------------------------------------\r\n  const login = async () => {\r\n    if (username && password) {\r\n      const envUser = env.getUserAndEnvironmentFromInput(username);\r\n      setShowLoading(true);\r\n      const response = await UserAPI.authenticateUser(\r\n        envUser.username,\r\n        password,\r\n        envUser.env.key\r\n      );\r\n      if (response.loggedIn) {\r\n        const newUser = await userLoggedIn(\r\n          username,\r\n          response.access_token,\r\n          envUser.env.key\r\n        );\r\n        await refreshAuth(true, newUser);\r\n        setShowLoading(false);\r\n        log(\"login\", {\r\n          username: envUser.username,\r\n          appVersion: env.settings.appVersionString,\r\n          environment: envUser.env.name,\r\n        });\r\n        history.push(\"/tabs/schedule\", { direction: \"none\" });\r\n        history.goForward();\r\n        return;\r\n      } else {\r\n        setShowLoading(false);\r\n        log(\"login_failure\", {\r\n          username: envUser.username,\r\n          appVersion: env.settings.appVersionString,\r\n          environment: envUser.env.name,\r\n        });\r\n        const msg = response.error ? response.error : \"Could not log in\";\r\n        showAlert(\"Failed to log in\", msg, () => {\r\n          setPassword(\"\");\r\n          setLoginEnabled(false);\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  // ----------------------------------------------------------------------------------------------\r\n  useIonViewWillEnter(() => {\r\n    console.log(\"Entering login, is user logged in? \", user.isLoggedin);\r\n    if (user.isLoggedin) {\r\n      history.push(\"/tabs/schedule\", { direction: \"forward\" });\r\n      history.goForward();\r\n    }\r\n  });\r\n\r\n  return (\r\n    <IonPage id=\"login-page\">\r\n      <IonContent className=\"login-content\">\r\n        <div className=\"login-logo\">\r\n          <img\r\n            className=\"logo\"\r\n            src=\"assets/img/OS Logo - 4pt Rounded _ 2 Tone Orange.svg\"\r\n            alt=\"Orbital Shift Logo\"\r\n          />\r\n        </div>\r\n\r\n        <IonLoading\r\n          isOpen={showLoading}\r\n          onDidDismiss={() => setShowLoading(false)}\r\n          spinner=\"dots\"\r\n          message={\"Logging in...\"}\r\n          duration={5000}\r\n        />\r\n\r\n        {alertBoxJsx}\r\n\r\n        <IonList className=\"form-list\">\r\n          <div className=\"item\">\r\n            <div className=\"label\">User</div>\r\n            <div className=\"field-container\">\r\n              <input\r\n                className=\"input\"\r\n                id=\"username\"\r\n                name=\"username\"\r\n                type=\"text\"\r\n                value={username}\r\n                onChange={(e) => {\r\n                  onUsernameChange(e.target.value);\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {usernameErrors.length > 0 && (\r\n            <IonText color=\"light\">\r\n              <p className=\"ion-padding-start\">{usernameErrors}</p>\r\n            </IonText>\r\n          )}\r\n\r\n          <div className=\"item\">\r\n            <div className=\"label\">Password</div>\r\n            <div className=\"field-container\">\r\n              <input\r\n                className=\"input\"\r\n                id=\"password\"\r\n                name=\"password\"\r\n                type=\"password\"\r\n                value={password}\r\n                onChange={(e) => {\r\n                  onPasswordChange(e.target.value);\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {passwordErrors.length > 0 && (\r\n            <IonText color=\"light\">\r\n              <p className=\"ion-padding-start\">{passwordErrors}</p>\r\n            </IonText>\r\n          )}\r\n        </IonList>\r\n\r\n        <IonRow>\r\n          <IonCol>\r\n            <IonButton\r\n              className=\"login-button\"\r\n              type=\"submit\"\r\n              onClick={login}\r\n              expand=\"block\"\r\n              disabled={!loginEnabled}\r\n            >\r\n              LOG IN\r\n            </IonButton>\r\n          </IonCol>\r\n        </IonRow>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import { EventBreak } from \"../orbital-interfaces/EventBreak\";\r\nimport { EventInformation } from \"../orbital-interfaces/TEC\";\r\nimport { ScheduleEvent } from \"../orbital-interfaces/ScheduleEvent\";\r\nimport {\r\n  addDays,\r\n  differenceInDays,\r\n  differenceInMinutes,\r\n  format,\r\n  isAfter,\r\n  isSameYear,\r\n  isToday,\r\n  parseISO,\r\n} from \"date-fns\";\r\nimport {\r\n  LocationSettings,\r\n  TimeFormat,\r\n} from \"../orbital-interfaces/authorized-items\";\r\nimport { OrbitalTime } from \"../orbital-interfaces/OrbitalTime\";\r\n\r\nconst noEndTime = new Date(9000, 1, 1);\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getDurationFromTimeSpan(timespan: string) {\r\n  if (!timespan) {\r\n    return 0;\r\n  }\r\n\r\n  const tok = timespan.split(\":\");\r\n  let hrs: number;\r\n  let min: number;\r\n  if (tok[0].indexOf(\".\") >= 0) {\r\n    const hrTok = tok[0].split(\".\");\r\n    hrs = 24 * parseInt(hrTok[0]) + parseInt(hrTok[1]);\r\n    min = parseInt(tok[1]);\r\n  } else {\r\n    hrs = parseInt(tok[0]);\r\n    min = parseInt(tok[1]);\r\n  }\r\n\r\n  return hrs * 60 + min;\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function messageDateString(time: string) {\r\n  const date = parseISO(time);\r\n  const now = new Date();\r\n\r\n  if (isToday(date)) {\r\n    return format(date, \"h:mmaaa\").replace(\"M\", \"\");\r\n  } else if (differenceInDays(now, date) < 7) {\r\n    return format(date, \"EEE\").toUpperCase();\r\n  } else if (isSameYear(date, now)) {\r\n    return format(date, \"MMM d\");\r\n  } else {\r\n    return format(date, \"M/d/yyyy\");\r\n  }\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getTimeStringFromMinutes(\r\n  locSettings: LocationSettings,\r\n  min: number | null\r\n) {\r\n  if (locSettings.TimeFormat === TimeFormat.HoursMinutes) {\r\n    if (min === null) {\r\n      return \"00:00\";\r\n    }\r\n\r\n    const hours = Math.floor(min / 60);\r\n    const minutes = min % 60;\r\n\r\n    return `${padZeroes(hours, 2)}:${padZeroes(minutes, 2)}`;\r\n  } else {\r\n    if (min === null) {\r\n      return \"0\";\r\n    }\r\n\r\n    return formatDecimal(\r\n      min / 60,\r\n      locSettings.TimeFormatDigits,\r\n      locSettings.TimeFormatDecimals\r\n    );\r\n  }\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getTimeStringFromOrbitalTime(\r\n  locSettings: LocationSettings,\r\n  time: OrbitalTime\r\n) {\r\n  if (time.ActualTime === \"00:00:00\") {\r\n    return locSettings.TimeFormat === TimeFormat.HoursMinutes\r\n      ? \"00:00\"\r\n      : formatDecimal(\r\n          0,\r\n          locSettings.TimeFormatDigits,\r\n          locSettings.TimeFormatDecimals\r\n        );\r\n  }\r\n\r\n  if (locSettings.TimeFormat === TimeFormat.HoursMinutes) {\r\n    const tok = time.ActualTime.split(\":\");\r\n    if (tok.length !== 3) {\r\n      return time.ActualTime;\r\n    }\r\n\r\n    if (tok[0].includes(\".\")) {\r\n      const dayHourTok = tok[0].split(\".\");\r\n      const hours = 24 * parseInt(dayHourTok[0]) + parseInt(dayHourTok[1]);\r\n      return `${hours}:${tok[1]}`;\r\n    } else {\r\n      const hours = parseInt(tok[0]);\r\n      return `${hours}:${tok[1]}`;\r\n    }\r\n  } else {\r\n    return formatDecimal(\r\n      time.ActualHours,\r\n      locSettings.TimeFormatDigits,\r\n      locSettings.TimeFormatDecimals\r\n    );\r\n  }\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getMinutesFromTimeString(\r\n  locSettings: LocationSettings,\r\n  str: string\r\n) {\r\n  if (!str || str.length === 0) {\r\n    return 0;\r\n  }\r\n\r\n  if (locSettings.TimeFormat === TimeFormat.HoursMinutes) {\r\n    const hourMinRegEx = /^\\d*(:\\d{2})?$/;\r\n    if (!hourMinRegEx.test(str)) {\r\n      return 0;\r\n    }\r\n\r\n    if (str[0] === \":\") {\r\n      return parseInt(str.substring(1));\r\n    }\r\n\r\n    const tok = str.split(\":\");\r\n    if (tok.length === 1) {\r\n      return parseInt(str) * 60;\r\n    }\r\n\r\n    return parseInt(tok[0]) * 60 + parseInt(tok[1]);\r\n  } else {\r\n    const decimalRegex = /^\\d+(.\\d*)?$/;\r\n    if (!decimalRegex.test(str)) {\r\n      return 0;\r\n    }\r\n\r\n    return Math.round(parseFloat(str) * 60.0);\r\n  }\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getDurationStringFromTimeSpan(timespan: string) {\r\n  if (!timespan) {\r\n    return \"(0m)\";\r\n  }\r\n  const tok = timespan.split(\":\");\r\n  let hrs: number;\r\n  let min: number;\r\n  if (tok[0].indexOf(\".\") >= 0) {\r\n    const hrTok = tok[0].split(\".\");\r\n    hrs = 24 * parseInt(hrTok[0]) + parseInt(hrTok[1]);\r\n    min = parseInt(tok[1]);\r\n  } else {\r\n    hrs = parseInt(tok[0]);\r\n    min = parseInt(tok[1]);\r\n  }\r\n\r\n  return hrs > 0 ? `(${hrs}h ${min}m)` : `(${min}m)`;\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getDurationString(minutes: number): string {\r\n  if (minutes < 60) {\r\n    return `(${minutes}m)`;\r\n  }\r\n\r\n  const str = `(${Math.floor(minutes / 60)}h`;\r\n  return minutes % 60 === 0 ? str + \")\" : str + ` ${minutes % 60}m)`;\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getDurationFromScheduleEvent(\r\n  ev: EventInformation | ScheduleEvent\r\n): number {\r\n  if ((ev as EventInformation).Data) {\r\n    return getDurationFromTimeSpan(\r\n      (ev as EventInformation).Data!.HourlyValue.Time.ActualTime\r\n    );\r\n  }\r\n\r\n  const getDiff = (start: string, end?: string) => {\r\n    const startDate = parseISO(start);\r\n    let endDate = end ? parseISO(end) : new Date();\r\n    if (endDate > noEndTime) {\r\n      endDate = new Date();\r\n    }\r\n    return differenceInMinutes(endDate, startDate);\r\n  };\r\n\r\n  let totalMinutes = getDiff(ev.EventStart, ev.EventEnd);\r\n  if (ev.EventBreaks) {\r\n    ev.EventBreaks.map(\r\n      (b) => (totalMinutes -= getDiff(b.BreakStart, b.BreakEnd))\r\n    );\r\n  }\r\n\r\n  return totalMinutes;\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getDuration(ev: EventInformation): number {\r\n  const getDiff = (start: string, end?: string) => {\r\n    const startDate = parseISO(start);\r\n    let endDate = end ? parseISO(end) : new Date();\r\n    if (endDate > noEndTime) {\r\n      endDate = new Date();\r\n    }\r\n    return differenceInMinutes(endDate, startDate);\r\n  };\r\n\r\n  let totalMinutes = getDiff(ev.EventStart, ev.EventEnd);\r\n  if (ev.EventBreaks) {\r\n    ev.EventBreaks.map(\r\n      (b) => (totalMinutes -= getDiff(b.BreakStart, b.BreakEnd))\r\n    );\r\n  }\r\n\r\n  return totalMinutes;\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getTotalDuration(events: EventInformation[]) {\r\n  let totalMinutes = 0;\r\n  events.map((ev) => (totalMinutes += getDuration(ev)));\r\n  return totalMinutes;\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getTotalDurationFromScheduleEvent(events: ScheduleEvent[]) {\r\n  let totalMinutes = 0;\r\n  events.map((ev) => (totalMinutes += getDurationFromScheduleEvent(ev)));\r\n  return totalMinutes;\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getDateString(date: Date): string {\r\n  return format(date, \"EEE MMM d, yyyy\").toUpperCase();\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getStartTime(ev: EventInformation | ScheduleEvent) {\r\n  return format(parseISO(ev.EventStart), \"h:mmaaa\").replace(\"M\", \"\");\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getMessageDeliveryTimeString(dateStr: string) {\r\n  return format(parseISO(dateStr), \"M/d EEE h:mmaa\").replace(\"M\", \"\");\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getBreakStartTime(brk: EventBreak) {\r\n  return format(parseISO(brk.BreakStart), \"h:mmaaa\").replace(\"M\", \"\");\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getEventStartEnd(ev: EventInformation | ScheduleEvent) {\r\n  const start = format(parseISO(ev.EventStart), \"h:mmaaa\").replace(\"M\", \"\");\r\n  const end = format(parseISO(ev.EventEnd), \"h:mmaaa\").replace(\"M\", \"\");\r\n\r\n  return `${start} - ${end}`;\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getBreakStartEnd(brk: EventBreak) {\r\n  const start = format(parseISO(brk.BreakStart), \"h:mmaaa\").replace(\"M\", \"\");\r\n\r\n  if (!brk.BreakEnd || brk.BreakEnd > noEndTime) {\r\n    return start;\r\n  }\r\n\r\n  const end = format(parseISO(brk.BreakEnd), \"h:mmaaa\").replace(\"M\", \"\");\r\n  return `${start} - ${end}`;\r\n}\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getEventInformationStartEnd(\r\n  ev: EventInformation | ScheduleEvent\r\n) {\r\n  const start = format(parseISO(ev.EventStart), \"h:mmaaa\").replace(\"M\", \"\");\r\n  const end = format(parseISO(ev.EventEnd), \"h:mmaaa\").replace(\"M\", \"\");\r\n\r\n  return `${start} - ${end}`;\r\n}\r\n\r\nexport function getEventBreakStartEndString(brk: EventBreak): string {\r\n  const start = format(parseISO(brk.BreakStart), \"h:mmaa\").replace(\"M\", \"\");\r\n  const end = brk.BreakEnd\r\n    ? format(parseISO(brk.BreakEnd), \"h:mmaa\").replace(\"M\", \"\")\r\n    : format(new Date(), \"h:mmaa\").replace(\"M\", \"\");\r\n\r\n  return `${start} - ${end}`;\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getWeekStart(\r\n  date: Date,\r\n  weekStartsOn: string,\r\n  dayStart: string\r\n): Date {\r\n  const dayStartMinutes =\r\n    !dayStart || dayStart.indexOf(\"T\") < 0\r\n      ? 0\r\n      : getDurationFromTimeSpan(dayStart.split(\"T\")[1]);\r\n\r\n  let newDate = date;\r\n  newDate.setHours(0, dayStartMinutes, 0, 0);\r\n\r\n  let counter = 0;\r\n  while (format(newDate, \"EEEE\") !== weekStartsOn && counter < 20) {\r\n    newDate = addDays(newDate, -1);\r\n    counter++;\r\n  }\r\n\r\n  if (counter > 15) {\r\n    console.error(\r\n      `Could not calculate week start based on date ${date}` +\r\n        `and weekStartsOn \"${weekStartsOn}\"`\r\n    );\r\n  }\r\n\r\n  return newDate;\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getDayStartMinutes(dayStartLocSetting: string) {\r\n  const tok = dayStartLocSetting.split(\"T\");\r\n  return getDurationFromTimeSpan(tok[1]);\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function getTimeDiff(dateStr: string) {\r\n  const now = new Date();\r\n  const dateTime = parseISO(dateStr);\r\n  let minutes = isAfter(now, dateTime)\r\n    ? differenceInMinutes(now, dateTime)\r\n    : differenceInMinutes(dateTime, now);\r\n\r\n  const hours = parseInt(\"\" + minutes / 60, 10);\r\n  minutes = minutes - hours * 60;\r\n  return `${formatDecimal(hours, 2, 0)}:${formatDecimal(minutes, 2, 0)}`;\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function formatDateTimeAsMvcString(d: Date) {\r\n  return (\r\n    \"\" +\r\n    d.getFullYear() +\r\n    \"-\" +\r\n    padZeroes(d.getMonth() + 1, 2) +\r\n    \"-\" +\r\n    padZeroes(d.getDate(), 2) +\r\n    \"T\" +\r\n    padZeroes(d.getHours(), 2) +\r\n    \":\" +\r\n    padZeroes(d.getMinutes(), 2) +\r\n    \":00\"\r\n  );\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nexport function formatDecimal(num: number, digits: number, decimals: number) {\r\n  let val = Number(num).toFixed(decimals).toString();\r\n\r\n  let negative = \"\";\r\n  if (val.indexOf(\"-\") === 0) {\r\n    val = val.substring(1);\r\n    negative = \"-\";\r\n  }\r\n\r\n  const s = \"0000000000\" + val;\r\n  const decPos = val.indexOf(\".\");\r\n  if (decPos === -1) {\r\n    return negative + s.substr(s.length - Math.max(val.length, digits));\r\n  } else {\r\n    return (\r\n      negative +\r\n      s.substr(s.length - Math.max(val.length, digits + decimals + 1))\r\n    );\r\n  }\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------\r\nfunction padZeroes(val: any, digitCount: number) {\r\n  const s = \"0000000000\" + val;\r\n  return s.substr(s.length - digitCount);\r\n}\r\n","enum EventType {\r\n  Shift = 1,\r\n  Unavailable = 2,\r\n  Vacation = 3,\r\n  Cover = 4,\r\n  Clock = 6,\r\n  Absent = 7,\r\n}\r\n\r\nexport default EventType;\r\n","/* eslint camelcase: 0 */\r\nimport { ScheduleEvent } from \"../orbital-interfaces/ScheduleEvent\";\r\nimport { EditorValues } from \"../components/EditEvent/EditEventModalState\";\r\nimport { TECGetData } from \"../orbital-interfaces/TEC\";\r\nimport { EventFilter } from \"../orbital-interfaces/EventFilter\";\r\nimport { DailyNotes } from \"../orbital-interfaces/DailyNotes\";\r\nimport { DailyNotesFilter } from \"../orbital-interfaces/DailyNotesFilter\";\r\nimport { formatDateTimeAsMvcString } from \"../util/time-helper\";\r\nimport { ApplicationUser } from \"../context/ApplicationUserContext\";\r\nimport apiHelper from \"./OrbitalApiHelper\";\r\nimport { RecurrenceUpdateType } from \"../enums/RecurrenceUpdateType\";\r\n\r\ninterface ErrorResponse {\r\n  error: boolean;\r\n  message: string;\r\n}\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst getScheduleEvent = async (\r\n  user: ApplicationUser,\r\n  scheduleEventId: number\r\n): Promise<ScheduleEvent | null> => {\r\n  const result = await apiHelper.get(\r\n    user,\r\n    \"api/v2/employee/schedule-events/get/\" + scheduleEventId\r\n  );\r\n\r\n  if (result.error) {\r\n    return null;\r\n  }\r\n\r\n  return result as ScheduleEvent;\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst getScheduleEventsByFilter = async (\r\n  user: ApplicationUser,\r\n  filter: EventFilter\r\n) => {\r\n  const filterToSend = {\r\n    start: formatDateTimeAsMvcString(filter.start),\r\n    end: formatDateTimeAsMvcString(filter.end),\r\n    ...filter,\r\n  };\r\n\r\n  return (await apiHelper.post(\r\n    user,\r\n    \"api/v2/employee/schedule-events/filter\",\r\n    filterToSend\r\n  )) as TECGetData;\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst getDailyNotesByFilter = async (\r\n  user: ApplicationUser,\r\n  filter: DailyNotesFilter\r\n) => {\r\n  const filterToSend = {\r\n    start: formatDateTimeAsMvcString(filter.start),\r\n    end: formatDateTimeAsMvcString(filter.end),\r\n    ...filter,\r\n  };\r\n\r\n  return (await apiHelper.post(\r\n    user,\r\n    \"api/v2/daily-notes/filter\",\r\n    filterToSend\r\n  )) as DailyNotes[];\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst updateScheduleEvent = async (\r\n  user: ApplicationUser,\r\n  eventValues: EditorValues,\r\n  recurrenceUpdateType: RecurrenceUpdateType | null\r\n) => {\r\n  const data = {\r\n    scheduleEventId: eventValues.scheduleEventId,\r\n    eventType: eventValues.eventType,\r\n    eventStatus: eventValues.eventStatus,\r\n    isConfirmed: eventValues.isConfirmed,\r\n    positionId: eventValues.position.position.id,\r\n    employeeId: eventValues.employee.id,\r\n    eventStart: eventValues.eventStart,\r\n    eventEnd: eventValues.eventEnd,\r\n    tagId: eventValues.tag?.id,\r\n    eventBreaks: eventValues.eventBreaks,\r\n    isClockedIn: eventValues.isClockedIn,\r\n    breakStart: null,\r\n    breakDuration: null,\r\n    clockOutValue: eventValues.clockoutValue,\r\n    absentTime: eventValues.absentTimeMinutes,\r\n    notes: eventValues.notes,\r\n    sendMessage: false,\r\n    recurrenceId: eventValues.recurrenceId,\r\n    recurrenceStart: eventValues.recurrenceStart,\r\n    recurrenceEnd: eventValues.recurrenceEnd,\r\n    recurrenceType: eventValues.recurrenceType,\r\n    repeatInterval: eventValues.repeatInterval,\r\n    repeatWeekdays: eventValues.repeatWeekdays,\r\n    recurrenceUpdateType,\r\n  };\r\n\r\n  return (await apiHelper.post(\r\n    user,\r\n    \"api/v2/employee/schedule-events/update\",\r\n    data\r\n  )) as ErrorResponse;\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst createScheduleEvent = async (\r\n  user: ApplicationUser,\r\n  eventValues: EditorValues,\r\n  recurrenceUpdateType: RecurrenceUpdateType | null\r\n) => {\r\n  const data = {\r\n    sceduleEventId: 0,\r\n    eventType: eventValues.eventType,\r\n    eventStatus: eventValues.eventStatus,\r\n    isConfirmed: eventValues.isConfirmed,\r\n    positionId: eventValues.position.position.id,\r\n    employeeId: eventValues.employee.id,\r\n    eventStart: eventValues.eventStart,\r\n    eventEnd: eventValues.eventEnd,\r\n    tagId: eventValues.tag?.id,\r\n    eventBreaks: eventValues.eventBreaks,\r\n    isClockedIn: eventValues.isClockedIn,\r\n    breakStart: null,\r\n    breakDuration: null,\r\n    clockOutValue: eventValues.clockoutValue,\r\n    absentTime: eventValues.absentTimeMinutes,\r\n    notes: eventValues.notes,\r\n    sendMessage: false,\r\n    recurrenceId: eventValues.recurrenceId,\r\n    recurrenceStart: eventValues.recurrenceStart,\r\n    recurrenceEnd: eventValues.recurrenceEnd,\r\n    recurrenceType: eventValues.recurrenceType,\r\n    repeatInterval: eventValues.repeatInterval,\r\n    repeatWeekdays: eventValues.repeatWeekdays,\r\n    recurrenceUpdateType,\r\n  };\r\n\r\n  return (await apiHelper.post(\r\n    user,\r\n    \"api/v2/employee/schedule-events/create\",\r\n    data\r\n  )) as ErrorResponse;\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst deleteScheduleEvent = async (\r\n  user: ApplicationUser,\r\n  scheduleEventId: number,\r\n  recurrenceUpdateType: RecurrenceUpdateType | null\r\n) => {\r\n  const data = {\r\n    scheduleEventId,\r\n    recurrenceUpdateType,\r\n    sendMessage: false,\r\n  };\r\n\r\n  return (await apiHelper.post(\r\n    user,\r\n    \"api/v2/employee/schedule-events/delete\",\r\n    data\r\n  )) as ErrorResponse;\r\n};\r\n\r\nexport default {\r\n  getScheduleEvent,\r\n  getScheduleEventsByFilter,\r\n  getDailyNotesByFilter,\r\n  updateScheduleEvent,\r\n  createScheduleEvent,\r\n  deleteScheduleEvent,\r\n};\r\n","export interface EventFilter {\r\n  settingsLocId: number;\r\n  dnLocIds: number[];\r\n  start: Date;\r\n  end: Date;\r\n  filterByEmployee: boolean;\r\n  filterByPosition: boolean;\r\n  positionIds: number[];\r\n  eventTypeId: number;\r\n  eventStatusId: number;\r\n  tagId?: number;\r\n}\r\n\r\nexport const initialEventFilter: EventFilter = {\r\n  settingsLocId: 0,\r\n  dnLocIds: [],\r\n  start: new Date(),\r\n  end: new Date(),\r\n  filterByEmployee: false,\r\n  filterByPosition: true,\r\n  positionIds: [],\r\n  eventTypeId: -1,\r\n  eventStatusId: -1,\r\n  tagId: undefined,\r\n};\r\n","import React from \"react\";\r\nimport \"./WeekChooser.scss\";\r\nimport { IonIcon, IonDatetime } from \"@ionic/react\";\r\nimport { arrowBack, arrowForward, caretDown } from \"ionicons/icons\";\r\nimport { addDays, format, isToday, parseISO } from \"date-fns\";\r\n\r\ninterface WeekChooserProps {\r\n  startDate: Date;\r\n  setStartDate: (date: Date) => void;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst WeekChooser: React.FC<WeekChooserProps> = ({\r\n  startDate,\r\n  setStartDate,\r\n}: WeekChooserProps) => {\r\n  return (\r\n    <div className=\"chooser\">\r\n      <div className=\"top\">\r\n        <button\r\n          onClick={() => setStartDate(addDays(startDate, -7))}\r\n          className=\"arrow\"\r\n          key={-1}\r\n        >\r\n          <IonIcon mode=\"ios\" icon={arrowBack} />\r\n        </button>\r\n        <div className=\"month-year-container\">\r\n          <div className=\"datetime-picker-container\">\r\n            <IonDatetime\r\n              className=\"datetime-picker\"\r\n              displayFormat=\"MMM YYYY\"\r\n              pickerFormat=\"MMM D YYYY\"\r\n              min=\"2005-01-01\"\r\n              max=\"2030-01-01\"\r\n              value={startDate.toISOString()}\r\n              onIonChange={(e) => {\r\n                setStartDate(parseISO(e.detail.value!));\r\n              }}\r\n            />\r\n            <IonIcon mode=\"md\" icon={caretDown} />\r\n          </div>\r\n        </div>\r\n        <button\r\n          onClick={() => setStartDate(addDays(startDate, 7))}\r\n          className=\"arrow\"\r\n          key={7}\r\n        >\r\n          <IonIcon mode=\"ios\" icon={arrowForward} />\r\n        </button>\r\n      </div>\r\n      <div className=\"weekday-list\">\r\n        {[0, 1, 2, 3, 4, 5, 6].map((num: number) => {\r\n          const thisDate = addDays(startDate, num);\r\n          const isTodayClass = isToday(thisDate) ? \"today\" : \"not-today\";\r\n\r\n          return (\r\n            <div key={num} className=\"weekday-button\">\r\n              <div className=\"weekday-abbr\">{format(thisDate, \"EEE\")}</div>\r\n              <div className={isTodayClass} />\r\n              <div className=\"weekday-num\">{format(thisDate, \"d\")}</div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WeekChooser;\r\n","enum EventStatus {\r\n  Approved = 1,\r\n  Request = 2,\r\n  RequestDenied = 4,\r\n}\r\n\r\nexport default EventStatus;\r\n","import EventType from \"../../enums/EventType\";\r\nimport EventStatus from \"../../enums/EventStatus\";\r\nimport {\r\n  AdminAuthorization,\r\n  AuthorizedItems,\r\n  Role,\r\n} from \"../../orbital-interfaces/authorized-items\";\r\nimport { isAfter, parseISO } from \"date-fns\";\r\nimport authHelper, { SelectedPosition } from \"../../util/authitems-helper\";\r\n\r\nexport enum EventEditEnum {\r\n  None,\r\n  UndoCoverRequest,\r\n  CreateShiftRequest,\r\n  DeleteShiftRequest,\r\n  CreateCoverRequest,\r\n  Delete,\r\n}\r\n\r\nexport interface Option {\r\n  value: number;\r\n  text: string;\r\n  color: string;\r\n}\r\n\r\nexport interface EventEditAuthorization {\r\n  buttonText: string;\r\n  enableConfirm: boolean;\r\n  isReadonly: boolean;\r\n  text: string;\r\n  usage: EventEditEnum;\r\n  eventTypeOptionList: Option[];\r\n  eventStatusOptionList: Option[];\r\n}\r\n\r\nexport const getEventNewAuthorization = (\r\n  auth: AuthorizedItems\r\n): EventEditAuthorization | null => {\r\n  let location = auth.locations[0];\r\n  let dept = auth.locations[0].departments[0];\r\n  let position = auth.locations[0].departments[0].positions[0];\r\n  let hasPositionFound = false;\r\n  for (let i = 0; i < auth.locations.length && !hasPositionFound; i++) {\r\n    for (\r\n      let j = 0;\r\n      j < auth.locations[i].departments.length && !hasPositionFound;\r\n      j++\r\n    ) {\r\n      for (\r\n        let k = 0;\r\n        j < auth.locations[i].departments[j].positions.length &&\r\n        !hasPositionFound;\r\n        k++\r\n      ) {\r\n        if (auth.locations[i].departments[j].positions[k].hasPosition) {\r\n          location = auth.locations[i];\r\n          dept = auth.locations[i].departments[j];\r\n          position = auth.locations[i].departments[j].positions[k];\r\n          hasPositionFound = true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  const selectedPosition = { location, position };\r\n\r\n  let initialStatus = EventStatus.Request;\r\n  if (auth.role === Role.BusinessAdmin || auth.role === Role.LocationAdmin) {\r\n    initialStatus = EventStatus.Approved;\r\n  } else if (\r\n    auth.role === Role.Admin &&\r\n    (dept.adminAuth & AdminAuthorization.CanEditSchedules) ===\r\n      AdminAuthorization.CanEditSchedules\r\n  ) {\r\n    initialStatus = EventStatus.Approved;\r\n  }\r\n\r\n  const eventStatusOptions = getEventStatusOptionsList(\r\n    auth,\r\n    selectedPosition,\r\n    auth.employeeId,\r\n    initialStatus,\r\n    false\r\n  );\r\n  const eventTypeOptions = getEventTypeOptionsList(\r\n    auth,\r\n    selectedPosition,\r\n    auth.employeeId\r\n  );\r\n\r\n  return {\r\n    buttonText: \"\",\r\n    enableConfirm: true,\r\n    isReadonly: false,\r\n    text: \"\",\r\n    usage: EventEditEnum.None,\r\n    eventTypeOptionList: eventTypeOptions,\r\n    eventStatusOptionList: eventStatusOptions,\r\n  } as EventEditAuthorization;\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\nexport const getEventEditAuthorization = (\r\n  eventType: EventType,\r\n  eventStatus: EventStatus,\r\n  eventEmployeeId: number,\r\n  eventStart: string,\r\n  eventEnd: string,\r\n  eventLocationId: number,\r\n  eventDepartmentId: number,\r\n  eventPositionId: number,\r\n  eventConfirmed: boolean,\r\n  auth: AuthorizedItems\r\n): EventEditAuthorization | null => {\r\n  const selectedPosition = authHelper.getSelectedPositionWithLocId(\r\n    auth.locations,\r\n    eventLocationId,\r\n    eventPositionId\r\n  );\r\n  const eventStatusOptions = getEventStatusOptionsList(\r\n    auth,\r\n    selectedPosition,\r\n    eventEmployeeId,\r\n    eventStatus,\r\n    true\r\n  );\r\n  const eventTypeOptions = getEventTypeOptionsList(\r\n    auth,\r\n    selectedPosition,\r\n    eventEmployeeId\r\n  );\r\n\r\n  const retVal = {\r\n    buttonText: \"\",\r\n    enableConfirm: true,\r\n    isReadonly: false,\r\n    text: \"\",\r\n    usage: EventEditEnum.None,\r\n    eventTypeOptionList: eventTypeOptions,\r\n    eventStatusOptionList: eventStatusOptions,\r\n  } as EventEditAuthorization;\r\n\r\n  if (auth.role === Role.BusinessAdmin) {\r\n    return retVal;\r\n  }\r\n\r\n  if (auth.role === Role.LocationAdmin) {\r\n    if (authHelper.isPositionSpecificEvent(eventType)) {\r\n      if (auth.locations.filter((l) => l.id === eventLocationId).length === 0) {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    return retVal;\r\n  }\r\n\r\n  const endOfEvent = parseISO(eventEnd);\r\n  const now = new Date();\r\n  const afterEnd = isAfter(now, endOfEvent);\r\n  let employeeEvent = false;\r\n  const adminAuth = authHelper.getAdminAuthorizationForDepartment(\r\n    auth,\r\n    eventDepartmentId\r\n  );\r\n\r\n  // If the user is in the Admin role\r\n  if (auth.role === Role.Admin) {\r\n    if (eventEmployeeId === auth.employeeId) {\r\n      if (eventType === EventType.Clock) {\r\n        if (\r\n          (adminAuth & AdminAuthorization.CanEditOwnClockEvents) ===\r\n          AdminAuthorization.CanEditOwnClockEvents\r\n        ) {\r\n          return retVal;\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n\r\n      if (\r\n        (adminAuth & AdminAuthorization.CanEditSchedules) ===\r\n        AdminAuthorization.CanEditSchedules\r\n      ) {\r\n        return retVal;\r\n      }\r\n\r\n      employeeEvent = true;\r\n    } else {\r\n      // Not the user's event, someone else's\r\n\r\n      if (eventType === EventType.Clock) {\r\n        if (\r\n          (adminAuth & AdminAuthorization.CanEditEmployeeClockEvents) ===\r\n          AdminAuthorization.CanEditEmployeeClockEvents\r\n        ) {\r\n          return retVal;\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n\r\n      if (\r\n        authHelper.canEditSchedules(auth, eventLocationId, eventDepartmentId)\r\n      ) {\r\n        return retVal;\r\n      } else {\r\n        // If the admin has a position in the selected department\r\n        if (authHelper.adminIsInDepartment(auth, eventDepartmentId)) {\r\n          // Treat the admin as an employee for event editing\r\n          employeeEvent = true;\r\n        } else {\r\n          // disable editing\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  if (auth.role === Role.Employee || employeeEvent) {\r\n    if (eventEmployeeId === auth.employeeId) {\r\n      if (afterEnd) {\r\n        return null;\r\n      }\r\n\r\n      if (eventType === EventType.Clock) {\r\n        return null;\r\n      }\r\n\r\n      if (eventType === EventType.Shift) {\r\n        if (eventStatus === EventStatus.Approved) {\r\n          return {\r\n            ...retVal,\r\n            buttonText: \"Create Cover-Request\",\r\n            isReadonly: true,\r\n            usage: EventEditEnum.CreateCoverRequest,\r\n          };\r\n        }\r\n\r\n        if (eventStatus === EventStatus.Request) {\r\n          return {\r\n            ...retVal,\r\n            buttonText: \"Undo Shift-Request\",\r\n            enableConfirm: false,\r\n            isReadonly: true,\r\n            text: \"Click OK to remove your Shift-Request\",\r\n            usage: EventEditEnum.DeleteShiftRequest,\r\n          };\r\n        }\r\n\r\n        // else Shift Request-Denied\r\n        return null;\r\n      }\r\n\r\n      if (eventType === EventType.Cover) {\r\n        if (eventStatus === EventStatus.Request) {\r\n          return {\r\n            ...retVal,\r\n            buttonText: \"Undo Cover-Request\",\r\n            enableConfirm: true,\r\n            isReadonly: true,\r\n            usage: EventEditEnum.UndoCoverRequest,\r\n          };\r\n        }\r\n\r\n        return null; // Cover Request-Denied\r\n      }\r\n\r\n      if (\r\n        !authHelper.isPositionSpecificEvent(eventType) &&\r\n        authHelper.canEditNonPositionEvents(auth, eventDepartmentId)\r\n      ) {\r\n        return {\r\n          ...retVal,\r\n          buttonText: \"Delete Request\",\r\n          enableConfirm: false,\r\n          isReadonly: true,\r\n          text: \"Click OK to delete this event\",\r\n          usage: EventEditEnum.Delete,\r\n        };\r\n      }\r\n\r\n      return null;\r\n    }\r\n\r\n    // This is someone else's event being viewed by an Employee\r\n    if (eventType === EventType.Cover && eventStatus === EventStatus.Request) {\r\n      return {\r\n        ...retVal,\r\n        buttonText: \"Make Shift-Request\",\r\n        enableConfirm: false,\r\n        isReadonly: true,\r\n        text: \"\",\r\n        usage: EventEditEnum.CreateShiftRequest,\r\n      };\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst getEventTypeOptionsList = (\r\n  auth: AuthorizedItems,\r\n  selectedPosition: SelectedPosition,\r\n  eventEmployeeId: number\r\n): Option[] => {\r\n  if (\r\n    !auth ||\r\n    !auth.locations ||\r\n    auth.locations.length === 0 ||\r\n    !selectedPosition ||\r\n    !selectedPosition.location ||\r\n    !selectedPosition.location.settings\r\n  ) {\r\n    return [];\r\n  }\r\n\r\n  const eventTypeOptions: Option[] = [\r\n    {\r\n      value: EventType.Shift,\r\n      text: \"SHIFT\",\r\n      color: \"green\",\r\n    },\r\n  ];\r\n\r\n  const locSettings = selectedPosition.location.settings;\r\n  const dept = authHelper.getDepartmentFromPositionId(\r\n    auth,\r\n    selectedPosition.position.id\r\n  );\r\n  const adminAuth = authHelper.getAdminAuthorizationForDepartment(\r\n    auth,\r\n    dept!.id\r\n  );\r\n\r\n  if (auth.role === Role.BusinessAdmin || auth.role === Role.LocationAdmin) {\r\n    eventTypeOptions.push({\r\n      value: EventType.Clock,\r\n      text: \"CLOCK\",\r\n      color: \"green\",\r\n    });\r\n  } else if (auth.role === Role.Admin) {\r\n    if (\r\n      auth.employeeId === eventEmployeeId &&\r\n      (adminAuth & AdminAuthorization.CanEditOwnClockEvents) ===\r\n        AdminAuthorization.CanEditOwnClockEvents\r\n    ) {\r\n      eventTypeOptions.push({\r\n        value: EventType.Clock,\r\n        text: \"CLOCK\",\r\n        color: \"green\",\r\n      });\r\n    } else if (\r\n      auth.employeeId !== eventEmployeeId &&\r\n      (adminAuth & AdminAuthorization.CanEditEmployeeClockEvents) ===\r\n        AdminAuthorization.CanEditEmployeeClockEvents\r\n    ) {\r\n      eventTypeOptions.push({\r\n        value: EventType.Clock,\r\n        text: \"CLOCK\",\r\n        color: \"green\",\r\n      });\r\n    }\r\n  }\r\n\r\n  if (auth.role === Role.BusinessAdmin || auth.role === Role.LocationAdmin) {\r\n    eventTypeOptions.push({\r\n      value: EventType.Cover,\r\n      text: \"COVER\",\r\n      color: \"red\",\r\n    });\r\n  } else if (\r\n    auth.role === Role.Admin &&\r\n    (adminAuth & AdminAuthorization.CanEditSchedules) ===\r\n      AdminAuthorization.CanEditSchedules\r\n  ) {\r\n    eventTypeOptions.push({\r\n      value: EventType.Cover,\r\n      text: \"COVER\",\r\n      color: \"red\",\r\n    });\r\n  }\r\n\r\n  if (locSettings.ShowUnavailableEventType) {\r\n    eventTypeOptions.push({\r\n      value: EventType.Unavailable,\r\n      text: \"UNAVAILABLE\",\r\n      color: \"yellow\",\r\n    });\r\n  }\r\n\r\n  if (locSettings.ShowVacationEventType) {\r\n    eventTypeOptions.push({\r\n      value: EventType.Vacation,\r\n      text: \"VACATION\",\r\n      color: \"yellow\",\r\n    });\r\n  }\r\n\r\n  if (locSettings.ShowAbsentEventType) {\r\n    const peTypes = auth.payrollEvents\r\n      .filter(\r\n        (pe) =>\r\n          pe.positionIds.includes(selectedPosition.position.id) &&\r\n          !pe.name.startsWith(\"--\")\r\n      )\r\n      .map((pe) => {\r\n        return { value: pe.id, text: pe.name, color: \"yellow\" };\r\n      });\r\n    return eventTypeOptions.concat(peTypes);\r\n  }\r\n\r\n  return eventTypeOptions;\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst getEventStatusOptionsList = (\r\n  auth: AuthorizedItems,\r\n  selectedPosition: SelectedPosition,\r\n  eventEmployeeId: number,\r\n  eventStatusId: EventStatus,\r\n  isEditingExistingEvent: boolean\r\n): Option[] => {\r\n  const eventStatusOptions: Option[] = [];\r\n  const dept = authHelper.getDepartmentFromPositionId(\r\n    auth,\r\n    selectedPosition.position.id\r\n  );\r\n  const adminAuth = authHelper.getAdminAuthorizationForDepartment(\r\n    auth,\r\n    dept!.id\r\n  );\r\n\r\n  if (auth.role === Role.LocationAdmin || auth.role === Role.BusinessAdmin) {\r\n    eventStatusOptions.push({\r\n      value: EventStatus.Approved,\r\n      text: \"APPROVED\",\r\n      color: \"black\",\r\n    });\r\n  } else if (\r\n    auth.role === Role.Admin &&\r\n    (adminAuth & AdminAuthorization.CanEditSchedules) ===\r\n      AdminAuthorization.CanEditSchedules\r\n  ) {\r\n    eventStatusOptions.push({\r\n      value: EventStatus.Approved,\r\n      text: \"APPROVED\",\r\n      color: \"black\",\r\n    });\r\n  }\r\n\r\n  eventStatusOptions.push({\r\n    value: EventStatus.Request,\r\n    text: \"REQUEST\",\r\n    color: \"red\",\r\n  });\r\n\r\n  if (auth.role === Role.LocationAdmin || auth.role === Role.BusinessAdmin) {\r\n    eventStatusOptions.push({\r\n      value: EventStatus.RequestDenied,\r\n      text: \"REQUEST-DENIED\",\r\n      color: \"black\",\r\n    });\r\n  } else if (\r\n    auth.role === Role.Admin &&\r\n    (adminAuth & AdminAuthorization.CanEditSchedules) ===\r\n      AdminAuthorization.CanEditSchedules\r\n  ) {\r\n    eventStatusOptions.push({\r\n      value: EventStatus.RequestDenied,\r\n      text: \"REQUEST-DENIED\",\r\n      color: \"black\",\r\n    });\r\n  }\r\n\r\n  if (isEditingExistingEvent) {\r\n    if (\r\n      eventStatusOptions.filter((es) => es.value === eventStatusId).length === 0\r\n    ) {\r\n      switch (eventStatusId) {\r\n        case EventStatus.Approved:\r\n          eventStatusOptions.push({\r\n            value: EventStatus.Approved,\r\n            text: \"APPROVED\",\r\n            color: \"black\",\r\n          });\r\n          break;\r\n        case EventStatus.Request:\r\n          eventStatusOptions.push({\r\n            value: EventStatus.Request,\r\n            text: \"REQUEST\",\r\n            color: \"red\",\r\n          });\r\n          break;\r\n        case EventStatus.RequestDenied:\r\n          eventStatusOptions.push({\r\n            value: EventStatus.RequestDenied,\r\n            text: \"REQUEST-DENIED\",\r\n            color: \"black\",\r\n          });\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  return eventStatusOptions;\r\n};\r\n","import {\r\n  AdminAuthorization,\r\n  AuthorizedDepartment,\r\n  AuthorizedItems,\r\n  AuthorizedLocation,\r\n  AuthorizedPosition,\r\n  Role,\r\n} from \"../orbital-interfaces/authorized-items\";\r\nimport EventType from \"../enums/EventType\";\r\nimport EventStatus from \"../enums/EventStatus\";\r\n\r\nexport interface SelectedPosition {\r\n  location: AuthorizedLocation;\r\n  position: AuthorizedPosition;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst getLocSettingsForLocationId = (\r\n  auth: AuthorizedItems,\r\n  locationId: number\r\n) => {\r\n  if (!auth || !auth.locations || auth.locations.length === 0) {\r\n    throw new Error(\r\n      \"getLocSettingsForLocationId: called with invalid auth parameter\"\r\n    );\r\n  }\r\n\r\n  if (locationId === 0) {\r\n    return auth.locations[0].settings;\r\n  }\r\n\r\n  return auth.locations.filter((loc) => loc.id === locationId)[0].settings;\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst getLocationFromLocationId = (\r\n  auth: AuthorizedItems,\r\n  locationId: number\r\n) => {\r\n  if (!auth || !auth.locations || auth.locations.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  if (locationId <= 0) {\r\n    return null;\r\n  }\r\n\r\n  return auth.locations.filter((l) => l.id === locationId)[0];\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\n// Returns true if the user can edit their own events (they have a position within one of\r\n// the admin's editable departments)\r\nconst canEditNonPositionEvents = (\r\n  auth: AuthorizedItems,\r\n  departmentId: number\r\n): boolean => {\r\n  const dept = auth.locations.flatMap((l) =>\r\n    l.departments.filter((d) => d.id === departmentId)\r\n  )[0];\r\n  if (\r\n    (dept.adminAuth & AdminAuthorization.CanEditSchedules) !==\r\n    AdminAuthorization.CanEditSchedules\r\n  ) {\r\n    return false;\r\n  }\r\n\r\n  return dept.positions.filter((p) => p.hasPosition).length > 0;\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst getPositionIdsForEmployee = (auth: AuthorizedItems): number[] => {\r\n  return auth.locations.flatMap((l) =>\r\n    l.departments.flatMap((d) =>\r\n      d.positions.filter((p) => p.hasPosition).map((p) => p.id)\r\n    )\r\n  );\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst getDepartmentFromPositionId = (\r\n  auth: AuthorizedItems,\r\n  positionId: number\r\n) => {\r\n  if (!auth || !auth.locations || auth.locations.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  if (positionId <= 0) {\r\n    return null;\r\n  }\r\n\r\n  let foundDepartment = null as AuthorizedDepartment | null;\r\n  auth.locations.flatMap((l) =>\r\n    l.departments.map((d) => {\r\n      const foundPosition = d.positions.filter((p) => p.id === positionId);\r\n      if (foundPosition.length === 1) {\r\n        foundDepartment = d;\r\n        return d;\r\n      }\r\n\r\n      return null;\r\n    })\r\n  );\r\n\r\n  return foundDepartment;\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\n// Returns true if the Admin can edit schedules for the passed-in department\r\nconst canEditSchedules = (\r\n  auth: AuthorizedItems,\r\n  locationId: number,\r\n  departmentId: number\r\n) => {\r\n  return (\r\n    (auth.locations\r\n      .filter((l) => l.id === locationId)[0]\r\n      .departments.filter((d) => d.id === departmentId)[0].adminAuth &\r\n      AdminAuthorization.CanEditSchedules) ===\r\n    AdminAuthorization.CanEditSchedules\r\n  );\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\n// Returns true if the event type is a type that is associated to a position (e.g.,\r\n// not an unavailable)\r\nconst isPositionSpecificEvent = (eventType: EventType) => {\r\n  return (\r\n    eventType === EventType.Shift ||\r\n    eventType === EventType.Cover ||\r\n    eventType === EventType.Clock ||\r\n    eventType === EventType.Absent\r\n  );\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\n// Returns true if 1) the user is an Admin and 2) they have a position in the passed-in department\r\nconst adminIsInDepartment = (auth: AuthorizedItems, departmentId: number) => {\r\n  if (auth.role !== Role.Admin) {\r\n    return false;\r\n  }\r\n\r\n  const dept = auth.locations.flatMap((l) =>\r\n    l.departments.filter((d) => d.id === departmentId)\r\n  )[0];\r\n  return dept.positions.filter((p) => p.hasPosition).length > 0;\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst getAdminAuthorizationForDepartment = (\r\n  auth: AuthorizedItems,\r\n  departmentId: number\r\n) => {\r\n  return auth.locations.flatMap((l) =>\r\n    l.departments.filter((d) => d.id === departmentId)\r\n  )[0].adminAuth;\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst hasPosition = (auth: AuthorizedItems, positionId: number) => {\r\n  return (\r\n    auth.locations.flatMap((l) =>\r\n      l.departments.flatMap((d) =>\r\n        d.positions.filter((p) => p.hasPosition && p.id === positionId)\r\n      )\r\n    ).length > 0\r\n  );\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst getSelectedPositionWithLocId = (\r\n  loc: AuthorizedLocation[],\r\n  locId: number,\r\n  posId: number\r\n) => {\r\n  const location = loc.filter((l) => l.id === locId)[0];\r\n  const position = location.departments.flatMap((d) =>\r\n    d.positions.filter((p) => p.id === posId)\r\n  )[0];\r\n  return { location, position };\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst getSelectedPosition = (loc: AuthorizedLocation[], posId: number) => {\r\n  for (let locPosId = 0; locPosId < loc.length; locPosId++) {\r\n    for (\r\n      let depPosId = 0;\r\n      depPosId < loc[locPosId].departments.length;\r\n      depPosId++\r\n    ) {\r\n      for (\r\n        let posPosId = 0;\r\n        posPosId < loc[locPosId].departments[depPosId].positions.length;\r\n        posPosId++\r\n      ) {\r\n        if (\r\n          loc[locPosId].departments[depPosId].positions[posPosId].id === posId\r\n        ) {\r\n          return {\r\n            location: loc[locPosId],\r\n            position: loc[locPosId].departments[depPosId].positions[posPosId],\r\n          };\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    location: {} as AuthorizedLocation,\r\n    position: {} as AuthorizedPosition,\r\n  };\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst isShiftTypeEvent = (eventType: EventType, eventStatus: EventStatus) => {\r\n  return (\r\n    (eventType === EventType.Shift && eventStatus === EventStatus.Approved) ||\r\n    (eventType === EventType.Cover && eventStatus === EventStatus.Request) ||\r\n    (eventType === EventType.Cover && eventStatus === EventStatus.RequestDenied)\r\n  );\r\n};\r\n\r\nexport default {\r\n  getLocSettingsForLocationId,\r\n  getLocationFromLocationId,\r\n  getDepartmentFromPositionId,\r\n  getPositionIdsForEmployee,\r\n  isPositionSpecificEvent,\r\n  canEditSchedules,\r\n  getAdminAuthorizationForDepartment,\r\n  adminIsInDepartment,\r\n  canEditNonPositionEvents,\r\n  hasPosition,\r\n  isShiftTypeEvent,\r\n  getSelectedPositionWithLocId,\r\n  getSelectedPosition,\r\n};\r\n","enum EventGroup {\r\n  All = -1,\r\n  Scheduled = -2,\r\n  DontWork = -3,\r\n  ClockAndSched = -6,\r\n  Custom = 0,\r\n}\r\n\r\nexport default EventGroup;\r\n","import React, { CSSProperties, useContext } from \"react\";\nimport {\n  getDurationStringFromTimeSpan,\n  getEventInformationStartEnd,\n} from \"../../util/time-helper\";\nimport \"./EventCard.scss\";\nimport { AuthorizedLocation } from \"../../orbital-interfaces/authorized-items\";\nimport { format, parseISO } from \"date-fns\";\nimport { EventInformation } from \"../../orbital-interfaces/TEC\";\nimport { time } from \"ionicons/icons\";\nimport { IonIcon } from \"@ionic/react\";\nimport {\n  getEventEditAuthorization,\n  EventEditAuthorization,\n} from \"../EditEvent/EditEventAuthorization\";\nimport { AuthorizedItemsContext } from \"../../context/AuthorizedItemsContext\";\n\ninterface EventCardProps {\n  event: EventInformation;\n  location: AuthorizedLocation;\n  multiLocation: boolean;\n  showEmployeeName: boolean;\n  onEdit: (ev: EventInformation, eventEditAuth: EventEditAuthorization) => void;\n}\n\nconst colorMap: any = {\n  1: \"#9CBA6A\",\n  2: \"#BFBFBF\",\n  3: \"#FFAD00\",\n  4: \"#C41A26\",\n  6: \"#677A46\",\n  7: \"#FFAD00\",\n};\n\nconst statusTimeColor: any = {\n  1: { color: \"black\" },\n  2: { color: \"#C41A26\" },\n  4: { color: \"#BCBCBC\" },\n};\n\nconst EventCard: React.FC<EventCardProps> = ({\n  location,\n  event,\n  multiLocation,\n  showEmployeeName,\n  onEdit,\n}: EventCardProps) => {\n  const { auth } = useContext(AuthorizedItemsContext);\n  const displayNameStyle: CSSProperties = showEmployeeName\n    ? { display: \"inline-block\" }\n    : { display: \"none\" };\n\n  const eventStartDate = parseISO(event.EventStart);\n  const multiDepartment = multiLocation\n    ? true\n    : location.departments.filter((d) =>\n        d.positions.filter((p) => p.hasPosition)\n      ).length > 1;\n\n  let posDisplay = \"\";\n  if (multiLocation && event.AbbreviatedLocationName) {\n    posDisplay = event.AbbreviatedLocationName + \"/\";\n  }\n\n  if (multiDepartment && event.AbbreviatedDepartmentName) {\n    posDisplay += event.AbbreviatedDepartmentName + \"/\";\n  }\n\n  posDisplay += event.PositionName;\n\n  const eventTypeBorder = {\n    borderLeft: `7px solid ${colorMap[event.EventTypeId]} `,\n  };\n  const timeColor: CSSProperties = statusTimeColor[event.EventStatusId];\n\n  const onUserClick = () => {\n    const eventEditAuth = getEventEditAuthorization(\n      event.EventTypeId,\n      event.EventStatusId,\n      event.EmployeeId,\n      event.EventStart,\n      event.EventEnd,\n      event.LocationId,\n      event.DepartmentId!,\n      event.PositionId,\n      event.IsConfirmed,\n      auth\n    );\n    if (eventEditAuth === null) {\n      return;\n    }\n\n    onEdit(event, eventEditAuth);\n  };\n\n  return (\n    <button\n      className=\"event\"\n      onClick={() => {\n        onUserClick();\n      }}\n    >\n      <div className=\"card-first-col\">\n        <div className=\"day-name\">{format(eventStartDate, \"EEE\")} </div>\n        <div className=\"day-number\">{format(eventStartDate, \"d\")}</div>\n      </div>\n      <div className=\"card-second-col\" style={eventTypeBorder}>\n        <div className=\"time-row\">\n          {event.IsClockedIn && <IonIcon icon={time} />}\n          <span style={timeColor}>\n            {getEventInformationStartEnd(event)}&nbsp;&nbsp;\n          </span>\n          {getDurationStringFromTimeSpan(event.EventDuration)}\n        </div>\n        <div className=\"name-row\" style={displayNameStyle}>\n          {event.FirstName} {event.LastName}\n        </div>\n        <div className=\"position-row\">\n          {posDisplay}&nbsp;&nbsp;\n          {event.Tag && `~${event.Tag}`}\n        </div>\n      </div>\n    </button>\n  );\n};\n\nexport default EventCard;\n","import React from \"react\";\nimport \"./DailyNoteCard.scss\";\nimport { AuthorizedLocation } from \"../../orbital-interfaces/authorized-items\";\nimport { format, parseISO } from \"date-fns\";\nimport { DailyNotes } from \"../../orbital-interfaces/DailyNotes\";\n\ninterface EventCardProps {\n  note: DailyNotes;\n  location: AuthorizedLocation;\n}\n\nconst EventCard: React.FC<EventCardProps> = ({ note }: EventCardProps) => {\n  const noteDate = parseISO(note.EventStart);\n  const deptName = note.DepartmentId === -1 ? \"All Depts\" : note.DepartmentName;\n\n  return (\n    <button className=\"daily-note\">\n      <div className=\"card-first-col\">\n        <div className=\"day-name\">{format(noteDate, \"EEE\")} </div>\n        <div className=\"day-number\">{format(noteDate, \"d\")}</div>\n      </div>\n      <div className=\"card-second-col\">\n        <div className=\"first-row\">\n          {deptName}: {note.Notes}\n        </div>\n      </div>\n    </button>\n  );\n};\n\nexport default EventCard;\n","import React from \"react\";\r\nimport \"./EventList.scss\";\r\nimport EventCard from \"./EventCard\";\r\nimport DailyNoteCard from \"./DailyNoteCard\";\r\nimport { AuthorizedLocation } from \"../../orbital-interfaces/authorized-items\";\r\nimport \"./EventListSection.scss\";\r\nimport { EventInformation } from \"../../orbital-interfaces/TEC\";\r\nimport { DailyNotes } from \"../../orbital-interfaces/DailyNotes\";\r\nimport { EventEditAuthorization } from \"../EditEvent/EditEventAuthorization\";\r\n\r\ninterface EventListSectionProps {\r\n  locations: AuthorizedLocation[];\r\n  events: EventInformation[];\r\n  notes: DailyNotes[];\r\n  header: string;\r\n  showEmployeeNames: boolean;\r\n  showTotalDuration: boolean;\r\n  onEdit: (ev: EventInformation, eventEditAuth: EventEditAuthorization) => void;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst EventListSection: React.FC<EventListSectionProps> = ({\r\n  locations,\r\n  header,\r\n  events,\r\n  notes,\r\n  showEmployeeNames,\r\n  onEdit,\r\n}: EventListSectionProps) => {\r\n  const multiLocation =\r\n    locations.filter((l) =>\r\n      l.departments.filter((d) => d.positions.filter((p) => p.hasPosition))\r\n    ).length > 1;\r\n\r\n  if (events.length === 0) {\r\n    return <div />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"header\">{header}</div>\r\n      <div className=\"daily-notes-list\">\r\n        {notes.map((note) => (\r\n          <DailyNoteCard\r\n            key={note.DailyNoteId}\r\n            note={note}\r\n            location={locations.filter((l) => l.id === note.LocationId)[0]}\r\n          />\r\n        ))}\r\n      </div>\r\n      <div className=\"event-list\">\r\n        {events.map((ev) => (\r\n          <EventCard\r\n            onEdit={onEdit}\r\n            key={ev.ScheduleEventId}\r\n            event={ev}\r\n            location={locations.filter((l) => l.id === ev.LocationId)[0]}\r\n            multiLocation={multiLocation}\r\n            showEmployeeName={showEmployeeNames}\r\n          />\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EventListSection;\r\n","import React from \"react\";\nimport \"./EventList.scss\";\nimport { LocationSettings } from \"../../orbital-interfaces/authorized-items\";\nimport { parseISO, format, addDays, isBefore } from \"date-fns\";\nimport { KeyedCollection } from \"../../util/KeyedCollection\";\nimport EventListSection from \"./EventListSection\";\nimport {\n  getWeekStart,\n  getDurationFromTimeSpan,\n  getDurationString,\n} from \"../../util/time-helper\";\nimport { EventInformation, HoursList } from \"../../orbital-interfaces/TEC\";\nimport { DailyNotes } from \"../../orbital-interfaces/DailyNotes\";\nimport { AuthorizedItems } from \"../../orbital-interfaces/authorized-items\";\nimport { EventEditAuthorization } from \"../EditEvent/EditEventAuthorization\";\n\ninterface EventListProps {\n  events: EventInformation[];\n  notes: DailyNotes[];\n  hoursPerDay: HoursList[];\n  listType: \"my\" | \"requests\" | \"all\";\n  auth: AuthorizedItems;\n  onEdit: (ev: EventInformation, eventEditAuth: EventEditAuthorization) => void;\n}\n\ninterface SegmentItemList {\n  events: EventInformation[];\n  notes: DailyNotes[];\n}\n\n// --------------------------------------------------------------------------------------\nconst getSegmentsForMy = (\n  events: EventInformation[],\n  notes: DailyNotes[],\n  locationSettings: LocationSettings,\n  hoursPerDay: HoursList[]\n) => {\n  const segments = new KeyedCollection<SegmentItemList>();\n  if (events.length === 0 && notes.length === 0) {\n    return segments;\n  }\n\n  let weekStart = new Date(2199, 1, 1);\n  if (events.length > 0) {\n    weekStart = getWeekStart(\n      parseISO(events[0].EventStart),\n      locationSettings.DayWeekStartsOn,\n      locationSettings.DayStartTime\n    );\n  }\n\n  if (notes.length > 0) {\n    const notesStart = getWeekStart(\n      parseISO(notes[0].EventStart),\n      locationSettings.DayWeekStartsOn,\n      locationSettings.DayStartTime\n    );\n    if (isBefore(notesStart, weekStart)) {\n      weekStart = notesStart;\n    }\n  }\n\n  const weekEnd = addDays(weekStart, 6);\n  const header =\n    `${format(weekStart, \"MMM d\")} - ${format(\n      weekEnd,\n      \"MMM d\"\n    )}`.toUpperCase() +\n    \" \" +\n    getDurationString(\n      hoursPerDay\n        .map((h) => getDurationFromTimeSpan(h.time))\n        .reduce((prev, cur) => prev + cur, 0)\n    );\n\n  segments.add(header, { events, notes });\n  return segments;\n};\n\n// --------------------------------------------------------------------------------------\nconst getSegmentsForRequests = (\n  events: EventInformation[],\n  notes: DailyNotes[],\n  employeeId: number\n) => {\n  const segments = new KeyedCollection<SegmentItemList>();\n  segments.add(\"MY REQUESTS\", {\n    events: events.filter((ev) => ev.EmployeeId === employeeId),\n    notes: [],\n  });\n  segments.add(\"CO-WORKERS\", {\n    events: events.filter((ev) => ev.EmployeeId !== employeeId),\n    notes: [],\n  });\n  return segments;\n};\n\n// --------------------------------------------------------------------------------------\nconst getSegmentsForAll = (events: EventInformation[], notes: DailyNotes[]) => {\n  const segments = new KeyedCollection<SegmentItemList>();\n  events.map((ev) => {\n    const thisDate = format(\n      parseISO(ev.EventStart).setHours(0, 0, 0, 0),\n      \"MMM d, yyyy\"\n    ).toUpperCase();\n    if (!segments.containsKey(thisDate)) {\n      const thisDatesNotes = notes.filter(\n        (n) =>\n          format(\n            parseISO(n.EventStart).setHours(0, 0, 0, 0),\n            \"MMM d, yyyy\"\n          ).toUpperCase() === thisDate\n      );\n      segments.add(thisDate, { notes: thisDatesNotes, events: [] });\n    }\n\n    segments.item(thisDate).events.push(ev);\n    return thisDate;\n  });\n\n  return segments;\n};\n\n// --------------------------------------------------------------------------------------\nconst EventList: React.FC<EventListProps> = ({\n  events,\n  listType,\n  notes,\n  hoursPerDay,\n  auth,\n  onEdit,\n}: EventListProps) => {\n  if (events.length === 0) {\n    return <div>No Events</div>;\n  }\n\n  let segments: KeyedCollection<SegmentItemList> = new KeyedCollection<\n    SegmentItemList\n  >();\n  switch (listType) {\n    case \"requests\":\n      segments = getSegmentsForRequests(events, notes, auth.employeeId);\n      break;\n    case \"my\":\n      segments = getSegmentsForMy(\n        events,\n        notes,\n        auth.locations[0].settings,\n        hoursPerDay\n      );\n      break;\n    default:\n      segments = getSegmentsForAll(events, notes);\n      break;\n  }\n\n  return (\n    <>\n      {segments.keys().map((seg) => (\n        <EventListSection\n          onEdit={onEdit}\n          key={seg}\n          header={seg}\n          locations={auth.locations}\n          events={segments.item(seg).events}\n          notes={segments.item(seg).notes}\n          showEmployeeNames={listType !== \"my\" && seg !== \"MY REQUESTS\"}\n          showTotalDuration={listType !== \"requests\"}\n        />\n      ))}\n    </>\n  );\n};\n\nexport default EventList;\n","import EventGroup from \"../enums/EventGroup\";\r\nimport { EventFilter } from \"../orbital-interfaces/EventFilter\";\r\nimport { AuthorizedItems } from \"../orbital-interfaces/authorized-items\";\r\nimport EventType from \"../enums/EventType\";\r\n\r\nexport interface EventTypeOption {\r\n  value: number;\r\n  text: string;\r\n  color: string;\r\n}\r\n\r\nexport const getFilterByEventGroup = (\r\n  f: EventFilter,\r\n  group: EventGroup\r\n): EventFilter => {\r\n  return group === EventGroup.Custom\r\n    ? { ...f, eventTypeId: -1, eventStatusId: -1 }\r\n    : { ...f, eventTypeId: group, eventStatusId: group };\r\n};\r\n\r\nexport const getEventTypeOptions = (\r\n  auth: AuthorizedItems,\r\n  filter?: EventFilter\r\n): EventTypeOption[] => {\r\n  if (!auth || !auth.locations || auth.locations.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  const locSettings = auth.locations[0].settings;\r\n\r\n  const eventTypeOptions: EventTypeOption[] = [\r\n    {\r\n      value: EventType.Shift,\r\n      text: \"SHIFT\",\r\n      color: \"green\",\r\n    },\r\n    {\r\n      value: EventType.Cover,\r\n      text: \"COVER\",\r\n      color: \"red\",\r\n    },\r\n  ];\r\n\r\n  if (filter) {\r\n    eventTypeOptions.unshift({ value: -1, text: \"ALL\", color: \"black\" });\r\n  }\r\n\r\n  eventTypeOptions.push({\r\n    value: EventType.Clock,\r\n    text: \"CLOCK\",\r\n    color: \"green\",\r\n  });\r\n\r\n  if (locSettings.ShowUnavailableEventType) {\r\n    eventTypeOptions.push({\r\n      value: EventType.Unavailable,\r\n      text: \"UNAVAILABLE\",\r\n      color: \"yellow\",\r\n    });\r\n  }\r\n\r\n  if (locSettings.ShowVacationEventType) {\r\n    eventTypeOptions.push({\r\n      value: EventType.Vacation,\r\n      text: \"VACATION\",\r\n      color: \"yellow\",\r\n    });\r\n  }\r\n\r\n  if (locSettings.ShowAbsentEventType) {\r\n    const peTypes: EventTypeOption[] = [];\r\n    const p2l: any = {};\r\n    auth.locations.flatMap((l) =>\r\n      l.departments.flatMap((d) => d.positions.map((p) => (p2l[p.id] = l)))\r\n    );\r\n\r\n    auth.payrollEvents.map((pe) => {\r\n      if (!pe.name.startsWith(\"--\")) {\r\n        if (filter) {\r\n          if (\r\n            pe.positionIds.some((id) => filter.positionIds.indexOf(id) >= 0)\r\n          ) {\r\n            peTypes.push({\r\n              value: pe.id,\r\n              text: `${pe.name} (${p2l[pe.positionIds[0]].name})`,\r\n              color: \"yellow\",\r\n            });\r\n          }\r\n        } else {\r\n          peTypes.push({\r\n            value: pe.id,\r\n            text: `${pe.name} (${p2l[pe.positionIds[0]].name})`,\r\n            color: \"yellow\",\r\n          });\r\n        }\r\n\r\n        return pe;\r\n      } else {\r\n        return null;\r\n      }\r\n    });\r\n    peTypes.sort((p1, p2) => {\r\n      return p1.text > p2.text ? 1 : -1;\r\n    });\r\n    return eventTypeOptions.concat(peTypes);\r\n  }\r\n\r\n  return eventTypeOptions;\r\n};\r\n","const arrayHelper = {\r\n  // ------------------------------------------------------------------------------------\r\n  areEqual: <T extends {}>(a1: T[], a2: T[]): boolean => {\r\n    if ((!a1 && a2) || (a1 && !a2)) {\r\n      return false;\r\n    }\r\n\r\n    if (!a1 && !a2) {\r\n      return true;\r\n    }\r\n\r\n    if (a1.length !== a2.length) {\r\n      return false;\r\n    }\r\n\r\n    for (let i = 0; i < a1.length; i++) {\r\n      if (!arrayHelper.contains(a2, a1[i])) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  },\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  contains: <T extends {}>(arr: T[], val: T): boolean => {\r\n    for (let i = 0; i < arr.length; i++) {\r\n      if (arr[i] === val) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  },\r\n\r\n  containsAny: <T extends {}>(arr1: T[], arr2: T[]): boolean => {\r\n    for (let i = 0; i < arr1.length; i++) {\r\n      if (arr2.includes(arr1[i])) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  },\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  unique: <T extends {}>(arr: T[]): T[] => {\r\n    const newArr: T[] = [];\r\n    // eslint-disable-next-line\r\n    arr.map((item) => {\r\n      if (!arrayHelper.contains(newArr, item)) {\r\n        newArr.push(item);\r\n      }\r\n    });\r\n\r\n    return newArr;\r\n  },\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  uniqueObject: <T extends {}>(\r\n    arr: T[],\r\n    filt: (o: T, n: T) => boolean\r\n  ): T[] => {\r\n    const newArr: T[] = [];\r\n    // eslint-disable-next-line\r\n    arr.map((item) => {\r\n      let found = false;\r\n      for (let i = 0; i < newArr.length; i++) {\r\n        if (filt(newArr[i], item)) {\r\n          found = true;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!found) {\r\n        newArr.push(item);\r\n      }\r\n    });\r\n\r\n    return newArr;\r\n  },\r\n};\r\n\r\nexport default arrayHelper;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  IonButton,\r\n  IonButtons,\r\n  IonIcon,\r\n  IonContent,\r\n  IonFooter,\r\n  IonHeader,\r\n  IonItem,\r\n  IonLabel,\r\n  IonSelect,\r\n  IonSelectOption,\r\n  IonTitle,\r\n  IonToolbar,\r\n} from \"@ionic/react\";\r\nimport {\r\n  EventFilter,\r\n  initialEventFilter,\r\n} from \"../../orbital-interfaces/EventFilter\";\r\nimport { arrowBackOutline } from \"ionicons/icons\";\r\nimport \"./ScheduleFilterModal.scss\";\r\nimport EventGroup from \"../../enums/EventGroup\";\r\nimport {\r\n  getFilterByEventGroup,\r\n  getEventTypeOptions,\r\n} from \"../../util/event-helper\";\r\nimport { AuthorizedItems } from \"../../orbital-interfaces/authorized-items\";\r\nimport arrayHelper from \"../../util/array-helper\";\r\n\r\ninterface ScheduleFilterModalProps {\r\n  filter: EventFilter;\r\n  auth: AuthorizedItems;\r\n  onDismissModal: (f: EventFilter, filterApplied: boolean) => void;\r\n  onCancelModal: () => void;\r\n  isOpen: boolean;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst ScheduleFilterModal: React.FC<ScheduleFilterModalProps> = ({\r\n  auth,\r\n  filter,\r\n  onDismissModal,\r\n  onCancelModal,\r\n  isOpen,\r\n}: ScheduleFilterModalProps) => {\r\n  const [myFilter, setMyFilter] = useState(filter);\r\n  const [showCustomEventTypes, setShowCustomEventTypes] = useState(false);\r\n  const [eventGroup, setEventGroup] = useState(EventGroup.ClockAndSched);\r\n  const [eventTypeList, setEventTypeList] = useState(\r\n    getEventTypeOptions(auth, filter)\r\n  );\r\n  const [locationIds, setLocationIds] = useState(\r\n    auth.locations.map((l) => \"\" + l.id)\r\n  );\r\n  const [departmentIds, setDepartmentIds] = useState(\r\n    auth.locations.flatMap((l) => l.departments).map((d) => \"\" + d.id)\r\n  );\r\n  const [positionIds, setPositionIds] = useState(\r\n    auth.locations\r\n      .flatMap((l) => l.departments)\r\n      .flatMap((d) => d.positions)\r\n      .map((p) => \"\" + p.id)\r\n  );\r\n  const [isDirty, setIsDirty] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMyFilter(filter);\r\n  }, [filter]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setIsDirty(false);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const getDefaultFilter = (auth: AuthorizedItems) => {\r\n    return {\r\n      ...initialEventFilter,\r\n      start: filter.start,\r\n      end: filter.end,\r\n      tagId: -1,\r\n      positionIds: auth.locations.flatMap((l) =>\r\n        l.departments.flatMap((d) => d.positions.map((p) => p.id))\r\n      ),\r\n      dnLocIds: auth.locations.map((l) => l.id),\r\n      settingsLocId: auth.locations[0].id,\r\n    };\r\n  };\r\n\r\n  const onReset = () => {\r\n    setShowCustomEventTypes(false);\r\n    setEventGroup(EventGroup.ClockAndSched);\r\n    setEventTypeList(getEventTypeOptions(auth, filter));\r\n    setLocationIds(auth.locations.map((l) => \"\" + l.id));\r\n    setDepartmentIds(\r\n      auth.locations.flatMap((l) => l.departments).map((d) => \"\" + d.id)\r\n    );\r\n    setPositionIds(\r\n      auth.locations\r\n        .flatMap((l) => l.departments)\r\n        .flatMap((d) => d.positions)\r\n        .map((p) => \"\" + p.id)\r\n    );\r\n    setMyFilter(getDefaultFilter(auth));\r\n\r\n    setIsDirty(true);\r\n  };\r\n\r\n  const onEventGroupSelect = (val: EventGroup) => {\r\n    setEventGroup(val);\r\n    setIsDirty(true);\r\n    setMyFilter(getFilterByEventGroup(myFilter, val));\r\n    setShowCustomEventTypes(val === EventGroup.Custom);\r\n  };\r\n\r\n  const onSetLocations = (locIds: string[]) => {\r\n    setLocationIds(locIds);\r\n    setIsDirty(true);\r\n    setDepartmentIds(\r\n      auth.locations\r\n        .filter((l) => locIds.indexOf(l.id.toString()) >= 0)\r\n        .flatMap((l) => l.departments)\r\n        .map((d) => \"\" + d.id)\r\n    );\r\n    setEventTypeList(getEventTypeOptions(auth, myFilter));\r\n  };\r\n\r\n  const onSetDepartmentIds = (deptIds: string[]) => {\r\n    setDepartmentIds(deptIds);\r\n    setIsDirty(true);\r\n    setPositionIds(\r\n      auth.locations\r\n        .filter((l) => locationIds.indexOf(l.id.toString()) >= 0)\r\n        .flatMap((l) => l.departments)\r\n        .flatMap((d) => d.positions)\r\n        .map((p) => \"\" + p.id)\r\n    );\r\n  };\r\n\r\n  const onSetPositionIds = (posIds: string[]) => {\r\n    setPositionIds(posIds);\r\n    setIsDirty(true);\r\n  };\r\n\r\n  const onCloseModal = () => {\r\n    const selectedPositionIds = positionIds.map((p) => parseInt(p));\r\n    const defaultFilter = getDefaultFilter(auth);\r\n    const returnedFilter = { ...myFilter, positionIds: selectedPositionIds };\r\n    const filterApplied = !(\r\n      defaultFilter.eventTypeId === returnedFilter.eventTypeId &&\r\n      defaultFilter.eventStatusId === returnedFilter.eventStatusId &&\r\n      defaultFilter.tagId === returnedFilter.tagId &&\r\n      arrayHelper.areEqual(\r\n        defaultFilter.positionIds,\r\n        returnedFilter.positionIds\r\n      )\r\n    );\r\n\r\n    onDismissModal(returnedFilter, filterApplied);\r\n  };\r\n\r\n  const onCancel = () => {\r\n    onCancelModal();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonButtons slot=\"start\">\r\n            <IonButton onClick={onCancel}>\r\n              <IonIcon icon={arrowBackOutline} mode=\"md\" slot=\"icon-only\" />\r\n            </IonButton>\r\n          </IonButtons>\r\n          <IonTitle>Filter</IonTitle>\r\n          <IonButtons slot=\"end\">\r\n            <IonButton onClick={onReset}>RESET</IonButton>\r\n          </IonButtons>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonContent class=\"outer-content\">\r\n        <IonItem>\r\n          <IonLabel>Events</IonLabel>\r\n          <IonSelect\r\n            value={eventGroup}\r\n            onIonChange={(e) => onEventGroupSelect(e.detail.value)}\r\n            interface=\"action-sheet\"\r\n          >\r\n            <IonSelectOption value={EventGroup.ClockAndSched}>\r\n              Clock + Sched\r\n            </IonSelectOption>\r\n            <IonSelectOption value={EventGroup.Scheduled}>\r\n              Scheduled\r\n            </IonSelectOption>\r\n            <IonSelectOption value={EventGroup.DontWork}>\r\n              Don&apos;t Work\r\n            </IonSelectOption>\r\n            <IonSelectOption value={EventGroup.Custom}>Custom</IonSelectOption>\r\n            <IonSelectOption value={EventGroup.All}>All</IonSelectOption>\r\n          </IonSelect>\r\n        </IonItem>\r\n\r\n        {showCustomEventTypes && (\r\n          <IonItem>\r\n            <IonLabel>Type</IonLabel>\r\n            <IonSelect\r\n              value={myFilter.eventTypeId}\r\n              onIonChange={(e) =>\r\n                setMyFilter({ ...myFilter, eventTypeId: e.detail.value })\r\n              }\r\n              interface=\"action-sheet\"\r\n            >\r\n              {eventTypeList.map((et) => (\r\n                <IonSelectOption key={et.value} value={et.value}>\r\n                  {et.text}\r\n                </IonSelectOption>\r\n              ))}\r\n            </IonSelect>\r\n          </IonItem>\r\n        )}\r\n\r\n        {showCustomEventTypes && (\r\n          <IonItem>\r\n            <IonLabel>Status</IonLabel>\r\n            <IonSelect\r\n              value={myFilter.eventStatusId}\r\n              onIonChange={(e) =>\r\n                setMyFilter({ ...myFilter, eventStatusId: e.detail.value })\r\n              }\r\n              interface=\"action-sheet\"\r\n            >\r\n              <IonSelectOption value={-1}>All</IonSelectOption>\r\n              <IonSelectOption value={1}>Approved</IonSelectOption>\r\n              <IonSelectOption value={2}>Request</IonSelectOption>\r\n              <IonSelectOption value={4}>Request Denied</IonSelectOption>\r\n            </IonSelect>\r\n          </IonItem>\r\n        )}\r\n\r\n        <IonItem>\r\n          <IonLabel>Tags</IonLabel>\r\n          <IonSelect\r\n            value={myFilter.tagId || -1}\r\n            onIonChange={(e) => {\r\n              setMyFilter({ ...myFilter, tagId: e.detail.value });\r\n              setIsDirty(true);\r\n            }}\r\n            interface=\"action-sheet\"\r\n          >\r\n            <IonSelectOption key={-1} value={-1}>\r\n              ALL\r\n            </IonSelectOption>\r\n            {auth.tags.map((tag) => (\r\n              <IonSelectOption key={tag.id} value={tag.id}>\r\n                ~{tag.name}\r\n              </IonSelectOption>\r\n            ))}\r\n          </IonSelect>\r\n        </IonItem>\r\n\r\n        {auth.locations.length > 1 && (\r\n          <IonItem>\r\n            <IonLabel>Locations</IonLabel>\r\n            <IonSelect\r\n              multiple={true}\r\n              onIonChange={(e) => onSetLocations(e.detail.value)}\r\n              value={locationIds}\r\n            >\r\n              {auth.locations.map((loc) => (\r\n                <IonSelectOption key={loc.id} value={loc.id.toString()}>\r\n                  {loc.name}\r\n                </IonSelectOption>\r\n              ))}\r\n            </IonSelect>\r\n          </IonItem>\r\n        )}\r\n\r\n        {auth.locations.flatMap((l) => l.departments).length > 1 && (\r\n          <IonItem>\r\n            <IonLabel>Departments</IonLabel>\r\n            <IonSelect\r\n              multiple={true}\r\n              onIonChange={(e) => onSetDepartmentIds(e.detail.value)}\r\n              value={departmentIds}\r\n            >\r\n              {auth.locations\r\n                .filter((l) => locationIds.indexOf(l.id.toString()) >= 0)\r\n                .map((loc) =>\r\n                  loc.departments.map((dept) => (\r\n                    <IonSelectOption key={dept.id} value={dept.id.toString()}>\r\n                      {loc.abbr}/{dept.name}\r\n                    </IonSelectOption>\r\n                  ))\r\n                )}\r\n            </IonSelect>\r\n          </IonItem>\r\n        )}\r\n\r\n        {auth.locations\r\n          .flatMap((l) => l.departments)\r\n          .flatMap((d) => d.positions).length > 1 && (\r\n          <IonItem>\r\n            <IonLabel>Positions</IonLabel>\r\n            <IonSelect\r\n              multiple={true}\r\n              onIonChange={(e) => onSetPositionIds(e.detail.value)}\r\n              value={positionIds}\r\n            >\r\n              {auth.locations\r\n                .filter((l) => locationIds.indexOf(l.id.toString()) >= 0)\r\n                .flatMap((l) => l.departments)\r\n                .filter((d) => departmentIds.indexOf(d.id.toString()) >= 0)\r\n                .map((dept) =>\r\n                  dept.positions.map((pos) => (\r\n                    <IonSelectOption key={pos.id} value={pos.id.toString()}>\r\n                      {pos.name}\r\n                    </IonSelectOption>\r\n                  ))\r\n                )}\r\n            </IonSelect>\r\n          </IonItem>\r\n        )}\r\n\r\n        <IonButton\r\n          className=\"apply-button\"\r\n          expand=\"block\"\r\n          onClick={onCloseModal}\r\n          disabled={!isDirty}\r\n        >\r\n          APPLY FILTER\r\n        </IonButton>\r\n      </IonContent>\r\n\r\n      <IonFooter>\r\n        <IonToolbar />\r\n      </IonFooter>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ScheduleFilterModal;\r\n","import { IonRefresher, IonRefresherContent } from \"@ionic/react\";\r\nimport React, { useRef } from \"react\";\r\nimport { RefresherEventDetail } from \"@ionic/core\";\r\n\r\nfunction useIonicRefresher(\r\n  doRefresh: (event: CustomEvent<RefresherEventDetail>) => void\r\n) {\r\n  const ionRefresherRef = useRef<HTMLIonRefresherElement>(null);\r\n\r\n  // ----------------------------------------------------------------------------------------------\r\n  const ionicRefresherJsx = (\r\n    <IonRefresher slot=\"fixed\" ref={ionRefresherRef} onIonRefresh={doRefresh}>\r\n      <IonRefresherContent\r\n        pullingText=\"Pull down to refresh\"\r\n        refreshingSpinner=\"dots\"\r\n        refreshingText=\"Refreshing...\"\r\n      />\r\n    </IonRefresher>\r\n  );\r\n\r\n  const retVal = { ionicRefresherJsx };\r\n\r\n  return { ...retVal };\r\n}\r\n\r\nexport default useIonicRefresher;\r\n","export enum RecurrenceType {\r\n  Daily = 0,\r\n  Weekly = 1,\r\n  MonthlyByDayOfMonth = 2,\r\n  MonthlyByDayOfWeek = 3,\r\n  Yearly = 4,\r\n}\r\n","import React, { useEffect, useState } from \"react\";\nimport {\n  IonCol,\n  IonInput,\n  IonLabel,\n  IonRow,\n  IonSelect,\n  IonSelectOption,\n} from \"@ionic/react\";\nimport \"./EventTypeStatusEditor.scss\";\nimport {\n  AuthorizedItems,\n  LocationSettings,\n  Role,\n  TimeFormat,\n} from \"../../../orbital-interfaces/authorized-items\";\nimport { getEventTypeOptions } from \"../../../util/event-helper\";\nimport EventType from \"../../../enums/EventType\";\nimport EventStatus from \"../../../enums/EventStatus\";\nimport { EditorReducerAction, EditorValues } from \"../EditEventModalState\";\nimport {\n  getMinutesFromTimeString,\n  getTimeStringFromMinutes,\n} from \"../../../util/time-helper\";\nimport authHelper from \"../../../util/authitems-helper\";\nimport { Option } from \"../EditEventAuthorization\";\n\ninterface EventTypeStatusEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n  eventTypes: Option[];\n  eventStatuses: Option[];\n}\n\n// --------------------------------------------------------------------------------------\nconst EventTypeStatusEditor: React.FC<EventTypeStatusEditorProps> = ({\n  auth,\n  editorValues,\n  update,\n  eventTypes,\n  eventStatuses,\n}: EventTypeStatusEditorProps) => {\n  const [eventTypeList, setEventTypeList] = useState(\n    getEventTypeOptions(auth, undefined)\n  );\n  const [selectedEventTypeId, setSelectedEventTypeId] = useState(\n    EventType.Shift\n  );\n  const [eventStatusList, setEventStatusList] = useState(\n    null as Option[] | null\n  );\n  const [selectedEventStatusId, setSelectedEventStatusId] = useState(\n    EventStatus.Approved\n  );\n  const [absentHoursPlaceholderText, setAbsentHoursPlaceholderText] = useState(\n    \"Ex: 00:00\"\n  );\n  const [locSettings, setLocSettings] = useState(\n    null as LocationSettings | null\n  );\n  const [absentTimeString, setAbsentTimeString] = useState(\n    null as string | null\n  );\n\n  useEffect(() => {\n    setEventTypeList(eventTypes);\n    setEventStatusList(eventStatuses);\n\n    // If this is an employee and we're creating an event\n    if (\n      auth.role === Role.Employee &&\n      editorValues.scheduleEventId <= 0 &&\n      selectedEventStatusId !== EventStatus.Request\n    ) {\n      update({\n        type: \"TYPESTATUS-UPDATED\",\n        eventType: selectedEventTypeId,\n        eventStatus: EventStatus.Request,\n        absentId: editorValues.absentId,\n        absentTimeMinutes: editorValues.absentTimeMinutes,\n      });\n    }\n\n    if (editorValues.absentId) {\n      setSelectedEventTypeId(editorValues.absentId);\n    } else {\n      setSelectedEventTypeId(editorValues.eventType);\n    }\n\n    setSelectedEventStatusId(eventStatuses[0].value);\n    // eslint-disable-next-line\n  }, [\n    auth,\n    editorValues.eventType,\n    editorValues.eventStatus,\n    editorValues.position,\n    editorValues.absentId,\n    editorValues.scheduleEventId,\n  ]);\n\n  useEffect(() => {\n    if (locSettings) {\n      setAbsentTimeString(\n        editorValues.absentTimeMinutes === null\n          ? null\n          : getTimeStringFromMinutes(\n              locSettings,\n              editorValues.absentTimeMinutes\n            )\n      );\n    }\n  }, [locSettings, editorValues.absentTimeMinutes]);\n\n  useEffect(() => {\n    if (locSettings && editorValues.locationId === locSettings.LocationId) {\n      return;\n    }\n\n    if (!auth || !auth.locations || auth.locations.length === 0) {\n      return;\n    }\n\n    const newLocSettings = authHelper.getLocSettingsForLocationId(\n      auth,\n      editorValues.locationId\n    );\n    setLocSettings(newLocSettings);\n    setAbsentHoursPlaceholderText(\n      newLocSettings.TimeFormat === TimeFormat.HoursMinutes\n        ? \"Ex: 00:00\"\n        : \"Ex: 0.0\"\n    );\n    // eslint-disable-next-line\n  }, [editorValues.locationId]);\n\n  useEffect(() => {\n    if (editorValues.scheduleEventId > 0) {\n      setSelectedEventStatusId(editorValues.eventStatus);\n    }\n  }, [editorValues.eventStatus, editorValues.scheduleEventId]);\n\n  const onEventTypeChange = (newEventType: EventType) => {\n    if (newEventType === editorValues.eventType) {\n      return;\n    }\n    setSelectedEventTypeId(newEventType);\n\n    const newAbsentMinutes =\n      newEventType !== EventType.Absent && newEventType < 100\n        ? null\n        : editorValues.absentTimeMinutes;\n\n    update({\n      type: \"TYPESTATUS-UPDATED\",\n      eventType: newEventType,\n      eventStatus: selectedEventStatusId,\n      absentId: newEventType >= 100 ? newEventType : undefined,\n      absentTimeMinutes: newAbsentMinutes,\n    });\n  };\n\n  const onEventStatusChange = (newEventStatus: EventStatus) => {\n    if (newEventStatus === editorValues.eventStatus) {\n      return;\n    }\n\n    setSelectedEventStatusId(newEventStatus);\n    update({\n      type: \"TYPESTATUS-UPDATED\",\n      eventType: selectedEventTypeId,\n      eventStatus: newEventStatus,\n      absentId: selectedEventTypeId >= 100 ? selectedEventTypeId : undefined,\n      absentTimeMinutes: editorValues.absentTimeMinutes,\n    });\n  };\n\n  const onAbsentTimeChange = (input?: string | null) => {\n    if (input === undefined) {\n      input = null;\n    }\n\n    if (input == null) {\n      update({\n        type: \"TYPESTATUS-UPDATED\",\n        eventType: selectedEventTypeId,\n        eventStatus: selectedEventStatusId,\n        absentId: selectedEventTypeId >= 100 ? selectedEventTypeId : undefined,\n        absentTimeMinutes: null,\n      });\n\n      return;\n    }\n\n    const min = getMinutesFromTimeString(locSettings!, input!);\n    if (min === editorValues.absentTimeMinutes) {\n      return;\n    }\n\n    update({\n      type: \"TYPESTATUS-UPDATED\",\n      eventType: selectedEventTypeId,\n      eventStatus: selectedEventStatusId,\n      absentId: selectedEventTypeId >= 100 ? selectedEventTypeId : undefined,\n      absentTimeMinutes: min,\n    });\n  };\n\n  if (locSettings === null) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <>\n      <IonRow className=\"edit-row\">\n        <IonCol size=\"3\">\n          <IonLabel className=\"label\">Type</IonLabel>\n        </IonCol>\n        <IonCol size=\"9\">\n          <IonSelect\n            className=\"select\"\n            interface=\"popover\"\n            disabled={editorValues.isReadonly}\n            value={selectedEventTypeId}\n            onIonChange={(e) => {\n              onEventTypeChange(e.detail.value);\n            }}\n          >\n            {eventTypeList.map((et) => (\n              <IonSelectOption key={et.value} value={et.value}>\n                {et.text}\n              </IonSelectOption>\n            ))}\n          </IonSelect>\n        </IonCol>\n      </IonRow>\n\n      <IonRow className=\"edit-row\">\n        <IonCol size=\"3\">\n          <IonLabel className=\"label\">Status</IonLabel>\n        </IonCol>\n        <IonCol size=\"9\">\n          <IonSelect\n            className=\"select\"\n            interface=\"popover\"\n            disabled={\n              editorValues.isReadonly ||\n              (auth.role === Role.Employee && editorValues.scheduleEventId <= 0)\n            }\n            value={selectedEventStatusId}\n            onIonChange={(e) => {\n              onEventStatusChange(e.detail.value);\n            }}\n          >\n            {eventStatusList &&\n              eventStatusList.map((es) => (\n                <IonSelectOption key={es.value} value={es.value}>\n                  {es.text}\n                </IonSelectOption>\n              ))}\n          </IonSelect>\n        </IonCol>\n      </IonRow>\n\n      <IonRow\n        className={selectedEventTypeId > 100 ? \"visible edit-row\" : \"invisible\"}\n      >\n        <IonCol size=\"3\">\n          <IonLabel className=\"label\">Hours</IonLabel>\n        </IonCol>\n        <IonCol size=\"9\">\n          <IonInput\n            className=\"input-textbox\"\n            placeholder={absentHoursPlaceholderText}\n            disabled={editorValues.isReadonly}\n            value={absentTimeString}\n            onIonChange={(e) => {\n              if (e.detail.value) {\n                setAbsentTimeString(e.detail.value);\n              }\n            }}\n            onIonBlur={() => {\n              onAbsentTimeChange(absentTimeString);\n            }}\n          />\n        </IonCol>\n      </IonRow>\n    </>\n  );\n};\n\nexport default EventTypeStatusEditor;\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  IonLabel,\r\n  IonSelect,\r\n  IonRow,\r\n  IonCol,\r\n  IonSelectOption,\r\n} from \"@ionic/react\";\r\nimport \"./EventPositionEditor\";\r\nimport {\r\n  AuthorizedItems,\r\n  AuthorizedLocation,\r\n  AuthorizedPosition,\r\n} from \"../../../orbital-interfaces/authorized-items\";\r\nimport { EditorValues, EditorReducerAction } from \"../EditEventModalState\";\r\nimport authHelper from \"../../../util/authitems-helper\";\r\n\r\ninterface EventPositionEditorProps {\r\n  auth: AuthorizedItems;\r\n  editorValues: EditorValues;\r\n  update: React.Dispatch<EditorReducerAction>;\r\n}\r\n\r\ninterface Option {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst createPositionList = (loc: AuthorizedLocation[]): Option[] => {\r\n  const isMultiLoc = loc.length > 1;\r\n  return loc.flatMap((l) =>\r\n    l.departments.flatMap((d) =>\r\n      d.positions.map((p) => {\r\n        const isMultiDep = l.departments.length > 1;\r\n        let name = \"\";\r\n        if (isMultiLoc) {\r\n          name += (l.abbr ? l.abbr : l.name) + \"/\";\r\n        }\r\n\r\n        if (isMultiDep) {\r\n          name += (d.abbr ? d.abbr : d.name) + \"/\";\r\n        }\r\n\r\n        name += p.name;\r\n        return { id: p.id, name: name };\r\n      })\r\n    )\r\n  );\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst EventPositionEditor: React.FC<EventPositionEditorProps> = ({\r\n  auth,\r\n  editorValues,\r\n  update,\r\n}: EventPositionEditorProps) => {\r\n  const [selectedPosition, setSelectedPosition] = useState({\r\n    location: {} as AuthorizedLocation,\r\n    position: {} as AuthorizedPosition,\r\n  });\r\n  const [positionList, setPositionList] = useState([] as Option[]);\r\n\r\n  useEffect(() => {\r\n    if (auth && auth.locations && auth.locations.length > 0) {\r\n      if (editorValues.position && editorValues.scheduleEventId > 0) {\r\n        const selPos = authHelper.getSelectedPositionWithLocId(\r\n          auth.locations,\r\n          editorValues.position.location.id,\r\n          editorValues.position.position.id\r\n        );\r\n        if (selPos.position.id !== selectedPosition.position.id) {\r\n          setSelectedPosition(selPos);\r\n        }\r\n      } else {\r\n        const selPos = authHelper.getSelectedPositionWithLocId(\r\n          auth.locations,\r\n          auth.locations[0].id,\r\n          auth.locations[0].departments[0].positions[0].id\r\n        );\r\n        setSelectedPosition(selPos);\r\n      }\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [editorValues.position, auth]);\r\n\r\n  useEffect(() => {\r\n    if (auth && auth.locations && auth.locations.length > 0) {\r\n      setPositionList(createPositionList(auth.locations));\r\n    }\r\n  }, [auth]);\r\n\r\n  const updatePosition = (posId: number) => {\r\n    const selected = authHelper.getSelectedPosition(auth.locations, posId);\r\n    if (selected.position.id === editorValues.position.position.id) {\r\n      return;\r\n    }\r\n\r\n    setSelectedPosition(selected);\r\n    update({ type: \"POSITION-UPDATED\", selectedPosition: selected });\r\n  };\r\n\r\n  return (\r\n    <IonRow className=\"edit-row\">\r\n      <IonCol size=\"3\">\r\n        <IonLabel className=\"label\">Position</IonLabel>\r\n      </IonCol>\r\n      <IonCol size=\"9\">\r\n        <IonSelect\r\n          className=\"select\"\r\n          interface=\"popover\"\r\n          disabled={editorValues.isReadonly}\r\n          value={selectedPosition.position.id}\r\n          onIonChange={(e) => updatePosition(e.detail.value)}\r\n        >\r\n          {positionList.map((p) => (\r\n            <IonSelectOption key={p.id} value={p.id}>\r\n              {p.name}\r\n            </IonSelectOption>\r\n          ))}\r\n        </IonSelect>\r\n      </IonCol>\r\n    </IonRow>\r\n  );\r\n};\r\n\r\nexport default EventPositionEditor;\r\n","import { EmployeeSort } from \"../orbital-interfaces/authorized-items\";\r\nimport { Employee } from \"../orbital-interfaces/Employee\";\r\nimport { ApplicationUser } from \"../context/ApplicationUserContext\";\r\nimport { formatDateTimeAsMvcString } from \"../util/time-helper\";\r\nimport apiHelper from \"./OrbitalApiHelper\";\r\n\r\nconst getEmployeesByLocationIdPositionIdAndActiveDateRange = async (\r\n  user: ApplicationUser,\r\n  locId: number,\r\n  posId: number,\r\n  start: Date,\r\n  end: Date,\r\n  sort: EmployeeSort\r\n) => {\r\n  const data = {\r\n    locId,\r\n    posId,\r\n    start: formatDateTimeAsMvcString(start),\r\n    end: formatDateTimeAsMvcString(end),\r\n    sort,\r\n  };\r\n\r\n  return (await apiHelper.post(\r\n    user,\r\n    \"api/v2/employees/at-position\",\r\n    data\r\n  )) as Employee[];\r\n};\r\n\r\nexport default {\r\n  getEmployeesByLocationIdPositionIdAndActiveDateRange,\r\n};\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport {\r\n  IonLabel,\r\n  IonSelect,\r\n  IonRow,\r\n  IonCol,\r\n  IonSelectOption,\r\n} from \"@ionic/react\";\r\nimport \"./EventEmployeeEditor\";\r\nimport { AuthorizedItems } from \"../../../orbital-interfaces/authorized-items\";\r\nimport { Employee } from \"../../../orbital-interfaces/Employee\";\r\nimport employeeAPI from \"../../../api/EmployeesAPI\";\r\nimport { ApplicationUserContext } from \"../../../context/ApplicationUserContext\";\r\nimport { parseISO } from \"date-fns\";\r\nimport { EditorValues, EditorReducerAction } from \"../EditEventModalState\";\r\n\r\ninterface EventEmployeeEditorProps {\r\n  auth: AuthorizedItems;\r\n  editorValues: EditorValues;\r\n  update: React.Dispatch<EditorReducerAction>;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst EventEmployeeEditor: React.FC<EventEmployeeEditorProps> = ({\r\n  auth,\r\n  editorValues,\r\n  update,\r\n}: EventEmployeeEditorProps) => {\r\n  const [employeeList, setEmployeeList] = useState([] as Employee[]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [selectedEmployeeId, setSelectedEmployeeId] = useState(-1);\r\n  const { user } = useContext(ApplicationUserContext);\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    // eslint-disable-next-line\r\n    if (user && user.isLoggedin && editorValues.scheduleEventId !== -1) {\r\n      setIsLoading(true);\r\n      getEmployees(editorValues);\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [user, editorValues.position, editorValues.scheduleEventId]);\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  const onChange = (employeeId: number) => {\r\n    if (employeeId === -5 || employeeId === editorValues.employee.id) {\r\n      return;\r\n    }\r\n\r\n    setSelectedEmployeeId(employeeId);\r\n    const emp = employeeList.filter((e) => e.EmployeeId === employeeId)[0];\r\n    if (employeeId === -1) {\r\n      update({\r\n        type: \"EMPLOYEE-UPDATED\",\r\n        employee: { id: -1, name: \"SELECT EMPLOYEE\" },\r\n      });\r\n    } else {\r\n      update({\r\n        type: \"EMPLOYEE-UPDATED\",\r\n        employee: { id: employeeId, name: emp.FullName },\r\n      });\r\n    }\r\n  };\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  const getEmployees = (ev: EditorValues) => {\r\n    employeeAPI\r\n      .getEmployeesByLocationIdPositionIdAndActiveDateRange(\r\n        user,\r\n        editorValues.position.location.id,\r\n        editorValues.position.position.id,\r\n        parseISO(editorValues.eventStart),\r\n        parseISO(editorValues.eventEnd),\r\n        editorValues.position.location.settings.EmployeeSort\r\n      )\r\n      .then((employees) => {\r\n        setEmployeeList(employees);\r\n        const empIds = employees.map((e) => e.EmployeeId);\r\n\r\n        if (\r\n          editorValues.scheduleEventId === 0 &&\r\n          empIds.includes(auth.employeeId)\r\n        ) {\r\n          setSelectedEmployeeId(auth.employeeId);\r\n          const thisEmp = employees.filter(\r\n            (e) => e.EmployeeId === auth.employeeId\r\n          )[0];\r\n          update({\r\n            type: \"EMPLOYEE-UPDATED\",\r\n            employee: { id: thisEmp.EmployeeId, name: thisEmp.FullName },\r\n          });\r\n        } else {\r\n          const newSelectedEmployeeId = empIds.includes(ev.employee.id)\r\n            ? ev.employee.id\r\n            : -1;\r\n\r\n          setSelectedEmployeeId(newSelectedEmployeeId);\r\n        }\r\n\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  if (\r\n    isLoading ||\r\n    editorValues.scheduleEventId === -1 ||\r\n    employeeList.length === 0\r\n  ) {\r\n    return (\r\n      <IonRow className=\"edit-row\">\r\n        <IonCol size=\"3\">\r\n          <IonLabel className=\"label\">Employee</IonLabel>\r\n        </IonCol>\r\n        <IonCol size=\"9\">\r\n          <IonSelect className=\"select\" interface=\"popover\" value={-5}>\r\n            <IonSelectOption key=\"-5\" value=\"-5\">\r\n              {editorValues.employee.name}\r\n            </IonSelectOption>\r\n          </IonSelect>\r\n        </IonCol>\r\n      </IonRow>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <IonRow className=\"edit-row\">\r\n      <IonCol size=\"3\">\r\n        <IonLabel className=\"label\">Employee</IonLabel>\r\n      </IonCol>\r\n      <IonCol size=\"9\">\r\n        <IonSelect\r\n          className=\"select\"\r\n          interface=\"popover\"\r\n          disabled={editorValues.isReadonly}\r\n          value={selectedEmployeeId}\r\n          onIonChange={(e) => {\r\n            onChange(e.detail.value);\r\n          }}\r\n        >\r\n          <IonSelectOption key={-1} value={-1}>\r\n            Select Employee\r\n          </IonSelectOption>\r\n          {employeeList.map((emp) => (\r\n            <IonSelectOption key={emp.EmployeeId} value={emp.EmployeeId}>\r\n              {emp.FullName}\r\n            </IonSelectOption>\r\n          ))}\r\n        </IonSelect>\r\n      </IonCol>\r\n    </IonRow>\r\n  );\r\n};\r\n\r\nexport default EventEmployeeEditor;\r\n","import React from \"react\";\r\nimport { IonLabel, IonRow, IonCol, IonDatetime } from \"@ionic/react\";\r\nimport \"./EventStartEndEditor\";\r\nimport { AuthorizedItems } from \"../../../orbital-interfaces/authorized-items\";\r\nimport { parseISO } from \"date-fns\";\r\nimport { EditorValues, EditorReducerAction } from \"../EditEventModalState\";\r\n\r\ninterface EventStartEndEditorProps {\r\n  auth: AuthorizedItems;\r\n  editorValues: EditorValues;\r\n  update: React.Dispatch<EditorReducerAction>;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst EventStartEndEditor: React.FC<EventStartEndEditorProps> = ({\r\n  editorValues,\r\n  update,\r\n}: EventStartEndEditorProps) => {\r\n  const onStartChange = (newEventStart?: string | null) => {\r\n    if (!newEventStart) {\r\n      return;\r\n    }\r\n\r\n    if (parseISO(newEventStart) === parseISO(editorValues.eventStart)) {\r\n      return;\r\n    }\r\n\r\n    update({\r\n      type: \"START-UPDATED\",\r\n      eventStart: newEventStart,\r\n    });\r\n  };\r\n\r\n  const onEndChange = (newEventEnd?: string | null) => {\r\n    if (!newEventEnd) {\r\n      return;\r\n    }\r\n\r\n    if (parseISO(newEventEnd) === parseISO(editorValues.eventEnd)) {\r\n      return;\r\n    }\r\n\r\n    update({\r\n      type: \"END-UPDATED\",\r\n      eventEnd: newEventEnd,\r\n    });\r\n  };\r\n\r\n  if (!editorValues || !editorValues.eventStart) {\r\n    return <div>Loading</div>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <IonRow className=\"edit-row\">\r\n        <IonCol size=\"3\">\r\n          <IonLabel className=\"label\">Start</IonLabel>\r\n        </IonCol>\r\n        <IonCol size=\"9\">\r\n          <IonDatetime\r\n            className=\"select\"\r\n            displayFormat=\"M/D/YY h:mma\"\r\n            disabled={editorValues.isReadonly}\r\n            pickerFormat=\"MMM DD YYYY h:mm A\"\r\n            min=\"2005-01-01\"\r\n            max=\"2030-01-01\"\r\n            minuteValues=\"0,5,10,15,20,25,30,35,40,45,50,55\"\r\n            value={editorValues.eventStart}\r\n            onIonChange={(e) => {\r\n              onStartChange(e.detail.value);\r\n            }}\r\n          />\r\n        </IonCol>\r\n      </IonRow>\r\n\r\n      <IonRow className=\"edit-row\">\r\n        <IonCol size=\"3\">\r\n          <IonLabel className=\"label\">End</IonLabel>\r\n        </IonCol>\r\n        <IonCol size=\"9\">\r\n          <IonDatetime\r\n            className=\"select\"\r\n            displayFormat=\"M/D/YY h:mma\"\r\n            disabled={editorValues.isReadonly || editorValues.isClockedIn}\r\n            pickerFormat=\"MMM DD YYYY h:mm A\"\r\n            min=\"2005-01-01\"\r\n            max=\"2030-01-01\"\r\n            minuteValues=\"0,5,10,15,20,25,30,35,40,45,50,55\"\r\n            value={editorValues.eventEnd}\r\n            onIonChange={(e) => {\r\n              onEndChange(e.detail.value);\r\n            }}\r\n          />\r\n        </IonCol>\r\n      </IonRow>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EventStartEndEditor;\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  IonCheckbox,\r\n  IonDatetime,\r\n  IonContent,\r\n  IonRow,\r\n  IonCol,\r\n  IonButton,\r\n  IonFooter,\r\n  IonGrid,\r\n  IonHeader,\r\n  IonTitle,\r\n  IonToolbar,\r\n} from \"@ionic/react\";\r\nimport \"./AddBreakModal.scss\";\r\nimport {\r\n  setHours,\r\n  setMinutes,\r\n  parseISO,\r\n  isAfter,\r\n  isBefore,\r\n  addMinutes,\r\n} from \"date-fns\";\r\nimport useDialogBox from \"../../../hooks/useDialogBox\";\r\nimport { EventBreak } from \"../../../orbital-interfaces/EventBreak\";\r\n\r\ninterface AddBreakModalProps {\r\n  onCancel: () => void;\r\n  onAdd: (\r\n    startDate: Date,\r\n    endDate: Date,\r\n    isRestricted: boolean,\r\n    isPaid: boolean\r\n  ) => void;\r\n  currentBreaks: EventBreak[];\r\n  eventStart: string;\r\n  eventEnd: string;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst hasOverlap = (start: Date, end: Date, breaks: EventBreak[]) => {\r\n  const startA = start;\r\n  const endA = end;\r\n  let found = false;\r\n  breaks.map((brk) => {\r\n    const startB = addMinutes(parseISO(brk.BreakStart), 3);\r\n    const endB = brk.BreakEnd\r\n      ? addMinutes(parseISO(brk.BreakEnd!), -3)\r\n      : new Date(2200, 1, 1);\r\n    if (startA < endB && endA > startB) {\r\n      found = true;\r\n    }\r\n\r\n    return found;\r\n  });\r\n  return found;\r\n};\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst AddBreakModal: React.FC<AddBreakModalProps> = ({\r\n  onCancel,\r\n  onAdd,\r\n  currentBreaks,\r\n  eventStart,\r\n  eventEnd,\r\n}: AddBreakModalProps) => {\r\n  const [startDate, setStartDate] = useState(\r\n    setMinutes(setHours(new Date(), 12), 0)\r\n  );\r\n  const [endDate, setEndDate] = useState(\r\n    setMinutes(setHours(new Date(), 13), 0)\r\n  );\r\n  const [isRestricted, setIsRestricted] = useState(false);\r\n  const [isPaid, setIsPaid] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [isValid, setIsValid] = useState(true);\r\n  const alert = useDialogBox();\r\n\r\n  const onAddClick = () => {\r\n    if (startDate > endDate) {\r\n      alert.showAlert(\r\n        \"Invalid Start / End\",\r\n        \"Start of break cannot come after end of break.\",\r\n        () => {}\r\n      );\r\n    } else {\r\n      onAdd(startDate, endDate, isRestricted, isPaid);\r\n    }\r\n  };\r\n\r\n  const onStartUpdate = (newStart: string) => {\r\n    const newStartDate = parseISO(newStart);\r\n    setStartDate(newStartDate);\r\n    console.log(currentBreaks);\r\n    if (!isBefore(newStartDate, endDate)) {\r\n      setIsValid(false);\r\n      setErrorMessage(\"Start must be before End\");\r\n    } else if (parseISO(eventStart) > newStartDate) {\r\n      setIsValid(false);\r\n      setErrorMessage(\"Start before Event begins\");\r\n    } else if (hasOverlap(newStartDate, endDate, currentBreaks)) {\r\n      setIsValid(false);\r\n      setErrorMessage(\"Pre-existing break overlaps\");\r\n    } else {\r\n      setIsValid(true);\r\n      setErrorMessage(\"\");\r\n    }\r\n  };\r\n\r\n  const onEndUpdate = (newEnd: string) => {\r\n    const newEndDate = parseISO(newEnd);\r\n    setEndDate(newEndDate);\r\n\r\n    if (!isAfter(newEndDate, startDate)) {\r\n      setIsValid(false);\r\n      setErrorMessage(\"End must be after Start\");\r\n    } else if (newEndDate > parseISO(eventEnd)) {\r\n      setIsValid(false);\r\n      setErrorMessage(\"End after Event ends\");\r\n    } else if (hasOverlap(startDate, newEndDate, currentBreaks)) {\r\n      setIsValid(false);\r\n      setErrorMessage(\"Pre-existing break overlaps\");\r\n    } else {\r\n      setIsValid(true);\r\n      setErrorMessage(\"\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <IonContent>\r\n        <IonHeader mode=\"ios\">\r\n          <IonToolbar>\r\n            <IonTitle>Add Break</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonGrid>\r\n          <IonRow>\r\n            <IonCol className=\"label\" size=\"3\">\r\n              Start\r\n            </IonCol>\r\n            <IonCol size=\"9\">\r\n              <IonDatetime\r\n                className=\"select\"\r\n                displayFormat=\"h:mm a\"\r\n                pickerFormat=\"h:mm A\"\r\n                min=\"2005-01-01\"\r\n                max=\"2030-01-01\"\r\n                minuteValues=\"0,5,10,15,20,25,30,35,40,45,50,55\"\r\n                value={startDate.toISOString()}\r\n                onIonChange={(e) => onStartUpdate(e.detail.value!)}\r\n              />\r\n            </IonCol>\r\n          </IonRow>\r\n          <IonRow>\r\n            <IonCol className=\"label\" size=\"3\">\r\n              End\r\n            </IonCol>\r\n            <IonCol size=\"9\">\r\n              <IonDatetime\r\n                className=\"select\"\r\n                displayFormat=\"h:mm a\"\r\n                pickerFormat=\"h:mm A\"\r\n                min=\"2005-01-01\"\r\n                max=\"2030-01-01\"\r\n                minuteValues=\"0,5,10,15,20,25,30,35,40,45,50,55\"\r\n                value={endDate.toISOString()}\r\n                onIonChange={(e) => onEndUpdate(e.detail.value!)}\r\n              />\r\n            </IonCol>\r\n          </IonRow>\r\n\r\n          <IonRow>\r\n            <IonCol className=\"label\" size=\"3\" />\r\n            <IonCol size=\"9\" className=\"error-message\">\r\n              {errorMessage}\r\n            </IonCol>\r\n          </IonRow>\r\n\r\n          <IonRow>\r\n            <IonCol size=\"12\">\r\n              <div style={{ width: \"100%\", borderBottom: \"1px solid #AAA\" }} />\r\n            </IonCol>\r\n          </IonRow>\r\n          <IonRow>\r\n            <IonCol size=\"3\">\r\n              <IonCheckbox\r\n                className=\"checkbox\"\r\n                checked={isRestricted}\r\n                onIonChange={(e) => {\r\n                  setIsRestricted(e.detail.checked);\r\n                }}\r\n              />\r\n            </IonCol>\r\n            <IonCol className=\"label\" size=\"9\">\r\n              Restricted Break\r\n            </IonCol>\r\n          </IonRow>\r\n          <IonRow>\r\n            <IonCol size=\"3\">\r\n              <IonCheckbox\r\n                className=\"checkbox\"\r\n                onIonChange={(e) => {\r\n                  setIsPaid(e.detail.checked);\r\n                }}\r\n              />\r\n            </IonCol>\r\n            <IonCol className=\"label\" size=\"9\">\r\n              Paid Break\r\n            </IonCol>\r\n          </IonRow>\r\n        </IonGrid>\r\n      </IonContent>\r\n      <IonFooter>\r\n        <IonButton\r\n          expand=\"block\"\r\n          color=\"secondary\"\r\n          onClick={onAddClick}\r\n          disabled={!isValid}\r\n        >\r\n          ADD\r\n        </IonButton>\r\n\r\n        <IonButton expand=\"block\" onClick={onCancel}>\r\n          CANCEL\r\n        </IonButton>\r\n      </IonFooter>\r\n      {alert.alertBoxJsx}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddBreakModal;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { IonModal, IonRow, IonCol, IonButton, IonIcon } from \"@ionic/react\";\r\nimport \"./EventBreakEditor.scss\";\r\nimport { add, trash, lockClosed, logoUsd } from \"ionicons/icons\";\r\nimport { AuthorizedItems } from \"../../../orbital-interfaces/authorized-items\";\r\nimport { EventBreak } from \"../../../orbital-interfaces/EventBreak\";\r\nimport {\r\n  getBreakStartEnd,\r\n  formatDateTimeAsMvcString,\r\n} from \"../../../util/time-helper\";\r\nimport AddBreakModal from \"./AddBreakModal\";\r\nimport { EditorValues, EditorReducerAction } from \"../EditEventModalState\";\r\nimport EventType from \"../../../enums/EventType\";\r\nimport authHelper from \"../../../util/authitems-helper\";\r\n\r\ninterface EventBreakEditorProps {\r\n  auth: AuthorizedItems;\r\n  editorValues: EditorValues;\r\n  update: React.Dispatch<EditorReducerAction>;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst EventBreakEditor: React.FC<EventBreakEditorProps> = ({\r\n  editorValues,\r\n  update,\r\n}: EventBreakEditorProps) => {\r\n  const [breakList, setBreakList] = useState([] as EventBreak[]);\r\n  const [showBreakModal, setShowBreakModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setBreakList(editorValues.eventBreaks);\r\n  }, [editorValues.eventBreaks]);\r\n\r\n  const showRestricted = (b: EventBreak) => {\r\n    return b.IsRestricted ? (\r\n      <IonIcon className=\"restricted-icon\" icon={lockClosed} />\r\n    ) : (\r\n      <span />\r\n    );\r\n  };\r\n\r\n  const showPaid = (b: EventBreak) => {\r\n    return b.IsPaidBreak ? (\r\n      <IonIcon className=\"paid-icon\" icon={logoUsd} />\r\n    ) : (\r\n      <span />\r\n    );\r\n  };\r\n\r\n  const onAddBreakModalCancel = () => {\r\n    setShowBreakModal(false);\r\n  };\r\n\r\n  const onAddBreakModalApply = (\r\n    startDate: Date,\r\n    endDate: Date,\r\n    isRestricted: boolean,\r\n    isPaid: boolean\r\n  ) => {\r\n    setShowBreakModal(false);\r\n    const brk: EventBreak = {\r\n      BreakStart: formatDateTimeAsMvcString(startDate),\r\n      BreakEnd: formatDateTimeAsMvcString(endDate),\r\n      IsRestricted: isRestricted,\r\n      IsPaidBreak: isPaid,\r\n      ScheduleEventId: editorValues.scheduleEventId,\r\n    };\r\n\r\n    const newBreakList = [...breakList, brk];\r\n    setBreakList(newBreakList);\r\n    update({ type: \"EVENTBREAKS-UPDATED\", breaks: newBreakList });\r\n  };\r\n\r\n  const onDeleteBreak = (breakStart: string) => {\r\n    const newBreakList = breakList.filter((b) => b.BreakStart !== breakStart);\r\n    setBreakList(newBreakList);\r\n    update({ type: \"EVENTBREAKS-UPDATED\", breaks: newBreakList });\r\n  };\r\n\r\n  if (\r\n    editorValues.eventType !== EventType.Clock &&\r\n    !authHelper.isShiftTypeEvent(\r\n      editorValues.eventType,\r\n      editorValues.eventStatus\r\n    )\r\n  ) {\r\n    return <div />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <IonRow className=\"edit-row\" style={{ marginBottom: \"20px\" }}>\r\n        <IonCol size=\"3\">\r\n          <IonButton\r\n            color=\"light\"\r\n            disabled={editorValues.isReadonly}\r\n            onClick={() => {\r\n              setShowBreakModal(true);\r\n            }}\r\n          >\r\n            <IonIcon slot=\"icon-only\" icon={add} color=\"dark\" />\r\n          </IonButton>\r\n        </IonCol>\r\n        <IonCol size=\"9\">\r\n          {(!breakList || breakList.length === 0) && (\r\n            <div className=\"break-div\">(B) NONE</div>\r\n          )}\r\n\r\n          {breakList &&\r\n            breakList.map((brk) => (\r\n              <div key={brk.BreakStart} className=\"break-div\">\r\n                (B) {getBreakStartEnd(brk)}\r\n                {showPaid(brk)}\r\n                {showRestricted(brk)}\r\n                <button\r\n                  disabled={editorValues.isReadonly}\r\n                  onClick={() => {\r\n                    onDeleteBreak(brk.BreakStart);\r\n                  }}\r\n                >\r\n                  <IonIcon\r\n                    slot=\"icon-only\"\r\n                    mode=\"ios\"\r\n                    icon={trash}\r\n                    color=\"gray\"\r\n                  />\r\n                </button>\r\n              </div>\r\n            ))}\r\n        </IonCol>\r\n      </IonRow>\r\n\r\n      <IonModal\r\n        isOpen={showBreakModal}\r\n        cssClass=\"add-break-modal\"\r\n        onDidDismiss={() => setShowBreakModal(false)}\r\n      >\r\n        <AddBreakModal\r\n          onCancel={onAddBreakModalCancel}\r\n          onAdd={onAddBreakModalApply}\r\n          currentBreaks={breakList}\r\n          eventStart={editorValues.eventStart}\r\n          eventEnd={editorValues.eventEnd}\r\n        />\r\n      </IonModal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EventBreakEditor;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  IonLabel,\r\n  IonSelect,\r\n  IonRow,\r\n  IonCol,\r\n  IonSelectOption,\r\n} from \"@ionic/react\";\r\nimport \"./EventTagEditor\";\r\nimport { AuthorizedItems } from \"../../../orbital-interfaces/authorized-items\";\r\nimport { EditorValues, EditorReducerAction } from \"../EditEventModalState\";\r\n\r\ninterface EventTagEditorProps {\r\n  auth: AuthorizedItems;\r\n  editorValues: EditorValues;\r\n  update: React.Dispatch<EditorReducerAction>;\r\n}\r\n\r\ninterface TagList {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst EventTagEditor: React.FC<EventTagEditorProps> = ({\r\n  auth,\r\n  editorValues,\r\n  update,\r\n}: EventTagEditorProps) => {\r\n  const [selectedTagId, setSelectedTagId] = useState(-1);\r\n  const [tagList, setTagList] = useState([] as TagList[]);\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    if (auth && auth.locations && auth.locations.length > 0) {\r\n      const tags = auth.tags\r\n        .filter((t) =>\r\n          t.positionIds.includes(editorValues.position.position.id)\r\n        )\r\n        .map((t) => {\r\n          return { id: t.id, name: t.name };\r\n        });\r\n      setTagList(tags);\r\n\r\n      const tagIds = tags.map((t) => t.id);\r\n      if (!tagIds.includes(selectedTagId)) {\r\n        if (\r\n          editorValues.tag &&\r\n          editorValues.tag.id &&\r\n          tagIds.includes(editorValues.tag.id)\r\n        ) {\r\n          setSelectedTagId(editorValues.tag.id);\r\n        } else {\r\n          setSelectedTagId(-1);\r\n        }\r\n      }\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [auth, editorValues.position]);\r\n\r\n  const onUpdateTag = (tagId: number) => {\r\n    setSelectedTagId(tagId);\r\n\r\n    if (tagId === editorValues.tag.id) {\r\n      return;\r\n    }\r\n\r\n    if (tagId === -1) {\r\n      update({ type: \"TAG-UPDATED\", tag: { id: -1, name: \"NONE\" } });\r\n    } else {\r\n      const tag = tagList.filter((t) => t.id === tagId)[0];\r\n      update({ type: \"TAG-UPDATED\", tag });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IonRow className=\"edit-row\">\r\n      <IonCol size=\"3\">\r\n        <IonLabel className=\"label\">Tag</IonLabel>\r\n      </IonCol>\r\n      <IonCol size=\"9\">\r\n        <IonSelect\r\n          className=\"select\"\r\n          interface=\"popover\"\r\n          disabled={editorValues.isReadonly}\r\n          value={selectedTagId}\r\n          onIonChange={(e) => {\r\n            onUpdateTag(e.detail.value);\r\n          }}\r\n        >\r\n          <IonSelectOption value={-1}>NONE</IonSelectOption>\r\n\r\n          {tagList.map((tag) => (\r\n            <IonSelectOption key={tag.id} value={tag.id}>\r\n              {tag.name}\r\n            </IonSelectOption>\r\n          ))}\r\n        </IonSelect>\r\n      </IonCol>\r\n    </IonRow>\r\n  );\r\n};\r\n\r\nexport default EventTagEditor;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { IonLabel, IonCheckbox, IonCol } from \"@ionic/react\";\r\nimport \"./EventStartEndEditor\";\r\nimport { AuthorizedItems } from \"../../../orbital-interfaces/authorized-items\";\r\nimport { EditorValues, EditorReducerAction } from \"../EditEventModalState\";\r\nimport EventType from \"../../../enums/EventType\";\r\nimport EventStatus from \"../../../enums/EventStatus\";\r\n\r\ninterface EventConfirmEditorProps {\r\n  auth: AuthorizedItems;\r\n  editorValues: EditorValues;\r\n  update: React.Dispatch<EditorReducerAction>;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst EventConfirmEditor: React.FC<EventConfirmEditorProps> = ({\r\n  auth,\r\n  editorValues,\r\n  update,\r\n}: EventConfirmEditorProps) => {\r\n  const [isConfirmed, setIsConfirmed] = useState(false);\r\n  const [showConfirmed, setShowConfirmed] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (auth && auth.locations && auth.locations.length > 0) {\r\n      setIsConfirmed(editorValues.isConfirmed);\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [\r\n    auth,\r\n    editorValues.eventStart,\r\n    editorValues.eventEnd,\r\n    editorValues.isClockedIn,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const isConfirmable =\r\n      (editorValues.eventType === EventType.Shift &&\r\n        editorValues.eventStatus === EventStatus.Approved) ||\r\n      (editorValues.eventType === EventType.Cover &&\r\n        (editorValues.eventStatus === EventStatus.Request ||\r\n          editorValues.eventStatus === EventStatus.RequestDenied));\r\n    setShowConfirmed(isConfirmable);\r\n  }, [editorValues.eventType, editorValues.eventStatus]);\r\n\r\n  const onCheckChange = (checked: boolean) => {\r\n    if (checked === isConfirmed || !showConfirmed) {\r\n      return;\r\n    }\r\n\r\n    setIsConfirmed(checked);\r\n    update({\r\n      type: \"CONFIRM-UPDATED\",\r\n      isConfirmed: checked,\r\n    });\r\n  };\r\n\r\n  if (!showConfirmed) {\r\n    return (\r\n      <>\r\n        <IonCol size=\"1\">\r\n          <span />\r\n        </IonCol>\r\n        <IonCol size=\"2\">\r\n          <span />\r\n        </IonCol>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <IonCol size=\"1\">\r\n        <IonCheckbox\r\n          checked={isConfirmed}\r\n          onIonChange={(e) => {\r\n            onCheckChange(e.detail.checked);\r\n          }}\r\n        />\r\n      </IonCol>\r\n      <IonCol size=\"2\">\r\n        <IonLabel className=\"label\">Confirm</IonLabel>\r\n      </IonCol>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EventConfirmEditor;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { IonLabel, IonCheckbox, IonCol, IonIcon } from \"@ionic/react\";\r\nimport \"./EventStartEndEditor\";\r\nimport { AuthorizedItems } from \"../../../orbital-interfaces/authorized-items\";\r\nimport { EditorValues, EditorReducerAction } from \"../EditEventModalState\";\r\nimport EventType from \"../../../enums/EventType\";\r\nimport { time } from \"ionicons/icons\";\r\n\r\ninterface EventIsClockedInEditorProps {\r\n  auth: AuthorizedItems;\r\n  editorValues: EditorValues;\r\n  update: React.Dispatch<EditorReducerAction>;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst EventIsClockedInEditor: React.FC<EventIsClockedInEditorProps> = ({\r\n  auth,\r\n  editorValues,\r\n  update,\r\n}: EventIsClockedInEditorProps) => {\r\n  const [isClockedIn, setIsClockedIn] = useState(false);\r\n  const [showIsClockedIn, setShowIsClockedIn] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (auth && auth.locations && auth.locations.length > 0) {\r\n      setIsClockedIn(editorValues.isClockedIn);\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [\r\n    auth,\r\n    editorValues.eventStart,\r\n    editorValues.eventEnd,\r\n    editorValues.isClockedIn,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    setShowIsClockedIn(editorValues.eventType === EventType.Clock);\r\n  }, [editorValues.eventType, editorValues.eventStatus]);\r\n\r\n  const onCheckChange = (checked: boolean) => {\r\n    if (checked === isClockedIn || !showIsClockedIn) {\r\n      return;\r\n    }\r\n\r\n    setIsClockedIn(checked);\r\n    update({\r\n      type: \"ISCLOCKEDIN-UPDATED\",\r\n      isClockedIn: checked,\r\n    });\r\n  };\r\n\r\n  if (!showIsClockedIn) {\r\n    return (\r\n      <>\r\n        <IonCol size=\"1\">\r\n          <span />\r\n        </IonCol>\r\n        <IonCol size=\"4\">\r\n          <span />\r\n        </IonCol>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <IonCol size=\"1\">\r\n        <IonCheckbox\r\n          checked={isClockedIn}\r\n          onIonChange={(e) => {\r\n            onCheckChange(e.detail.checked);\r\n          }}\r\n        />\r\n      </IonCol>\r\n      <IonCol size=\"4\">\r\n        <IonLabel className=\"label\">\r\n          <IonIcon\r\n            icon={time}\r\n            style={{ paddingRight: \"5px\", marginLeft: \"-5px\" }}\r\n          />\r\n          Clocked In\r\n        </IonLabel>\r\n      </IonCol>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EventIsClockedInEditor;\r\n","import { ScheduleEvent } from \"../../orbital-interfaces/ScheduleEvent\";\r\nimport { SelectedPosition } from \"../../util/authitems-helper\";\r\nimport { EventBreak } from \"../../orbital-interfaces/EventBreak\";\r\nimport {\r\n  isAfter,\r\n  isBefore,\r\n  isEqual,\r\n  parseISO,\r\n  setHours,\r\n  setMinutes,\r\n} from \"date-fns\";\r\nimport { formatDateTimeAsMvcString } from \"../../util/time-helper\";\r\nimport EventType from \"../../enums/EventType\";\r\nimport EventStatus from \"../../enums/EventStatus\";\r\nimport {\r\n  AuthorizedItems,\r\n  AuthorizedLocation,\r\n  AuthorizedPosition,\r\n  LocationSettings,\r\n} from \"../../orbital-interfaces/authorized-items\";\r\nimport { EventEditAuthorization } from \"./EditEventAuthorization\";\r\nimport { RecurrenceType } from \"../../enums/RecurrenceType\";\r\n\r\nconst getLocationById = (auth: AuthorizedItems, locId: number) => {\r\n  return auth.locations.filter((l) => l.id === locId)[0];\r\n};\r\n\r\nconst getPositionById = (auth: AuthorizedItems, posId: number) => {\r\n  return auth.locations.flatMap((l) =>\r\n    l.departments.flatMap((d) => d.positions.filter((p) => p.id === posId))\r\n  )[0];\r\n};\r\n\r\nconst getValidStartEnd = (startStr: string, endStr: string) => {\r\n  const start = parseISO(startStr);\r\n  const end = parseISO(endStr);\r\n\r\n  if (isEqual(start, end)) {\r\n    return true;\r\n  }\r\n\r\n  return isAfter(end, start);\r\n};\r\n\r\nexport interface IdName {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\nexport interface EditorValues {\r\n  scheduleEventId: number;\r\n  locationId: number;\r\n  isUpdating: boolean;\r\n  eventType: EventType;\r\n  eventStatus: EventStatus;\r\n  isConfirmed: boolean;\r\n  position: SelectedPosition;\r\n  employee: IdName;\r\n  eventStart: string;\r\n  eventEnd: string;\r\n  tag: IdName;\r\n  eventBreaks: EventBreak[];\r\n  isClockedIn: boolean;\r\n  isDirty: boolean;\r\n  valid: boolean;\r\n  validEventStartEnd: boolean;\r\n  validEmployee: boolean;\r\n  validTag: boolean;\r\n  validEventTypeStatus: boolean;\r\n  validClockoutValue: boolean;\r\n  validRecurrenceStartEnd: boolean;\r\n  validRepeatInterval: boolean;\r\n  validRepeatWeekdays: boolean;\r\n  absentId?: number;\r\n  absentName?: string;\r\n  absentTimeMinutes: number | null;\r\n  notes: string;\r\n  clockoutValue?: string;\r\n  isReadonly: boolean;\r\n  recurrenceId?: number;\r\n  recurrenceStart?: string;\r\n  recurrenceEnd?: string;\r\n  recurrenceType?: RecurrenceType;\r\n  repeatInterval?: number;\r\n  repeatWeekdays?: string;\r\n}\r\n\r\nconst isClockoutValueValid = (\r\n  state: EditorValues,\r\n  locSettings: LocationSettings,\r\n  val?: string\r\n) => {\r\n  if (!val) {\r\n    return true;\r\n  }\r\n\r\n  // clockout values are not enabled\r\n  if (\r\n    !locSettings.ClockOutValueLabel ||\r\n    locSettings.ClockOutValueLabel.length === 0\r\n  ) {\r\n    return false;\r\n  }\r\n\r\n  const regEx = /^\\d*(\\.\\d{0,2})?$/;\r\n  return regEx.test(val);\r\n};\r\n\r\nconst isAllValid = (v: EditorValues): boolean => {\r\n  return (\r\n    v.validEventStartEnd &&\r\n    v.validEmployee &&\r\n    v.validTag &&\r\n    v.validEventTypeStatus &&\r\n    v.validClockoutValue &&\r\n    v.validRecurrenceStartEnd &&\r\n    v.validRepeatInterval &&\r\n    v.validRepeatWeekdays\r\n  );\r\n};\r\n\r\nexport const INITIAL_EDITOR_VAUES: EditorValues = {\r\n  scheduleEventId: -1,\r\n  locationId: 0,\r\n  isUpdating: false,\r\n  eventType: EventType.Shift,\r\n  eventStatus: EventStatus.Approved,\r\n  isConfirmed: false,\r\n  position: {\r\n    location: {} as AuthorizedLocation,\r\n    position: {} as AuthorizedPosition,\r\n  },\r\n  employee: { id: -1, name: \"SELECT EMPLOYEE\" },\r\n  eventStart: formatDateTimeAsMvcString(setHours(setMinutes(new Date(), 0), 8)),\r\n  eventEnd: formatDateTimeAsMvcString(setHours(setMinutes(new Date(), 0), 17)),\r\n  tag: { id: -1, name: \"SELECT TAG\" },\r\n  eventBreaks: [] as EventBreak[],\r\n  isClockedIn: false,\r\n  isDirty: false,\r\n  valid: true,\r\n  validEventStartEnd: true,\r\n  validEmployee: true,\r\n  validTag: true,\r\n  validEventTypeStatus: true,\r\n  validClockoutValue: true,\r\n  validRecurrenceStartEnd: true,\r\n  validRepeatInterval: true,\r\n  validRepeatWeekdays: true,\r\n  absentId: undefined,\r\n  absentName: undefined,\r\n  absentTimeMinutes: null,\r\n  notes: \"\",\r\n  clockoutValue: undefined,\r\n  isReadonly: false,\r\n};\r\n\r\nexport type EditorReducerAction =\r\n  | { type: \"LOADING\"; data: \"we're loading \" }\r\n  | {\r\n      type: \"BEGIN-UPDATE\";\r\n      auth: AuthorizedItems;\r\n      ev: ScheduleEvent;\r\n      eventEditAuth: EventEditAuthorization;\r\n    }\r\n  | { type: \"CANCEL\" }\r\n  | { type: \"CREATE-EVENT\"; auth: AuthorizedItems }\r\n  | {\r\n      type: \"TYPESTATUS-UPDATED\";\r\n      eventType: EventType;\r\n      eventStatus: EventStatus;\r\n      absentId?: number;\r\n      absentTimeMinutes: number | null;\r\n    }\r\n  | { type: \"POSITION-UPDATED\"; selectedPosition: SelectedPosition }\r\n  | { type: \"EMPLOYEE-UPDATED\"; employee: IdName }\r\n  | { type: \"START-UPDATED\"; eventStart: string }\r\n  | { type: \"END-UPDATED\"; eventEnd: string }\r\n  | { type: \"EVENTBREAKS-UPDATED\"; breaks: EventBreak[] }\r\n  | { type: \"TAG-UPDATED\"; tag: IdName }\r\n  | { type: \"CONFIRM-UPDATED\"; isConfirmed: boolean }\r\n  | { type: \"ISCLOCKEDIN-UPDATED\"; isClockedIn: boolean }\r\n  | { type: \"NOTES-UPDATED\"; notes: string }\r\n  | {\r\n      type: \"CLOCKOUTVALUE-UPDATED\";\r\n      clockoutValue?: string;\r\n      locSettings: LocationSettings;\r\n    }\r\n  | { type: \"SET-READONLY\"; isReadonly: boolean }\r\n  | {\r\n      type: \"REPEATING-UPDATED\";\r\n      recurrenceStart?: string;\r\n      recurrenceEnd?: string;\r\n      recurrenceType?: RecurrenceType;\r\n      repeatInterval?: number;\r\n      repeatWeekDays?: string;\r\n    };\r\n\r\nconst getIsClockedIn = (ev: ScheduleEvent) => {\r\n  const end = parseISO(ev.EventEnd);\r\n  return end > new Date(2199, 1, 1);\r\n};\r\n\r\n// ------------------------------------------------------------------------------------------------\r\nexport const editorValueReducer = (\r\n  currentState: EditorValues,\r\n  action: EditorReducerAction\r\n): EditorValues => {\r\n  console.log(\r\n    \"REDUCER: ACTION =\",\r\n    action.type,\r\n    \"   Current State Emp =\",\r\n    currentState.employee.id\r\n  );\r\n  switch (action.type) {\r\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n    case \"BEGIN-UPDATE\":\r\n      const { ev, auth } = action;\r\n      const isClockedIn = getIsClockedIn(ev);\r\n      return {\r\n        scheduleEventId: ev.ScheduleEventId,\r\n        locationId: ev.LocationId,\r\n        isUpdating: false,\r\n        eventType: ev.EventTypeId,\r\n        eventStatus: ev.EventStatusId,\r\n        isConfirmed: ev.ConfirmedBy !== undefined && ev.ConfirmedBy !== null,\r\n        position: {\r\n          location: getLocationById(auth, ev.LocationId),\r\n          position: getPositionById(auth, ev.PositionId),\r\n        },\r\n        employee: { id: ev.EmployeeId, name: ev.FirstName + \" \" + ev.LastName },\r\n        eventStart: ev.EventStart,\r\n        eventEnd: isClockedIn\r\n          ? formatDateTimeAsMvcString(new Date())\r\n          : ev.EventEnd,\r\n        tag: { id: ev.TagId ? ev!.TagId : -1, name: \"\" },\r\n        eventBreaks: ev.EventBreaks,\r\n        isClockedIn: isClockedIn,\r\n        isDirty: false,\r\n        valid: true,\r\n        validEventStartEnd: true,\r\n        validEmployee: true,\r\n        validTag: true,\r\n        validEventTypeStatus: true,\r\n        validClockoutValue: true,\r\n        absentName: ev.AbsentName,\r\n        absentId: ev.AbsentId,\r\n        absentTimeMinutes: ev.AbsentTimeMinutes ? ev.AbsentTimeMinutes : null,\r\n        notes: ev.Notes,\r\n        clockoutValue: ev.ClockOutValue,\r\n        isReadonly: action.eventEditAuth.isReadonly,\r\n        recurrenceId: ev.EventRecurrenceId,\r\n        recurrenceStart: ev.EventRecurrenceStart,\r\n        recurrenceEnd: ev.EventRecurrenceEnd,\r\n        recurrenceType: ev.RepeatType,\r\n        repeatInterval: ev.RepeatInterval,\r\n        repeatWeekdays: ev.RepeatWeekdays,\r\n        validRecurrenceStartEnd: true,\r\n        validRepeatInterval: true,\r\n        validRepeatWeekdays: true,\r\n      };\r\n\r\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n    case \"CANCEL\":\r\n      return INITIAL_EDITOR_VAUES;\r\n\r\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n    case \"POSITION-UPDATED\":\r\n      const { selectedPosition } = action;\r\n      return {\r\n        ...currentState,\r\n        position: selectedPosition,\r\n        isDirty: true,\r\n      };\r\n\r\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n    case \"CREATE-EVENT\":\r\n      const loc = action.auth.locations[0];\r\n      return {\r\n        ...INITIAL_EDITOR_VAUES,\r\n        position: {\r\n          location: loc,\r\n          position: loc.departments[0].positions[0],\r\n        },\r\n        scheduleEventId: 0,\r\n        isDirty: true,\r\n      };\r\n\r\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n    case \"SET-READONLY\":\r\n      return {\r\n        ...currentState,\r\n        isReadonly: action.isReadonly,\r\n      };\r\n\r\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n    case \"TYPESTATUS-UPDATED\":\r\n      const newTypeStatusState = {\r\n        ...currentState,\r\n        eventType: action.eventType,\r\n        eventStatus: action.eventStatus,\r\n        absentId: action.absentId,\r\n        absentTimeMinutes: action.absentTimeMinutes,\r\n        isDirty: true,\r\n        validEventTypeStatus: !(\r\n          action.absentId && action.absentTimeMinutes === null\r\n        ),\r\n      };\r\n\r\n      newTypeStatusState.valid = isAllValid(newTypeStatusState);\r\n      return newTypeStatusState;\r\n\r\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n    case \"CLOCKOUTVALUE-UPDATED\":\r\n      const newClockoutValueState = {\r\n        ...currentState,\r\n        clockoutValue: action.clockoutValue,\r\n        validClockoutValue: isClockoutValueValid(\r\n          currentState,\r\n          action.locSettings,\r\n          action.clockoutValue\r\n        ),\r\n        isDirty: true,\r\n      };\r\n\r\n      newClockoutValueState.valid = isAllValid(newClockoutValueState);\r\n      return newClockoutValueState;\r\n\r\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n    case \"EMPLOYEE-UPDATED\":\r\n      const newState = {\r\n        ...currentState,\r\n        employee: action.employee,\r\n        isDirty: true,\r\n        validEmployee: action.employee.id > 0,\r\n      };\r\n\r\n      newState.valid = isAllValid(newState);\r\n      return newState;\r\n\r\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n    case \"START-UPDATED\":\r\n      const newStartState = {\r\n        ...currentState,\r\n        eventStart: action.eventStart,\r\n        isDirty: true,\r\n        validEventStartEnd: getValidStartEnd(\r\n          action.eventStart,\r\n          currentState.eventEnd\r\n        ),\r\n      };\r\n\r\n      newStartState.valid = isAllValid(newStartState);\r\n      return newStartState;\r\n\r\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n    case \"END-UPDATED\":\r\n      const newEndState = {\r\n        ...currentState,\r\n        eventEnd: action.eventEnd,\r\n        isDirty: true,\r\n        validEventStartEnd: getValidStartEnd(\r\n          currentState.eventStart,\r\n          action.eventEnd\r\n        ),\r\n      };\r\n\r\n      newEndState.valid = isAllValid(newEndState);\r\n      return newEndState;\r\n\r\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n    case \"EVENTBREAKS-UPDATED\":\r\n      return {\r\n        ...currentState,\r\n        eventBreaks: action.breaks,\r\n        isDirty: true,\r\n      };\r\n\r\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n    case \"TAG-UPDATED\":\r\n      const newTagState = {\r\n        ...currentState,\r\n        tag: action.tag,\r\n        isDirty: true,\r\n        validTag: true,\r\n      };\r\n\r\n      newTagState.valid = isAllValid(newTagState);\r\n      return newTagState;\r\n\r\n    case \"CONFIRM-UPDATED\":\r\n      const newConfirmState = {\r\n        ...currentState,\r\n        isConfirmed: action.isConfirmed,\r\n        isDirty: true,\r\n      };\r\n\r\n      newConfirmState.valid = isAllValid(newConfirmState);\r\n      return newConfirmState;\r\n\r\n    case \"NOTES-UPDATED\":\r\n      return {\r\n        ...currentState,\r\n        notes: action.notes,\r\n        isDirty: true,\r\n      };\r\n\r\n    case \"ISCLOCKEDIN-UPDATED\":\r\n      const newClockedInState = {\r\n        ...currentState,\r\n        isClockedIn: action.isClockedIn,\r\n        isDirty: true,\r\n      };\r\n\r\n      if (action.isClockedIn) {\r\n        const now = formatDateTimeAsMvcString(new Date());\r\n        newClockedInState.eventStart = now;\r\n        newClockedInState.eventEnd = now;\r\n      }\r\n\r\n      newClockedInState.valid = isAllValid(newClockedInState);\r\n      return newClockedInState;\r\n\r\n    case \"REPEATING-UPDATED\":\r\n      const newRepeatState = {\r\n        ...currentState,\r\n        recurrenceStart: action.recurrenceStart,\r\n        recurrenceEnd: action.recurrenceEnd,\r\n        recurrenceType: action.recurrenceType,\r\n        repeatInterval: action.repeatInterval,\r\n        repeatWeekdays: action.repeatWeekDays,\r\n        isDirty: true,\r\n      };\r\n\r\n      if (newRepeatState.recurrenceStart) {\r\n        if (newRepeatState.repeatInterval === RecurrenceType.Weekly) {\r\n          newRepeatState.validRepeatWeekdays =\r\n            newRepeatState.repeatWeekdays !== null &&\r\n            newRepeatState.repeatWeekdays !== undefined &&\r\n            newRepeatState.repeatWeekdays.length > 0;\r\n        } else {\r\n          newRepeatState.repeatWeekdays = undefined;\r\n          newRepeatState.validRepeatWeekdays = true;\r\n        }\r\n\r\n        if (!newRepeatState.recurrenceEnd) {\r\n          newRepeatState.validRecurrenceStartEnd = false;\r\n        } else {\r\n          newRepeatState.validRecurrenceStartEnd = isBefore(\r\n            parseISO(newRepeatState.recurrenceStart),\r\n            parseISO(newRepeatState.recurrenceEnd)\r\n          );\r\n        }\r\n\r\n        newRepeatState.validRepeatInterval =\r\n          newRepeatState.repeatInterval !== null &&\r\n          newRepeatState.repeatInterval !== undefined &&\r\n          newRepeatState.repeatInterval > 0;\r\n      }\r\n\r\n      newRepeatState.valid = isAllValid(newRepeatState);\r\n      return newRepeatState;\r\n\r\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n    default:\r\n      console.error(\r\n        \"ERROR in editorValueReducer, could not find action for \" + action.type\r\n      );\r\n      return currentState;\r\n  }\r\n};\r\n","export enum RecurrenceUpdateType {\r\n  UpdateSingleEvent,\r\n  UpdateEntireSeries,\r\n  UpdateSeriesForward,\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { IonLabel, IonTextarea, IonCol, IonRow } from \"@ionic/react\";\r\nimport \"./EventStartEndEditor\";\r\nimport { AuthorizedItems } from \"../../../orbital-interfaces/authorized-items\";\r\nimport { EditorValues, EditorReducerAction } from \"../EditEventModalState\";\r\n\r\ninterface EventNotesEditorProps {\r\n  auth: AuthorizedItems;\r\n  editorValues: EditorValues;\r\n  update: React.Dispatch<EditorReducerAction>;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst EventNotesEditor: React.FC<EventNotesEditorProps> = ({\r\n  editorValues,\r\n  update,\r\n}: EventNotesEditorProps) => {\r\n  useEffect(() => {\r\n    // eslint-disable-next-line\r\n  });\r\n\r\n  const onNotesUpdate = (newNote?: string | null) => {\r\n    if (!newNote) {\r\n      newNote = \"\";\r\n    }\r\n\r\n    if (newNote !== editorValues.notes) {\r\n      update({ type: \"NOTES-UPDATED\", notes: newNote });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IonRow className=\"edit-row\">\r\n      <IonCol size=\"3\">\r\n        <IonLabel className=\"label\">Notes</IonLabel>\r\n      </IonCol>\r\n      <IonCol size=\"9\">\r\n        <IonTextarea\r\n          className=\"textarea\"\r\n          maxlength={200}\r\n          rows={4}\r\n          value={editorValues.notes}\r\n          disabled={editorValues.isReadonly}\r\n          onIonChange={(e) => onNotesUpdate(e.detail.value)}\r\n        />\r\n      </IonCol>\r\n    </IonRow>\r\n  );\r\n};\r\n\r\nexport default EventNotesEditor;\r\n","import React, { useEffect, useState } from \"react\";\nimport { IonLabel, IonCol, IonRow, IonInput } from \"@ionic/react\";\nimport \"./EventStartEndEditor\";\nimport {\n  AuthorizedItems,\n  LocationSettings,\n} from \"../../../orbital-interfaces/authorized-items\";\nimport { EditorValues, EditorReducerAction } from \"../EditEventModalState\";\nimport authHelper from \"../../../util/authitems-helper\";\nimport { EventType } from \"../../../orbital-interfaces\";\n\ninterface EventClockoutValueEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventClockoutValueEditor: React.FC<EventClockoutValueEditorProps> = ({\n  auth,\n  editorValues,\n  update,\n}: EventClockoutValueEditorProps) => {\n  const [isVisible, setIsVisible] = useState(false);\n  const [locSettings, setLocSettings] = useState(\n    null as LocationSettings | null\n  );\n\n  useEffect(() => {\n    if (\n      editorValues.locationId === 0 ||\n      (locSettings && editorValues.locationId === locSettings.LocationId)\n    ) {\n      return;\n    }\n\n    if (!auth || !auth.locations || auth.locations.length === 0) {\n      return;\n    }\n\n    if (!editorValues.locationId) {\n      return;\n    }\n\n    const newLocSettings = authHelper.getLocSettingsForLocationId(\n      auth,\n      editorValues.locationId\n    );\n    setLocSettings(newLocSettings);\n    // eslint-disable-next-line\n  }, [editorValues.locationId, auth]);\n\n  useEffect(() => {\n    if (!locSettings) {\n      return;\n    }\n\n    setIsVisible(\n      locSettings!.ClockOutValueLabel !== undefined &&\n        locSettings!.ClockOutValueLabel !== null &&\n        locSettings!.ClockOutValueLabel.length > 0 &&\n        editorValues.eventType === EventType.Clock &&\n        !editorValues.isClockedIn\n    );\n  }, [editorValues.eventType, editorValues.isClockedIn, locSettings]);\n\n  const onClockoutValueUpdated = (newValue?: string | null) => {\n    if (newValue === null) {\n      newValue = undefined;\n    }\n\n    if (newValue === editorValues.clockoutValue) {\n      return;\n    }\n\n    update({\n      type: \"CLOCKOUTVALUE-UPDATED\",\n      locSettings: locSettings!,\n      clockoutValue: newValue,\n    });\n  };\n\n  if (!isVisible || locSettings === null) {\n    return <div />;\n  }\n\n  return (\n    <IonRow className=\"edit-row\">\n      <IonCol size=\"3\">\n        <IonLabel className=\"label\">{locSettings.ClockOutValueLabel}</IonLabel>\n      </IonCol>\n      <IonCol size=\"9\">\n        <IonInput\n          className=\"input-textbox\"\n          value={editorValues.clockoutValue}\n          onIonChange={(e) => onClockoutValueUpdated(e.detail.value)}\n        />\n      </IonCol>\n    </IonRow>\n  );\n};\n\nexport default EventClockoutValueEditor;\n","import { ApplicationUser } from \"../context/ApplicationUserContext\";\r\nimport apiHelper from \"./OrbitalApiHelper\";\r\nimport EventType from \"../enums/EventType\";\r\nimport EventStatus from \"../enums/EventStatus\";\r\nimport { RecurrenceUpdateType } from \"../enums/RecurrenceUpdateType\";\r\n\r\ninterface CoverRequestModel {\r\n  ScheduleEventId: number;\r\n  LocationId: number;\r\n  BusinessId: number;\r\n  BroadcastCoverRequestMessage: boolean;\r\n  CoverMessage: string;\r\n}\r\n\r\ninterface DeleteEventModel {\r\n  LocationId: number;\r\n  ScheduleEventId: number;\r\n  EventTypeId: EventType;\r\n  EventStatusId: EventStatus;\r\n  RecUpdateType?: RecurrenceUpdateType;\r\n}\r\n\r\nexport interface ErrorResponse {\r\n  error: boolean;\r\n  message: string;\r\n}\r\n\r\nexport interface CoverListItem {\r\n  value: number;\r\n  text: string;\r\n  disabled: boolean;\r\n  style: string | null;\r\n}\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst undoCoverRequest = async (\r\n  user: ApplicationUser,\r\n  scheduleEventId: number\r\n) => {\r\n  // eslint-disable-next-line max-len\r\n  const url = `api/v1/employee/schedule-events/cover-request/undo?scheduleEventId=${scheduleEventId}`;\r\n  return await apiHelper.put(user, url);\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst createCoverRequest = async (\r\n  user: ApplicationUser,\r\n  scheduleEventId: number,\r\n  locationId: number,\r\n  businessId: number,\r\n  broadCastMessage: boolean,\r\n  coverMessage: string,\r\n  toEmployeeId: number | null\r\n) => {\r\n  const url = \"api/v1/employee/schedule-events/cover-request/submit\";\r\n\r\n  const data = {\r\n    ScheduleEventId: scheduleEventId,\r\n    LocationId: locationId,\r\n    BusinessId: businessId,\r\n    BroadcastCoverRequestMessage: broadCastMessage,\r\n    CoverMessage: coverMessage,\r\n    DirectToEmployeeId: toEmployeeId,\r\n  } as CoverRequestModel;\r\n\r\n  return await apiHelper.put(user, url, data);\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst makeShiftRequest = async (\r\n  user: ApplicationUser,\r\n  scheduleEventId: number,\r\n  locationId: number,\r\n  businessId: number,\r\n  broadCastMessage: boolean,\r\n  coverMessage: string\r\n) => {\r\n  const url = \"api/v2/requests/shift-request/submit\";\r\n\r\n  const data = {\r\n    ScheduleEventId: scheduleEventId,\r\n    LocationId: locationId,\r\n    BusinessId: businessId,\r\n    BroadcastCoverRequestMessage: broadCastMessage,\r\n    CoverMessage: coverMessage,\r\n  } as CoverRequestModel;\r\n\r\n  return (await apiHelper.put(user, url, data)) as ErrorResponse;\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst removeShiftRequest = async (\r\n  user: ApplicationUser,\r\n  locationId: number,\r\n  scheduleEventId: number,\r\n  eventType: EventType,\r\n  eventStatus: EventStatus,\r\n  recUpdateType?: RecurrenceUpdateType\r\n) => {\r\n  const url = \"api/v1/employee/schedule-events/delete\";\r\n\r\n  const data = {\r\n    LocationId: locationId,\r\n    ScheduleEventId: scheduleEventId,\r\n    EventTypeId: eventType,\r\n    EventStatusId: eventStatus,\r\n    RecUpdateType: recUpdateType,\r\n  } as DeleteEventModel;\r\n\r\n  return await apiHelper.post(user, url, data);\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst deleteEvent = async (\r\n  user: ApplicationUser,\r\n  locationId: number,\r\n  scheduleEventId: number,\r\n  eventType: EventType,\r\n  eventStatus: EventStatus,\r\n  recUpdateType?: RecurrenceUpdateType\r\n) => {\r\n  const url = \"api/v1/employee/schedule-events/delete\";\r\n\r\n  const data = {\r\n    LocationId: locationId,\r\n    ScheduleEventId: scheduleEventId,\r\n    EventTypeId: eventType,\r\n    EventStatusId: eventStatus,\r\n    RecUpdateType: recUpdateType,\r\n  } as DeleteEventModel;\r\n\r\n  return await apiHelper.post(user, url, data);\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst getCoverRequestListItems = async (\r\n  user: ApplicationUser,\r\n  scheduleEventId: number,\r\n  isDirectCoverList: boolean\r\n) => {\r\n  const url = \"api/v2/requests/transfers/to-list\";\r\n\r\n  const data = {\r\n    scheduleEventId,\r\n    directCoverList: isDirectCoverList,\r\n  };\r\n\r\n  return (await apiHelper.post(user, url, data)) as CoverListItem[];\r\n};\r\n\r\nexport default {\r\n  undoCoverRequest,\r\n  createCoverRequest,\r\n  makeShiftRequest,\r\n  removeShiftRequest,\r\n  deleteEvent,\r\n  getCoverRequestListItems,\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  IonButton,\r\n  IonCol,\r\n  IonContent,\r\n  IonFooter,\r\n  IonGrid,\r\n  IonHeader,\r\n  IonRow,\r\n  IonSelect,\r\n  IonSelectOption,\r\n  IonTextarea,\r\n  IonTitle,\r\n  IonToolbar,\r\n} from \"@ionic/react\";\r\nimport \"./EventRequestModal.scss\";\r\nimport {\r\n  AuthorizedItems,\r\n  LocationSettings,\r\n} from \"../../../orbital-interfaces/authorized-items\";\r\nimport {\r\n  EventEditAuthorization,\r\n  EventEditEnum,\r\n} from \"../EditEventAuthorization\";\r\nimport requestAPI, { CoverListItem } from \"../../../api/RequestsAPI\";\r\nimport { ApplicationUserContext } from \"../../../context/ApplicationUserContext\";\r\n\r\ninterface EventRequestModalProps {\r\n  onCancel: () => void;\r\n  onOk: (\r\n    employeeId: number | null,\r\n    notes: string,\r\n    sendMessage: boolean\r\n  ) => void;\r\n  auth: AuthorizedItems;\r\n  eventEditAuth: EventEditAuthorization;\r\n  locSettings: LocationSettings;\r\n  scheduleEventId: number;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst EventRequestModal: React.FC<EventRequestModalProps> = ({\r\n  onCancel,\r\n  onOk,\r\n  eventEditAuth,\r\n  locSettings,\r\n  scheduleEventId,\r\n}: EventRequestModalProps) => {\r\n  const { user } = useContext(ApplicationUserContext);\r\n  const [notes, setNotes] = useState(\"\" as string | null | undefined);\r\n  const [selectedEmployeeId, setSelectedEmployeeId] = useState(\r\n    null as number | null\r\n  );\r\n  const [coverList, setCoverList] = useState(null as CoverListItem[] | null);\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    if (\r\n      eventEditAuth.usage === EventEditEnum.CreateCoverRequest &&\r\n      scheduleEventId > 0\r\n    ) {\r\n      requestAPI\r\n        .getCoverRequestListItems(user, scheduleEventId, true)\r\n        .then((results) => {\r\n          setCoverList(results);\r\n          if (results && results.length > 0) {\r\n            setSelectedEmployeeId(results[0].value);\r\n          }\r\n        });\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [scheduleEventId, eventEditAuth.usage]);\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  const onOkClick = () => {\r\n    const newNotes = notes ?? \"\";\r\n    onOk(selectedEmployeeId, newNotes, false);\r\n  };\r\n\r\n  if (eventEditAuth.usage === EventEditEnum.None) {\r\n    return <div />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <IonContent>\r\n        <IonHeader mode=\"ios\">\r\n          <IonToolbar>\r\n            <IonTitle>{eventEditAuth.buttonText}</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonGrid>\r\n          <IonRow\r\n            hidden={\r\n              !locSettings.EnableDirectCoverRequest ||\r\n              eventEditAuth.usage !== EventEditEnum.CreateCoverRequest\r\n            }\r\n          >\r\n            <IonCol className=\"label\" size=\"3\">\r\n              To\r\n            </IonCol>\r\n            <IonCol size=\"9\">\r\n              <IonSelect\r\n                className=\"select\"\r\n                value={selectedEmployeeId}\r\n                onIonChange={(e) => {\r\n                  setSelectedEmployeeId(parseInt(e.detail.value));\r\n                }}\r\n              >\r\n                {coverList &&\r\n                  coverList.map((cover) => (\r\n                    <IonSelectOption\r\n                      key={cover.value}\r\n                      value={cover.value}\r\n                      disabled={cover.disabled}\r\n                    >\r\n                      {cover.text}\r\n                    </IonSelectOption>\r\n                  ))}\r\n              </IonSelect>\r\n            </IonCol>\r\n          </IonRow>\r\n\r\n          <IonRow\r\n            hidden={eventEditAuth.usage === EventEditEnum.CreateCoverRequest}\r\n          >\r\n            <IonCol size=\"12\">\r\n              <div className=\"usage-message\">{eventEditAuth.text}</div>\r\n            </IonCol>\r\n          </IonRow>\r\n\r\n          <IonRow\r\n            hidden={eventEditAuth.usage !== EventEditEnum.CreateCoverRequest}\r\n          >\r\n            <IonCol className=\"label\" size=\"3\">\r\n              Notes\r\n            </IonCol>\r\n            <IonCol size=\"9\">\r\n              <IonTextarea\r\n                className=\"select\"\r\n                maxlength={200}\r\n                rows={4}\r\n                value={notes}\r\n                onIonChange={(e) => {\r\n                  setNotes(e.detail.value);\r\n                }}\r\n              />\r\n            </IonCol>\r\n          </IonRow>\r\n\r\n          <IonRow>\r\n            <IonCol className=\"label\" size=\"3\" />\r\n            <IonCol size=\"9\" className=\"error-message\">\r\n              <div />\r\n            </IonCol>\r\n          </IonRow>\r\n        </IonGrid>\r\n      </IonContent>\r\n      <IonFooter>\r\n        <IonButton expand=\"block\" color=\"secondary\" onClick={onOkClick}>\r\n          OK\r\n        </IonButton>\r\n\r\n        <IonButton expand=\"block\" onClick={onCancel}>\r\n          CANCEL\r\n        </IonButton>\r\n      </IonFooter>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EventRequestModal;\r\n","import React, { useContext, useState } from \"react\";\r\nimport { IonButton, IonModal } from \"@ionic/react\";\r\nimport \"./EventRequestEditor.scss\";\r\nimport { AuthorizedItems } from \"../../../orbital-interfaces/authorized-items\";\r\nimport { EditorReducerAction } from \"../EditEventModalState\";\r\nimport EventRequestModal from \"./EventRequestModal\";\r\nimport authHelper from \"../../../util/authitems-helper\";\r\nimport reqApi from \"../../../api/RequestsAPI\";\r\nimport { ApplicationUserContext } from \"../../../context/ApplicationUserContext\";\r\nimport EventType from \"../../../enums/EventType\";\r\nimport EventStatus from \"../../../enums/EventStatus\";\r\nimport useDialogBox from \"../../../hooks/useDialogBox\";\r\nimport {\r\n  EventEditAuthorization,\r\n  EventEditEnum,\r\n} from \"../EditEventAuthorization\";\r\n\r\ninterface EventRequestEditorProps {\r\n  auth: AuthorizedItems;\r\n  update: React.Dispatch<EditorReducerAction>;\r\n  cancelEditModal: (message: string) => void;\r\n  setUsageText: (usageText: string) => void;\r\n  eventEnd: string;\r\n  eventType: EventType;\r\n  eventStatus: EventStatus;\r\n  eventEmployeeId: number;\r\n  eventPositionId: number;\r\n  scheduleEventId: number;\r\n  locationId: number;\r\n  eventEditAuth: EventEditAuthorization | null;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst EventRequestEditor: React.FC<EventRequestEditorProps> = ({\r\n  auth,\r\n  cancelEditModal,\r\n  eventType,\r\n  eventStatus,\r\n  scheduleEventId,\r\n  locationId,\r\n  eventEditAuth,\r\n}: EventRequestEditorProps) => {\r\n  const { user } = useContext(ApplicationUserContext);\r\n  const [showRequestModal, setShowRequestModal] = useState(false);\r\n  const dlg = useDialogBox();\r\n\r\n  const onComplete = (message: string) => {\r\n    setShowRequestModal(false);\r\n    cancelEditModal(message);\r\n  };\r\n\r\n  const onApply = (\r\n    employeeId: number | null,\r\n    notes: string,\r\n    sendMessage: boolean\r\n  ) => {\r\n    switch (eventEditAuth!.usage) {\r\n      case EventEditEnum.CreateCoverRequest:\r\n        reqApi\r\n          .createCoverRequest(\r\n            user,\r\n            scheduleEventId,\r\n            locationId,\r\n            0,\r\n            sendMessage,\r\n            notes,\r\n            employeeId\r\n          )\r\n          .then(() => {\r\n            onComplete(\"Cover-Request Created\");\r\n          });\r\n        break;\r\n\r\n      case EventEditEnum.CreateShiftRequest:\r\n        reqApi\r\n          .makeShiftRequest(\r\n            user,\r\n            scheduleEventId,\r\n            locationId,\r\n            0,\r\n            sendMessage,\r\n            notes\r\n          )\r\n          .then((results) => {\r\n            if (results.error) {\r\n              dlg.showAlert(\"Shift-Request Failed\", results.message, () => {});\r\n            } else {\r\n              onComplete(results.message); // \"Shift-Request Created\"\r\n            }\r\n          });\r\n        break;\r\n\r\n      case EventEditEnum.DeleteShiftRequest:\r\n        reqApi\r\n          .removeShiftRequest(\r\n            user,\r\n            locationId,\r\n            scheduleEventId,\r\n            eventType,\r\n            eventStatus,\r\n            undefined\r\n          )\r\n          .then(() => {\r\n            onComplete(\"Shift-Request Removed\");\r\n          });\r\n        break;\r\n\r\n      case EventEditEnum.UndoCoverRequest:\r\n        reqApi.undoCoverRequest(user, scheduleEventId).then(() => {\r\n          onComplete(\"Removed Cover-Request\");\r\n        });\r\n        break;\r\n\r\n      case EventEditEnum.Delete:\r\n        reqApi\r\n          .deleteEvent(\r\n            user,\r\n            locationId,\r\n            scheduleEventId,\r\n            eventType,\r\n            eventStatus,\r\n            undefined\r\n          )\r\n          .then(() => {\r\n            onComplete(\"Deleted\");\r\n          });\r\n        break;\r\n    }\r\n  };\r\n\r\n  if (\r\n    !eventEditAuth ||\r\n    !auth ||\r\n    !auth.locations ||\r\n    auth.locations.length === 0 ||\r\n    eventEditAuth.usage === EventEditEnum.None ||\r\n    scheduleEventId <= 0\r\n  ) {\r\n    return <div />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <IonButton\r\n        className=\"apply-button\"\r\n        expand=\"block\"\r\n        onClick={() => {\r\n          setShowRequestModal(true);\r\n        }}\r\n      >\r\n        {eventEditAuth.buttonText}\r\n      </IonButton>\r\n\r\n      <IonModal\r\n        isOpen={showRequestModal}\r\n        cssClass=\"event-request-modal\"\r\n        onDidDismiss={() => setShowRequestModal(false)}\r\n      >\r\n        <EventRequestModal\r\n          onCancel={() => {\r\n            setShowRequestModal(false);\r\n          }}\r\n          onOk={onApply}\r\n          auth={auth}\r\n          eventEditAuth={eventEditAuth}\r\n          scheduleEventId={scheduleEventId}\r\n          locSettings={authHelper.getLocSettingsForLocationId(auth, locationId)}\r\n        />\r\n        {dlg.alertBoxJsx}\r\n      </IonModal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EventRequestEditor;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { IonCheckbox } from \"@ionic/react\";\r\nimport \"./WeekdayList.scss\";\r\nimport { LocationSettings } from \"../../../orbital-interfaces/authorized-items\";\r\nimport { getWeekStart } from \"../../../util/time-helper\";\r\nimport { addDays, format, getDay } from \"date-fns\";\r\nimport { EditorReducerAction, EditorValues } from \"../EditEventModalState\";\r\n\r\ninterface WeekdayListProps {\r\n  locSettings: LocationSettings | null;\r\n  editorValues: EditorValues;\r\n  update: React.Dispatch<EditorReducerAction>;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst WeekdayList: React.FC<WeekdayListProps> = ({\r\n  locSettings,\r\n  editorValues,\r\n  update,\r\n}: WeekdayListProps) => {\r\n  const [checkList, setCheckList] = useState([\r\n    false,\r\n    false,\r\n    false,\r\n    false,\r\n    false,\r\n    false,\r\n    false,\r\n  ]);\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    if (!editorValues.repeatWeekdays) {\r\n      setCheckList([false, false, false, false, false, false, false]);\r\n    } else {\r\n      const newState = [false, false, false, false, false, false, false];\r\n      for (let i = 0; i < editorValues.repeatWeekdays.length; i++) {\r\n        newState[parseInt(editorValues.repeatWeekdays[i])] = true;\r\n      }\r\n\r\n      setCheckList(newState);\r\n    }\r\n  }, [editorValues.repeatWeekdays]);\r\n\r\n  if (locSettings === null) {\r\n    return <div />;\r\n  }\r\n\r\n  const weekStart = getWeekStart(\r\n    new Date(),\r\n    locSettings.DayWeekStartsOn,\r\n    locSettings.DayStartTime\r\n  );\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  function onCheckboxChecked(dayOfWeek: number) {\r\n    const newCheckState = checkList.slice();\r\n    newCheckState[dayOfWeek] = !checkList[dayOfWeek];\r\n    setCheckList(newCheckState);\r\n\r\n    let repeatWeekdays = \"\";\r\n    for (let i = 0; i < newCheckState.length; i++) {\r\n      if (newCheckState[i]) {\r\n        repeatWeekdays += i;\r\n      }\r\n    }\r\n\r\n    update({\r\n      type: \"REPEATING-UPDATED\",\r\n      repeatWeekDays: repeatWeekdays,\r\n      repeatInterval: editorValues.repeatInterval,\r\n      recurrenceType: editorValues.recurrenceType,\r\n      recurrenceEnd: editorValues.recurrenceEnd,\r\n      recurrenceStart: editorValues.recurrenceStart,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"weeklist-container\">\r\n      {[0, 1, 2, 3, 4, 5, 6].map((num: number) => {\r\n        const thisDate = addDays(weekStart, num);\r\n        const dayOfWeek = getDay(thisDate);\r\n\r\n        return (\r\n          <span key={num} className=\"day\">\r\n            <IonCheckbox\r\n              className=\"day-checkbox\"\r\n              disabled={editorValues.isReadonly}\r\n              onClick={() => onCheckboxChecked(dayOfWeek)}\r\n              checked={checkList[dayOfWeek]}\r\n            />\r\n            <span className=\"day-abbr\">\r\n              {format(thisDate, \"EE\").substr(0, 2)}\r\n            </span>\r\n          </span>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WeekdayList;\r\n","import React, { useEffect, useState } from \"react\";\nimport {\n  IonCheckbox,\n  IonCol,\n  IonDatetime,\n  IonIcon,\n  IonInput,\n  IonLabel,\n  IonRow,\n  IonSelect,\n  IonSelectOption,\n} from \"@ionic/react\";\nimport \"./RecurringEventSection.scss\";\nimport { calendar, refresh } from \"ionicons/icons\";\nimport {\n  AuthorizedItems,\n  LocationSettings,\n} from \"../../../orbital-interfaces/authorized-items\";\nimport EventType from \"../../../enums/EventType\";\nimport authHelper from \"../../../util/authitems-helper\";\nimport WeekdayList from \"./WeekdayList\";\nimport { EditorReducerAction, EditorValues } from \"../EditEventModalState\";\nimport { RecurrenceType } from \"../../../enums/RecurrenceType\";\nimport { formatDateTimeAsMvcString } from \"../../../util/time-helper\";\n\ninterface RecurringEventSectionProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst RecurringEventSection: React.FC<RecurringEventSectionProps> = ({\n  auth,\n  editorValues,\n  update,\n}: RecurringEventSectionProps) => {\n  const [locSettings, setLocSettings] = useState(\n    null as LocationSettings | null\n  );\n  const [isVisible, setIsVisible] = useState(false);\n  const [isChecked, setIsChecked] = useState(false);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (editorValues.locationId > 0) {\n      setLocSettings(\n        authHelper.getLocSettingsForLocationId(auth, editorValues.locationId)\n      );\n    } else if (editorValues.locationId === 0) {\n      setLocSettings(auth.locations[0].settings);\n    }\n    // eslint-disable-next-line\n  }, [editorValues.locationId]);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    setIsVisible(\n      editorValues.eventType === EventType.Shift ||\n        editorValues.eventType === EventType.Unavailable\n    );\n  }, [editorValues.eventType]);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!isVisible) {\n      return;\n    }\n\n    if (editorValues.recurrenceStart) {\n      setIsChecked(true);\n    } else {\n      if (isChecked) {\n      } else {\n      }\n    }\n  }, [isChecked, isVisible, editorValues.recurrenceStart]);\n\n  // --------------------------------------------------------------------------------------\n  function onRepeatingChecked() {\n    if (!isChecked) {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: undefined,\n        repeatInterval: 1,\n        recurrenceType: RecurrenceType.Weekly,\n        recurrenceEnd: undefined,\n        recurrenceStart: formatDateTimeAsMvcString(new Date()),\n      });\n    } else {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: undefined,\n        repeatInterval: undefined,\n        recurrenceType: undefined,\n        recurrenceEnd: undefined,\n        recurrenceStart: undefined,\n      });\n    }\n\n    setIsChecked(!isChecked);\n  }\n\n  // --------------------------------------------------------------------------------------\n  function onRecurrenceStartChanged(newValue: string | null | undefined) {\n    if (!newValue) {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: undefined,\n      });\n    } else {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: newValue,\n      });\n    }\n  }\n\n  // --------------------------------------------------------------------------------------\n  function onRecurrenceEndChanged(newValue: string | null | undefined) {\n    if (!newValue) {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: undefined,\n        recurrenceStart: editorValues.recurrenceStart,\n      });\n    } else {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: newValue,\n        recurrenceStart: editorValues.recurrenceStart,\n      });\n    }\n  }\n\n  // --------------------------------------------------------------------------------------\n  function onRecurrenceTypeChanged(newValue: string | null | undefined) {\n    if (!newValue) {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: undefined,\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: editorValues.recurrenceStart,\n      });\n    } else {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: parseInt(newValue),\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: editorValues.recurrenceStart,\n      });\n    }\n  }\n\n  // --------------------------------------------------------------------------------------\n  function onRepeatIntervalChanged(newValue: string | null | undefined) {\n    if (!newValue) {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: undefined,\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: editorValues.recurrenceStart,\n      });\n    } else {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: parseInt(newValue),\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: editorValues.recurrenceStart,\n      });\n    }\n  }\n\n  if (!isVisible) {\n    return <span />;\n  }\n\n  return (\n    <>\n      <IonRow>\n        <IonCol size=\"4\">\n          <IonCheckbox\n            checked={isChecked}\n            onClick={onRepeatingChecked}\n            disabled={editorValues.isReadonly}\n          />\n          <IonLabel className=\"label\" style={{ paddingLeft: \"10px\" }}>\n            (R)epeating\n          </IonLabel>\n        </IonCol>\n        {isChecked && (\n          <IonCol size=\"8\">\n            <div style={{ borderBottom: \"1px solid gray\", height: \"12px\" }} />\n          </IonCol>\n        )}\n      </IonRow>\n\n      {isChecked && (\n        <>\n          <IonRow className=\"edit-row\">\n            <IonCol size=\"2\" />\n            <IonCol size=\"1\">\n              <IonIcon icon={calendar} mode=\"md\" />\n            </IonCol>\n            <IonCol size=\"4\">\n              <IonDatetime\n                value={editorValues.recurrenceStart}\n                className=\"select\"\n                displayFormat=\"M/D/YY\"\n                pickerFormat=\"MMM DD YYYY\"\n                disabled={editorValues.isReadonly}\n                min=\"2005-01-01\"\n                max=\"2030-01-01\"\n                onIonChange={(e) => {\n                  onRecurrenceStartChanged(e.detail.value);\n                }}\n              />\n            </IonCol>\n            <IonCol size=\"1\">\n              <IonIcon\n                icon={calendar}\n                mode=\"md\"\n                style={{ textAlign: \"right\" }}\n              />\n            </IonCol>\n            <IonCol size=\"4\">\n              <IonDatetime\n                value={editorValues.recurrenceEnd}\n                className=\"select\"\n                displayFormat=\"M/D/YY\"\n                pickerFormat=\"MMM DD YYYY\"\n                disabled={editorValues.isReadonly}\n                min=\"2005-01-01\"\n                max=\"2030-01-01\"\n                onIonChange={(e) => {\n                  onRecurrenceEndChanged(e.detail.value);\n                }}\n              />\n            </IonCol>\n          </IonRow>\n          <IonRow className=\"edit-row\">\n            <IonCol size=\"2\" />\n            <IonCol size=\"1\">\n              <IonIcon icon={refresh} mode=\"md\" />\n            </IonCol>\n            <IonCol size=\"4\">\n              <IonSelect\n                className=\"select\"\n                value={editorValues.recurrenceType}\n                disabled={editorValues.isReadonly}\n                onIonChange={(e) => {\n                  onRecurrenceTypeChanged(e.detail.value);\n                }}\n              >\n                <IonSelectOption value={RecurrenceType.Weekly}>\n                  Weekly\n                </IonSelectOption>\n                <IonSelectOption value={RecurrenceType.MonthlyByDayOfMonth}>\n                  Monthly (Day of Month)\n                </IonSelectOption>\n                <IonSelectOption value={RecurrenceType.MonthlyByDayOfWeek}>\n                  Monthly (Day of Week)\n                </IonSelectOption>\n              </IonSelect>\n            </IonCol>\n            <IonCol size=\"1\">#</IonCol>\n            <IonCol size=\"4\">\n              <IonInput\n                className=\"input-textbox\"\n                disabled={editorValues.isReadonly}\n                value={\n                  editorValues.repeatInterval\n                    ? editorValues.repeatInterval.toString()\n                    : undefined\n                }\n                onIonChange={(e) => onRepeatIntervalChanged(e.detail.value)}\n              />\n            </IonCol>\n          </IonRow>\n          <IonRow>\n            <IonCol size=\"3\" />\n            <IonCol size=\"9\">\n              <WeekdayList\n                locSettings={locSettings}\n                editorValues={editorValues}\n                update={update}\n              />\n            </IonCol>\n          </IonRow>\n          <IonRow className=\"edit-row\">\n            <IonCol size=\"12\">\n              <div style={{ borderTop: \"1px solid gray\", width: \"100%\" }} />\n            </IonCol>\n          </IonRow>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default RecurringEventSection;\n","import React from \"react\";\r\nimport {\r\n  IonButton,\r\n  IonCol,\r\n  IonContent,\r\n  IonGrid,\r\n  IonHeader,\r\n  IonRow,\r\n  IonTitle,\r\n  IonToolbar,\r\n} from \"@ionic/react\";\r\nimport { RecurrenceUpdateType } from \"../../enums/RecurrenceUpdateType\";\r\nimport \"./RecurrenceUpdateTypeSelector.scss\";\r\n\r\ninterface RecurrenceUpdateTypeSelectorProps {\r\n  onSelect: (selection: RecurrenceUpdateType | null) => void;\r\n  updateType: \"NO\" | \"UPDATE\" | \"DELETE\";\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst RecurrenceUpdateTypeSelector: React.FC<RecurrenceUpdateTypeSelectorProps> = ({\r\n  onSelect,\r\n  updateType,\r\n}: RecurrenceUpdateTypeSelectorProps) => {\r\n  if (updateType === \"NO\") {\r\n    return <div />;\r\n  }\r\n\r\n  const onButtonClick = (choice: RecurrenceUpdateType | null) => {\r\n    onSelect(choice);\r\n  };\r\n\r\n  const titleText =\r\n    updateType === \"UPDATE\"\r\n      ? \"Update Recurring Events\"\r\n      : \"Delete Recurring Events\";\r\n\r\n  return (\r\n    <>\r\n      <IonContent>\r\n        <IonHeader mode=\"ios\">\r\n          <IonToolbar>\r\n            <IonTitle>{titleText}</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonGrid>\r\n          <IonRow>\r\n            <IonCol size=\"12\">\r\n              <IonButton\r\n                expand=\"block\"\r\n                color=\"danger\"\r\n                className=\"apply-button\"\r\n                onClick={() =>\r\n                  onButtonClick(RecurrenceUpdateType.UpdateSingleEvent)\r\n                }\r\n              >\r\n                This event\r\n              </IonButton>\r\n            </IonCol>\r\n          </IonRow>\r\n          <IonRow>\r\n            <IonCol size=\"12\">\r\n              <IonButton\r\n                expand=\"block\"\r\n                color=\"danger\"\r\n                className=\"apply-button\"\r\n                onClick={() =>\r\n                  onButtonClick(RecurrenceUpdateType.UpdateEntireSeries)\r\n                }\r\n              >\r\n                Entire series\r\n              </IonButton>\r\n            </IonCol>\r\n          </IonRow>\r\n          <IonRow>\r\n            <IonCol size=\"12\">\r\n              <IonButton\r\n                expand=\"block\"\r\n                color=\"danger\"\r\n                className=\"apply-button\"\r\n                onClick={() =>\r\n                  onButtonClick(RecurrenceUpdateType.UpdateSeriesForward)\r\n                }\r\n              >\r\n                This event forward\r\n              </IonButton>\r\n            </IonCol>\r\n          </IonRow>\r\n          <IonRow>\r\n            <IonCol size=\"12\">\r\n              <IonButton\r\n                expand=\"block\"\r\n                className=\"cancel-btn\"\r\n                onClick={() => onButtonClick(null)}\r\n              >\r\n                Cancel\r\n              </IonButton>\r\n            </IonCol>\r\n          </IonRow>\r\n        </IonGrid>\r\n      </IonContent>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RecurrenceUpdateTypeSelector;\r\n","import {\r\n  IonButton,\r\n  IonCol,\r\n  IonContent,\r\n  IonGrid,\r\n  IonHeader,\r\n  IonModal,\r\n  IonRow,\r\n  IonTitle,\r\n  IonToolbar,\r\n} from \"@ionic/react\";\r\nimport React, { useState } from \"react\";\r\nimport \"./useOrbitalDialogBox.scss\";\r\n\r\nexport interface DialogOptions {\r\n  value: number;\r\n  text: string;\r\n  color: string;\r\n}\r\n\r\nfunction useOrbitalDialogBox() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [dialogData, setDialogData] = useState({\r\n    header: \"\",\r\n    message: \"\",\r\n    options: [] as DialogOptions[],\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    onDismiss: (selection: number | null) => {},\r\n  });\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  const showDialog = (\r\n    header: string,\r\n    message: string,\r\n    dialogOptions: DialogOptions[],\r\n    onDismiss: (selection: number | null) => void\r\n  ) => {\r\n    setDialogData({\r\n      header,\r\n      message,\r\n      options: dialogOptions,\r\n      onDismiss,\r\n    });\r\n\r\n    setIsOpen(true);\r\n  };\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  const onButtonClick = (selection: number | null) => {\r\n    setIsOpen(false);\r\n    dialogData.onDismiss(selection);\r\n  };\r\n\r\n  const dialogBoxJsx = (\r\n    <IonModal\r\n      isOpen={isOpen}\r\n      cssClass=\"orbital-dialog-modal\"\r\n      onDidDismiss={() => onButtonClick(null)}\r\n    >\r\n      <IonContent className=\"modal-content\">\r\n        <IonHeader mode=\"ios\">\r\n          <IonToolbar>\r\n            <IonTitle>{dialogData.header}</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonGrid>\r\n          {dialogData.options.map((opt) => (\r\n            <IonRow key={opt.value}>\r\n              <IonCol size=\"12\">\r\n                <IonButton\r\n                  expand=\"block\"\r\n                  color={opt.color}\r\n                  className=\"apply-button\"\r\n                  onClick={() => onButtonClick(opt.value)}\r\n                >\r\n                  {opt.text}\r\n                </IonButton>\r\n              </IonCol>\r\n            </IonRow>\r\n          ))}\r\n          <IonRow>\r\n            <IonCol size=\"12\">\r\n              <IonButton\r\n                expand=\"block\"\r\n                className=\"cancel-btn\"\r\n                onClick={() => onButtonClick(null)}\r\n              >\r\n                Cancel\r\n              </IonButton>\r\n            </IonCol>\r\n          </IonRow>\r\n        </IonGrid>\r\n      </IonContent>\r\n    </IonModal>\r\n  );\r\n\r\n  return {\r\n    showDialog,\r\n    dialogBoxJsx,\r\n  };\r\n}\r\n\r\nexport default useOrbitalDialogBox;\r\n","import React, { useEffect, useReducer, useState } from \"react\";\nimport {\n  IonButton,\n  IonButtons,\n  IonIcon,\n  IonContent,\n  IonFooter,\n  IonHeader,\n  IonGrid,\n  IonRow,\n  IonCol,\n  IonTitle,\n  IonToolbar,\n  IonModal,\n} from \"@ionic/react\";\nimport { arrowBackOutline } from \"ionicons/icons\";\nimport \"./EditEventModal.scss\";\nimport { AuthorizedItems } from \"../../orbital-interfaces/authorized-items\";\nimport EventTypeStatusEditor from \"./editor/EventTypeStatusEditor\";\nimport EventPositionEditor from \"./editor/EventPositionEditor\";\nimport EventEmployeeEditor from \"./editor/EventEmployeeEditor\";\nimport EventStartEndEditor from \"./editor/EventStartEndEditor\";\nimport EventBreakEditor from \"./editor/EventBreakEditor\";\nimport EventTagEditor from \"./editor/EventTagEditor\";\nimport EventConfirmEditor from \"./editor/EventConfirmEditor\";\nimport EventIsClockedInEditor from \"./editor/EventIsClockedInEditor\";\nimport {\n  editorValueReducer,\n  INITIAL_EDITOR_VAUES,\n} from \"./EditEventModalState\";\nimport scheduleEventApi from \"../../api/ScheduleEventsAPI\";\nimport { ApplicationUserContext } from \"../../context/ApplicationUserContext\";\nimport useDialogBox from \"../../hooks/useDialogBox\";\nimport { ScheduleEvent } from \"../../orbital-interfaces/ScheduleEvent\";\nimport EventNotesEditor from \"./editor/EventNotesEditor\";\nimport EventClockoutValueEditor from \"./editor/EventClockoutValueEditor\";\nimport EventReqeustEditor from \"./editor/EventRequestEditor\";\nimport { createBrowserHistory } from \"history\";\nimport { EventEditAuthorization } from \"./EditEventAuthorization\";\nimport RecurringEventSection from \"./editor/RecurringEventSection\";\nimport { RecurrenceUpdateType } from \"../../enums/RecurrenceUpdateType\";\nimport RecurrenceUpdateTypeSelector from \"./RecurrenceUpdateTypeSelector\";\nimport useOrbitalDialogBox from \"../../hooks/useOrbitalDialogBox\";\n\ninterface ScheduleFilterModalProps {\n  scheduleEventId: number | null;\n  auth: AuthorizedItems;\n  onDismissModal: (toastMessage?: string) => void;\n  onCancelModal: () => void;\n  isOpen: boolean;\n  eventEditAuth: EventEditAuthorization;\n}\n\n// --------------------------------------------------------------------------------------\nconst EditEventModal: React.FC<ScheduleFilterModalProps> = ({\n  auth,\n  scheduleEventId,\n  onDismissModal,\n  onCancelModal,\n  isOpen,\n  eventEditAuth,\n}) => {\n  const dlg = useDialogBox();\n  const { user } = React.useContext(ApplicationUserContext);\n  const [editorValues, updateEditorValues] = useReducer(\n    editorValueReducer,\n    INITIAL_EDITOR_VAUES\n  );\n\n  const [scheduleEvent, setScheduleEvent] = useState(\n    null as ScheduleEvent | null\n  );\n\n  const [recurrenceUpdateType, setRecurrenceUpdateType] = useState(\n    null as RecurrenceUpdateType | null\n  );\n\n  const [\n    showRecurrenceUpdateTypeSelector,\n    setShowRecurrenceUpdateTypeSelector,\n  ] = useState(\"NO\" as \"NO\" | \"UPDATE\" | \"DELETE\");\n\n  const [buttonClicked, setButtonClicked] = useState(\n    \"NONE\" as \"NONE\" | \"CREATEUPDATE\" | \"DELETE\"\n  );\n\n  const isEditing = scheduleEventId !== null;\n  const dialog = useOrbitalDialogBox();\n  let title = \"New Event\";\n  let buttonText = \"CREATE\";\n\n  if (isEditing) {\n    title = \"Edit Event\";\n    buttonText = \"UPDATE\";\n  }\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!isOpen) {\n      return;\n    }\n\n    if (!auth || !auth.locations || auth.locations.length === 0) {\n      return;\n    }\n\n    if (scheduleEventId) {\n      scheduleEventApi\n        .getScheduleEvent(user, scheduleEventId)\n        .then((scheduleEvent) => {\n          if (!scheduleEvent) {\n            dlg.showAlert(\n              \"No Event\",\n              \"The event may have been removed or you no longer have access\",\n              onCancel\n            );\n            return;\n          }\n\n          setScheduleEvent(scheduleEvent);\n          updateEditorValues({\n            type: \"BEGIN-UPDATE\",\n            ev: scheduleEvent,\n            auth,\n            eventEditAuth,\n          });\n        });\n    } else {\n      if (scheduleEvent !== null) {\n        setScheduleEvent(null);\n      }\n\n      updateEditorValues({ type: \"CREATE-EVENT\", auth });\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [scheduleEventId, user, isOpen, auth]);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (recurrenceUpdateType !== null && buttonClicked !== \"NONE\") {\n      if (buttonClicked === \"CREATEUPDATE\") {\n        createOrUpdate();\n      } else {\n        deleteEvent(\n          editorValues.recurrenceId !== null &&\n            editorValues.recurrenceId !== undefined\n        );\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [recurrenceUpdateType, buttonClicked]);\n\n  // --------------------------------------------------------------------------------------\n  const createOrUpdate = () => {\n    const apiCall =\n      editorValues.scheduleEventId === 0\n        ? scheduleEventApi.createScheduleEvent\n        : scheduleEventApi.updateScheduleEvent;\n    apiCall(user, editorValues, recurrenceUpdateType).then((result) => {\n      if (result.error) {\n        dlg.showAlert(\"Cannot update\", result.message, () => {\n          onDismissModal(\"Could not update event\");\n        });\n      } else {\n        onDismissModal(\"Event Updated\");\n      }\n    });\n  };\n\n  // --------------------------------------------------------------------------------------\n  const deleteEvent = (skipPrompt: boolean) => {\n    const goDelete = () => {\n      scheduleEventApi\n        .deleteScheduleEvent(\n          user,\n          editorValues.scheduleEventId,\n          recurrenceUpdateType\n        )\n        .then((result) => {\n          if (result.error) {\n            dlg.showAlert(\"Cannot delete\", result.message, () => {\n              onDismissModal(\"Could not delete event\");\n            });\n          } else {\n            onDismissModal(\"Deleted Event\");\n          }\n        });\n    };\n\n    if (skipPrompt) {\n      goDelete();\n    } else {\n      dialog.showDialog(\n        \"Delete event?\",\n        \"\",\n        [{ text: \"Delete\", color: \"danger\", value: 1 }],\n        (selection) => {\n          if (selection === 1) {\n            goDelete();\n          }\n        }\n      );\n    }\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onCreateOrUpdateClick = () => {\n    setButtonClicked(\"CREATEUPDATE\");\n    if (editorValues.recurrenceId) {\n      if (recurrenceUpdateType !== null) {\n        createOrUpdate();\n      } else {\n        setShowRecurrenceUpdateTypeSelector(\"UPDATE\");\n      }\n    } else {\n      createOrUpdate();\n    }\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onRecurrenceUpdateTypeSelect = (\n    selection: RecurrenceUpdateType | null\n  ) => {\n    setShowRecurrenceUpdateTypeSelector(\"NO\");\n    setRecurrenceUpdateType(selection);\n    if (selection === null) {\n      setButtonClicked(\"NONE\");\n    }\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onDeleteClick = () => {\n    setButtonClicked(\"DELETE\");\n    if (editorValues.recurrenceId) {\n      if (recurrenceUpdateType !== null) {\n        deleteEvent(true);\n      } else {\n        setShowRecurrenceUpdateTypeSelector(\"DELETE\");\n      }\n    } else {\n      deleteEvent(\n        editorValues.recurrenceId !== null &&\n          editorValues.recurrenceId !== undefined\n      );\n    }\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onCancel = () => {\n    updateEditorValues({ type: \"CANCEL\" });\n    const history = createBrowserHistory();\n    history.push(\"/tabs/schedule\");\n    onCancelModal();\n  };\n\n  if (\n    !isOpen ||\n    !auth ||\n    !auth.locations ||\n    auth.locations.length === 0 ||\n    editorValues.scheduleEventId === -1\n  ) {\n    return (\n      <>\n        <div>Loading</div>\n        {dlg.alertBoxJsx}\n      </>\n    );\n  } else {\n    return (\n      <>\n        <IonHeader>\n          <IonToolbar>\n            <IonButtons slot=\"start\">\n              <IonButton onClick={onCancel}>\n                <IonIcon icon={arrowBackOutline} mode=\"md\" slot=\"icon-only\" />\n              </IonButton>\n            </IonButtons>\n            <IonTitle>{title}</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n\n        <IonContent class=\"outer-content\">\n          <IonGrid>\n            <EventTypeStatusEditor\n              editorValues={editorValues}\n              update={updateEditorValues}\n              auth={auth}\n              eventTypes={eventEditAuth.eventTypeOptionList}\n              eventStatuses={eventEditAuth.eventStatusOptionList}\n            />\n\n            <IonRow className=\"edit-row\">\n              <EventConfirmEditor\n                auth={auth}\n                editorValues={editorValues}\n                update={updateEditorValues}\n              />\n              <EventIsClockedInEditor\n                auth={auth}\n                editorValues={editorValues}\n                update={updateEditorValues}\n              />\n            </IonRow>\n\n            <IonRow className=\"edit-row\">\n              <IonCol size=\"12\">\n                <div\n                  style={{ width: \"100%\", borderBottom: \"1px solid #AAA\" }}\n                />\n              </IonCol>\n            </IonRow>\n\n            <EventPositionEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventEmployeeEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventStartEndEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <RecurringEventSection\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventBreakEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventTagEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventClockoutValueEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventNotesEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n          </IonGrid>\n\n          {dlg.alertBoxJsx}\n          {dialog.dialogBoxJsx}\n\n          <IonModal\n            isOpen={showRecurrenceUpdateTypeSelector !== \"NO\"}\n            onDidDismiss={() => {\n              onRecurrenceUpdateTypeSelect(null);\n            }}\n            cssClass=\"recurrence-update-modal\"\n          >\n            <RecurrenceUpdateTypeSelector\n              onSelect={onRecurrenceUpdateTypeSelect}\n              updateType={showRecurrenceUpdateTypeSelector}\n            />\n          </IonModal>\n        </IonContent>\n\n        <IonFooter className=\"outer-content footer\">\n          <EventReqeustEditor\n            auth={auth}\n            eventType={editorValues.eventType}\n            eventEnd={editorValues.eventEnd}\n            eventStatus={editorValues.eventStatus}\n            eventEmployeeId={editorValues.employee.id}\n            eventPositionId={editorValues.position.position.id}\n            scheduleEventId={editorValues.scheduleEventId}\n            locationId={editorValues.locationId}\n            eventEditAuth={eventEditAuth}\n            update={updateEditorValues}\n            cancelEditModal={(message) => onDismissModal(message)}\n            setUsageText={() => {}}\n          />\n          <IonButton\n            className=\"apply-button\"\n            expand=\"block\"\n            onClick={onCreateOrUpdateClick}\n            disabled={!editorValues.isDirty || !editorValues.valid}\n            hidden={editorValues.isReadonly}\n          >\n            {buttonText}\n          </IonButton>\n          <IonButton\n            className=\"delete-button\"\n            expand=\"block\"\n            onClick={onDeleteClick}\n            hidden={\n              editorValues.isReadonly || editorValues.scheduleEventId <= 0\n            }\n          >\n            DELETE\n          </IonButton>\n        </IonFooter>\n      </>\n    );\n  }\n};\n\nexport default EditEventModal;\n","import { IonToast } from \"@ionic/react\";\r\nimport React, { useState } from \"react\";\r\n\r\nfunction useSimpleToast() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [toastData, setToastData] = useState({ message: \"\" });\r\n\r\n  const showToast = (message: string) => {\r\n    setToastData({\r\n      message,\r\n    });\r\n\r\n    setIsOpen(true);\r\n  };\r\n\r\n  const simpleToastJsx = (\r\n    <IonToast\r\n      isOpen={isOpen}\r\n      onDidDismiss={() => setIsOpen(false)}\r\n      position=\"top\"\r\n      message={toastData.message}\r\n      duration={500}\r\n    />\r\n  );\r\n\r\n  return {\r\n    showToast,\r\n    simpleToastJsx,\r\n  };\r\n}\r\n\r\nexport default useSimpleToast;\r\n","export enum ClockInRequirement {\r\n  MatchingShift = 1,\r\n  AnyShift = 2,\r\n  NoShift = 3,\r\n}\r\n","import React from \"react\";\r\nimport \"./EventCard.scss\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\n\r\ninterface EventCardSkeletonProps {\r\n  threeRows?: boolean;\r\n}\r\n\r\nconst EventCardSkeleton: React.FC<EventCardSkeletonProps> = ({\r\n  threeRows,\r\n}: EventCardSkeletonProps) => {\r\n  return (\r\n    <button className=\"event\">\r\n      <div className=\"card-first-col\">\r\n        <div className=\"day-name\">\r\n          <Skeleton />{\" \"}\r\n        </div>\r\n        <div className=\"day-number\">\r\n          <Skeleton />\r\n        </div>\r\n      </div>\r\n      <div style={{ padding: \"3px\" }}>\r\n        <Skeleton width={5} height={45} />\r\n      </div>\r\n      <div className=\"card-second-col\">\r\n        <div className=\"time-row\">\r\n          <span>\r\n            <Skeleton width={150} height={9} />\r\n            &nbsp;&nbsp;\r\n          </span>\r\n          <Skeleton />\r\n        </div>\r\n        {threeRows && (\r\n          <div>\r\n            <Skeleton width={80} height={10} />\r\n          </div>\r\n        )}\r\n        <div className=\"position-row\">\r\n          <Skeleton width={150} height={10} />\r\n          &nbsp;&nbsp;\r\n        </div>\r\n      </div>\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default EventCardSkeleton;\r\n","import React from \"react\";\r\nimport \"./NoEventsToShow.scss\";\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst NoEventsToShow: React.FC = () => {\r\n  return (\r\n    <div className=\"no-events-wrapper\">\r\n      <span className=\"no-events-span\">No Events</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NoEventsToShow;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  IonTitle,\r\n  IonToolbar,\r\n  IonContent,\r\n  IonPage,\r\n  IonModal,\r\n  IonButtons,\r\n  IonMenuButton,\r\n  IonSegment,\r\n  IonSegmentButton,\r\n  IonButton,\r\n  IonIcon,\r\n  IonHeader,\r\n} from \"@ionic/react\";\r\nimport { funnel, add } from \"ionicons/icons\";\r\nimport \"./SchedulePage.scss\";\r\nimport { getWeekStart } from \"../util/time-helper\";\r\nimport { addDays, startOfDay } from \"date-fns\";\r\nimport { AuthorizedLocation } from \"../orbital-interfaces/authorized-items\";\r\nimport ScheduleEventsAPI from \"../api/ScheduleEventsAPI\";\r\nimport { DailyNotes } from \"../orbital-interfaces/DailyNotes\";\r\nimport { RefresherEventDetail } from \"@ionic/core\";\r\nimport { EventInformation, HoursList } from \"../orbital-interfaces/TEC\";\r\nimport {\r\n  EventFilter,\r\n  initialEventFilter,\r\n} from \"../orbital-interfaces/EventFilter\";\r\nimport WeekChooser from \"../components/SchedulePageComponents/WeekChooser\";\r\nimport EventList from \"../components/SchedulePageComponents/EventList\";\r\n// eslint-disable-next-line max-len\r\nimport ScheduleFilterModal from \"../components/SchedulePageComponents/ScheduleFilterModal\";\r\nimport useIonicRefresher from \"../hooks/useIonicRefresher\";\r\nimport EditEventModal from \"../components/EditEvent/EditEventModal\";\r\nimport useSimpleToast from \"../hooks/useSimpleToast\";\r\nimport { AuthorizedItemsContext } from \"../context/AuthorizedItemsContext\";\r\nimport { ApplicationUserContext } from \"../context/ApplicationUserContext\";\r\nimport { RouteComponentProps } from \"react-router\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport EventCardSkeleton from \"../components/SchedulePageComponents/EventCardSkeleton\";\r\nimport {\r\n  EventEditAuthorization,\r\n  getEventNewAuthorization,\r\n} from \"../components/EditEvent/EditEventAuthorization\";\r\nimport NoEventsToShow from \"../components/SchedulePageComponents/NoEventsToShow\";\r\n\r\nconst initialEvents: EventInformation[] = [];\r\nconst initialDailyNotes: DailyNotes[] = [];\r\n\r\ninterface SchedulePageProps\r\n  extends RouteComponentProps<{\r\n    scheduleEventId?: string;\r\n  }> {}\r\n\r\n// eslint-disable-next-line react/prop-types\r\nconst SchedulePage: React.FC<SchedulePageProps> = ({ match }) => {\r\n  // ------------------------------------------------------------------------------------\r\n  const { user } = React.useContext(ApplicationUserContext);\r\n  const { auth, refreshAuth } = React.useContext(AuthorizedItemsContext);\r\n  const toast = useSimpleToast();\r\n\r\n  const doRefresh = (e: CustomEvent<RefresherEventDetail>) => {\r\n    setRefreshing(true);\r\n    refreshAuth(true, user).then((newAuth) => {\r\n      console.log(\"yo\");\r\n      if (newAuth) {\r\n        getScheduleEvents(newAuth.locations, filter, segment, e);\r\n      }\r\n    });\r\n  };\r\n\r\n  const [filterAppliedClass, setFilterAppliedClass] = useState(\r\n    \"filter-not-applied\"\r\n  );\r\n  const refresher = useIonicRefresher(doRefresh);\r\n  const startDate =\r\n    auth && auth.locations && auth.locations.length > 0\r\n      ? getWeekStart(\r\n          startOfDay(new Date()),\r\n          auth.locations[0].settings.DayWeekStartsOn,\r\n          auth.locations[0].settings.DayStartTime\r\n        )\r\n      : getWeekStart(startOfDay(new Date()), \"Monday\", \"\");\r\n\r\n  const [myScheduleEvents, setMyScheduleEvents] = useState(initialEvents);\r\n  const [myDailyNotes, setMyDailyNotes] = useState(initialDailyNotes);\r\n  const [myHoursPerDay, setMyHoursPerDay] = useState([] as HoursList[]);\r\n  const [requestScheduleEvents, setRequestScheduleEvents] = useState(\r\n    initialEvents\r\n  );\r\n  const [requestDailyNotes, setRequestDailyNotes] = useState(initialDailyNotes);\r\n  const [requestHoursPerDay, setRequestHoursPerDay] = useState(\r\n    [] as HoursList[]\r\n  );\r\n  const [allScheduleEvents, setAllScheduleEvents] = useState(initialEvents);\r\n  const [allDailyNotes, setAllDailyNotes] = useState(initialDailyNotes);\r\n  const [allHoursPerDay, setAllHoursPerDay] = useState([] as HoursList[]);\r\n\r\n  const [showLoading, setShowLoading] = useState(true);\r\n  const [segment, setSegment] = useState<\"my\" | \"requests\" | \"all\">(\"my\");\r\n  const [showFilterModal, setShowFilterModal] = useState(false);\r\n  const [refreshing, setRefreshing] = useState(true);\r\n  const [showEventModal, setShowEventModal] = useState(false);\r\n  const [editEventId, setEditEventId] = useState(null as number | null);\r\n  const [eventEditAuth, setEventEditAuth] = useState(\r\n    null as EventEditAuthorization | null\r\n  );\r\n  const [filter, setFilter] = useState({\r\n    ...initialEventFilter,\r\n    start: startDate,\r\n    end: addDays(startDate, 6),\r\n    positionIds: auth.locations.flatMap((l) =>\r\n      l.departments.flatMap((d) => d.positions.map((p) => p.id))\r\n    ),\r\n    filterByEmployee: true,\r\n  });\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    if (auth && auth.locations && auth.locations.length > 0) {\r\n      const newFilter = {\r\n        ...filter,\r\n        positionIds: auth.locations.flatMap((l) =>\r\n          l.departments.flatMap((d) => d.positions.map((p) => p.id))\r\n        ),\r\n        dnLocIds: auth.locations.map((l) => l.id),\r\n        settingsLocId: auth.locations[0].id,\r\n      };\r\n\r\n      setFilter(newFilter);\r\n\r\n      if (\r\n        (segment === \"my\" && myScheduleEvents.length === 0) ||\r\n        (segment === \"requests\" && requestScheduleEvents.length === 0) ||\r\n        (segment === \"all\" && allScheduleEvents.length === 0)\r\n      ) {\r\n        setShowLoading(true);\r\n      }\r\n\r\n      if (myScheduleEvents.length === 0) {\r\n        getScheduleEvents(auth.locations, newFilter, \"my\", undefined);\r\n      }\r\n\r\n      if (requestScheduleEvents.length === 0) {\r\n        getScheduleEvents(auth.locations, newFilter, \"requests\", undefined);\r\n      }\r\n\r\n      if (allScheduleEvents.length === 0) {\r\n        getScheduleEvents(auth.locations, newFilter, \"all\", undefined);\r\n      }\r\n    } else if (auth && auth.employeeId === 0) {\r\n      setMyScheduleEvents([]);\r\n      setRequestScheduleEvents([]);\r\n      setAllScheduleEvents([]);\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [auth]);\r\n\r\n  useEffect(() => {\r\n    // eslint-disable-next-line react/prop-types\r\n    if (match.params.scheduleEventId) {\r\n      // eslint-disable-next-line react/prop-types\r\n      setEditEventId(parseInt(match.params.scheduleEventId));\r\n      setShowEventModal(true);\r\n    }\r\n    // eslint-disable-next-line react/prop-types\r\n  }, [match.params.scheduleEventId]);\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const getScheduleEvents = (\r\n    locations: AuthorizedLocation[],\r\n    f: EventFilter,\r\n    curSegment: \"my\" | \"requests\" | \"all\",\r\n    e?: CustomEvent<RefresherEventDetail>\r\n  ) => {\r\n    const actualFilter1 = {\r\n      ...f,\r\n      filterByEmployee: curSegment === \"my\",\r\n      eventTypeId: curSegment === \"requests\" ? -1 : f.eventTypeId,\r\n      eventStatusId: curSegment === \"requests\" ? 2 : f.eventStatusId,\r\n    };\r\n    getScheduleEventsByFilterInternal(actualFilter1, curSegment, e);\r\n\r\n    setMyScheduleEvents([]);\r\n    setRequestScheduleEvents([]);\r\n    setAllScheduleEvents([]);\r\n\r\n    if (curSegment === \"my\") {\r\n      const actualFilter2 = {\r\n        ...f,\r\n        filterByEmployee: false,\r\n        eventTypeId: -1,\r\n        eventStatusId: 2,\r\n      };\r\n      getScheduleEventsByFilterInternal(actualFilter2, \"requests\", e);\r\n\r\n      const actualFilter3 = {\r\n        ...f,\r\n        filterByEmployee: false,\r\n      };\r\n      getScheduleEventsByFilterInternal(actualFilter3, \"all\", e);\r\n    } else if (curSegment === \"requests\") {\r\n      const actualFilter4 = {\r\n        ...f,\r\n        filterByEmployee: true,\r\n      };\r\n      getScheduleEventsByFilterInternal(actualFilter4, \"my\", e);\r\n\r\n      const actualFilter5 = {\r\n        ...f,\r\n        filterByEmployee: false,\r\n      };\r\n      getScheduleEventsByFilterInternal(actualFilter5, \"all\", e);\r\n    } else if (curSegment === \"all\") {\r\n      const actualFilter6 = {\r\n        ...f,\r\n        filterByEmployee: true,\r\n      };\r\n      getScheduleEventsByFilterInternal(actualFilter6, \"my\", e);\r\n\r\n      const actualFilter7 = {\r\n        ...f,\r\n        filterByEmployee: false,\r\n        eventTypeId: -1,\r\n        eventStatusId: 2,\r\n      };\r\n      getScheduleEventsByFilterInternal(actualFilter7, \"requests\", e);\r\n    }\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const getScheduleEventsByFilterInternal = (\r\n    f: EventFilter,\r\n    curSegment: \"my\" | \"requests\" | \"all\",\r\n    e?: CustomEvent<RefresherEventDetail>\r\n  ) => {\r\n    if (f.settingsLocId === 0) {\r\n      setShowLoading(false);\r\n      setRefreshing(false);\r\n      if (e) {\r\n        e.detail.complete();\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    ScheduleEventsAPI.getScheduleEventsByFilter(user, f).then((res) => {\r\n      if (e) {\r\n        e.detail.complete();\r\n      }\r\n\r\n      switch (curSegment) {\r\n        case \"my\":\r\n          setMyScheduleEvents(res.events);\r\n          setMyDailyNotes(res.dailyNotes);\r\n          setMyHoursPerDay(res.hoursPerDay);\r\n          break;\r\n        case \"requests\":\r\n          setRequestScheduleEvents(res.events);\r\n          setRequestDailyNotes(res.dailyNotes);\r\n          setRequestHoursPerDay(res.hoursPerDay);\r\n          break;\r\n        case \"all\":\r\n          setAllScheduleEvents(res.events);\r\n          setAllDailyNotes(res.dailyNotes);\r\n          setAllHoursPerDay(res.hoursPerDay);\r\n          break;\r\n      }\r\n\r\n      setShowLoading(false);\r\n      setRefreshing(false);\r\n    });\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const onEventClick = (\r\n    ev: EventInformation,\r\n    newEventEditAuth: EventEditAuthorization\r\n  ) => {\r\n    setEditEventId(ev.ScheduleEventId);\r\n    setEventEditAuth(newEventEditAuth);\r\n    setShowEventModal(true);\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const onEventUpdated = (toastMessage?: string) => {\r\n    if (toastMessage) {\r\n      toast.showToast(toastMessage!);\r\n    }\r\n\r\n    getScheduleEvents(auth.locations, filter, segment, undefined);\r\n    setShowEventModal(false);\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const setStartDate = (date: Date) => {\r\n    const newFilter = {\r\n      ...filter,\r\n      start: date,\r\n      end: addDays(date, 6),\r\n    };\r\n\r\n    setFilter(newFilter);\r\n    getScheduleEvents(auth.locations, newFilter, segment, undefined);\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const onDismissFilterModal = (f: EventFilter, filterApplied: boolean) => {\r\n    setFilter(f);\r\n    console.log(\"Filter applied? \", filterApplied);\r\n    setFilterAppliedClass(\r\n      filterApplied ? \"filter-applied\" : \"filter-not-applied\"\r\n    );\r\n    setShowFilterModal(false);\r\n    getScheduleEvents(auth.locations, f, segment, undefined);\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const onSegmentChange = (segmentName: \"my\" | \"requests\" | \"all\") => {\r\n    setSegment(segmentName);\r\n\r\n    if (\r\n      (segmentName === \"my\" && myScheduleEvents.length === 0) ||\r\n      (segmentName === \"requests\" && requestScheduleEvents.length === 0) ||\r\n      (segmentName === \"all\" && allScheduleEvents.length === 0)\r\n    ) {\r\n      setShowLoading(true);\r\n      getScheduleEvents(auth.locations, filter, segmentName, undefined);\r\n    }\r\n  };\r\n\r\n  if (!auth || !auth.locations || auth.locations.length === 0) {\r\n    return <div>-</div>;\r\n  }\r\n\r\n  return (\r\n    <IonPage id=\"schedule-page\">\r\n      <IonHeader mode=\"ios\">\r\n        <IonToolbar mode=\"md\">\r\n          <IonButtons slot=\"start\">\r\n            <IonMenuButton />\r\n          </IonButtons>\r\n          <IonTitle slot=\"start\">Schedule</IonTitle>\r\n          <IonButtons slot=\"end\">\r\n            <IonButton\r\n              onClick={() => {\r\n                setEditEventId(null);\r\n                setEventEditAuth(getEventNewAuthorization(auth));\r\n                setShowEventModal(true);\r\n              }}\r\n            >\r\n              <IonIcon icon={add} mode=\"md\" slot=\"icon-only\" />\r\n            </IonButton>\r\n            <IonButton onClick={() => setShowFilterModal(true)}>\r\n              <div className={filterAppliedClass}>&#183;</div>\r\n              <IonIcon icon={funnel} mode=\"ios\" slot=\"icon-only\" />\r\n            </IonButton>\r\n          </IonButtons>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonSegment mode=\"md\" value={segment}>\r\n        <IonSegmentButton\r\n          mode=\"md\"\r\n          value=\"my\"\r\n          onClick={() => onSegmentChange(\"my\")}\r\n        >\r\n          MY\r\n        </IonSegmentButton>\r\n        <IonSegmentButton\r\n          mode=\"md\"\r\n          value=\"requests\"\r\n          onClick={() => onSegmentChange(\"requests\")}\r\n        >\r\n          REQUESTS\r\n        </IonSegmentButton>\r\n        <IonSegmentButton\r\n          mode=\"md\"\r\n          value=\"all\"\r\n          onClick={() => onSegmentChange(\"all\")}\r\n        >\r\n          ALL\r\n        </IonSegmentButton>\r\n      </IonSegment>\r\n      <WeekChooser\r\n        startDate={getWeekStart(\r\n          filter.start,\r\n          auth.locations[0].settings.DayWeekStartsOn,\r\n          auth.locations[0].settings.DayStartTime\r\n        )}\r\n        setStartDate={setStartDate}\r\n      />\r\n      <IonContent>\r\n        {refresher.ionicRefresherJsx}\r\n\r\n        {!showLoading &&\r\n          !refreshing &&\r\n          segment === \"my\" &&\r\n          myScheduleEvents.length === 0 && <NoEventsToShow />}\r\n\r\n        {!(showLoading || refreshing) &&\r\n          segment === \"my\" &&\r\n          myScheduleEvents.length > 0 && (\r\n            <EventList\r\n              events={myScheduleEvents}\r\n              listType={segment}\r\n              notes={myDailyNotes}\r\n              hoursPerDay={myHoursPerDay}\r\n              auth={auth}\r\n              onEdit={onEventClick}\r\n            />\r\n          )}\r\n\r\n        {!showLoading &&\r\n          !refreshing &&\r\n          segment === \"requests\" &&\r\n          requestScheduleEvents.length === 0 && <NoEventsToShow />}\r\n\r\n        {!(showLoading || refreshing) &&\r\n          segment === \"requests\" &&\r\n          requestScheduleEvents.length > 0 && (\r\n            <EventList\r\n              events={requestScheduleEvents}\r\n              listType={segment}\r\n              notes={requestDailyNotes}\r\n              hoursPerDay={requestHoursPerDay}\r\n              auth={auth}\r\n              onEdit={onEventClick}\r\n            />\r\n          )}\r\n\r\n        {!showLoading &&\r\n          !refreshing &&\r\n          segment === \"all\" &&\r\n          allScheduleEvents.length === 0 && <NoEventsToShow />}\r\n\r\n        {!(showLoading || refreshing) &&\r\n          segment === \"all\" &&\r\n          allScheduleEvents.length > 0 && (\r\n            <EventList\r\n              events={allScheduleEvents}\r\n              listType={segment}\r\n              notes={allDailyNotes}\r\n              hoursPerDay={allHoursPerDay}\r\n              auth={auth}\r\n              onEdit={onEventClick}\r\n            />\r\n          )}\r\n\r\n        {(showLoading || refreshing) && (\r\n          <>\r\n            <div style={{ marginTop: \"10px\" }} />\r\n            <Skeleton height={24} width={220} />\r\n            <br />\r\n            <EventCardSkeleton threeRows={segment !== \"my\"} />\r\n            <EventCardSkeleton threeRows={segment !== \"my\"} />\r\n            <EventCardSkeleton threeRows={segment !== \"my\"} />\r\n          </>\r\n        )}\r\n      </IonContent>\r\n\r\n      {toast.simpleToastJsx}\r\n\r\n      <IonModal\r\n        isOpen={showFilterModal}\r\n        onDidDismiss={() => setShowFilterModal(false)}\r\n      >\r\n        <ScheduleFilterModal\r\n          filter={filter}\r\n          auth={auth}\r\n          onDismissModal={onDismissFilterModal}\r\n          isOpen={showFilterModal}\r\n          onCancelModal={() => setShowFilterModal(false)}\r\n        />\r\n      </IonModal>\r\n\r\n      <IonModal\r\n        isOpen={showEventModal}\r\n        onDidDismiss={() => setShowEventModal(false)}\r\n      >\r\n        <EditEventModal\r\n          isOpen={showEventModal}\r\n          auth={auth}\r\n          onCancelModal={() => setShowEventModal(false)}\r\n          onDismissModal={(toastMessage) => onEventUpdated(toastMessage)}\r\n          scheduleEventId={editEventId}\r\n          eventEditAuth={eventEditAuth!}\r\n        />\r\n      </IonModal>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default SchedulePage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  IonButton,\r\n  IonButtons,\r\n  IonIcon,\r\n  IonContent,\r\n  IonFooter,\r\n  IonHeader,\r\n  IonTitle,\r\n  IonToolbar,\r\n} from \"@ionic/react\";\r\nimport { arrowBackOutline } from \"ionicons/icons\";\r\nimport \"../SchedulePageComponents/ScheduleFilterModal.scss\";\r\nimport {\r\n  AuthorizedItems,\r\n  UnscheduledBreakOptions,\r\n  BreakType,\r\n} from \"../../orbital-interfaces/authorized-items\";\r\nimport { TimeClockSettingsData } from \"../../orbital-interfaces/TimeClockSettingsData\";\r\nimport { getEventBreakStartEndString } from \"../../util/time-helper\";\r\n\r\ninterface ScheduleFilterModalProps {\r\n  auth: AuthorizedItems;\r\n  tcData: TimeClockSettingsData;\r\n  onDismissModal: (selection: BreakItem) => void;\r\n}\r\n\r\nexport interface BreakItem {\r\n  key: string;\r\n  name: string;\r\n  breakType: BreakType;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst BreakSelectionModal: React.FC<ScheduleFilterModalProps> = ({\r\n  auth,\r\n  onDismissModal,\r\n  tcData,\r\n}: ScheduleFilterModalProps) => {\r\n  const [breakList, setBreakList] = useState([] as BreakItem[]);\r\n  const cancelOption = {\r\n    key: \"Cancel\",\r\n    name: \"\",\r\n    breakType: BreakType.UnscheduledUnpaid,\r\n  };\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    if (auth.locations.length === 0 || !tcData.ClockedInScheduleEvent) {\r\n      return;\r\n    }\r\n\r\n    const locSettings = auth.locations.filter(\r\n      (l) => l.id === tcData.ClockedInScheduleEvent!.LocationId\r\n    )[0].settings;\r\n    const breaks: BreakItem[] = [];\r\n\r\n    if (tcData.ScheduleEventsForClockIn.length > 0) {\r\n      tcData.ScheduleEventsForClockIn[0].EventBreaks.map((b) => {\r\n        return breaks.push({\r\n          key: b.BreakStart,\r\n          name: getEventBreakStartEndString(b),\r\n          breakType: BreakType.Scheduled,\r\n        });\r\n      });\r\n    }\r\n\r\n    switch (locSettings.UnscheduledBreakOptions) {\r\n      case UnscheduledBreakOptions.Both:\r\n        breaks.push({\r\n          key: \"UnScheduledUnpaid\",\r\n          name: \"Unscheduled\",\r\n          breakType: BreakType.UnscheduledUnpaid,\r\n        });\r\n        breaks.push({\r\n          key: \"UnScheduledPaid\",\r\n          name: \"Unscheduled $\",\r\n          breakType: BreakType.UnscheduledPaid,\r\n        });\r\n        break;\r\n\r\n      case UnscheduledBreakOptions.Paid:\r\n        breaks.push({\r\n          key: \"UnScheduledPaid\",\r\n          name: \"Unscheduled $\",\r\n          breakType: BreakType.UnscheduledPaid,\r\n        });\r\n        break;\r\n\r\n      case UnscheduledBreakOptions.Unpaid:\r\n        breaks.push({\r\n          key: \"UnScheduledUnpaid\",\r\n          name: \"Unscheduled\",\r\n          breakType: BreakType.UnscheduledUnpaid,\r\n        });\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    setBreakList(breaks);\r\n  }, [tcData, auth]);\r\n\r\n  return (\r\n    <>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonButtons slot=\"start\">\r\n            <IonButton onClick={() => onDismissModal(cancelOption)}>\r\n              <IonIcon icon={arrowBackOutline} mode=\"md\" slot=\"icon-only\" />\r\n            </IonButton>\r\n          </IonButtons>\r\n          <IonTitle>Choose Break</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonContent class=\"outer-content\">\r\n        {breakList.map((brk) => (\r\n          <IonButton\r\n            className=\"apply-button\"\r\n            expand=\"block\"\r\n            key={brk.key}\r\n            color=\"secondary\"\r\n            onClick={() => {\r\n              onDismissModal(brk);\r\n            }}\r\n          >\r\n            {brk.name}\r\n          </IonButton>\r\n        ))}\r\n      </IonContent>\r\n\r\n      <IonFooter>\r\n        <IonButton\r\n          className=\"cancel-button\"\r\n          expand=\"block\"\r\n          color=\"tertiary\"\r\n          onClick={() => onDismissModal(cancelOption)}\r\n        >\r\n          CANCEL\r\n        </IonButton>\r\n      </IonFooter>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BreakSelectionModal;\r\n","export enum StartBreakResponseCode {\r\n  Success,\r\n  BreakAlreadyExists,\r\n  AlreadyOnBreak,\r\n  ErrorInsertingBreak,\r\n  UserNotAtSpecifiedLocation,\r\n  EventDoesNotMatchCurrentUser,\r\n  InvalidUnscheduledBreak,\r\n}\r\n","export enum EndBreakResponseCode {\r\n  Success,\r\n  CannotEndRestrictedBreakEarly,\r\n  ErrorUpdatingEventBreak,\r\n  UserNotAtSpecifiedLocation,\r\n  EventDoesNotMatchCurrentUser,\r\n  BreakNoLongerExists,\r\n}\r\n","import { EndBreakResponse } from \"../orbital-interfaces/EndBreakResponse\";\r\nimport { StartBreakResponse } from \"../orbital-interfaces/StartBreakResponse\";\r\nimport { BreakType } from \"../orbital-interfaces/authorized-items\";\r\nimport { ScheduleEvent } from \"../orbital-interfaces/ScheduleEvent\";\r\nimport { ClockOutResponse } from \"../orbital-interfaces/ClockOutResponse\";\r\nimport { ClockInResponse } from \"../orbital-interfaces/ClockInResponse\";\r\n// eslint-disable-next-line max-len\r\nimport { SwitchPositionOrTagResponse } from \"../orbital-interfaces/SwitchPositionOrTagResponse\";\r\nimport { TimeClockSettingsData } from \"../orbital-interfaces/TimeClockSettingsData\";\r\nimport { ApplicationUser } from \"../context/ApplicationUserContext\";\r\nimport apiHelper from \"./OrbitalApiHelper\";\r\nimport { ClockInGeoLocations } from \"../orbital-interfaces/ClockInGeoLocations\";\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst getTimeClockSettings = async (\r\n  user: ApplicationUser,\r\n  lat: number | undefined,\r\n  lng: number | undefined\r\n) => {\r\n  const latitude = lat ?? user.latitude;\r\n  const longitude = lng ?? user.longitude;\r\n\r\n  console.log(\r\n    `API: getting timeclock settings, lat=${latitude}, lng=${longitude}\\` `\r\n  );\r\n  return (await apiHelper.get(\r\n    user,\r\n    `api/v1/employee/timeclock/?lat=${latitude}&lng=${longitude}`\r\n  )) as TimeClockSettingsData;\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst clockIn = async (\r\n  user: ApplicationUser,\r\n  positionId: number,\r\n  tagId: number | null\r\n) => {\r\n  // eslint-disable-next-line max-len\r\n  const baseUrl = `/api/v2/employee/timeclock/clockin/${positionId}/${tagId}?lat=${user.latitude}&lng=${user.longitude}`;\r\n  return (await apiHelper.post(user, baseUrl, {})) as ClockInResponse;\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst clockOut = async (user: ApplicationUser, clockOutValue?: number) => {\r\n  const clockoutDataModel = {\r\n    ClockOutValue: clockOutValue,\r\n    TimeClockBreak: null,\r\n    BreakStart: null,\r\n  };\r\n\r\n  return (await apiHelper.post(\r\n    user,\r\n    `/api/v2/employee/timeclock/clockout?lat=${user.latitude}&lng=${user.longitude}`,\r\n    clockoutDataModel\r\n  )) as ClockOutResponse;\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst switchPositionOrTag = async (\r\n  user: ApplicationUser,\r\n  positionId: number,\r\n  tagId: number | null,\r\n  clockOutValue?: number\r\n) => {\r\n  // eslint-disable-next-line max-len\r\n  const baseUrl = `/api/v2/employee/timeclock/switch/${positionId}/${tagId}?lat=${user.latitude}&lng=${user.longitude}`;\r\n  const clockoutDataModel = {\r\n    ClockOutValue: clockOutValue,\r\n    TimeClockBreak: null,\r\n    BreakStart: null,\r\n  };\r\n\r\n  return (await apiHelper.post(\r\n    user,\r\n    baseUrl,\r\n    clockoutDataModel\r\n  )) as SwitchPositionOrTagResponse;\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst startBreak = async (\r\n  user: ApplicationUser,\r\n  clockEvent: ScheduleEvent,\r\n  shiftEvent: ScheduleEvent | null,\r\n  breakType: BreakType,\r\n  breakStart?: string\r\n) => {\r\n  // eslint-disable-next-line max-len\r\n  const baseUrl = `/api/v2/employee/timeclock/startbreak?lat=${user.latitude}&lng=${user.longitude}`;\r\n  const breakStartOptions = {\r\n    clockEventId: clockEvent.ScheduleEventId,\r\n    shiftEventId: shiftEvent ? shiftEvent!.ScheduleEventId : null,\r\n    shiftBreakStart: breakStart,\r\n    breakType,\r\n  };\r\n\r\n  return (await apiHelper.post(\r\n    user,\r\n    baseUrl,\r\n    breakStartOptions\r\n  )) as StartBreakResponse;\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst endBreak = async (\r\n  user: ApplicationUser,\r\n  clockEvent: ScheduleEvent,\r\n  shiftEvent: ScheduleEvent | null\r\n) => {\r\n  const shiftEventId = shiftEvent ? shiftEvent.ScheduleEventId : \"\";\r\n  // eslint-disable-next-line max-len\r\n  const baseUrl = `/api/v2/employee/timeclock/endbreak/${clockEvent.ScheduleEventId}/${shiftEventId}?lat=${user.latitude}&lng=${user.longitude}`;\r\n\r\n  return (await apiHelper.post(user, baseUrl, {})) as EndBreakResponse;\r\n};\r\n\r\nconst getGeoLocations = async (user: ApplicationUser) => {\r\n  const baseUrl = \"/api/v2/employee/timeclock/geolocations\";\r\n  return (await apiHelper.get(user, baseUrl)) as ClockInGeoLocations[];\r\n};\r\n\r\nexport default {\r\n  getTimeClockSettings,\r\n  clockIn,\r\n  clockOut,\r\n  switchPositionOrTag,\r\n  startBreak,\r\n  endBreak,\r\n  getGeoLocations,\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  IonButton,\r\n  IonCol,\r\n  IonContent,\r\n  IonFooter,\r\n  IonInput,\r\n  IonGrid,\r\n  IonHeader,\r\n  IonRow,\r\n  IonTitle,\r\n  IonToolbar,\r\n} from \"@ionic/react\";\r\nimport \"./ClockoutModal.scss\";\r\nimport { LocationSettings } from \"../../orbital-interfaces/authorized-items\";\r\n\r\ninterface ClockoutModalProps {\r\n  onCancel: () => void;\r\n  onOk: (clockoutValue?: number) => void;\r\n  locSettings: LocationSettings;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst ClockoutModal: React.FC<ClockoutModalProps> = ({\r\n  onCancel,\r\n  onOk,\r\n  locSettings,\r\n}: ClockoutModalProps) => {\r\n  const [clockoutValue, setClockoutValue] = useState(\r\n    undefined as number | undefined\r\n  );\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  const onOkClick = () => {\r\n    onOk(clockoutValue);\r\n  };\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  function onClockoutValueUpdate(val: string | undefined | null) {\r\n    if (!val) {\r\n      if (clockoutValue !== undefined) {\r\n        setClockoutValue(undefined);\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    setClockoutValue(parseFloat(val));\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <IonContent>\r\n        <IonHeader mode=\"ios\">\r\n          <IonToolbar>\r\n            <IonTitle>Clock Out</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonGrid>\r\n          <IonRow>\r\n            <IonCol className=\"label\" size=\"12\">\r\n              {locSettings.ClockOutValueLabel}\r\n            </IonCol>\r\n          </IonRow>\r\n          <IonRow>\r\n            <IonCol size=\"2\" />\r\n            <IonCol size=\"8\">\r\n              <IonInput\r\n                placeholder=\"Enter value\"\r\n                type=\"number\"\r\n                className=\"input\"\r\n                autoCorrect=\"off\"\r\n                clearInput={true}\r\n                value={clockoutValue?.toString()}\r\n                onIonChange={(e) => {\r\n                  onClockoutValueUpdate(e.detail.value);\r\n                }}\r\n              />\r\n            </IonCol>\r\n            <IonCol size=\"2\" />\r\n          </IonRow>\r\n        </IonGrid>\r\n      </IonContent>\r\n      <IonFooter>\r\n        <IonButton\r\n          expand=\"block\"\r\n          onClick={onOkClick}\r\n          className=\"clockout-button\"\r\n        >\r\n          CLOCK OUT\r\n        </IonButton>\r\n\r\n        <IonButton expand=\"block\" className=\"cancel-button\" onClick={onCancel}>\r\n          CANCEL\r\n        </IonButton>\r\n      </IonFooter>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ClockoutModal;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./ClockPanel.scss\";\r\nimport { IonButton } from \"@ionic/react\";\r\nimport { LocationSettings } from \"../../orbital-interfaces/authorized-items\";\r\nimport { TimeClockSettingsData } from \"../../orbital-interfaces/TimeClockSettingsData\";\r\n\r\ninterface SwitchPositionOrTagButtonProps {\r\n  tcData: TimeClockSettingsData;\r\n  locSettings: LocationSettings;\r\n  selectedPosId: number;\r\n  selectedTagId: number | null;\r\n  onSwitch: () => void;\r\n}\r\n\r\nconst SwitchPositionOrTagButton: React.FC<SwitchPositionOrTagButtonProps> = ({\r\n  tcData,\r\n  locSettings,\r\n  selectedPosId,\r\n  selectedTagId,\r\n  onSwitch,\r\n}: SwitchPositionOrTagButtonProps) => {\r\n  const [disabled, setDisabled] = useState(true);\r\n\r\n  const hiddenJsx = <span />;\r\n\r\n  useEffect(() => {\r\n    if (tcData.UserClockedIn) {\r\n      const curPosId = tcData.ClockedInScheduleEvent!.PositionId;\r\n      let curTagId = tcData.ClockedInScheduleEvent!.TagId;\r\n      if (!curTagId) {\r\n        curTagId = -1;\r\n      }\r\n\r\n      if (curPosId !== selectedPosId) {\r\n        setDisabled(false);\r\n      } else if (curTagId !== selectedTagId) {\r\n        setDisabled(false);\r\n      } else {\r\n        setDisabled(true);\r\n      }\r\n    }\r\n  }, [\r\n    tcData.UserClockedIn,\r\n    tcData.ClockedInScheduleEvent,\r\n    selectedPosId,\r\n    selectedTagId,\r\n  ]);\r\n\r\n  if (\r\n    !locSettings.ClockInWithDifferentTag &&\r\n    !locSettings.EnablePositionChangeForEmployeePosition\r\n  ) {\r\n    return hiddenJsx;\r\n  }\r\n\r\n  if (!tcData.UserClockedIn) {\r\n    return hiddenJsx;\r\n  }\r\n\r\n  return (\r\n    <div className=\"switch-button-container\">\r\n      <IonButton\r\n        className=\"switch-button\"\r\n        disabled={disabled}\r\n        color=\"secondary\"\r\n        expand=\"block\"\r\n        onClick={onSwitch}\r\n      >\r\n        SWITCH\r\n      </IonButton>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SwitchPositionOrTagButton;\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport \"./Map.scss\";\r\nimport { ApplicationUserContext } from \"../../context/ApplicationUserContext\";\r\nimport timeclockApi from \"../../api/TimeClockAPI\";\r\nimport { ClockInGeoLocations } from \"../../orbital-interfaces/ClockInGeoLocations\";\r\nimport { IonButton, IonIcon } from \"@ionic/react\";\r\nimport { arrowUpCircle, arrowDownCircle } from \"ionicons/icons\";\r\n\r\nconst Map: React.FC = () => {\r\n  const mapEle = useRef<HTMLDivElement | null>(null);\r\n  const map = useRef<google.maps.Map>();\r\n  const userCircle = useRef<google.maps.Circle>();\r\n  const { user } = React.useContext(ApplicationUserContext);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [geoLocations, setGeoLocations] = useState([] as ClockInGeoLocations[]);\r\n  const [showMap, setShowMap] = useState(false);\r\n\r\n  // -----------------------------------------------------------------------------------------------\r\n  function calculateNearestLocationMessage(\r\n    lat: number | undefined,\r\n    lng: number | undefined,\r\n    locations: ClockInGeoLocations[]\r\n  ): string {\r\n    if (!lat || !lng || locations.length === 0) {\r\n      return \"\";\r\n    }\r\n\r\n    if (\r\n      !google ||\r\n      !google.maps ||\r\n      !google.maps.geometry ||\r\n      !google.maps.geometry.spherical ||\r\n      !google.maps.geometry.spherical.computeDistanceBetween\r\n    ) {\r\n      return \"\";\r\n    }\r\n\r\n    const userPos = new google.maps.LatLng(lat, lng);\r\n    const MAX_DISTANCE = 999999999;\r\n    let closestLocation = null as ClockInGeoLocations | null;\r\n    let minDistance = MAX_DISTANCE;\r\n    for (let i = 0; i < locations.length; i++) {\r\n      const curLoc = locations[i];\r\n      if (!curLoc.lat || !curLoc.lng) {\r\n        continue;\r\n      }\r\n      const locPos = new google.maps.LatLng(curLoc.lat, curLoc.lng);\r\n      const distance =\r\n        google.maps.geometry.spherical.computeDistanceBetween(userPos, locPos) *\r\n          3.28084 -\r\n        curLoc.proximity;\r\n      if (distance < minDistance) {\r\n        minDistance = distance;\r\n        closestLocation = curLoc;\r\n      }\r\n    }\r\n\r\n    if (minDistance === MAX_DISTANCE) {\r\n      return \"\";\r\n    }\r\n\r\n    if (minDistance < 0) {\r\n      return \"At \" + closestLocation!.locationName;\r\n    }\r\n\r\n    const miles = minDistance * 0.000189394;\r\n    if (miles > 0.1) {\r\n      return `${Math.round((miles + Number.EPSILON) * 10) / 10} mi to ${\r\n        closestLocation!.locationName\r\n      }`;\r\n    }\r\n\r\n    return `${Math.round(minDistance)} ft to ${closestLocation!.locationName}`;\r\n  }\r\n\r\n  // -----------------------------------------------------------------------------------------------\r\n  function onShowMapButtonClick() {\r\n    const newShowMap = !showMap;\r\n    setShowMap(newShowMap);\r\n    setMessage(\r\n      calculateNearestLocationMessage(\r\n        user.latitude,\r\n        user.longitude,\r\n        geoLocations\r\n      )\r\n    );\r\n  }\r\n\r\n  // -----------------------------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    console.log(\"MAP: useEffect running\");\r\n    if (mapEle.current === null || !user.latitude || !user.longitude) {\r\n      return;\r\n    }\r\n\r\n    if (map.current !== undefined) {\r\n      if (map.current && user.latitude && user.longitude) {\r\n        const userPos = new google.maps.LatLng(user.latitude, user.longitude);\r\n        map.current.setCenter(userPos);\r\n        if (userCircle.current) {\r\n          userCircle.current.setMap(null);\r\n        }\r\n\r\n        userCircle.current = new google.maps.Circle({\r\n          strokeColor: \"#FF0000\",\r\n          strokeOpacity: 0.8,\r\n          strokeWeight: 2,\r\n          fillColor: \"#FF0000\",\r\n          fillOpacity: 0.25,\r\n          radius: 6.5,\r\n          center: userPos,\r\n          map: map.current,\r\n        });\r\n      }\r\n\r\n      setMessage(\r\n        calculateNearestLocationMessage(\r\n          user.latitude,\r\n          user.longitude,\r\n          geoLocations\r\n        )\r\n      );\r\n\r\n      return;\r\n    }\r\n\r\n    map.current = new google.maps.Map(mapEle.current, {\r\n      center: {\r\n        lat: user.latitude,\r\n        lng: user.longitude,\r\n      },\r\n      zoom: 16,\r\n      disableDefaultUI: true,\r\n      fullscreenControl: false,\r\n    });\r\n\r\n    addMarkers();\r\n\r\n    google.maps.event.addListenerOnce(map.current, \"idle\", () => {\r\n      if (mapEle.current) {\r\n        mapEle.current.classList.add(\"show-map\");\r\n      }\r\n    });\r\n\r\n    function addMarkers() {\r\n      if (user.latitude && user.longitude) {\r\n        userCircle.current = new google.maps.Circle({\r\n          strokeColor: \"#FF0000\",\r\n          strokeOpacity: 0.8,\r\n          strokeWeight: 2,\r\n          fillColor: \"#FF0000\",\r\n          fillOpacity: 0.25,\r\n          radius: 6.5,\r\n          center: { lat: user!.latitude, lng: user!.longitude },\r\n          map: map.current,\r\n        });\r\n      }\r\n\r\n      timeclockApi.getGeoLocations(user).then((clockLocations) => {\r\n        setGeoLocations(clockLocations);\r\n        clockLocations.forEach((markerData) => {\r\n          const infoWindow = new google.maps.InfoWindow({\r\n            content: `<h5>${markerData.addr}</h5>`,\r\n          });\r\n\r\n          if (markerData.lat && markerData.lng) {\r\n            const position = new google.maps.LatLng(\r\n              markerData!.lat,\r\n              markerData!.lng\r\n            );\r\n\r\n            const marker = new google.maps.Marker({\r\n              position,\r\n              map: map.current!,\r\n              title: markerData.addr,\r\n            });\r\n\r\n            new google.maps.Circle({\r\n              strokeColor: \"#FF0000\",\r\n              strokeOpacity: 0.5,\r\n              strokeWeight: 1,\r\n              fillColor: \"#DD0000\",\r\n              fillOpacity: 0.2,\r\n              radius: markerData.proximity * 0.3048, // feet to meters\r\n              center: position,\r\n              map: map.current,\r\n            });\r\n            marker.addListener(\"click\", () => {\r\n              infoWindow.open(map.current!, marker);\r\n            });\r\n          }\r\n        });\r\n\r\n        setMessage(\r\n          calculateNearestLocationMessage(\r\n            user.latitude,\r\n            user.longitude,\r\n            clockLocations\r\n          )\r\n        );\r\n      });\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [user, user.latitude, user.longitude]);\r\n\r\n  return (\r\n    <>\r\n      <IonButton style={{ display: \"block\" }} onClick={onShowMapButtonClick}>\r\n        {message}\r\n        <IonIcon\r\n          id=\"show-map-button\"\r\n          icon={showMap ? arrowDownCircle : arrowUpCircle}\r\n        />\r\n      </IonButton>\r\n      <div id=\"map-container\" hidden={!showMap}>\r\n        <div ref={mapEle} className=\"map-canvas\" />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Map;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  IonAlert,\r\n  IonToast,\r\n  IonLoading,\r\n  IonSelect,\r\n  IonModal,\r\n  IonItem,\r\n  IonLabel,\r\n  IonSelectOption,\r\n  IonIcon,\r\n  IonButton,\r\n  useIonViewWillEnter,\r\n  useIonViewWillLeave,\r\n} from \"@ionic/react\";\r\nimport \"./ClockPanel.scss\";\r\nimport {\r\n  UnscheduledBreakOptions,\r\n  LocationSettings,\r\n  BreakType,\r\n} from \"../../orbital-interfaces/authorized-items\";\r\nimport { TimeClockSettingsData } from \"../../orbital-interfaces/TimeClockSettingsData\";\r\nimport { time, cafe } from \"ionicons/icons\";\r\nimport { ClockInRequirement } from \"../../enums/ClockInRequirement\";\r\nimport BreakSelectorModal, { BreakItem } from \"./BreakSelectorModal\";\r\nimport arrayHelper from \"../../util/array-helper\";\r\nimport timeClockApi from \"../../api/TimeClockAPI\";\r\nimport { format, parseISO } from \"date-fns\";\r\nimport { StartBreakResponseCode } from \"../../enums/StartBreakResponseCode\";\r\nimport { EndBreakResponseCode } from \"../../enums/EndBreakResponseCode\";\r\nimport { ApplicationUserContext } from \"../../context/ApplicationUserContext\";\r\nimport { AuthorizedItemsContext } from \"../../context/AuthorizedItemsContext\";\r\nimport ClockoutModal from \"./ClockoutModal\";\r\nimport SwitchPositionOrTagButton from \"./SwitchPositionOrTagButton\";\r\nimport { log } from \"../../util/logger\";\r\nimport { useInterval } from \"../../hooks/useInterval\";\r\nimport Map from \"./Map\";\r\n\r\ninterface ClockPanelProps {\r\n  onUpdate: () => void;\r\n  refreshToggle: boolean;\r\n}\r\n\r\ninterface List {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\nconst ClockPanel: React.FC<ClockPanelProps> = ({\r\n  onUpdate,\r\n  refreshToggle,\r\n}: ClockPanelProps) => {\r\n  const { user, startWatchPosition, clearWatchPosition } = React.useContext(\r\n    ApplicationUserContext\r\n  );\r\n  const { auth } = React.useContext(AuthorizedItemsContext);\r\n  const [posList, setPosList] = useState([] as List[]);\r\n  const [selectedPosId, setSelectedPosId] = useState(0);\r\n  const [tagSwitchingEnabled, setTagSwitchingEnabled] = useState(false);\r\n  const [tagList, setTagList] = useState([] as List[]);\r\n  const [selectedTagId, setSelectedTagId] = useState(null as number | null);\r\n  const [breakSetting, setBreakSetting] = useState<\r\n    \"START BREAK\" | \"END BREAK\" | \"NONE\"\r\n  >(\"START BREAK\");\r\n  const [locSettings, setLocSettings] = useState({} as LocationSettings);\r\n  const [showBreakSelectorModal, setShowBreakSelectorModal] = useState(false);\r\n  const [showLoading, setShowLoading] = useState(false);\r\n  const [loadingMessage, setLoadingMessage] = useState(\"Please wait...\");\r\n  const [toastMessage, setToastMessage] = useState(\"\");\r\n  const [showToast, setShowToast] = useState(false);\r\n  const [showAlertData, setShowAlertData] = useState({\r\n    show: false,\r\n    header: \"Alert\",\r\n    message: \"\",\r\n  });\r\n  const [tcData, setTCData] = useState(null as TimeClockSettingsData | null);\r\n  const [showClockoutModal, setShowClockoutModal] = useState(false);\r\n\r\n  const [refresh, setRefresh] = useState(false);\r\n  let watchPositionId = \"\";\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    return () => {\r\n      console.log(\"ClockTodayTab.useEffect: clearing watch position\");\r\n    };\r\n\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useIonViewWillEnter(() => {\r\n    watchPositionId = startWatchPosition((lat, lng) => {\r\n      log(\"geolocation_updated\", { user: user.username });\r\n      console.log(\"refreshed geolocation in callback\");\r\n      setTimeout(() => {\r\n        updateTimeClockData(lat, lng);\r\n      }, 150);\r\n    });\r\n  });\r\n\r\n  useIonViewWillLeave(() => {\r\n    if (watchPositionId !== \"\") {\r\n      clearWatchPosition(watchPositionId);\r\n    }\r\n  });\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    console.log(\r\n      \"ClockPanel: useEffect, refreshtoggle\",\r\n      refreshToggle,\r\n      \"refresh\",\r\n      refresh,\r\n      \"lat\",\r\n      user.latitude,\r\n      \"lng\",\r\n      user.longitude\r\n    );\r\n    if (refresh !== refreshToggle) {\r\n      setRefresh(refreshToggle);\r\n    }\r\n\r\n    updateTimeClockData();\r\n\r\n    // eslint-disable-next-line\r\n  }, [auth, refreshToggle]);\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    if (!tcData || !auth || !auth.locations || auth.locations.length === 0) {\r\n      return;\r\n    }\r\n\r\n    if (tcData.ShowTimeClock) {\r\n      const uniqueLocationIds = arrayHelper.unique(\r\n        tcData.PositionsToClockInto.map((p) => p.LocationId)\r\n      );\r\n      const uniqueDeptIds = arrayHelper.unique(\r\n        tcData.PositionsToClockInto.map((p) => p.DepartmentId)\r\n      );\r\n      let plist: List[];\r\n      if (uniqueLocationIds.length > 1) {\r\n        plist = tcData.PositionsToClockInto.map((p) => {\r\n          return {\r\n            id: p.PositionId,\r\n            name: p.PositionNameWithLocAndDeptAbbreviation,\r\n          };\r\n        });\r\n      } else if (uniqueDeptIds.length > 1) {\r\n        plist = tcData.PositionsToClockInto.map((p) => {\r\n          return { id: p.PositionId, name: p.PositionNameWithDeptAbbreviation };\r\n        });\r\n      } else {\r\n        plist = tcData.PositionsToClockInto.map((p) => {\r\n          return { id: p.PositionId, name: p.PositionName };\r\n        });\r\n      }\r\n\r\n      let curPosId: number;\r\n      if (tcData.UserClockedIn) {\r\n        curPosId = tcData.ClockedInScheduleEvent!.PositionId;\r\n        setSelectedPosId(curPosId);\r\n      } else if (plist.length > 0) {\r\n        curPosId = plist[0].id;\r\n        setSelectedPosId(curPosId);\r\n      } else {\r\n        curPosId = 0;\r\n      }\r\n\r\n      const curLocId = tcData.UserClockedIn\r\n        ? tcData.ClockedInScheduleEvent!.LocationId\r\n        : curPosId !== 0\r\n        ? auth.locations.filter((l) =>\r\n            l.departments.flatMap((d) =>\r\n              d.positions.flatMap((p) => p.id === curPosId)\r\n            )\r\n          )[0].id\r\n        : auth.locations[0].id;\r\n\r\n      const locSettings = auth.locations.filter((l) => l.id === curLocId)[0]\r\n        .settings;\r\n      setLocSettings(locSettings);\r\n\r\n      if (\r\n        locSettings.EnableEnhancedBreakManagement &&\r\n        (locSettings.UnscheduledBreakOptions !== UnscheduledBreakOptions.None ||\r\n          (tcData.ClockedInScheduleEvent!.EventBreaks &&\r\n            tcData.ClockedInScheduleEvent!.EventBreaks.length > 0))\r\n      ) {\r\n        setBreakSetting(\r\n          tcData.UserClockedIn && tcData.CurrentEventBreak\r\n            ? \"END BREAK\"\r\n            : \"START BREAK\"\r\n        );\r\n      } else {\r\n        setBreakSetting(\"NONE\");\r\n      }\r\n\r\n      setPosList(plist);\r\n      setTags(curPosId);\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [auth, tcData]);\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  useInterval(() => {\r\n    updateTimeClockData();\r\n  }, 15000);\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const updateTimeClockData = (\r\n    lat?: number | undefined,\r\n    lng?: number | undefined\r\n  ) => {\r\n    timeClockApi.getTimeClockSettings(user, lat, lng).then((results) => {\r\n      setTCData(results);\r\n    });\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const setTags = (currentPositionId: number): number => {\r\n    if (!tcData) {\r\n      return -1;\r\n    }\r\n\r\n    const curLocId = tcData.UserClockedIn\r\n      ? tcData.ClockedInScheduleEvent!.LocationId\r\n      : auth.locations.filter((l) =>\r\n          l.departments.flatMap((d) =>\r\n            d.positions.flatMap((p) => p.id === currentPositionId)\r\n          )\r\n        )[0].id;\r\n    const locSettings = auth.locations.filter((l) => l.id === curLocId)[0]\r\n      .settings;\r\n\r\n    if (\r\n      locSettings.ClockInWithDifferentTag &&\r\n      tcData.TagsPerPosition[currentPositionId] &&\r\n      tcData.TagsPerPosition[currentPositionId].length > 1\r\n    ) {\r\n      setTagSwitchingEnabled(true);\r\n      const tagList = tcData.TagsPerPosition[currentPositionId].map((t) => {\r\n        return { id: t.TagId, name: t.TagName };\r\n      });\r\n      tagList.unshift({ id: -1, name: \"NONE\" });\r\n      setTagList(tagList);\r\n    } else {\r\n      setTagSwitchingEnabled(false);\r\n    }\r\n\r\n    let tagId = -1;\r\n    if (tcData.UserClockedIn) {\r\n      if (tcData.ClockedInScheduleEvent!.TagId) {\r\n        tagId = tcData.ClockedInScheduleEvent!.TagId;\r\n      } else if (tcData.ClockedInScheduleEvent!.TagId === null) {\r\n        tagId = -1;\r\n      } else {\r\n        tagId = -1;\r\n      }\r\n    } else if (\r\n      tcData.TagsPerPosition[currentPositionId] &&\r\n      tcData.TagsPerPosition[currentPositionId].length > 0\r\n    ) {\r\n      if (\r\n        tcData.ScheduleEventsForClockIn &&\r\n        tcData.ScheduleEventsForClockIn[0] &&\r\n        tcData.ScheduleEventsForClockIn[0].TagId\r\n      ) {\r\n        tagId = tcData.ScheduleEventsForClockIn[0].TagId;\r\n      } else {\r\n        tagId = -1;\r\n      }\r\n    }\r\n\r\n    setSelectedTagId(tagId);\r\n    return tagId;\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const onPositionChange = (newVal: number) => {\r\n    setSelectedPosId(newVal);\r\n    setTags(newVal);\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const onTagChange = (newVal: number) => {\r\n    setSelectedTagId(newVal);\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const showAlert = (header: string, message: string) => {\r\n    setShowAlertData({ show: true, header, message });\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const onBreakSelectorModalClose = (brk: BreakItem) => {\r\n    if (!tcData) {\r\n      return;\r\n    }\r\n\r\n    setShowBreakSelectorModal(false);\r\n    if (brk.key === \"Cancel\") {\r\n      return;\r\n    }\r\n\r\n    setLoadingMessage(\"Starting Break...\");\r\n    setShowLoading(true);\r\n\r\n    timeClockApi\r\n      .startBreak(\r\n        user,\r\n        tcData.ClockedInScheduleEvent!,\r\n        tcData.ScheduleEventsForClockIn[0],\r\n        brk.breakType,\r\n        brk.breakType === BreakType.Scheduled ? brk.key : undefined\r\n      )\r\n      .then((response) => {\r\n        setShowLoading(false);\r\n        if (\r\n          response.StartBreakResponseCode === StartBreakResponseCode.Success\r\n        ) {\r\n          setToastMessage(\r\n            \"Break started at \" +\r\n              format(parseISO(response.BreakStart), \"h:mmaaa\")\r\n          );\r\n          setShowToast(true);\r\n          onUpdate();\r\n          updateTimeClockData();\r\n        } else {\r\n          showAlert(\r\n            \"Could not start break\",\r\n            `Unable to start break, ${response.Message}`\r\n          );\r\n        }\r\n      });\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const clockout = (clockOutValue?: number) => {\r\n    if (showClockoutModal) {\r\n      setShowClockoutModal(false);\r\n    }\r\n\r\n    setLoadingMessage(\"Clocking Out...\");\r\n    setShowLoading(true);\r\n\r\n    timeClockApi.clockOut(user, clockOutValue).then((response) => {\r\n      setShowLoading(false);\r\n      if (response.ClockOutResponseCode === 0) {\r\n        setToastMessage(\r\n          \"Clocked out at \" +\r\n            format(parseISO(response.ClockOutEvent.EventEnd), \"h:mmaaa\")\r\n        );\r\n        setShowToast(true);\r\n        onUpdate();\r\n        updateTimeClockData();\r\n      } else {\r\n        showAlert(\r\n          \"Could not Clock Out\",\r\n          `Unable to Clock out, ${response.Message}`\r\n        );\r\n      }\r\n    });\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const onClockOutClick = () => {\r\n    if (locSettings.ClockOutValueLabel) {\r\n      setShowClockoutModal(true);\r\n    } else {\r\n      clockout();\r\n    }\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const onClockInClick = () => {\r\n    setLoadingMessage(\"Clocking in...\");\r\n    setShowLoading(true);\r\n\r\n    timeClockApi\r\n      .clockIn(user, selectedPosId, selectedTagId)\r\n      .then((response) => {\r\n        setShowLoading(false);\r\n        if (response.ClockInResponseCode === 0) {\r\n          setToastMessage(\r\n            \"Clocked in at \" +\r\n              format(parseISO(response.ClockInEvent.EventStart), \"h:mmaaa\")\r\n          );\r\n          setShowToast(true);\r\n          onUpdate();\r\n          updateTimeClockData();\r\n        } else {\r\n          showAlert(\r\n            \"Could not Clock In\",\r\n            `Unable to Clock in, ${response.Message}`\r\n          );\r\n        }\r\n      });\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const onBreakButtonClick = () => {\r\n    if (breakSetting === \"NONE\" || !tcData) {\r\n      return;\r\n    }\r\n\r\n    if (breakSetting === \"END BREAK\") {\r\n      setLoadingMessage(\"Ending Break...\");\r\n      setShowLoading(true);\r\n\r\n      timeClockApi\r\n        .endBreak(\r\n          user,\r\n          tcData.ClockedInScheduleEvent!,\r\n          tcData.ScheduleEventsForClockIn.length > 0\r\n            ? tcData.ScheduleEventsForClockIn[0]\r\n            : null\r\n        )\r\n        .then((response) => {\r\n          setShowLoading(false);\r\n          if (response.EndBreakResponseCode === EndBreakResponseCode.Success) {\r\n            setToastMessage(\r\n              \"Ended break at \" + format(parseISO(response.BreakEnd), \"h:mmaaa\")\r\n            );\r\n            setShowToast(true);\r\n            onUpdate();\r\n            updateTimeClockData();\r\n          } else {\r\n            showAlert(\"Did not come off break\", response.Message);\r\n          }\r\n        });\r\n\r\n      return;\r\n    }\r\n\r\n    if (\r\n      locSettings.UnscheduledBreakOptions !== UnscheduledBreakOptions.None ||\r\n      (tcData.ClockedInScheduleEvent!.EventBreaks &&\r\n        tcData.ClockedInScheduleEvent!.EventBreaks.length > 0)\r\n    ) {\r\n      setShowBreakSelectorModal(true);\r\n    } else {\r\n      showAlert(\r\n        \"No implemented\",\r\n        \"Not implemented in ClockPanel.tsx for this scenario\"\r\n      );\r\n    }\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const onSwitchClick = () => {\r\n    setLoadingMessage(\"Switching...\");\r\n    setShowLoading(true);\r\n\r\n    timeClockApi\r\n      .switchPositionOrTag(user, selectedPosId, selectedTagId)\r\n      .then((response) => {\r\n        setShowLoading(false);\r\n        if (response.AllowedToSwitchPositions || response.AllowedToSwitchTags) {\r\n          setToastMessage(\"Switched\");\r\n          setShowToast(true);\r\n          onUpdate();\r\n          updateTimeClockData();\r\n        } else {\r\n          showAlert(\r\n            \"Could not switch\",\r\n            `${response.ClockInMessage} ${response.ClockOutMessage}`\r\n          );\r\n        }\r\n      });\r\n  };\r\n\r\n  if (!auth || !tcData) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <IonLoading\r\n        isOpen={showLoading}\r\n        onDidDismiss={() => setShowLoading(false)}\r\n        spinner=\"dots\"\r\n        message={loadingMessage}\r\n      />\r\n\r\n      <div className=\"clock-controls\">\r\n        <Map />\r\n\r\n        {tcData.PositionsToClockInto && tcData.PositionsToClockInto.length > 1 && (\r\n          <IonItem>\r\n            <IonLabel>Position</IonLabel>\r\n            <IonSelect\r\n              interface=\"action-sheet\"\r\n              onIonChange={(e) => onPositionChange(e.detail.value)}\r\n              disabled={\r\n                !(\r\n                  ((tcData.UserClockedIn && tcData.UserMayClockOut) ||\r\n                    (!tcData.UserClockedIn && tcData.UserMayClockIn)) &&\r\n                  locSettings.ClockInRequirement !==\r\n                    ClockInRequirement.MatchingShift\r\n                )\r\n              }\r\n              value={selectedPosId}\r\n            >\r\n              {posList.map((pos) => (\r\n                <IonSelectOption key={pos.id} value={pos.id}>\r\n                  {pos.name}\r\n                </IonSelectOption>\r\n              ))}\r\n            </IonSelect>\r\n          </IonItem>\r\n        )}\r\n\r\n        {tagSwitchingEnabled && (\r\n          <IonItem>\r\n            <IonLabel>~Tag</IonLabel>\r\n            <IonSelect\r\n              interface=\"action-sheet\"\r\n              onIonChange={(e) => onTagChange(e.detail.value)}\r\n              disabled={\r\n                !(\r\n                  ((tcData.UserClockedIn && tcData.UserMayClockOut) ||\r\n                    (!tcData.UserClockedIn && tcData.UserMayClockIn)) &&\r\n                  locSettings.ClockInRequirement !==\r\n                    ClockInRequirement.MatchingShift\r\n                )\r\n              }\r\n              value={selectedTagId}\r\n            >\r\n              {tagList.map((t) => (\r\n                <IonSelectOption key={t.id} value={t.id}>\r\n                  {t.name}\r\n                </IonSelectOption>\r\n              ))}\r\n            </IonSelect>\r\n          </IonItem>\r\n        )}\r\n\r\n        <SwitchPositionOrTagButton\r\n          tcData={tcData}\r\n          locSettings={locSettings}\r\n          selectedPosId={selectedPosId}\r\n          selectedTagId={selectedTagId}\r\n          onSwitch={onSwitchClick}\r\n        />\r\n        {!tcData.UserClockedIn && (\r\n          <div className=\"clockin-button-container\">\r\n            <IonButton\r\n              className=\"clockin-button\"\r\n              onClick={onClockInClick}\r\n              disabled={!tcData.UserMayClockIn}\r\n            >\r\n              <IonIcon mode=\"md\" style={{ paddingRight: \"5px\" }} icon={time} />{\" \"}\r\n              CLOCK IN\r\n            </IonButton>\r\n          </div>\r\n        )}\r\n        {tcData.UserClockedIn && (\r\n          <div className=\"clockout-button-container\">\r\n            <IonButton\r\n              className=\"clockout-button\"\r\n              disabled={!tcData.UserMayClockOut}\r\n              expand=\"block\"\r\n              onClick={onClockOutClick}\r\n            >\r\n              CLOCK OUT{\" \"}\r\n              <IonIcon mode=\"md\" style={{ paddingLeft: \"5px\" }} icon={time} />\r\n            </IonButton>\r\n\r\n            {breakSetting !== \"NONE\" && (\r\n              <IonButton\r\n                onClick={onBreakButtonClick}\r\n                expand=\"block\"\r\n                className=\"break-button\"\r\n                disabled={!tcData.UserMayClockOut}\r\n              >\r\n                <IonIcon icon={cafe} />\r\n                {breakSetting}\r\n              </IonButton>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <IonToast\r\n        isOpen={showToast}\r\n        message={toastMessage}\r\n        duration={2000}\r\n        onDidDismiss={() => setShowToast(false)}\r\n      />\r\n\r\n      <IonModal isOpen={showBreakSelectorModal} cssClass=\"break-selector-modal\">\r\n        <BreakSelectorModal\r\n          auth={auth}\r\n          tcData={tcData}\r\n          onDismissModal={(selection) => onBreakSelectorModalClose(selection)}\r\n        />\r\n      </IonModal>\r\n\r\n      <IonModal\r\n        cssClass=\"clockout-modal\"\r\n        isOpen={showClockoutModal}\r\n        onDidDismiss={() => {\r\n          setShowClockoutModal(false);\r\n        }}\r\n      >\r\n        <ClockoutModal\r\n          onCancel={() => {\r\n            setShowClockoutModal(false);\r\n          }}\r\n          onOk={clockout}\r\n          locSettings={locSettings}\r\n        />\r\n      </IonModal>\r\n\r\n      <IonAlert\r\n        isOpen={showAlertData.show}\r\n        onDidDismiss={() => setShowAlertData({ ...showAlertData, show: false })}\r\n        header={showAlertData.header}\r\n        message={showAlertData.message}\r\n        buttons={[\"OK\"]}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ClockPanel;\r\n","import { useEffect, useRef } from \"react\";\r\n\r\nexport function useInterval(callback: () => void, delay: number) {\r\n  const savedProps = useRef<() => void>();\r\n\r\n  // Remember the latest callback.\r\n  useEffect(() => {\r\n    savedProps.current = callback;\r\n  }, [callback]);\r\n\r\n  // Set up the interval.\r\n  useEffect(() => {\r\n    function tick() {\r\n      if (savedProps.current) {\r\n        savedProps.current();\r\n      }\r\n    }\r\n    if (delay !== null) {\r\n      const id = setInterval(tick, delay);\r\n      return () => clearInterval(id);\r\n    }\r\n  }, [delay]);\r\n}\r\n","import React from \"react\";\nimport \"./PayrollPeriodChooser.scss\";\nimport { IonIcon } from \"@ionic/react\";\nimport { arrowBack, arrowForward, caretDown } from \"ionicons/icons\";\nimport { addDays, format } from \"date-fns\";\n\ninterface PayrollPeriodChooserProps {\n  startDate: Date | null;\n  endDate: Date | null;\n  onNextPayPeriod: () => void;\n  onPrevPayPeriod: () => void;\n}\n\nfunction getPayPeriodDateText(start: Date | null, end: Date | null) {\n  if (!start || !end) {\n    return \" \";\n  }\n\n  if (start.getMonth() !== end.getMonth()) {\n    return (\n      format(start, \"MMM d\").toUpperCase() +\n      \" - \" +\n      format(addDays(end, -1), \"MMM d\").toUpperCase()\n    );\n  }\n\n  return (\n    format(start, \"MMM d\").toUpperCase() + \" - \" + format(addDays(end, -1), \"d\")\n  );\n}\n\n// --------------------------------------------------------------------------------------\nconst PayrollPeriodChooser: React.FC<PayrollPeriodChooserProps> = ({\n  startDate,\n  endDate,\n  onNextPayPeriod,\n  onPrevPayPeriod,\n}: PayrollPeriodChooserProps) => {\n  const isLoading = startDate === null || endDate === null;\n  const payPeriodDateText = isLoading\n    ? \"\"\n    : getPayPeriodDateText(startDate, endDate);\n\n  return (\n    <div className=\"chooser\">\n      <div className=\"top\">\n        <button onClick={onPrevPayPeriod} className=\"arrow\" key={-1}>\n          <IonIcon mode=\"ios\" icon={arrowBack} />\n        </button>\n        <div className=\"month-year-container\">\n          <div className=\"datetime-picker-container\">\n            <div className=\"datetime-picker\">{payPeriodDateText}</div>\n            <IonIcon mode=\"md\" icon={caretDown} hidden={isLoading} />\n          </div>\n        </div>\n        <button onClick={onNextPayPeriod} className=\"arrow\" key={7}>\n          <IonIcon mode=\"ios\" icon={arrowForward} />\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default PayrollPeriodChooser;\n","import { ApplicationUser } from \"../context/ApplicationUserContext\";\r\nimport apiHelper from \"./OrbitalApiHelper\";\r\nimport { formatDateTimeAsMvcString } from \"../util/time-helper\";\r\nimport { OrbitalTime } from \"../orbital-interfaces/OrbitalTime\";\r\n\r\nexport interface PayrollPeriodHoursPerAbsent {\r\n  absentId: number;\r\n  time: OrbitalTime;\r\n}\r\n\r\nexport interface PayrollPeriodDateItem {\r\n  date: string;\r\n  regular: OrbitalTime;\r\n  dailyOvertime: OrbitalTime;\r\n  weeklyOvertime: OrbitalTime;\r\n  special: OrbitalTime;\r\n  absent: OrbitalTime;\r\n  timePerAbsent: PayrollPeriodHoursPerAbsent[];\r\n}\r\n\r\nexport interface PayrollPeriodData {\r\n  start: string;\r\n  end: string;\r\n  list: PayrollPeriodDateItem[];\r\n  error: boolean;\r\n  message: string;\r\n  totalRegular: OrbitalTime;\r\n  totalWeeklyOvertime: OrbitalTime;\r\n  totalDailyOvertime: OrbitalTime;\r\n  totalAbsent: OrbitalTime;\r\n  totalSpecial: OrbitalTime;\r\n}\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst getPayPeriodDateForEmployee = async (\r\n  user: ApplicationUser,\r\n  locationId: number,\r\n  date: Date\r\n) => {\r\n  const dateStr = formatDateTimeAsMvcString(date);\r\n  return (await apiHelper.get(\r\n    user,\r\n    \"api/v2/payroll/get/\" + locationId + \"/\" + dateStr\r\n  )) as PayrollPeriodData;\r\n};\r\n\r\nexport default {\r\n  getPayPeriodDateForEmployee,\r\n};\r\n","import React from \"react\";\r\nimport { OrbitalTime } from \"../../orbital-interfaces/OrbitalTime\";\r\nimport { LocationSettings } from \"../../orbital-interfaces/authorized-items\";\r\nimport { getTimeStringFromOrbitalTime } from \"../../util/time-helper\";\r\ninterface PayrollDetailListProps {\r\n  time: OrbitalTime | null;\r\n  locSettings: LocationSettings;\r\n  fontColor: string;\r\n}\r\n\r\nfunction getHoursString(locsettings: LocationSettings, time: OrbitalTime) {\r\n  return getTimeStringFromOrbitalTime(locsettings, time);\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst PayrollOrbitalTimeItem: React.FC<PayrollDetailListProps> = ({\r\n  time,\r\n  locSettings,\r\n  fontColor,\r\n}: PayrollDetailListProps) => {\r\n  if (time === null) {\r\n    return <span> -- </span>;\r\n  }\r\n\r\n  const displayColor = time.ActualHours === 0.0 ? \"lightgray\" : fontColor;\r\n\r\n  return (\r\n    <span style={{ color: displayColor }}>\r\n      {getHoursString(locSettings, time)}\r\n    </span>\r\n  );\r\n};\r\n\r\nexport default PayrollOrbitalTimeItem;\r\n","import React, { useContext } from \"react\";\r\nimport {\r\n  IonContent,\r\n  IonRow,\r\n  IonCol,\r\n  IonButton,\r\n  IonFooter,\r\n  IonGrid,\r\n  IonHeader,\r\n  IonTitle,\r\n  IonToolbar,\r\n} from \"@ionic/react\";\r\nimport \"./PayrollDetailModal.scss\";\r\nimport { parseISO } from \"date-fns\";\r\nimport { PayrollPeriodDateItem } from \"../../api/PayrollPeriodAPI\";\r\nimport { getDateString } from \"../../util/time-helper\";\r\nimport {\r\n  AuthorizedItems,\r\n  LocationSettings,\r\n} from \"../../orbital-interfaces/authorized-items\";\r\nimport PayrollOrbitalTimeItem from \"./PayrollOrbitalTimeItem\";\r\nimport { AuthorizedItemsContext } from \"../../context/AuthorizedItemsContext\";\r\n\r\ninterface AddBreakModalProps {\r\n  onClose: () => void;\r\n  data: PayrollPeriodDateItem;\r\n  locSettings: LocationSettings;\r\n}\r\n\r\nfunction getAbsentName(auth: AuthorizedItems, id: number) {\r\n  return auth.payrollEvents.filter((pe) => pe.id === id)[0].name;\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst PayrollDetailModal: React.FC<AddBreakModalProps> = ({\r\n  onClose,\r\n  data,\r\n  locSettings,\r\n}: AddBreakModalProps) => {\r\n  const { auth } = useContext(AuthorizedItemsContext);\r\n\r\n  if (!data) {\r\n    return <div>loading</div>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <IonContent>\r\n        <IonHeader mode=\"ios\">\r\n          <IonToolbar>\r\n            <IonTitle>{getDateString(parseISO(data.date))}</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonGrid>\r\n          {data.regular.ActualHours > 0.0 && (\r\n            <IonRow>\r\n              <IonCol size=\"7\">Regular</IonCol>\r\n              <IonCol size=\"5\">\r\n                <PayrollOrbitalTimeItem\r\n                  time={data.regular}\r\n                  locSettings={locSettings}\r\n                  fontColor=\"black\"\r\n                />\r\n              </IonCol>\r\n            </IonRow>\r\n          )}\r\n\r\n          {data.dailyOvertime.ActualHours > 0.0 && (\r\n            <IonRow>\r\n              <IonCol size=\"7\">Daily Overtime</IonCol>\r\n              <IonCol size=\"5\">\r\n                <PayrollOrbitalTimeItem\r\n                  time={data.dailyOvertime}\r\n                  locSettings={locSettings}\r\n                  fontColor=\"red\"\r\n                />\r\n              </IonCol>\r\n            </IonRow>\r\n          )}\r\n\r\n          {data.weeklyOvertime.ActualHours > 0.0 && (\r\n            <IonRow>\r\n              <IonCol size=\"7\">Weekly Overtime</IonCol>\r\n              <IonCol size=\"5\">\r\n                <PayrollOrbitalTimeItem\r\n                  time={data.weeklyOvertime}\r\n                  locSettings={locSettings}\r\n                  fontColor=\"red\"\r\n                />\r\n              </IonCol>\r\n            </IonRow>\r\n          )}\r\n\r\n          {data.special.ActualHours > 0.0 && (\r\n            <IonRow>\r\n              <IonCol size=\"7\">Special Dates</IonCol>\r\n              <IonCol size=\"5\">\r\n                <PayrollOrbitalTimeItem\r\n                  time={data.special}\r\n                  locSettings={locSettings}\r\n                  fontColor=\"black\"\r\n                />\r\n              </IonCol>\r\n            </IonRow>\r\n          )}\r\n\r\n          {data.timePerAbsent &&\r\n            data.timePerAbsent.map((hpa) => {\r\n              return (\r\n                <IonRow key={hpa.absentId}>\r\n                  <IonCol size=\"7\">{getAbsentName(auth, hpa.absentId)}</IonCol>\r\n                  <IonCol size=\"5\">\r\n                    <PayrollOrbitalTimeItem\r\n                      time={hpa.time}\r\n                      locSettings={locSettings}\r\n                      fontColor=\"#AD850C\"\r\n                    />\r\n                  </IonCol>\r\n                </IonRow>\r\n              );\r\n            })}\r\n        </IonGrid>\r\n      </IonContent>\r\n      <IonFooter>\r\n        <IonButton expand=\"block\" onClick={onClose}>\r\n          CLOSE\r\n        </IonButton>\r\n      </IonFooter>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PayrollDetailModal;\r\n","import React, { useContext, useState } from \"react\";\r\nimport { IonRow, IonCol, IonModal } from \"@ionic/react\";\r\nimport { format, parseISO } from \"date-fns\";\r\nimport { PayrollPeriodDateItem } from \"../../api/PayrollPeriodAPI\";\r\nimport PayrollOrbitalTimeItem from \"./PayrollOrbitalTimeItem\";\r\nimport { AuthorizedItemsContext } from \"../../context/AuthorizedItemsContext\";\r\nimport authHelper from \"../../util/authitems-helper\";\r\nimport { ColumnEnum } from \"./PayrollDetailList\";\r\nimport PayrollDetailModal from \"./PayrollDetailModal\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\n\r\ninterface PayrollDetailListProps {\r\n  payrollRow: PayrollPeriodDateItem | null;\r\n  colsToDisplay: ColumnEnum;\r\n  colSize: string;\r\n}\r\n\r\nfunction formatDateString(d: string) {\r\n  return format(parseISO(d), \"EEE d\").toUpperCase();\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst PayrollDetailRow: React.FC<PayrollDetailListProps> = ({\r\n  payrollRow,\r\n  colsToDisplay,\r\n  colSize,\r\n}: PayrollDetailListProps) => {\r\n  const { auth } = useContext(AuthorizedItemsContext);\r\n  const locSettings = authHelper.getLocSettingsForLocationId(\r\n    auth,\r\n    auth.locations[0].id\r\n  );\r\n  const [showDetailModal, setShowDetailModal] = useState(false);\r\n\r\n  if (payrollRow === null) {\r\n    return (\r\n      <IonRow>\r\n        <IonCol size=\"3\">\r\n          <Skeleton width={50} />\r\n        </IonCol>\r\n        <IonCol size=\"3\">\r\n          <Skeleton width={50} />\r\n        </IonCol>\r\n        <IonCol size=\"3\">\r\n          <Skeleton width={50} />\r\n        </IonCol>\r\n        <IonCol size=\"3\">\r\n          <Skeleton width={50} />\r\n        </IonCol>\r\n      </IonRow>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <IonRow>\r\n        <IonCol size={colSize}>\r\n          <button\r\n            style={{\r\n              fontSize: \"16px\",\r\n              backgroundColor: \"white\",\r\n              border: \"none\",\r\n              outline: \"none\",\r\n            }}\r\n            onClick={() => setShowDetailModal(true)}\r\n          >\r\n            {formatDateString(payrollRow!.date)}\r\n          </button>\r\n        </IonCol>\r\n\r\n        <IonCol\r\n          size={colSize}\r\n          color=\"secondary\"\r\n          hidden={(colsToDisplay & ColumnEnum.Regular) !== ColumnEnum.Regular}\r\n        >\r\n          <PayrollOrbitalTimeItem\r\n            time={payrollRow?.regular}\r\n            locSettings={locSettings}\r\n            fontColor=\"black\"\r\n          />\r\n        </IonCol>\r\n\r\n        <IonCol\r\n          size={colSize}\r\n          hidden={\r\n            (colsToDisplay & ColumnEnum.DailyOvertime) !==\r\n            ColumnEnum.DailyOvertime\r\n          }\r\n        >\r\n          <PayrollOrbitalTimeItem\r\n            time={payrollRow?.dailyOvertime}\r\n            locSettings={locSettings}\r\n            fontColor=\"red\"\r\n          />\r\n        </IonCol>\r\n\r\n        <IonCol\r\n          size={colSize}\r\n          hidden={\r\n            (colsToDisplay & ColumnEnum.WeeklyOvertime) !==\r\n            ColumnEnum.WeeklyOvertime\r\n          }\r\n        >\r\n          <PayrollOrbitalTimeItem\r\n            time={payrollRow?.weeklyOvertime}\r\n            locSettings={locSettings}\r\n            fontColor=\"red\"\r\n          />\r\n        </IonCol>\r\n\r\n        <IonCol\r\n          size={colSize}\r\n          hidden={(colsToDisplay & ColumnEnum.Special) !== ColumnEnum.Special}\r\n        >\r\n          <PayrollOrbitalTimeItem\r\n            time={payrollRow?.special}\r\n            locSettings={locSettings}\r\n            fontColor=\"black\"\r\n          />\r\n        </IonCol>\r\n\r\n        <IonCol\r\n          size={colSize}\r\n          hidden={(colsToDisplay & ColumnEnum.Absent) !== ColumnEnum.Absent}\r\n        >\r\n          <PayrollOrbitalTimeItem\r\n            time={payrollRow?.absent}\r\n            locSettings={locSettings}\r\n            fontColor=\"black\"\r\n          />\r\n        </IonCol>\r\n      </IonRow>\r\n\r\n      <IonModal\r\n        cssClass=\"detail-modal\"\r\n        isOpen={showDetailModal}\r\n        onDidDismiss={() => setShowDetailModal(false)}\r\n      >\r\n        <PayrollDetailModal\r\n          onClose={() => setShowDetailModal(false)}\r\n          locSettings={locSettings}\r\n          data={payrollRow!}\r\n        />\r\n      </IonModal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PayrollDetailRow;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { IonGrid, IonRow, IonCol } from \"@ionic/react\";\r\nimport { PayrollPeriodData } from \"../../api/PayrollPeriodAPI\";\r\nimport \"./PayrollDetailList.scss\";\r\nimport PayrollDetailRow from \"./PayrollDetailRow\";\r\nimport { AuthorizedItemsContext } from \"../../context/AuthorizedItemsContext\";\r\nimport authHelper from \"../../util/authitems-helper\";\r\nimport PayrollOrbitalTimeItem from \"./PayrollOrbitalTimeItem\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\n\r\ninterface PayrollDetailListProps {\r\n  payrollData: PayrollPeriodData | null;\r\n}\r\n\r\nexport enum ColumnEnum {\r\n  None = 0,\r\n  Regular = 1 << 0,\r\n  DailyOvertime = 1 << 1,\r\n  WeeklyOvertime = 1 << 2,\r\n  Special = 1 << 3,\r\n  Absent = 1 << 4,\r\n  All = ~(~0 << 5),\r\n}\r\n\r\nfunction getColumnsToDisplay(\r\n  payrollData: PayrollPeriodData\r\n): { count: number; cols: ColumnEnum } {\r\n  let cols = ColumnEnum.Regular;\r\n  let count = 2;\r\n\r\n  if (payrollData.totalDailyOvertime.ActualHours > 0.0) {\r\n    cols |= ColumnEnum.DailyOvertime;\r\n    count++;\r\n  }\r\n\r\n  if (payrollData.totalWeeklyOvertime.ActualHours > 0.0) {\r\n    cols |= ColumnEnum.WeeklyOvertime;\r\n    count++;\r\n  }\r\n\r\n  if (payrollData.totalSpecial.ActualHours > 0.0) {\r\n    cols |= ColumnEnum.Special;\r\n    count++;\r\n  }\r\n\r\n  if (payrollData.totalAbsent.ActualHours > 0.0) {\r\n    cols |= ColumnEnum.Absent;\r\n    count++;\r\n  }\r\n\r\n  return { cols, count };\r\n}\r\n// --------------------------------------------------------------------------------------\r\nconst PayrollDetailList: React.FC<PayrollDetailListProps> = ({\r\n  payrollData,\r\n}: PayrollDetailListProps) => {\r\n  const { auth } = useContext(AuthorizedItemsContext);\r\n  const locSettings = authHelper.getLocSettingsForLocationId(\r\n    auth,\r\n    auth.locations[0].id\r\n  );\r\n  const [colsToDisplay, setColsToDisplay] = useState(ColumnEnum.None);\r\n  const [colSize, setColSize] = useState(\"3\");\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    if (!payrollData) {\r\n      return;\r\n    }\r\n\r\n    const { count, cols } = getColumnsToDisplay(payrollData);\r\n    setColsToDisplay(cols);\r\n    setColSize(count >= 5 ? \"2\" : \"3\");\r\n  }, [payrollData]);\r\n\r\n  if (payrollData === null) {\r\n    return (\r\n      <div className=\"grid-container\">\r\n        <IonGrid class=\"ion-text-end\">\r\n          <IonRow className=\"list-header\" class=\"ion-text-center\">\r\n            <IonCol size=\"3\">\r\n              <Skeleton width={60} />\r\n            </IonCol>\r\n            <IonCol size=\"3\">\r\n              <Skeleton width={60} />\r\n            </IonCol>\r\n            <IonCol size=\"3\">\r\n              <Skeleton width={60} />\r\n            </IonCol>\r\n            <IonCol size=\"3\">\r\n              <Skeleton width={60} />\r\n            </IonCol>\r\n          </IonRow>\r\n          {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((x) => {\r\n            return (\r\n              <PayrollDetailRow\r\n                payrollRow={null}\r\n                colSize=\"3\"\r\n                colsToDisplay={ColumnEnum.None}\r\n                key={x}\r\n              />\r\n            );\r\n          })}\r\n        </IonGrid>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"grid-container\">\r\n      <IonGrid class=\"ion-text-end\">\r\n        <IonRow className=\"list-header\" class=\"ion-text-center\">\r\n          <IonCol size={colSize}>DATE</IonCol>\r\n          <IonCol\r\n            size={colSize}\r\n            hidden={(colsToDisplay & ColumnEnum.Regular) !== ColumnEnum.Regular}\r\n          >\r\n            REG\r\n          </IonCol>\r\n          <IonCol\r\n            size={colSize}\r\n            hidden={\r\n              (colsToDisplay & ColumnEnum.DailyOvertime) !==\r\n              ColumnEnum.DailyOvertime\r\n            }\r\n          >\r\n            DAILY OT\r\n          </IonCol>\r\n          <IonCol\r\n            size={colSize}\r\n            hidden={\r\n              (colsToDisplay & ColumnEnum.WeeklyOvertime) !==\r\n              ColumnEnum.WeeklyOvertime\r\n            }\r\n          >\r\n            WKLY OT\r\n          </IonCol>\r\n          <IonCol\r\n            size={colSize}\r\n            hidden={(colsToDisplay & ColumnEnum.Special) !== ColumnEnum.Special}\r\n          >\r\n            SPECIAL\r\n          </IonCol>\r\n          <IonCol\r\n            size={colSize}\r\n            hidden={(colsToDisplay & ColumnEnum.Absent) !== ColumnEnum.Absent}\r\n          >\r\n            ABSENT\r\n          </IonCol>\r\n        </IonRow>\r\n        {payrollData?.list.map((row) => (\r\n          <PayrollDetailRow\r\n            key={row.date}\r\n            payrollRow={row}\r\n            colsToDisplay={colsToDisplay}\r\n            colSize={colSize}\r\n          />\r\n        ))}\r\n        <IonRow style={{ fontWeight: \"bold\" }}>\r\n          <IonCol size={colSize}>TOTAL</IonCol>\r\n          <IonCol\r\n            size={colSize}\r\n            hidden={(colsToDisplay & ColumnEnum.Regular) !== ColumnEnum.Regular}\r\n          >\r\n            <PayrollOrbitalTimeItem\r\n              time={payrollData?.totalRegular}\r\n              locSettings={locSettings}\r\n              fontColor=\"black\"\r\n            />\r\n          </IonCol>\r\n          <IonCol\r\n            size={colSize}\r\n            hidden={\r\n              (colsToDisplay & ColumnEnum.DailyOvertime) !==\r\n              ColumnEnum.DailyOvertime\r\n            }\r\n          >\r\n            <PayrollOrbitalTimeItem\r\n              time={payrollData?.totalDailyOvertime}\r\n              locSettings={locSettings}\r\n              fontColor=\"red\"\r\n            />\r\n          </IonCol>\r\n          <IonCol\r\n            size={colSize}\r\n            hidden={\r\n              (colsToDisplay & ColumnEnum.WeeklyOvertime) !==\r\n              ColumnEnum.WeeklyOvertime\r\n            }\r\n          >\r\n            <PayrollOrbitalTimeItem\r\n              time={payrollData?.totalWeeklyOvertime}\r\n              locSettings={locSettings}\r\n              fontColor=\"red\"\r\n            />\r\n          </IonCol>\r\n          <IonCol\r\n            size={colSize}\r\n            hidden={(colsToDisplay & ColumnEnum.Special) !== ColumnEnum.Special}\r\n          >\r\n            <PayrollOrbitalTimeItem\r\n              time={payrollData?.totalSpecial}\r\n              locSettings={locSettings}\r\n              fontColor=\"black\"\r\n            />\r\n          </IonCol>\r\n          <IonCol\r\n            size={colSize}\r\n            hidden={(colsToDisplay & ColumnEnum.Absent) !== ColumnEnum.Absent}\r\n          >\r\n            <PayrollOrbitalTimeItem\r\n              time={payrollData?.totalAbsent}\r\n              locSettings={locSettings}\r\n              fontColor=\"black\"\r\n            />\r\n          </IonCol>\r\n        </IonRow>\r\n      </IonGrid>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PayrollDetailList;\r\n","import React, { useState, useEffect } from \"react\";\nimport \"./ClockPanel.scss\";\nimport { addDays, parseISO } from \"date-fns\";\nimport { ApplicationUserContext } from \"../../context/ApplicationUserContext\";\nimport { AuthorizedItemsContext } from \"../../context/AuthorizedItemsContext\";\nimport PayrollPeriodChooser from \"./PayrollPeriodChooser\";\nimport PayrollPeriodAPI, {\n  PayrollPeriodData,\n} from \"../../api/PayrollPeriodAPI\";\nimport useDialogBox from \"../../hooks/useDialogBox\";\nimport PayrollDetailList from \"./PayrollDetailList\";\nimport { RefresherEventDetail } from \"@ionic/core\";\nimport useIonicRefresher from \"../../hooks/useIonicRefresher\";\nimport { IonContent } from \"@ionic/react\";\n\ninterface PayrollPeriodsTabProps {\n  date: Date | null;\n}\n\nconst PayrollPeriodsTab: React.FC<PayrollPeriodsTabProps> = ({\n  date,\n}: PayrollPeriodsTabProps) => {\n  const { user } = React.useContext(ApplicationUserContext);\n  const { auth } = React.useContext(AuthorizedItemsContext);\n  const [currentDate, setCurrentDate] = useState(null as Date | null);\n  const [startDate, setStartDate] = useState(null as Date | null);\n  const [endDate, setEndDate] = useState(null as Date | null);\n  const [payrollData, setPayrollData] = useState(\n    null as PayrollPeriodData | null\n  );\n  const dlg = useDialogBox();\n\n  // ------------------------------------------------------------------------------------\n  const doRefresh = (e: CustomEvent<RefresherEventDetail>) => {\n    getData(e);\n  };\n\n  const refresher = useIonicRefresher(doRefresh);\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    let newStartDate = date;\n    if (date === null) {\n      newStartDate = new Date();\n    }\n\n    setCurrentDate(newStartDate);\n  }, [date]);\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (currentDate == null) {\n      return;\n    }\n\n    getData();\n    // eslint-disable-next-line\n  }, [currentDate]);\n\n  // ------------------------------------------------------------------------------------\n  function getData(e?: CustomEvent<RefresherEventDetail>) {\n    PayrollPeriodAPI.getPayPeriodDateForEmployee(\n      user,\n      auth.locations[0].id,\n      currentDate!\n    ).then((data) => {\n      if (data.error) {\n        dlg.showAlert(\n          \"Error\",\n          \"Could not retrieve Payroll data: \" + data.message,\n          () => {}\n        );\n        return;\n      }\n\n      setStartDate(parseISO(data.start));\n      setEndDate(parseISO(data.end));\n      setPayrollData(data);\n      if (e) {\n        e.detail.complete();\n      }\n    });\n  }\n\n  // ------------------------------------------------------------------------------------\n  const onNextPayPeriod = () => {\n    setCurrentDate(addDays(endDate!, 1));\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onPrevPayPeriod = () => {\n    setCurrentDate(addDays(startDate!, -1));\n  };\n\n  return (\n    <>\n      <PayrollPeriodChooser\n        startDate={startDate}\n        endDate={endDate}\n        onNextPayPeriod={onNextPayPeriod}\n        onPrevPayPeriod={onPrevPayPeriod}\n      />\n      <IonContent className=\"outer-content\">\n        {refresher.ionicRefresherJsx}\n        <PayrollDetailList payrollData={payrollData} />\n        {dlg.alertBoxJsx}\n      </IonContent>\n    </>\n  );\n};\n\nexport default PayrollPeriodsTab;\n","import React from \"react\";\r\nimport { DailyNotes } from \"../orbital-interfaces/DailyNotes\";\r\nimport \"./TodayDailyNoteCard.scss\";\r\nimport { AuthorizedItems } from \"../orbital-interfaces/authorized-items\";\r\n\r\ninterface TodayNoteCardProps {\r\n  oneLine: boolean;\r\n  dailyNote?: DailyNotes;\r\n  authItems: AuthorizedItems;\r\n}\r\n\r\n// ---------------------------------------------------------------------------------\r\nconst getDeptName = (note: DailyNotes, authItems: AuthorizedItems) => {\r\n  let dept = \"\";\r\n  if (authItems.locations.length >= 1) {\r\n    dept =\r\n      authItems.locations.filter((l) => l.id === note.LocationId)[0].abbr + \"/\";\r\n  }\r\n\r\n  return note.DepartmentId === -1\r\n    ? dept + \"All Departments\"\r\n    : dept + note.DepartmentName;\r\n};\r\n\r\n// ==============================================================================\r\nconst TodayNoteCard: React.FC<TodayNoteCardProps> = ({\r\n  authItems,\r\n  oneLine,\r\n  dailyNote,\r\n}: TodayNoteCardProps) => {\r\n  if (!dailyNote) {\r\n    return <div />;\r\n  }\r\n\r\n  return (\r\n    <button className=\"daily-note\">\r\n      <div className=\"event-color-col\" />\r\n      <div className=\"card-second-col\">\r\n        <div className=\"dept-row\">{getDeptName(dailyNote, authItems)}</div>\r\n        <div className={oneLine ? \"note-text-row-oneline\" : \"note-text-row\"}>\r\n          {dailyNote.Notes}\r\n        </div>\r\n      </div>\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default TodayNoteCard;\r\n","import React, { CSSProperties, useContext } from \"react\";\nimport { IonIcon } from \"@ionic/react\";\nimport \"./TodayEventCard.scss\";\nimport {\n  getBreakStartEnd,\n  getDurationStringFromTimeSpan,\n  getEventStartEnd,\n  getStartTime,\n} from \"../util/time-helper\";\nimport { AuthorizedLocation } from \"../orbital-interfaces/authorized-items\";\nimport EventType from \"../enums/EventType\";\nimport EventStatus from \"../enums/EventStatus\";\nimport { cafe, time } from \"ionicons/icons\";\nimport { EventInformation } from \"../orbital-interfaces/TEC\";\nimport {\n  getEventEditAuthorization,\n  EventEditAuthorization,\n} from \"./EditEvent/EditEventAuthorization\";\nimport { AuthorizedItemsContext } from \"../context/AuthorizedItemsContext\";\n\ninterface TodayEventCardProps {\n  event?: EventInformation;\n  locations: AuthorizedLocation[];\n  onEdit: (ev: EventInformation, eventEditAuth: EventEditAuthorization) => void;\n}\n\nconst colorMap: any = {\n  1: \"#9CBA6A\",\n  2: \"#BFBFBF\",\n  3: \"#FFAD00\",\n  4: \"#C41A26\",\n  6: \"#677A46\",\n  7: \"#FFAD00\",\n};\n\nconst statusTimeColor: any = {\n  1: { color: \"black\" },\n  2: { color: \"#C41A26\" },\n  4: { color: \"#BCBCBC\" },\n};\n\n// --------------------------------------------------------------------------------------\nfunction getPosition(locations: AuthorizedLocation[], ev: any) {\n  const thisLocation = locations.filter((loc) => loc.id === ev.LocationId)[0];\n  const multiLocation =\n    locations.filter((l) =>\n      l.departments.filter((d) => d.positions.filter((p) => p.hasPosition))\n    ).length > 1;\n  const multiDepartment = multiLocation\n    ? true\n    : thisLocation.departments.filter((d) =>\n        d.positions.filter((p) => p.hasPosition)\n      ).length > 1;\n\n  let posDisplay = \"\";\n  if (multiLocation) {\n    if (ev.AbbreviatedLocationName) {\n      posDisplay = ev.AbbreviatedLocationName + \"/\";\n    } else if (ev.LocationAbbreviation) {\n      posDisplay = ev.LocationAbbreviation + \"/\";\n    }\n  }\n\n  if (multiDepartment) {\n    if (ev.AbbreviatedDepartmentName) {\n      posDisplay += ev.AbbreviatedDepartmentName + \"/\";\n    } else if (ev.DepartmentAbbreviation) {\n      posDisplay += ev.DepartmentAbbreviation + \"/\";\n    }\n  }\n\n  posDisplay += ev.PositionName;\n\n  return posDisplay;\n}\n\n// --------------------------------------------------------------------------------------\nconst TodayEventCard: React.FC<TodayEventCardProps> = ({\n  event,\n  locations,\n  onEdit,\n}: TodayEventCardProps) => {\n  const { auth } = useContext(AuthorizedItemsContext);\n\n  if (!event || !auth || !auth.locations || auth.locations.length === 0) {\n    return <div />;\n  }\n\n  const noEndTime = new Date(9000, 1, 1);\n  const onClock =\n    event.EventTypeId === EventType.Clock &&\n    event.EventStatusId === EventStatus.Approved &&\n    event.IsClockedIn;\n  const onBreak =\n    event.EventTypeId === EventType.Clock &&\n    event.EventStatusId === EventStatus.Approved &&\n    event.EventBreaks.filter((b) => !b.BreakEnd || b.BreakEnd > noEndTime)\n      .length > 0;\n  const timeColor: CSSProperties = statusTimeColor[event.EventStatusId];\n\n  const displayIcon = onClock && onBreak ? cafe : time;\n  const rangeDisplay = onClock ? (\n    <div className=\"time-row\">\n      <IonIcon icon={displayIcon} />\n      <span style={timeColor}>{getStartTime(event)}</span>{\" \"}\n      {getDurationStringFromTimeSpan(event.EventDuration)}{\" \"}\n    </div>\n  ) : (\n    <div className=\"time-row\">\n      <span style={timeColor}>{getEventStartEnd(event)}</span>{\" \"}\n      {getDurationStringFromTimeSpan(event.EventDuration)}{\" \"}\n    </div>\n  );\n\n  // ------------------------------------------------------------------------------------\n  const onButtonClick = () => {\n    const eventEditAuth = getEventEditAuthorization(\n      event.EventTypeId,\n      event.EventStatusId,\n      event.EmployeeId,\n      event.EventStart,\n      event.EventEnd,\n      event.LocationId,\n      event.DepartmentId!,\n      event.PositionId,\n      event.IsConfirmed,\n      auth\n    );\n    if (eventEditAuth === null) {\n      return;\n    }\n\n    onEdit(event, eventEditAuth);\n  };\n\n  const tag = event.Tag ? \" ~\" + event.Tag : \"\";\n\n  const eventTypeBorder = {\n    borderLeft: `7px solid ${colorMap[event.EventTypeId]} `,\n  };\n  return (\n    <button onClick={onButtonClick} className=\"event\">\n      <div className=\"card-second-col\" style={eventTypeBorder}>\n        {rangeDisplay}\n        <div className=\"position-row\">\n          {getPosition(locations, event)} {tag}\n        </div>\n        {event.EventBreaks &&\n          event.EventBreaks.map((brk) => (\n            <div key={brk.BreakStart} className=\"break-div\">\n              (B) {getBreakStartEnd(brk)}\n            </div>\n          ))}\n      </div>\n    </button>\n  );\n};\n\nexport default TodayEventCard;\n","import React from \"react\";\r\nimport \"./TodayEventCard.scss\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\n\r\ninterface TodayEventCardProps {}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst TodayEventCardSkeleton: React.FC<TodayEventCardProps> = () => {\r\n  return (\r\n    <button className=\"event\">\r\n      <div style={{ paddingLeft: \"20px\", paddingRight: \"2px\" }}>\r\n        <Skeleton width={5} height={40} />\r\n      </div>\r\n      <div className=\"card-second-col\">\r\n        <Skeleton width={150} />\r\n        <div className=\"position-row\">\r\n          <Skeleton width={150} />\r\n        </div>\r\n      </div>\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default TodayEventCardSkeleton;\r\n","import React, { useState, useEffect } from \"react\";\nimport \"./ClockPanel.scss\";\nimport { ApplicationUserContext } from \"../../context/ApplicationUserContext\";\nimport useDialogBox from \"../../hooks/useDialogBox\";\nimport {\n  IonContent,\n  IonItem,\n  IonLabel,\n  IonList,\n  IonListHeader,\n  IonModal,\n  IonSpinner,\n} from \"@ionic/react\";\nimport { getDateString } from \"../../util/time-helper\";\nimport TodayDailyNoteCard from \"../TodayDailyNoteCard\";\nimport TodayEventCard from \"../TodayEventCard\";\nimport { EventInformation } from \"../../orbital-interfaces/TEC\";\nimport EditEventModal from \"../EditEvent/EditEventModal\";\nimport { RefresherEventDetail } from \"@ionic/core\";\nimport UserAPI from \"../../api/UserAPI\";\nimport useIonicRefresher from \"../../hooks/useIonicRefresher\";\nimport { initialHomePageData } from \"../../orbital-interfaces/authorized-items\";\nimport TodayEventCardSkeleton from \"../TodayEventCardSkeleton\";\nimport { EventEditAuthorization } from \"../EditEvent/EditEventAuthorization\";\n\ninterface ClockTodayTabProps {\n  refreshToggle: boolean;\n  onUpdate: () => void;\n}\n\nconst ClockTodayTab: React.FC<ClockTodayTabProps> = ({\n  refreshToggle,\n  onUpdate,\n}: ClockTodayTabProps) => {\n  const doRefresh = (e: CustomEvent<RefresherEventDetail>) => {\n    getData(e);\n  };\n\n  const [homePageData, setHomePageData] = useState(initialHomePageData);\n  const refresher = useIonicRefresher(doRefresh);\n  const { user } = React.useContext(ApplicationUserContext);\n  const dlg = useDialogBox();\n  const [showEventModal, setShowEventModal] = useState(false);\n  const [editEventId, setEditEventId] = useState(null as number | null);\n  const [eventEditAuth, setEventEditAuth] = useState(\n    null as EventEditAuthorization | null\n  );\n  const [isLoading, setIsLoading] = useState(false);\n\n  // ------------------------------------------------------------------------------------\n  const onEventClick = (\n    ev: EventInformation,\n    newEventEditAuth: EventEditAuthorization | null\n  ) => {\n    setEditEventId(ev.ScheduleEventId);\n    setEventEditAuth(newEventEditAuth);\n    setShowEventModal(true);\n  };\n\n  // ------------------------------------------------------------------------------------\n  function getData(e?: CustomEvent<RefresherEventDetail>) {\n    try {\n      UserAPI.getHomePageData(user).then((response) => {\n        console.log(\"ClockTodayTab.getData: got homepage data\");\n        setHomePageData(response);\n        setIsLoading(false);\n        if (e) {\n          e.detail.complete();\n          onUpdate();\n        }\n      });\n    } catch (e) {\n      console.log(\"Error in ClockTodayTab.getData: \" + e.message);\n    }\n  }\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    // eslint-disable-next-line\n    if (user && user.isLoggedin) {\n      setIsLoading(true);\n      getData(undefined);\n    }\n\n    // eslint-disable-next-line\n  }, [refreshToggle]);\n\n  // ------------------------------------------------------------------------------------\n  const onEventUpdated = () => {\n    getData(undefined);\n    setShowEventModal(false);\n  };\n\n  return (\n    <>\n      <IonContent className=\"outer-content\">\n        {refresher.ionicRefresherJsx}\n\n        <IonList className=\"todaylist\" lines=\"none\">\n          <IonListHeader mode=\"ios\">\n            <IonLabel className=\"label\" mode=\"ios\">\n              {getDateString(new Date())}\n            </IonLabel>\n          </IonListHeader>\n          {isLoading &&\n            ((homePageData.dailyNotes && homePageData.dailyNotes.length > 0) ||\n              (homePageData.currentEvents &&\n                homePageData.currentEvents.length > 0)) && (\n              <IonSpinner className=\"center\" name=\"dots\" />\n            )}\n\n          {isLoading &&\n            (!homePageData.dailyNotes ||\n              homePageData.dailyNotes.length === 0 ||\n              !homePageData.currentEvents ||\n              homePageData.currentEvents.length === 0) && (\n              <>\n                <TodayEventCardSkeleton />\n                <TodayEventCardSkeleton />\n              </>\n            )}\n\n          {homePageData.dailyNotes &&\n            homePageData.dailyNotes.map((note) => (\n              <IonItem key={note.DailyNoteId}>\n                <TodayDailyNoteCard\n                  authItems={homePageData.auth}\n                  oneLine={false}\n                  dailyNote={note}\n                />\n              </IonItem>\n            ))}\n          {homePageData.currentEvents.map((ev) => (\n            <IonItem key={ev.ScheduleEventId}>\n              <TodayEventCard\n                onEdit={onEventClick}\n                locations={homePageData.auth.locations}\n                event={ev}\n              />\n            </IonItem>\n          ))}\n        </IonList>\n      </IonContent>\n\n      <IonModal\n        isOpen={showEventModal}\n        onDidDismiss={() => setShowEventModal(false)}\n      >\n        <EditEventModal\n          isOpen={showEventModal}\n          auth={homePageData.auth}\n          onCancelModal={() => setShowEventModal(false)}\n          onDismissModal={() => onEventUpdated()}\n          scheduleEventId={editEventId}\n          eventEditAuth={eventEditAuth!}\n        />\n      </IonModal>\n\n      {dlg.alertBoxJsx}\n    </>\n  );\n};\n\nexport default ClockTodayTab;\n","import React, { useState } from \"react\";\r\nimport {\r\n  IonFooter,\r\n  IonSegment,\r\n  IonSegmentButton,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonTitle,\r\n  IonPage,\r\n  IonButtons,\r\n  IonMenuButton,\r\n} from \"@ionic/react\";\r\nimport \"./ClockPage.scss\";\r\nimport ClockPanel from \"../components/ClockPageComponents/ClockPanel\";\r\nimport PayrollPeriodsTab from \"../components/ClockPageComponents/PayrollPeriodsTab\";\r\nimport ClockTodayTab from \"../components/ClockPageComponents/ClockTodayTab\";\r\n\r\nconst ClockPage: React.FC = () => {\r\n  const [segment, setSegment] = useState<\"today\" | \"pay-periods\">(\"today\");\r\n  const [refreshToggle, setRefreshToggle] = useState(false);\r\n  const [refreshTimeClockToggle, setRefreshTimeClockToggle] = useState(false);\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const onClockPanelUpdate = () => {\r\n    setRefreshToggle(!refreshToggle);\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const onTodayPanelUpdate = () => {\r\n    console.log(\"onTodayPanelUpdate\");\r\n    setRefreshTimeClockToggle(!refreshTimeClockToggle);\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const onSegmentChange = (segmentName: any) => {\r\n    setSegment(segmentName);\r\n  };\r\n\r\n  return (\r\n    <IonPage id=\"clock-page\">\r\n      <IonHeader mode=\"ios\">\r\n        <IonToolbar mode=\"md\">\r\n          <IonButtons slot=\"start\">\r\n            <IonMenuButton />\r\n          </IonButtons>\r\n          <IonTitle slot=\"start\">Clock</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonSegment\r\n        mode=\"md\"\r\n        onIonChange={(e) => onSegmentChange(e.detail.value)}\r\n      >\r\n        <IonSegmentButton mode=\"md\" value=\"today\">\r\n          TODAY\r\n        </IonSegmentButton>\r\n        <IonSegmentButton mode=\"md\" value=\"pay-periods\">\r\n          PAY PERIOD\r\n        </IonSegmentButton>\r\n      </IonSegment>\r\n\r\n      {segment === \"today\" && (\r\n        <ClockTodayTab\r\n          refreshToggle={refreshToggle}\r\n          onUpdate={onTodayPanelUpdate}\r\n        />\r\n      )}\r\n\r\n      {segment === \"pay-periods\" && <PayrollPeriodsTab date={null} />}\r\n\r\n      <IonFooter className=\"footer\">\r\n        {segment === \"today\" && (\r\n          <ClockPanel\r\n            refreshToggle={refreshTimeClockToggle}\r\n            onUpdate={onClockPanelUpdate}\r\n          />\r\n        )}\r\n      </IonFooter>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default ClockPage;\r\n","import React from \"react\";\r\nimport { Message } from \"../../orbital-interfaces/Message\";\r\nimport { messageDateString } from \"../../util/time-helper\";\r\nimport \"./MessageItem.scss\";\r\nimport { bookmark } from \"ionicons/icons\";\r\nimport { IonIcon } from \"@ionic/react\";\r\n\r\ninterface MessageItemProps {\r\n  message: Message;\r\n  onMessageClick: () => void;\r\n}\r\n\r\n// ==============================================================================\r\nconst MessageItem: React.FC<MessageItemProps> = ({\r\n  message,\r\n  onMessageClick,\r\n}: MessageItemProps) => {\r\n  if (!message) {\r\n    return <div />;\r\n  }\r\n\r\n  const fontWeightForSubject = message.isViewed ? \"normal\" : \"bold\";\r\n\r\n  return (\r\n    <button className=\"message\" onClick={onMessageClick}>\r\n      <div className=\"top-line\">\r\n        <span className=\"subject\" style={{ fontWeight: fontWeightForSubject }}>\r\n          {message.isPinned && (\r\n            <IonIcon icon={bookmark} style={{ color: \"gray\" }} />\r\n          )}\r\n          {message.subject}\r\n        </span>\r\n        <span className=\"time\">\r\n          {messageDateString(message.deliveryDateTime)}{\" \"}\r\n        </span>\r\n      </div>\r\n      <div className=\"bottom-line\">{message.previewLine}</div>\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default MessageItem;\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  IonButton,\r\n  IonButtons,\r\n  IonIcon,\r\n  IonContent,\r\n  IonFooter,\r\n  IonHeader,\r\n  IonItem,\r\n  IonLabel,\r\n  IonSelect,\r\n  IonSelectOption,\r\n  IonTitle,\r\n  IonToolbar,\r\n} from \"@ionic/react\";\r\nimport { arrowBackOutline } from \"ionicons/icons\";\r\nimport \"../SchedulePageComponents/ScheduleFilterModal.scss\";\r\nimport ToggleListEx from \"../ToggleListEx\";\r\nimport { NotificationTypeModel } from \"../../orbital-interfaces/NotificationTypeModel\";\r\n\r\nexport interface FilterData {\r\n  msgTypes: { messageTypeId: number; name: string }[];\r\n  employees: { employeeId: number; name: string }[];\r\n}\r\n\r\nexport interface FilterResult {\r\n  msgTypeIds: number[];\r\n  employeeId: number;\r\n}\r\n\r\ninterface MessagesFilterModalProps {\r\n  onDismissModal: (result: FilterResult) => void;\r\n  onCancelModal: () => void;\r\n  filterData: FilterData;\r\n}\r\n\r\nconst MessagesFilterModal: React.FC<MessagesFilterModalProps> = ({\r\n  onDismissModal,\r\n  onCancelModal,\r\n  filterData,\r\n}: MessagesFilterModalProps) => {\r\n  const [filterResult, setFilterResult] = useState({\r\n    msgTypeIds: filterData.msgTypes\r\n      ? filterData.msgTypes.map((mt) => mt.messageTypeId)\r\n      : ([] as number[]),\r\n    employeeId: -1,\r\n  } as FilterResult);\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  const onCloseModal = () => {\r\n    onDismissModal(filterResult);\r\n  };\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  const onCancel = () => {\r\n    onCancelModal();\r\n  };\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  const onResetAll = () => {\r\n    setFilterResult({\r\n      msgTypeIds: filterData.msgTypes.map((mt) => mt.messageTypeId),\r\n      employeeId: -1,\r\n    });\r\n  };\r\n\r\n  // --------------------------------------------------------------------------------------\r\n  const onMessageTypeChange = (newSelection: NotificationTypeModel[]) => {\r\n    setFilterResult({\r\n      ...filterResult,\r\n      msgTypeIds: newSelection.map((mt) => mt.id),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonButtons slot=\"start\">\r\n            <IonButton onClick={onCancel}>\r\n              <IonIcon icon={arrowBackOutline} mode=\"md\" slot=\"icon-only\" />\r\n            </IonButton>\r\n          </IonButtons>\r\n          <IonTitle>Filter</IonTitle>\r\n          <IonButtons slot=\"end\">\r\n            <IonButton onClick={onResetAll}>RESET ALL</IonButton>\r\n          </IonButtons>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonContent class=\"outer-content\">\r\n        <IonItem>\r\n          <IonLabel>From</IonLabel>\r\n          <IonSelect\r\n            value={filterResult.employeeId}\r\n            onIonChange={(e) =>\r\n              setFilterResult({ ...filterResult, employeeId: e.detail.value })\r\n            }\r\n            interface=\"action-sheet\"\r\n          >\r\n            <IonSelectOption key={-1} value={-1}>\r\n              EVERYONE\r\n            </IonSelectOption>\r\n            {filterData &&\r\n              filterData.employees &&\r\n              filterData.employees.map((emp) => (\r\n                <IonSelectOption key={emp.employeeId} value={emp.employeeId}>\r\n                  {emp.name}\r\n                </IonSelectOption>\r\n              ))}\r\n          </IonSelect>\r\n        </IonItem>\r\n        <IonItem>\r\n          <IonLabel>Message Types</IonLabel>\r\n        </IonItem>\r\n        {filterData.msgTypes && (\r\n          <ToggleListEx\r\n            list={filterData.msgTypes.map((mt) => {\r\n              return { id: mt.messageTypeId, name: mt.name, description: \"\" };\r\n            })}\r\n            selected={filterData.msgTypes\r\n              .filter((mt) =>\r\n                filterResult.msgTypeIds.includes(mt.messageTypeId)\r\n              )\r\n              .map((mt) => {\r\n                return { id: mt.messageTypeId, name: mt.name, description: \"\" };\r\n              })}\r\n            selectionChanged={onMessageTypeChange}\r\n          />\r\n        )}\r\n      </IonContent>\r\n\r\n      <IonFooter className=\"outer-content footer\">\r\n        <IonButton\r\n          className=\"apply-button\"\r\n          expand=\"block\"\r\n          onClick={onCloseModal}\r\n        >\r\n          APPLY FILTER\r\n        </IonButton>\r\n        <IonButton\r\n          className=\"apply-button\"\r\n          expand=\"block\"\r\n          onClick={onCancel}\r\n          color=\"tertiary\"\r\n        >\r\n          BACK\r\n        </IonButton>\r\n      </IonFooter>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MessagesFilterModal;\r\n","import { KeyedCollection } from \"../util/KeyedCollection\";\r\n\r\nexport interface MessageType {\r\n  id: number;\r\n  typeName: string;\r\n  description: string;\r\n}\r\n\r\nconst types: MessageType[] = [\r\n  { id: 1, typeName: \"CoverRequestMessage\", description: \"Cover-Request\" },\r\n  { id: 2, typeName: \"CoverApprovedMessage\", description: \"Cover-Approved\" },\r\n  {\r\n    id: 3,\r\n    typeName: \"DirectCoverRequestMessage\",\r\n    description: \"Direct Cover-Request\",\r\n  },\r\n  { id: 5, typeName: \"ShiftRequestMessage\", description: \"Shift-Request\" },\r\n  { id: 6, typeName: \"ShiftRequestDeniedMessage\", description: \"Shift-Denied\" },\r\n  {\r\n    id: 10,\r\n    typeName: \"ShiftRequestReceivedMessage\",\r\n    description: \"Shift-Request Received\",\r\n  },\r\n  {\r\n    id: 20,\r\n    typeName: \"NoClockInAlertMessage\",\r\n    description: \"No Clock In Alert\",\r\n  },\r\n  {\r\n    id: 21,\r\n    typeName: \"NoClockOutAlertMessage\",\r\n    description: \"No Clock Out Alert\",\r\n  },\r\n  {\r\n    id: 22,\r\n    typeName: \"LateClockInMessage\",\r\n    description: \"Late Clock In Alert\",\r\n  },\r\n  {\r\n    id: 23,\r\n    typeName: \"EarlyClockOutAlertMessage\",\r\n    description: \"Early Clock Out Alert\",\r\n  },\r\n  {\r\n    id: 50,\r\n    typeName: \"ScheduleEventUpdatedMessage\",\r\n    description: \"Schedule Event Updated\",\r\n  },\r\n  {\r\n    id: 60,\r\n    typeName: \"PublishedScheduleUpdatedMessage\",\r\n    description: \"Published Schedule Updated\",\r\n  },\r\n  {\r\n    id: 80,\r\n    typeName: \"PasswordRecoveryMessage\",\r\n    description: \"Password Recovery\",\r\n  },\r\n  {\r\n    id: 81,\r\n    typeName: \"VerifyCellPhoneMessage\",\r\n    description: \"Verify Cell Phone\",\r\n  },\r\n  {\r\n    id: 82,\r\n    typeName: \"VerifyCellPhoneCompleteMessage\",\r\n    description: \"Verify Cell Phone Completed\",\r\n  },\r\n  { id: 83, typeName: \"VerifyEmailMessage\", description: \"Verify Email\" },\r\n  { id: 100, typeName: \"CustomMessage\", description: \"Custom Messages\" },\r\n  {\r\n    id: 101,\r\n    typeName: \"WeeklyScheduleForEmployeeMessage\",\r\n    description: \"Employee Weekly Schedule\",\r\n  },\r\n  { id: 555, typeName: \"WelcomeMessage\", description: \"Welcome\" },\r\n  {\r\n    id: 603,\r\n    typeName: \"UpdatePaymentInformationMessage\",\r\n    description: \"Update Payment Information\",\r\n  },\r\n  {\r\n    id: 700,\r\n    typeName: \"UpgradeSubscriptionMessage\",\r\n    description: \"Upgrade Subscription (to Orbital)\",\r\n  },\r\n  { id: 701, typeName: \"FailedSignupMessage\", description: \"Failed Signup\" },\r\n  { id: 702, typeName: \"GenericErrorMessage\", description: \"Error Message\" },\r\n  { id: 704, typeName: \"SignupMessage\", description: \"Signup Completed\" },\r\n  {\r\n    id: 705,\r\n    typeName: \"DatesOutOfSyncMessage\",\r\n    description: \"Dates Out of Sync\",\r\n  },\r\n  {\r\n    id: 708,\r\n    typeName: \"CancelSubscriptionMessage\",\r\n    description: \"Canceled Subscription  \",\r\n  },\r\n];\r\n\r\nexport const messageTypes = new KeyedCollection<MessageType>();\r\n\r\ntypes.map((t) => messageTypes.add(\"\" + t.id, t));\r\n","import { Message } from \"../orbital-interfaces/Message\";\r\nimport { ApplicationUser } from \"../context/ApplicationUserContext\";\r\nimport apiHelper from \"./OrbitalApiHelper\";\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst getUserMessage = async (user: ApplicationUser, msgId: number) => {\r\n  return (await apiHelper.get(\r\n    user,\r\n    \"api/v2/employee/messages/\" + msgId\r\n  )) as Message;\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst getUserMessages = async (user: ApplicationUser) => {\r\n  return (await apiHelper.get(user, \"api/v2/employee/messages\")) as Message[];\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst getReadCount = async (user: ApplicationUser, msgId: number) => {\r\n  return (await apiHelper.get(\r\n    user,\r\n    \"api/v1/employee/messages/\" + msgId + \"/readCount\"\r\n  )) as number;\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst setIsPinned = async (\r\n  user: ApplicationUser,\r\n  msgId: number,\r\n  isPinned: boolean\r\n) => {\r\n  return await apiHelper.post(\r\n    user,\r\n    \"api/v1/employee/messages/\" + msgId + \"/togglePin\",\r\n    { isPinned }\r\n  );\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst setIsViewed = async (\r\n  user: ApplicationUser,\r\n  msgId: number,\r\n  isViewed: boolean\r\n) => {\r\n  return await apiHelper.post(\r\n    user,\r\n    \"api/v1/employee/messages/\" + msgId + \"/toggleView\",\r\n    { isViewed }\r\n  );\r\n};\r\n\r\n// ----------------------------------------------------------------------------------------------\r\nconst deleteMessage = async (user: ApplicationUser, msgId: number) => {\r\n  return await apiHelper.del(user, \"api/v1/employee/messages/\" + msgId);\r\n};\r\n\r\nexport default {\r\n  getUserMessage,\r\n  getUserMessages,\r\n  getReadCount,\r\n  setIsPinned,\r\n  setIsViewed,\r\n  deleteMessage,\r\n};\r\n","import { IonAlert } from \"@ionic/react\";\r\nimport React, { useState } from \"react\";\r\n\r\nfunction useYesOrCancelDialogBox() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [alertData, setAlertData] = useState({\r\n    message: \"\",\r\n    onCancel: () => {},\r\n    onYes: () => {},\r\n  });\r\n\r\n  const showDialog = (\r\n    message: string,\r\n    onYes: () => void,\r\n    onCancel: () => void\r\n  ) => {\r\n    setAlertData({\r\n      message,\r\n      onYes,\r\n      onCancel,\r\n    });\r\n\r\n    setIsOpen(true);\r\n  };\r\n\r\n  const dialogJsx = (\r\n    <IonAlert\r\n      isOpen={isOpen}\r\n      onDidDismiss={() => {\r\n        setIsOpen(false);\r\n        alertData.onCancel();\r\n      }}\r\n      message={alertData.message}\r\n      buttons={[\r\n        {\r\n          text: \"Cancel\",\r\n          role: \"cancel\",\r\n          cssClass: \"secondary\",\r\n          handler: alertData.onCancel,\r\n        },\r\n\r\n        {\r\n          text: \"Yes\",\r\n          handler: alertData.onYes,\r\n        },\r\n      ]}\r\n    />\r\n  );\r\n\r\n  return {\r\n    showDialog,\r\n    dialogJsx,\r\n  };\r\n}\r\n\r\nexport default useYesOrCancelDialogBox;\r\n","import React, { useEffect, useState } from \"react\";\nimport {\n  IonButton,\n  IonButtons,\n  IonIcon,\n  IonContent,\n  IonFooter,\n  IonHeader,\n  IonGrid,\n  IonRow,\n  IonCol,\n  IonToolbar,\n} from \"@ionic/react\";\nimport { arrowBackOutline, bookmark, trash } from \"ionicons/icons\";\nimport \"../EditEvent/EditEventModal.scss\";\nimport { ApplicationUserContext } from \"../../context/ApplicationUserContext\";\nimport useDialogBox from \"../../hooks/useDialogBox\";\nimport { Message } from \"../../orbital-interfaces/Message\";\nimport { AuthorizedItemsContext } from \"../../context/AuthorizedItemsContext\";\nimport { getMessageDeliveryTimeString } from \"../../util/time-helper\";\nimport scheduleEventAPI from \"../../api/ScheduleEventsAPI\";\nimport messageAPI from \"../../api/MessageAPI\";\nimport { ScheduleEvent } from \"../../orbital-interfaces/ScheduleEvent\";\nimport EventReqeustEditor from \"../EditEvent/editor/EventRequestEditor\";\nimport \"./ViewMessageModal.scss\";\nimport { MessagesReducerAction } from \"../../pages/MessagesPage\";\nimport useYesOrCancelDialogBox from \"../../hooks/useYesOrCancelDialogBox\";\nimport {\n  getEventEditAuthorization,\n  EventEditAuthorization,\n} from \"../EditEvent/EditEventAuthorization\";\n\ninterface ViewMessageModalProps {\n  message: Message | null;\n  onCloseModal: (msg: string | null) => void;\n  updateMessages: React.Dispatch<MessagesReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst ViewMessagetModal: React.FC<ViewMessageModalProps> = ({\n  message,\n  onCloseModal,\n  updateMessages,\n}) => {\n  const dlg = useDialogBox();\n  const yesCancelDlg = useYesOrCancelDialogBox();\n  const { user } = React.useContext(ApplicationUserContext);\n  const { auth } = React.useContext(AuthorizedItemsContext);\n  const [scheduleEvent, setScheduleEvent] = useState(\n    null as ScheduleEvent | null\n  );\n  const [eventEditAuth, setEventEditAuth] = useState(\n    null as EventEditAuthorization | null\n  );\n  const [readCount, setReadCount] = useState(null as number | null);\n  const [usageText, setUsageText] = useState(null as string | null);\n  const [pinned, setPinned] = useState(false);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!message) {\n      return;\n    }\n\n    if (message.scheduleEventId) {\n      scheduleEventAPI\n        .getScheduleEvent(user, message.scheduleEventId)\n        .then((event) => {\n          if (event) {\n            setScheduleEvent(event);\n            const newEventEditAuth = getEventEditAuthorization(\n              event.EventTypeId,\n              event.EventStatusId,\n              event.EmployeeId,\n              event.EventStart,\n              event.EventEnd,\n              event.LocationId,\n              event.DepartmentId,\n              event.PositionId,\n              event.ConfirmedBy !== null &&\n                event.ConfirmedBy !== undefined &&\n                event.ConfirmedBy !== \"\",\n              auth\n            );\n            setEventEditAuth(newEventEditAuth);\n          }\n        });\n    } else {\n      if (scheduleEvent) {\n        setScheduleEvent(null);\n        setUsageText(null);\n      }\n    }\n\n    messageAPI.getReadCount(user, message.messageId).then((newReadCount) => {\n      setReadCount(newReadCount);\n    });\n\n    if (!message.isViewed) {\n      messageAPI.setIsViewed(user, message.messageId, true).then(() => {\n        updateMessages({\n          type: \"UPDATE-VIEWED\",\n          msgId: message.messageId,\n          isViewed: true,\n        });\n      });\n    }\n\n    setPinned(message.isPinned);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [message?.messageId]);\n\n  // --------------------------------------------------------------------------------------\n  const onPinnedClick = () => {\n    const newPinValue = !pinned;\n    messageAPI.setIsPinned(user, message!.messageId, newPinValue).then(() => {\n      setPinned(newPinValue);\n      updateMessages({\n        type: \"UPDATE-PINNED\",\n        msgId: message!.messageId,\n        isPinned: newPinValue,\n      });\n    });\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onDeleteClick = () => {\n    yesCancelDlg.showDialog(\n      \"Delete this message?\",\n      () => {\n        messageAPI.deleteMessage(user, message!.messageId).then(() => {\n          updateMessages({ type: \"DELETE\", msgId: message!.messageId });\n          onCancel(\"Message Deleted\");\n        });\n      },\n      () => {}\n    );\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onCancel = (msg: string | null) => {\n    onCloseModal(msg);\n  };\n\n  if (!message || !auth || !auth.locations || auth.locations.length === 0) {\n    return (\n      <>\n        <div>Loading</div>\n        {dlg.alertBoxJsx}\n      </>\n    );\n  } else {\n    return (\n      <>\n        <IonHeader>\n          <IonToolbar>\n            <IonButtons slot=\"start\">\n              <IonButton\n                onClick={() => {\n                  onCancel(null);\n                }}\n              >\n                <IonIcon icon={arrowBackOutline} mode=\"md\" slot=\"icon-only\" />\n              </IonButton>\n            </IonButtons>\n            <IonButtons slot=\"end\">\n              <IonButton\n                onClick={() => {\n                  onPinnedClick();\n                }}\n              >\n                <IonIcon\n                  icon={bookmark}\n                  style={pinned ? { color: \"black\" } : { color: \"lightgray\" }}\n                />\n              </IonButton>\n              <IonButton\n                onClick={() => {\n                  onDeleteClick();\n                }}\n              >\n                <IonIcon icon={trash} />\n              </IonButton>\n            </IonButtons>\n          </IonToolbar>\n        </IonHeader>\n\n        <IonContent class=\"outer-content\">\n          <IonGrid>\n            <IonRow>\n              <IonCol size=\"12\">\n                {message!.subject}\n                <br />\n                From: {message!.fromEmployeeFirstName}{\" \"}\n                {message!.fromEmployeeLastName}\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol\n                size=\"9\"\n                style={{ paddingLeft: \"15px\", color: \"lightgray\" }}\n              >\n                {getMessageDeliveryTimeString(message!.deliveryDateTime)}\n              </IonCol>\n              <IonCol size=\"3\" style={{ color: \"lightgray\" }}>\n                {readCount !== null && <span>{readCount} Read</span>}\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol size=\"1\" />\n              <IonCol size=\"9\">\n                <div\n                  dangerouslySetInnerHTML={{ __html: message?.messageText }}\n                />\n              </IonCol>\n            </IonRow>\n\n            {usageText !== null && (\n              <IonRow>\n                <IonCol size=\"12\">{usageText}</IonCol>\n              </IonRow>\n            )}\n          </IonGrid>\n\n          {dlg.alertBoxJsx}\n          {yesCancelDlg.dialogJsx}\n        </IonContent>\n\n        <IonFooter className=\"outer-content footer\">\n          {scheduleEvent !== null && (\n            <EventReqeustEditor\n              auth={auth}\n              eventEnd={scheduleEvent.EventEnd}\n              eventType={scheduleEvent.EventTypeId}\n              eventStatus={scheduleEvent.EventStatusId}\n              eventEmployeeId={scheduleEvent.EmployeeId}\n              eventPositionId={scheduleEvent.PositionId}\n              scheduleEventId={scheduleEvent.ScheduleEventId}\n              locationId={scheduleEvent.LocationId}\n              update={() => {}}\n              cancelEditModal={onCancel}\n              eventEditAuth={eventEditAuth}\n              setUsageText={setUsageText}\n            />\n          )}\n          <IonButton\n            className=\"apply-button\"\n            expand=\"block\"\n            onClick={() => {\n              onCancel(null);\n            }}\n            color=\"tertiary\"\n          >\n            BACK\n          </IonButton>\n        </IonFooter>\n      </>\n    );\n  }\n};\n\nexport default ViewMessagetModal;\n","import React, { useState, useEffect, useReducer } from \"react\";\r\nimport {\r\n  IonModal,\r\n  IonHeader,\r\n  IonButton,\r\n  IonIcon,\r\n  IonToolbar,\r\n  IonTitle,\r\n  IonContent,\r\n  IonPage,\r\n  IonButtons,\r\n  IonMenuButton,\r\n} from \"@ionic/react\";\r\nimport \"./MessagesPage.scss\";\r\nimport { funnel, add } from \"ionicons/icons\";\r\nimport useIonicRefresher from \"../hooks/useIonicRefresher\";\r\nimport { Message } from \"../orbital-interfaces/Message\";\r\nimport MessageItem from \"../components/MessagesPageComponents/MessageItem\";\r\nimport MessagesFilterModal, {\r\n  FilterData,\r\n  FilterResult,\r\n} from \"../components/MessagesPageComponents/MessagesFilterModal\";\r\nimport { messageTypes } from \"../orbital-interfaces/MessageTypes\";\r\nimport arrayHelper from \"../util/array-helper\";\r\nimport messageApi from \"../api/MessageAPI\";\r\nimport { ApplicationUserContext } from \"../context/ApplicationUserContext\";\r\nimport { RefresherEventDetail } from \"@ionic/core\";\r\nimport ViewMessagetModal from \"../components/MessagesPageComponents/ViewMessageModal\";\r\nimport useSimpleToast from \"../hooks/useSimpleToast\";\r\nimport { RouteComponentProps } from \"react-router\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\n\r\nconst initialMessages: Message[] = [];\r\n\r\nexport type MessagesReducerAction =\r\n  | { type: \"LOADED-FROM-API\"; data: Message[] }\r\n  | { type: \"CLEAR\" }\r\n  | { type: \"UPDATE-PINNED\"; msgId: number; isPinned: boolean }\r\n  | { type: \"UPDATE-VIEWED\"; msgId: number; isViewed: boolean }\r\n  | { type: \"DELETE\"; msgId: number };\r\n\r\n// ------------------------------------------------------------------------------------------------\r\nexport const messagesReducer = (\r\n  currentState: Message[],\r\n  action: MessagesReducerAction\r\n): Message[] => {\r\n  console.log(\"REDUCER: ACTION =\", action.type);\r\n\r\n  switch (action.type) {\r\n    case \"LOADED-FROM-API\":\r\n      return action.data;\r\n    case \"CLEAR\":\r\n      return [] as Message[];\r\n    case \"UPDATE-PINNED\":\r\n      return currentState.map((m) =>\r\n        m.messageId === action.msgId ? { ...m, isPinned: action.isPinned } : m\r\n      );\r\n    case \"UPDATE-VIEWED\":\r\n      return currentState.map((m) => {\r\n        return m.messageId === action.msgId\r\n          ? { ...m, isViewed: action.isViewed }\r\n          : m;\r\n      });\r\n    case \"DELETE\":\r\n      return currentState.filter((m) => m.messageId !== action.msgId);\r\n  }\r\n};\r\n\r\ninterface MessagesPageProps\r\n  extends RouteComponentProps<{\r\n    messageId?: string;\r\n  }> {}\r\n\r\n// eslint-disable-next-line react/prop-types\r\nconst MessagesPage: React.FC<MessagesPageProps> = ({ match, history }) => {\r\n  const { user } = React.useContext(ApplicationUserContext);\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const doRefresh = (e: CustomEvent<RefresherEventDetail>) => {\r\n    updateMessages({ type: \"CLEAR\" });\r\n    refreshMessages(e);\r\n  };\r\n\r\n  const refresher = useIonicRefresher(doRefresh);\r\n  const [showFilterModal, setShowFilterModal] = useState(false);\r\n  const [isLoadingMessages, setIsLoadingMessages] = useState(true);\r\n  const [messages, updateMessages] = useReducer(messagesReducer, []);\r\n  const [filteredMessages, setFilteredMessages] = useState(initialMessages);\r\n  const [filterData, setFilterData] = useState({} as FilterData);\r\n  const [filterResult, setFilterResult] = useState({} as FilterResult);\r\n  const [viewMessage, setViewMessage] = useState(null as Message | null);\r\n  const toast = useSimpleToast();\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    if (user && user.isLoggedin) {\r\n      return refreshMessages(undefined);\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [user]);\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    filterMessages(filterResult, messages);\r\n\r\n    // eslint-disable-next-line\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    // eslint-disable-next-line react/prop-types\r\n    if (match.params.messageId && viewMessage === null) {\r\n      messageApi\r\n        // eslint-disable-next-line react/prop-types\r\n        .getUserMessage(user, parseInt(match.params.messageId))\r\n        .then((msg) => {\r\n          if (!msg) {\r\n            toast.showToast(\"The requested message has been removed\");\r\n            // eslint-disable-next-line react/prop-types\r\n            history.push(\"/tabs/messages/\");\r\n          }\r\n\r\n          setViewMessage(msg);\r\n        });\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [match.params.messageId]);\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const refreshMessages = (e?: CustomEvent<RefresherEventDetail>) => {\r\n    let isSubscribed = true;\r\n    setIsLoadingMessages(true);\r\n    messageApi.getUserMessages(user).then((msgs) => {\r\n      if (!isSubscribed) {\r\n        return;\r\n      }\r\n\r\n      updateMessages({ type: \"LOADED-FROM-API\", data: msgs });\r\n      filterMessages(filterResult, msgs);\r\n      setIsLoadingMessages(false);\r\n\r\n      if (e) {\r\n        e.detail.complete();\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      isSubscribed = false;\r\n    };\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const filterClose = (updatedFilter: FilterResult) => {\r\n    setFilterResult(updatedFilter);\r\n    filterMessages(updatedFilter, messages);\r\n    setShowFilterModal(false);\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const filterMessages = (f: FilterResult, msgs: Message[]) => {\r\n    if (!f || !f.msgTypeIds) {\r\n      setFilteredMessages(msgs);\r\n      return;\r\n    }\r\n\r\n    if (f.employeeId !== -1) {\r\n      if (f.msgTypeIds.length > 0) {\r\n        setFilteredMessages(\r\n          msgs.filter(\r\n            (m) =>\r\n              m.fromEmployeeId === f.employeeId &&\r\n              arrayHelper.contains(f.msgTypeIds, m.messageTypeId)\r\n          )\r\n        );\r\n      } else {\r\n        setFilteredMessages(\r\n          msgs.filter((m) => m.fromEmployeeId === f.employeeId)\r\n        );\r\n      }\r\n    } else if (f.msgTypeIds.length > 0) {\r\n      console.log(f.msgTypeIds);\r\n      setFilteredMessages(\r\n        msgs.filter((m) => arrayHelper.contains(f.msgTypeIds, m.messageTypeId))\r\n      );\r\n    } else {\r\n      setFilteredMessages(msgs);\r\n    }\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const onCloseMessageModal = (msg: string | null) => {\r\n    setViewMessage(null);\r\n    if (msg) {\r\n      toast.showToast(msg);\r\n    }\r\n  };\r\n\r\n  // ------------------------------------------------------------------------------------\r\n  const showFilter = () => {\r\n    const employees = arrayHelper.uniqueObject(\r\n      messages.map((msg) => {\r\n        return {\r\n          employeeId: msg.fromEmployeeId,\r\n          name: msg.fromEmployeeFirstName + \" \" + msg.fromEmployeeLastName,\r\n        };\r\n      }),\r\n      (x, y) => {\r\n        return x.employeeId === y.employeeId;\r\n      }\r\n    );\r\n    const msgTypes = arrayHelper.uniqueObject(\r\n      messages.map((msg) => {\r\n        return {\r\n          messageTypeId: msg.messageTypeId,\r\n          name: messageTypes.item(String(msg.messageTypeId)).description,\r\n        };\r\n      }),\r\n      (x, y) => {\r\n        return x.messageTypeId === y.messageTypeId;\r\n      }\r\n    );\r\n\r\n    setFilterData({ msgTypes, employees });\r\n\r\n    setShowFilterModal(true);\r\n  };\r\n\r\n  return (\r\n    <IonPage id=\"clock-page\">\r\n      <IonHeader mode=\"ios\">\r\n        <IonToolbar mode=\"md\">\r\n          <IonButtons slot=\"start\">\r\n            <IonMenuButton />\r\n          </IonButtons>\r\n          <IonTitle slot=\"start\">Messages</IonTitle>\r\n          <IonButtons slot=\"end\">\r\n            <IonButton>\r\n              <IonIcon icon={add} mode=\"md\" slot=\"icon-only\" />\r\n            </IonButton>\r\n            <IonButton onClick={showFilter}>\r\n              <IonIcon icon={funnel} mode=\"ios\" slot=\"icon-only\" />\r\n            </IonButton>\r\n          </IonButtons>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonContent className=\"outer-content\">\r\n        {refresher.ionicRefresherJsx}\r\n        {isLoadingMessages && (\r\n          <>\r\n            {[\r\n              1,\r\n              2,\r\n              3,\r\n              4,\r\n              5,\r\n              6,\r\n              7,\r\n              8,\r\n              9,\r\n              10,\r\n              11,\r\n              12,\r\n              13,\r\n              14,\r\n              15,\r\n              16,\r\n              17,\r\n              18,\r\n              19,\r\n              20,\r\n              21,\r\n            ].map((x) => {\r\n              return (\r\n                <div key={x} style={{ margin: \"10px 8px\" }}>\r\n                  <Skeleton width={360} height={45} />\r\n                </div>\r\n              );\r\n            })}\r\n          </>\r\n        )}\r\n        {!isLoadingMessages && filteredMessages.length === 0 && (\r\n          <div>No Messages to show</div>\r\n        )}\r\n        <div className=\"message-list\">\r\n          {!isLoadingMessages &&\r\n            filteredMessages.length > 0 &&\r\n            filteredMessages\r\n              .filter((m) => m.isPinned)\r\n              .map((msg) => (\r\n                <MessageItem\r\n                  key={msg.messageId}\r\n                  message={msg}\r\n                  onMessageClick={() => setViewMessage(msg)}\r\n                />\r\n              ))}\r\n        </div>\r\n        <div\r\n          style={{\r\n            height: \"1px\",\r\n            borderTop: \"1px solid lightgray\",\r\n            width: \"100%\",\r\n          }}\r\n        />\r\n        <div className=\"message-list\">\r\n          {!isLoadingMessages &&\r\n            filteredMessages.length > 0 &&\r\n            filteredMessages\r\n              .filter((m) => !m.isPinned)\r\n              .map((msg) => (\r\n                <MessageItem\r\n                  key={msg.messageId}\r\n                  message={msg}\r\n                  onMessageClick={() => setViewMessage(msg)}\r\n                />\r\n              ))}\r\n        </div>\r\n      </IonContent>\r\n\r\n      <IonModal isOpen={showFilterModal}>\r\n        <MessagesFilterModal\r\n          filterData={filterData}\r\n          onDismissModal={filterClose}\r\n          onCancelModal={() => setShowFilterModal(false)}\r\n        />\r\n      </IonModal>\r\n\r\n      <IonModal isOpen={viewMessage !== null}>\r\n        <ViewMessagetModal\r\n          message={viewMessage}\r\n          updateMessages={updateMessages}\r\n          onCloseModal={onCloseMessageModal}\r\n        />\r\n      </IonModal>\r\n\r\n      {toast.simpleToastJsx}\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default MessagesPage;\r\n","import React from \"react\";\r\nimport {\r\n  IonTabs,\r\n  IonRouterOutlet,\r\n  IonTabBar,\r\n  IonTabButton,\r\n  IonIcon,\r\n  IonLabel,\r\n} from \"@ionic/react\";\r\nimport { Route, Redirect } from \"react-router\";\r\nimport {\r\n  calendarOutline,\r\n  chatbubblesOutline,\r\n  timeOutline,\r\n} from \"ionicons/icons\";\r\nimport SchedulePage from \"./SchedulePage\";\r\nimport ClockPage from \"./ClockPage\";\r\nimport MessagesPage from \"./MessagesPage\";\r\n\r\ninterface MainTabsProps {}\r\n\r\nconst MainTabs: React.FC<MainTabsProps> = () => {\r\n  return (\r\n    <IonTabs>\r\n      <IonRouterOutlet>\r\n        <Redirect exact={true} path=\"/tabs\" to=\"/tabs/schedule\" />\r\n\r\n        {/* KENKEN: TODO: Bring the dashboard back in.\r\n        <Route path=\"/tabs/dashboard\" render={() => <Dashboard />} exact={true} />\r\n        */}\r\n\r\n        <Route\r\n          path=\"/tabs/schedule/:scheduleEventId\"\r\n          render={(routeProps) => <SchedulePage {...routeProps} />}\r\n        />\r\n\r\n        <Route\r\n          path=\"/tabs/schedule\"\r\n          render={(routeProps) => <SchedulePage {...routeProps} />}\r\n          exact={true}\r\n        />\r\n\r\n        <Route\r\n          path=\"/tabs/messages/:messageId\"\r\n          render={(routeProps) => <MessagesPage {...routeProps} />}\r\n        />\r\n\r\n        <Route\r\n          path=\"/tabs/messages\"\r\n          render={(routeProps) => <MessagesPage {...routeProps} />}\r\n          exact={true}\r\n        />\r\n\r\n        <Route path=\"/tabs/clock\" render={() => <ClockPage />} exact={true} />\r\n      </IonRouterOutlet>\r\n      <IonTabBar slot=\"bottom\">\r\n        {/*\r\n        <IonTabButton tab=\"dashboard\" href=\"/tabs/dashboard\">\r\n          <IonIcon src=\"assets/img/OS Symbol - 8pt Rounded Black.svg\" />\r\n          <IonLabel>Dashboard</IonLabel>\r\n        </IonTabButton>\r\n        */}\r\n        <IonTabButton tab=\"schedule\" href=\"/tabs/schedule\">\r\n          <IonIcon icon={calendarOutline} />\r\n          <IonLabel>Schedule</IonLabel>\r\n        </IonTabButton>\r\n        <IonTabButton tab=\"clock\" href=\"/tabs/clock\">\r\n          <IonIcon icon={timeOutline} />\r\n          <IonLabel>Clock</IonLabel>\r\n        </IonTabButton>\r\n        <IonTabButton tab=\"map\" href=\"/tabs/messages\">\r\n          <IonIcon icon={chatbubblesOutline} />\r\n          <IonLabel>Messages</IonLabel>\r\n        </IonTabButton>\r\n      </IonTabBar>\r\n    </IonTabs>\r\n  );\r\n};\r\n\r\nexport default MainTabs;\r\n","import React from \"react\";\r\nimport { Redirect } from \"react-router\";\r\nimport MainTabs from \"./../pages/MainTabs\";\r\nimport { ApplicationUserContext } from \"../context/ApplicationUserContext\";\r\n\r\ninterface StateProps {}\r\n\r\nconst AuthGate: React.FC<StateProps> = () => {\r\n  const { user } = React.useContext(ApplicationUserContext);\r\n\r\n  if (user.loading) {\r\n    return <div>Loading user info</div>;\r\n  }\r\n\r\n  if (user.isLoggedin) {\r\n    return <MainTabs />;\r\n  }\r\n\r\n  return <Redirect to=\"/login\" />;\r\n};\r\n\r\nexport default AuthGate;\r\n","import React from \"react\";\r\nimport { IonContent, IonPage, useIonViewDidEnter } from \"@ionic/react\";\r\nimport { RouteComponentProps } from \"react-router\";\r\nimport { ApplicationUserContext } from \"../context/ApplicationUserContext\";\r\nimport \"./Logout.scss\";\r\nimport { log } from \"../util/logger\";\r\nimport { AuthorizedItemsContext } from \"../context/AuthorizedItemsContext\";\r\n\r\ninterface LogoutProps extends RouteComponentProps {}\r\n\r\nconst Logout: React.FC<LogoutProps> = ({ history }: RouteComponentProps) => {\r\n  const { user, logout } = React.useContext(ApplicationUserContext);\r\n  const { clearAuth } = React.useContext(AuthorizedItemsContext);\r\n\r\n  useIonViewDidEnter(() => {\r\n    log(\"logout\", { user: user.username });\r\n    clearAuth();\r\n    logout().then(() => {\r\n      setTimeout(() => {\r\n        history.push(\"/login\", { direction: \"none\" });\r\n        history.goForward();\r\n      }, 1500);\r\n    });\r\n  });\r\n\r\n  return (\r\n    <IonPage id=\"logout-page\">\r\n      <IonContent className=\"logout-content\">\r\n        <div className=\"login-logo\">\r\n          <img\r\n            className=\"logo\"\r\n            src=\"assets/img/OS Logo - 4pt Rounded _ 2 Tone Orange.svg\"\r\n            alt=\"Orbital Shift Logo\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"label\">You were logged out</div>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Logout;\r\n","import React, { useEffect } from \"react\";\r\nimport { Route, BrowserRouter, Redirect } from \"react-router-dom\";\r\nimport { IonApp, IonRouterOutlet, IonSplitPane } from \"@ionic/react\";\r\nimport { IonReactRouter } from \"@ionic/react-router\";\r\nimport Menu from \"./components/Menu\";\r\nimport { initialize, log } from \"./util/logger\";\r\n\r\n/* Core CSS required for Ionic components to work properly */\r\nimport \"@ionic/react/css/core.css\";\r\n\r\n/* Basic CSS for apps built with Ionic */\r\nimport \"@ionic/react/css/normalize.css\";\r\nimport \"@ionic/react/css/structure.css\";\r\nimport \"@ionic/react/css/typography.css\";\r\n\r\n/* Optional CSS utils that can be commented out */\r\nimport \"@ionic/react/css/padding.css\";\r\nimport \"@ionic/react/css/float-elements.css\";\r\nimport \"@ionic/react/css/text-alignment.css\";\r\nimport \"@ionic/react/css/text-transformation.css\";\r\nimport \"@ionic/react/css/flex-utils.css\";\r\nimport \"@ionic/react/css/display.css\";\r\n\r\n/* Theme variables */\r\nimport \"./theme/variables.css\";\r\nimport Login from \"./pages/Login\";\r\nimport AuthGate from \"./components/AuthGate\";\r\n\r\nimport { ApplicationUserContextProvider } from \"./context/ApplicationUserContext\";\r\nimport Logout from \"./pages/Logout\";\r\nimport { AuthorizedItemsContextProvider } from \"./context/AuthorizedItemsContext\";\r\nimport env from \"./api/environment\";\r\nimport { ScreenOrientation } from \"@ionic-native/screen-orientation\";\r\n\r\nconst MyApp: React.FC = () => {\r\n  useEffect(() => {\r\n    if (env.settings.hasCapacitor) {\r\n      ScreenOrientation.lock(ScreenOrientation.ORIENTATIONS.PORTRAIT).then(\r\n        () => {\r\n          console.log(\"screen locked to portrait\");\r\n        }\r\n      );\r\n    }\r\n\r\n    initialize();\r\n    log(\"app_render\", {\r\n      vers: env.settings.appVersionString,\r\n      platform: env.settings.platform,\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <IonApp>\r\n      <IonReactRouter>\r\n        <IonReactRouter>\r\n          <IonSplitPane contentId=\"main\">\r\n            <Menu />\r\n            <IonRouterOutlet id=\"main\">\r\n              <Route\r\n                path=\"/login\"\r\n                render={(routeProps) => <Login {...routeProps} />}\r\n              />\r\n\r\n              <Route\r\n                path=\"/logout\"\r\n                render={(routeProps) => <Logout {...routeProps} />}\r\n              />\r\n\r\n              <Route\r\n                path=\"/tabs\"\r\n                render={(routeProps) => <AuthGate {...routeProps} />}\r\n              />\r\n\r\n              <Route path=\"/\" exact={true}>\r\n                <Redirect to=\"/tabs/schedule\" />\r\n              </Route>\r\n            </IonRouterOutlet>\r\n          </IonSplitPane>\r\n        </IonReactRouter>\r\n      </IonReactRouter>\r\n    </IonApp>\r\n  );\r\n};\r\n\r\nconst App: React.FC = () => {\r\n  return (\r\n    <BrowserRouter>\r\n      <ApplicationUserContextProvider>\r\n        <AuthorizedItemsContextProvider>\r\n          <MyApp />\r\n        </AuthorizedItemsContextProvider>\r\n      </ApplicationUserContextProvider>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}