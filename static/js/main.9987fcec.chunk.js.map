{"version":3,"sources":["../node_modules/@ionic/core/dist/esm-es5 lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm/legacy lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","data/dbStore.ts","util/logger.ts","util/KeyedCollection.ts","api/environment.ts","enums/DeviceOperatingSystem.ts","api/OrbitalApiHelper.ts","api/PushNotificationsAPI.ts","util/push-notifications-controller.ts","context/ApplicationUserContext.tsx","hooks/useDialogBox.tsx","orbital-interfaces/authorized-items.ts","components/ToggleListEx.tsx","components/NotificationSettingsModal.tsx","components/Menu.tsx","api/UserAPI.ts","context/AuthorizedItemsContext.tsx","pages/Login.tsx","util/time-helper.ts","enums/EventType.ts","api/ScheduleEventsAPI.ts","orbital-interfaces/EventFilter.ts","components/SchedulePageComponents/WeekChooser.tsx","enums/EventStatus.ts","components/EditEvent/EditEventAuthorization.ts","util/authitems-helper.ts","enums/EventGroup.ts","components/SchedulePageComponents/EventCard.tsx","components/SchedulePageComponents/DailyNoteCard.tsx","components/SchedulePageComponents/EventListSection.tsx","components/SchedulePageComponents/EventList.tsx","util/event-helper.ts","util/array-helper.ts","components/SchedulePageComponents/ScheduleFilterModal.tsx","hooks/useIonicRefresher.tsx","enums/RecurrenceType.ts","components/EditEvent/editor/EventTypeStatusEditor.tsx","components/EditEvent/editor/EventPositionEditor.tsx","api/EmployeesAPI.ts","components/EditEvent/editor/EventEmployeeEditor.tsx","components/EditEvent/editor/EventStartEndEditor.tsx","components/EditEvent/editor/AddBreakModal.tsx","components/EditEvent/editor/EventBreakEditor.tsx","components/EditEvent/editor/EventTagEditor.tsx","components/EditEvent/editor/EventConfirmEditor.tsx","components/EditEvent/editor/EventIsClockedInEditor.tsx","components/EditEvent/EditEventModalState.ts","enums/RecurrenceUpdateType.ts","components/EditEvent/editor/EventNotesEditor.tsx","components/EditEvent/editor/EventClockoutValueEditor.tsx","api/RequestsAPI.ts","components/EditEvent/editor/EventRequestModal.tsx","components/EditEvent/editor/EventRequestEditor.tsx","components/EditEvent/editor/WeekdayList.tsx","components/EditEvent/editor/RecurringEventSection.tsx","components/EditEvent/RecurrenceUpdateTypeSelector.tsx","hooks/useOrbitalDialogBox.tsx","components/EditEvent/EditEventModal.tsx","hooks/useSimpleToast.tsx","enums/ClockInRequirement.ts","components/SchedulePageComponents/EventCardSkeleton.tsx","components/SchedulePageComponents/NoEventsToShow.tsx","pages/SchedulePage.tsx","components/ClockPageComponents/BreakSelectorModal.tsx","enums/StartBreakResponseCode.ts","enums/EndBreakResponseCode.ts","api/TimeClockAPI.ts","components/ClockPageComponents/ClockoutModal.tsx","components/ClockPageComponents/SwitchPositionOrTagButton.tsx","components/ClockPageComponents/Map.tsx","components/ClockPageComponents/ClockPanel.tsx","hooks/useInterval.ts","components/ClockPageComponents/PayrollPeriodChooser.tsx","api/PayrollPeriodAPI.ts","components/ClockPageComponents/PayrollOrbitalTimeItem.tsx","components/ClockPageComponents/PayrollDetailModal.tsx","components/ClockPageComponents/PayrollDetailRow.tsx","components/ClockPageComponents/PayrollDetailList.tsx","components/ClockPageComponents/PayrollPeriodsTab.tsx","components/TodayDailyNoteCard.tsx","components/TodayEventCard.tsx","components/TodayEventCardSkeleton.tsx","components/ClockPageComponents/ClockTodayTab.tsx","pages/ClockPage.tsx","components/MessagesPageComponents/MessageItem.tsx","components/MessagesPageComponents/MessagesFilterModal.tsx","orbital-interfaces/MessageTypes.ts","api/MessageAPI.ts","hooks/useYesOrCancelDialogBox.tsx","components/MessagesPageComponents/ViewMessageModal.tsx","pages/MessagesPage.tsx","pages/MainTabs.tsx","components/AuthGate.tsx","pages/Logout.tsx","App.tsx","index.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","getKeyStore","openDB","upgrade","db","createObjectStore","putUserState","state","a","async","put","getUserState","get","getAccessToken","access_token","undefined","putAuthItems","auth","getAuthItems","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","log","eventName","eventParams","firebase","logEvent","KeyedCollection","items","count","key","this","hasOwnProperty","value","val","keySet","prop","push","values","environments","name","url","et","Add","DeviceOperatingSystem","settings","env","versionName","versionCode","revisionHash","appVersionString","hasCapacitor","isPlatform","platform","getApiUrl","user","endpoint","Item","environment","getUserAndEnvironmentFromInput","input","length","username","envKey","toLowerCase","substring","baseUrl","data","options","method","headers","body","JSON","stringify","fetch","response","json","results","appVersion","console","error","contentType","indexOf","dataString","token","operatingSystem","iOS","Android","apiHelper","TokenId","OperatingSystem","typeIds","PushNotifications","Plugins","pushEnabled","showMessage","history","createBrowserHistory","forceRefresh","register","addListener","pushApi","notification","MessageId","title","goForward","messageId","INITIAL_APPLICATION_USER","isLoggedin","darkMode","loading","latitude","longitude","lastLocationUpdate","isPushEnabled","INITIAL_APPLICATION_USER_CONTEXT","logout","userLoggedIn","u","at","startWatchPosition","callback","clearWatchPosition","s","ApplicationUserContext","React","createContext","ApplicationUserContextProvider","props","useState","userState","internalSetUserState","useEffect","mounted","all","newState","PushController","enabled","Provider","currentState","Geolocation","getCurrentPosition","position","coords","msg","message","os","Capacitor","isPluginAvailable","watchId","watchPosition","enableHighAccuracy","maximumAge","requireAltitude","err","positionChanged","reason","google","maps","geometry","spherical","computeDistanceBetween","oldPos","LatLng","newPos","distance","clearWatch","children","useDialogBox","Role","isOpen","setIsOpen","header","onDismiss","alertData","setAlertData","showAlert","alertBoxJsx","onDidDismiss","buttons","ToggleListEx","list","selected","selectionChanged","isItemChecked","i","mode","checked","onClick","slice","onAllChanged","toggle","item","n","includes","newList","newlist","filter","r","itemToggle","NotificationSettingsModal","onDismissModal","useContext","notifications","setNotifications","selectedNotifications","setSelectedNotifications","isSubscribed","responses","slot","icon","arrowRoundBack","class","newSelected","Menu","disableMenu","userName","substr","dlg","showNotificationsModal","setShowNotificationsModal","type","disabled","contentId","className","toUpperCase","auto-hide","button","routerLink","routerDirection","mail","logOut","authenticateUser","password","error_description","loggedIn","getHomePageData","getAuthorizedItems","result","TimeFormat","ClockOutValueType","AdminAuthorization","UnscheduledBreakOptions","BreakType","EmployeeSort","initialHomePageData","locations","tags","payrollEvents","employeeId","role","Employee","currentEvents","nextEvent","dailyNotes","INITIAL_AUTHORIZED_ITEMS","INITIAL_AUTHITEMS_CONTEXT","refreshAuth","force","newUser","clearAuth","authLoading","AuthorizedItemsContext","currentAuth","authFromStore","UserAPI","authFromApi","AuthorizedItemsContextProvider","internalSetAuth","setLoading","newAuth","res","validate","Login","showLoading","setShowLoading","setUsername","setPassword","usernameErrors","passwordErrors","loginEnabled","setLoginEnabled","useIonViewWillEnter","direction","src","alt","spinner","duration","onChange","newUsername","target","color","newPassword","envUser","expand","noEndTime","Date","getDurationFromTimeSpan","timespan","hrs","min","tok","split","hrTok","parseInt","getDurationStringFromTimeSpan","getDateString","date","format","getBreakStartEnd","brk","start","parseISO","BreakStart","replace","BreakEnd","end","getEventBreakStartEndString","getWeekStart","weekStartsOn","dayStart","dayStartMinutes","newDate","setHours","counter","addDays","formatDateTimeAsMvcString","d","getFullYear","padZeroes","getMonth","getDate","getHours","getMinutes","formatDecimal","num","digits","decimals","Number","toFixed","toString","negative","Math","max","digitCount","EventType","getScheduleEvent","scheduleEventId","getScheduleEventsByFilter","filterToSend","getDailyNotesByFilter","updateScheduleEvent","eventValues","recurrenceUpdateType","eventType","eventStatus","isConfirmed","positionId","employee","eventStart","eventEnd","tagId","tag","eventBreaks","isClockedIn","breakStart","breakDuration","clockOutValue","clockoutValue","absentTime","absentTimeMinutes","notes","sendMessage","recurrenceId","recurrenceStart","recurrenceEnd","recurrenceType","repeatInterval","repeatWeekdays","createScheduleEvent","sceduleEventId","deleteScheduleEvent","initialEventFilter","settingsLocId","dnLocIds","filterByEmployee","filterByPosition","positionIds","eventTypeId","eventStatusId","WeekChooser","startDate","setStartDate","arrowBack","displayFormat","pickerFormat","toISOString","onIonChange","detail","arrowDropdown","arrowForward","thisDate","isTodayClass","isToday","EventStatus","EventEditEnum","locationId","loc","foundDepartment","flatMap","l","departments","positions","p","Shift","Cover","Clock","Absent","departmentId","adminAuth","CanEditSchedules","Admin","hasPosition","dept","Approved","Request","RequestDenied","locId","posId","location","locPosId","depPosId","posPosId","EventGroup","getEventEditAuthorization","eventEmployeeId","eventLocationId","eventDepartmentId","eventPositionId","eventConfirmed","selectedPosition","authHelper","eventStatusOptions","getEventStatusOptionsList","eventTypeOptions","getEventTypeOptionsList","retVal","buttonText","enableConfirm","isReadonly","text","usage","None","eventTypeOptionList","eventStatusOptionList","BusinessAdmin","LocationAdmin","endOfEvent","now","afterEnd","isAfter","employeeEvent","CanEditOwnClockEvents","CanEditEmployeeClockEvents","CreateCoverRequest","DeleteShiftRequest","UndoCoverRequest","Delete","CreateShiftRequest","locSettings","ShowUnavailableEventType","Unavailable","ShowVacationEventType","Vacation","ShowAbsentEventType","peTypes","pe","startsWith","concat","isEditingExistingEvent","es","colorMap","1","2","3","4","6","7","statusTimeColor","EventCard","event","multiLocation","showEmployeeName","onEdit","displayNameStyle","display","eventStartDate","EventStart","multiDepartment","posDisplay","AbbreviatedLocationName","AbbreviatedDepartmentName","PositionName","eventTypeBorder","borderLeft","EventTypeId","timeColor","EventStatusId","eventEditAuth","EmployeeId","EventEnd","LocationId","DepartmentId","PositionId","IsConfirmed","onUserClick","style","IsClockedIn","time","ev","getEventInformationStartEnd","EventDuration","FirstName","LastName","Tag","note","noteDate","deptName","DepartmentName","Notes","EventListSection","events","showEmployeeNames","DailyNoteId","ScheduleEventId","getSegmentsForMy","locationSettings","hoursPerDay","segments","weekStart","DayWeekStartsOn","DayStartTime","notesStart","isBefore","weekEnd","minutes","str","floor","getDurationString","h","reduce","prev","cur","EventList","listType","getSegmentsForRequests","ContainsKey","thisDatesNotes","getSegmentsForAll","Keys","seg","showTotalDuration","getEventTypeOptions","unshift","p2l","some","sort","p1","p2","arrayHelper","areEqual","a1","a2","contains","arr","containsAny","arr1","arr2","unique","newArr","uniqueObject","filt","found","ScheduleFilterModal","onCancelModal","myFilter","setMyFilter","showCustomEventTypes","setShowCustomEventTypes","ClockAndSched","eventGroup","setEventGroup","eventTypeList","setEventTypeList","locationIds","setLocationIds","departmentIds","setDepartmentIds","setPositionIds","isDirty","setIsDirty","getDefaultFilter","onEventGroupSelect","f","group","Custom","interface","Scheduled","DontWork","All","multiple","locIds","deptIds","abbr","posIds","pos","selectedPositionIds","defaultFilter","returnedFilter","filterApplied","useIonicRefresher","RecurrenceType","doRefresh","ionRefresherRef","useRef","ionicRefresherJsx","ref","onIonRefresh","pullingText","refreshingSpinner","refreshingText","backgroundColor","EventTypeStatusEditor","editorValues","update","eventTypes","eventStatuses","selectedEventTypeId","setSelectedEventTypeId","eventStatusList","setEventStatusList","selectedEventStatusId","setSelectedEventStatusId","absentHoursPlaceholderText","setAbsentHoursPlaceholderText","setLocSettings","absentTimeString","setAbsentTimeString","absentId","HoursMinutes","hours","TimeFormatDigits","TimeFormatDecimals","getTimeStringFromMinutes","newLocSettings","onAbsentTimeChange","test","round","parseFloat","getMinutesFromTimeString","size","newEventType","newAbsentMinutes","onEventTypeChange","newEventStatus","placeholder","onIonBlur","EventPositionEditor","setSelectedPosition","positionList","setPositionList","selPos","isMultiLoc","isMultiDep","createPositionList","updatePosition","EventEmployeeEditor","employeeList","setEmployeeList","isLoading","setIsLoading","selectedEmployeeId","setSelectedEmployeeId","getEmployees","employeeAPI","employees","empIds","thisEmp","FullName","newSelectedEmployeeId","emp","EventStartEndEditor","minuteValues","newEventStart","newEventEnd","hasOverlap","breaks","startA","endA","startB","addMinutes","endB","AddBreakModal","onCancel","onAdd","currentBreaks","setMinutes","endDate","setEndDate","isRestricted","setIsRestricted","isPaid","setIsPaid","errorMessage","setErrorMessage","isValid","setIsValid","alert","newStart","newStartDate","onStartUpdate","newEnd","newEndDate","onEndUpdate","width","borderBottom","EventBreakEditor","breakList","setBreakList","showBreakModal","setShowBreakModal","marginBottom","add","IsPaidBreak","logoUsd","b","IsRestricted","lock","showRestricted","newBreakList","onDeleteBreak","trash","cssClass","EventTagEditor","selectedTagId","setSelectedTagId","tagList","setTagList","t","tagIds","onUpdateTag","EventConfirmEditor","setIsConfirmed","showConfirmed","setShowConfirmed","isConfirmable","EventIsClockedInEditor","setIsClockedIn","showIsClockedIn","setShowIsClockedIn","paddingRight","marginLeft","RecurrenceUpdateType","getLocationById","getPositionById","getValidStartEnd","startStr","endStr","isEqual","isClockoutValueValid","ClockOutValueLabel","isAllValid","v","validEventStartEnd","validEmployee","validTag","validEventTypeStatus","validClockoutValue","validRecurrenceStartEnd","validRepeatInterval","validRepeatWeekdays","INITIAL_EDITOR_VAUES","isUpdating","valid","absentName","editorValueReducer","action","getIsClockedIn","ConfirmedBy","TagId","EventBreaks","AbsentName","AbsentId","AbsentTimeMinutes","ClockOutValue","EventRecurrenceId","EventRecurrenceStart","EventRecurrenceEnd","RepeatType","RepeatInterval","RepeatWeekdays","newTypeStatusState","newClockoutValueState","newStartState","newEndState","newTagState","newConfirmState","newClockedInState","newRepeatState","repeatWeekDays","Weekly","EventNotesEditor","maxlength","rows","newNote","EventClockoutValueEditor","isVisible","setIsVisible","newValue","businessId","broadCastMessage","coverMessage","toEmployeeId","BusinessId","BroadcastCoverRequestMessage","CoverMessage","DirectToEmployeeId","recUpdateType","RecUpdateType","isDirectCoverList","directCoverList","EventRequestModal","onOk","setNotes","coverList","setCoverList","requestAPI","hidden","EnableDirectCoverRequest","cover","EventRequestEditor","cancelEditModal","setUsageText","showRequestModal","setShowRequestModal","onComplete","reqApi","WeekdayList","checkList","setCheckList","dayOfWeek","getDay","newCheckState","isChecked","onCheckboxChecked","RecurringEventSection","setIsChecked","paddingLeft","height","calendar","textAlign","refresh","MonthlyByDayOfMonth","MonthlyByDayOfWeek","borderTop","RecurrenceUpdateTypeSelector","onSelect","updateType","onButtonClick","choice","titleText","UpdateSingleEvent","UpdateEntireSeries","UpdateSeriesForward","useOrbitalDialogBox","selection","dialogData","setDialogData","showDialog","dialogOptions","dialogBoxJsx","opt","EditEventModal","useReducer","updateEditorValues","scheduleEvent","setScheduleEvent","setRecurrenceUpdateType","showRecurrenceUpdateTypeSelector","setShowRecurrenceUpdateTypeSelector","buttonClicked","setButtonClicked","isEditing","dialog","scheduleEventApi","createOrUpdate","deleteEvent","skipPrompt","goDelete","onRecurrenceUpdateTypeSelect","useSimpleToast","ClockInRequirement","toastData","setToastData","showToast","simpleToastJsx","EventCardSkeleton","threeRows","padding","NoEventsToShow","initialEvents","initialDailyNotes","SchedulePage","match","toast","filterAppliedClass","setFilterAppliedClass","refresher","setRefreshing","getScheduleEvents","segment","startOfDay","myScheduleEvents","setMyScheduleEvents","myDailyNotes","setMyDailyNotes","myHoursPerDay","setMyHoursPerDay","requestScheduleEvents","setRequestScheduleEvents","requestDailyNotes","setRequestDailyNotes","requestHoursPerDay","setRequestHoursPerDay","allScheduleEvents","setAllScheduleEvents","allDailyNotes","setAllDailyNotes","allHoursPerDay","setAllHoursPerDay","setSegment","showFilterModal","setShowFilterModal","refreshing","showEventModal","setShowEventModal","editEventId","setEditEventId","setEventEditAuth","setFilter","newFilter","params","curSegment","actualFilter1","getScheduleEventsByFilterInternal","actualFilter2","actualFilter3","actualFilter4","actualFilter5","actualFilter6","actualFilter7","complete","ScheduleEventsAPI","onEventClick","newEventEditAuth","onSegmentChange","segmentName","hasPositionFound","j","k","initialStatus","getEventNewAuthorization","funnel","marginTop","toastMessage","onEventUpdated","StartBreakResponseCode","EndBreakResponseCode","BreakSelectionModal","tcData","cancelOption","breakType","UnscheduledUnpaid","ClockedInScheduleEvent","ScheduleEventsForClockIn","Both","UnscheduledPaid","Paid","Unpaid","getTimeClockSettings","lat","lng","clockIn","clockOut","clockoutDataModel","TimeClockBreak","switchPositionOrTag","startBreak","clockEvent","shiftEvent","breakStartOptions","clockEventId","shiftEventId","shiftBreakStart","endBreak","getGeoLocations","ClockoutModal","setClockoutValue","autoCorrect","clearInput","SwitchPositionOrTagButton","selectedPosId","onSwitch","setDisabled","hiddenJsx","UserClockedIn","curPosId","curTagId","ClockInWithDifferentTag","EnablePositionChangeForEmployeePosition","Map","mapEle","userCircle","setMessage","geoLocations","setGeoLocations","showMap","setShowMap","calculateNearestLocationMessage","userPos","closestLocation","minDistance","curLoc","locPos","proximity","locationName","miles","EPSILON","current","center","zoom","disableDefaultUI","fullscreenControl","Circle","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","radius","timeclockApi","clockLocations","forEach","markerData","infoWindow","InfoWindow","content","addr","marker","Marker","open","addMarkers","addListenerOnce","classList","setCenter","setMap","arrowRoundDown","arrowRoundUp","ClockPanel","onUpdate","refreshToggle","posList","setPosList","setSelectedPosId","tagSwitchingEnabled","setTagSwitchingEnabled","breakSetting","setBreakSetting","showBreakSelectorModal","setShowBreakSelectorModal","loadingMessage","setLoadingMessage","setToastMessage","setShowToast","show","showAlertData","setShowAlertData","setTCData","showClockoutModal","setShowClockoutModal","setRefresh","watchPositionId","setTimeout","updateTimeClockData","useIonViewWillLeave","ShowTimeClock","plist","uniqueLocationIds","PositionsToClockInto","uniqueDeptIds","PositionNameWithLocAndDeptAbbreviation","PositionNameWithDeptAbbreviation","curLocId","EnableEnhancedBreakManagement","CurrentEventBreak","setTags","delay","savedProps","setInterval","clearInterval","useInterval","timeClockApi","currentPositionId","TagsPerPosition","TagName","clockout","ClockOutResponseCode","ClockOutEvent","Message","newVal","UserMayClockOut","UserMayClockIn","MatchingShift","AllowedToSwitchPositions","AllowedToSwitchTags","ClockInMessage","ClockOutMessage","ClockInResponseCode","ClockInEvent","Success","cafe","BreakSelectorModal","PayrollPeriodChooser","onNextPayPeriod","onPrevPayPeriod","payPeriodDateText","getPayPeriodDateForEmployee","dateStr","getHoursString","locsettings","ActualTime","dayHourTok","ActualHours","getTimeStringFromOrbitalTime","PayrollOrbitalTimeItem","fontColor","displayColor","PayrollDetailModal","onClose","regular","dailyOvertime","weeklyOvertime","special","timePerAbsent","hpa","getAbsentName","ColumnEnum","PayrollDetailRow","payrollRow","colsToDisplay","colSize","showDetailModal","setShowDetailModal","fontSize","border","outline","Regular","DailyOvertime","WeeklyOvertime","Special","absent","PayrollDetailList","payrollData","setColsToDisplay","setColSize","cols","totalDailyOvertime","totalWeeklyOvertime","totalSpecial","totalAbsent","getColumnsToDisplay","x","row","fontWeight","totalRegular","PayrollPeriodsTab","currentDate","setCurrentDate","setPayrollData","getData","PayrollPeriodAPI","TodayNoteCard","authItems","oneLine","dailyNote","getDeptName","TodayEventCard","onClock","onBreak","displayIcon","rangeDisplay","getEventStartEnd","thisLocation","LocationAbbreviation","DepartmentAbbreviation","getPosition","TodayEventCardSkeleton","ClockTodayTab","homePageData","setHomePageData","lines","ClockPage","setRefreshToggle","refreshTimeClockToggle","setRefreshTimeClockToggle","MessageItem","onMessageClick","fontWeightForSubject","isViewed","isPinned","bookmark","subject","differenceInDays","isSameYear","messageDateString","deliveryDateTime","previewLine","MessagesFilterModal","filterData","msgTypeIds","msgTypes","mt","messageTypeId","filterResult","setFilterResult","description","newSelection","messageTypes","typeName","msgId","useYesOrCancelDialogBox","onYes","dialogJsx","handler","ViewMessagetModal","onCloseModal","updateMessages","yesCancelDlg","readCount","setReadCount","usageText","pinned","setPinned","scheduleEventAPI","messageAPI","newReadCount","newPinValue","onPinnedClick","fromEmployeeFirstName","fromEmployeeLastName","dangerouslySetInnerHTML","__html","messageText","initialMessages","messagesReducer","m","MessagesPage","refreshMessages","isLoadingMessages","setIsLoadingMessages","messages","filteredMessages","setFilteredMessages","setFilterData","viewMessage","setViewMessage","filterMessages","messageApi","msgs","fromEmployeeId","y","String","margin","updatedFilter","MainTabs","exact","path","to","render","routeProps","tab","href","clock","chatboxes","AuthGate","Logout","useIonViewDidEnter","MyApp","ScreenOrientation","ORIENTATIONS","PORTRAIT","vers","App","ReactDOM","document","getElementById"],"mappings":"6JAAA,IAAIA,EAAM,CACT,2CAA4C,CAC3C,IACA,IAED,kCAAmC,CAClC,IACA,IAED,iCAAkC,CACjC,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,iCAAkC,CACjC,IACA,IAED,gCAAiC,CAChC,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,gCAAiC,CAChC,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,qBAAsB,CACrB,IACA,IAED,uCAAwC,CACvC,IACA,IAED,sCAAuC,CACtC,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,mCAAoC,CACnC,IACA,IAED,kCAAmC,CAClC,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,kCAAmC,CAClC,IACA,IAED,iCAAkC,CACjC,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,iCAAkC,CACjC,IACA,IAED,gCAAi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","file":"static/js/main.9987fcec.chunk.js","sourcesContent":["var map = {\n\t\"./ion-action-sheet-controller_8.entry.js\": [\n\t\t202,\n\t\t43\n\t],\n\t\"./ion-action-sheet-ios.entry.js\": [\n\t\t203,\n\t\t44\n\t],\n\t\"./ion-action-sheet-md.entry.js\": [\n\t\t204,\n\t\t45\n\t],\n\t\"./ion-alert-ios.entry.js\": [\n\t\t205,\n\t\t24\n\t],\n\t\"./ion-alert-md.entry.js\": [\n\t\t206,\n\t\t25\n\t],\n\t\"./ion-app_8-ios.entry.js\": [\n\t\t207,\n\t\t11\n\t],\n\t\"./ion-app_8-md.entry.js\": [\n\t\t208,\n\t\t12\n\t],\n\t\"./ion-avatar_3-ios.entry.js\": [\n\t\t209,\n\t\t46\n\t],\n\t\"./ion-avatar_3-md.entry.js\": [\n\t\t210,\n\t\t47\n\t],\n\t\"./ion-back-button-ios.entry.js\": [\n\t\t211,\n\t\t48\n\t],\n\t\"./ion-back-button-md.entry.js\": [\n\t\t212,\n\t\t49\n\t],\n\t\"./ion-backdrop-ios.entry.js\": [\n\t\t213,\n\t\t81\n\t],\n\t\"./ion-backdrop-md.entry.js\": [\n\t\t214,\n\t\t82\n\t],\n\t\"./ion-button_2-ios.entry.js\": [\n\t\t215,\n\t\t50\n\t],\n\t\"./ion-button_2-md.entry.js\": [\n\t\t216,\n\t\t51\n\t],\n\t\"./ion-card_5-ios.entry.js\": [\n\t\t217,\n\t\t52\n\t],\n\t\"./ion-card_5-md.entry.js\": [\n\t\t218,\n\t\t53\n\t],\n\t\"./ion-checkbox-ios.entry.js\": [\n\t\t219,\n\t\t54\n\t],\n\t\"./ion-checkbox-md.entry.js\": [\n\t\t220,\n\t\t55\n\t],\n\t\"./ion-chip-ios.entry.js\": [\n\t\t221,\n\t\t56\n\t],\n\t\"./ion-chip-md.entry.js\": [\n\t\t222,\n\t\t57\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t223,\n\t\t83\n\t],\n\t\"./ion-datetime_3-ios.entry.js\": [\n\t\t224,\n\t\t20\n\t],\n\t\"./ion-datetime_3-md.entry.js\": [\n\t\t225,\n\t\t21\n\t],\n\t\"./ion-fab_3-ios.entry.js\": [\n\t\t226,\n\t\t58\n\t],\n\t\"./ion-fab_3-md.entry.js\": [\n\t\t227,\n\t\t59\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t228,\n\t\t84\n\t],\n\t\"./ion-infinite-scroll_2-ios.entry.js\": [\n\t\t229,\n\t\t39\n\t],\n\t\"./ion-infinite-scroll_2-md.entry.js\": [\n\t\t230,\n\t\t40\n\t],\n\t\"./ion-input-ios.entry.js\": [\n\t\t231,\n\t\t60\n\t],\n\t\"./ion-input-md.entry.js\": [\n\t\t232,\n\t\t61\n\t],\n\t\"./ion-item-option_3-ios.entry.js\": [\n\t\t233,\n\t\t62\n\t],\n\t\"./ion-item-option_3-md.entry.js\": [\n\t\t234,\n\t\t63\n\t],\n\t\"./ion-item_8-ios.entry.js\": [\n\t\t235,\n\t\t64\n\t],\n\t\"./ion-item_8-md.entry.js\": [\n\t\t236,\n\t\t65\n\t],\n\t\"./ion-loading-ios.entry.js\": [\n\t\t237,\n\t\t26\n\t],\n\t\"./ion-loading-md.entry.js\": [\n\t\t238,\n\t\t27\n\t],\n\t\"./ion-menu_4-ios.entry.js\": [\n\t\t239,\n\t\t18\n\t],\n\t\"./ion-menu_4-md.entry.js\": [\n\t\t240,\n\t\t19\n\t],\n\t\"./ion-modal-ios.entry.js\": [\n\t\t241,\n\t\t14\n\t],\n\t\"./ion-modal-md.entry.js\": [\n\t\t242,\n\t\t15\n\t],\n\t\"./ion-nav_5.entry.js\": [\n\t\t243,\n\t\t13\n\t],\n\t\"./ion-popover-ios.entry.js\": [\n\t\t244,\n\t\t16\n\t],\n\t\"./ion-popover-md.entry.js\": [\n\t\t245,\n\t\t17\n\t],\n\t\"./ion-progress-bar-ios.entry.js\": [\n\t\t246,\n\t\t66\n\t],\n\t\"./ion-progress-bar-md.entry.js\": [\n\t\t247,\n\t\t67\n\t],\n\t\"./ion-radio_2-ios.entry.js\": [\n\t\t248,\n\t\t32\n\t],\n\t\"./ion-radio_2-md.entry.js\": [\n\t\t249,\n\t\t33\n\t],\n\t\"./ion-range-ios.entry.js\": [\n\t\t250,\n\t\t68\n\t],\n\t\"./ion-range-md.entry.js\": [\n\t\t251,\n\t\t69\n\t],\n\t\"./ion-refresher_2-ios.entry.js\": [\n\t\t252,\n\t\t41\n\t],\n\t\"./ion-refresher_2-md.entry.js\": [\n\t\t253,\n\t\t42\n\t],\n\t\"./ion-reorder_2-ios.entry.js\": [\n\t\t254,\n\t\t37\n\t],\n\t\"./ion-reorder_2-md.entry.js\": [\n\t\t255,\n\t\t38\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t256,\n\t\t85\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t257,\n\t\t70\n\t],\n\t\"./ion-searchbar-ios.entry.js\": [\n\t\t258,\n\t\t28\n\t],\n\t\"./ion-searchbar-md.entry.js\": [\n\t\t259,\n\t\t29\n\t],\n\t\"./ion-segment_2-ios.entry.js\": [\n\t\t260,\n\t\t71\n\t],\n\t\"./ion-segment_2-md.entry.js\": [\n\t\t261,\n\t\t72\n\t],\n\t\"./ion-select_3-ios.entry.js\": [\n\t\t262,\n\t\t34\n\t],\n\t\"./ion-select_3-md.entry.js\": [\n\t\t263,\n\t\t35\n\t],\n\t\"./ion-slide_2-ios.entry.js\": [\n\t\t264,\n\t\t86\n\t],\n\t\"./ion-slide_2-md.entry.js\": [\n\t\t265,\n\t\t87\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t266,\n\t\t73\n\t],\n\t\"./ion-split-pane-ios.entry.js\": [\n\t\t267,\n\t\t88\n\t],\n\t\"./ion-split-pane-md.entry.js\": [\n\t\t268,\n\t\t89\n\t],\n\t\"./ion-tab-bar_2-ios.entry.js\": [\n\t\t269,\n\t\t74\n\t],\n\t\"./ion-tab-bar_2-md.entry.js\": [\n\t\t270,\n\t\t75\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t271,\n\t\t36\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t272,\n\t\t76\n\t],\n\t\"./ion-textarea-ios.entry.js\": [\n\t\t273,\n\t\t77\n\t],\n\t\"./ion-textarea-md.entry.js\": [\n\t\t274,\n\t\t78\n\t],\n\t\"./ion-toast-ios.entry.js\": [\n\t\t275,\n\t\t30\n\t],\n\t\"./ion-toast-md.entry.js\": [\n\t\t276,\n\t\t31\n\t],\n\t\"./ion-toggle-ios.entry.js\": [\n\t\t277,\n\t\t22\n\t],\n\t\"./ion-toggle-md.entry.js\": [\n\t\t278,\n\t\t23\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t279,\n\t\t90\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 148;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t283,\n\t\t98\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 149;\nmodule.exports = webpackAsyncContext;","import { ApplicationUser } from '../context/ApplicationUserContext';\nimport { AuthorizedItems } from './../orbital-interfaces/authorized-items';\nimport { openDB, DBSchema, IDBPDatabase } from 'idb';\n\nconst DB_NAME = \"osKeyStore\";\nconst DB_VERSION = 1;\n\ninterface OSKeyStore extends DBSchema {\n  userStore: {\n    key: \"user\";\n    value: ApplicationUser;\n  },\n  authItems:  {\n    key: \"authItems\";\n    value: AuthorizedItems;\n  }\n};\n\n// ----------------------------------------------------------------------------------------------------------\nconst getKeyStore = (): Promise<IDBPDatabase<OSKeyStore>> => {\n  return  openDB<OSKeyStore>(DB_NAME, DB_VERSION, {\n    upgrade(db) {\n      db.createObjectStore(\"userStore\");\n      db.createObjectStore(\"authItems\");\n    }\n  });\n};\n\n// ----------------------------------------------------------------------------------------------------------\nconst putUserState = async (state: ApplicationUser) => {\n  const db = await getKeyStore();\n  await db.put(\"userStore\", state, \"user\");\n}\n\n// ----------------------------------------------------------------------------------------------------------\nconst getUserState = async (): Promise<ApplicationUser | undefined> => {\n  const db = await getKeyStore();\n  return await db.get(\"userStore\", \"user\");\n};\n\n// ----------------------------------------------------------------------------------------------------------\nconst getAccessToken = async (): Promise<string | undefined> => {\n  const db = await getKeyStore();\n  return await db.get(\"userStore\", \"user\").then(state => {\n    return (state) ? state.access_token : undefined;\n  });\n};\n\n// ----------------------------------------------------------------------------------------------------------\nconst putAuthItems = async (auth: AuthorizedItems) => {\n  const db = await getKeyStore();\n  await db.put(\"authItems\", auth, \"authItems\");\n}\n\nconst getAuthItems = async () => {\n  const db = await getKeyStore();\n  return db.get(\"authItems\", \"authItems\");\n}\n\nexport default {\n  getKeyStore,\n  putUserState,\n  getUserState,\n  getAccessToken,\n  putAuthItems,\n  getAuthItems\n}\n","import * as firebase from 'firebase/app';\nimport 'firebase/analytics';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAS526InuG-53VGKi5SA780Mh0YwHkhMDE\",\n  authDomain: \"orbital-shift-team-dashboard.firebaseapp.com\",\n  databaseURL: \"https://orbital-shift-team-dashboard.firebaseio.com\",\n  projectId: \"orbital-shift-team-dashboard\",\n  storageBucket: \"orbital-shift-team-dashboard.appspot.com\",\n  messagingSenderId: \"475985033328\",\n  appId: \"1:475985033328:web:77740655a89e28de035cb5\",\n  measurementId: \"G-TGE8788D28\"\n};\n\n// ------------------------------------------------------------------------------------------------\nexport function initialize() {\n  console.log(\"firebase initialized\");\n  firebase.initializeApp(firebaseConfig);\n}\n\n// ------------------------------------------------------------------------------------------------\nexport function log(eventName: string, eventParams?: any) {\n  firebase.analytics().logEvent(eventName, eventParams);\n}\n","\nexport interface IKeyedCollection<T> {\n  Add(key: string, value: T): void;\n  ContainsKey(key: string): boolean;\n  Count(): number;\n  Item(key: string): T;\n  Keys(): string[];\n  Remove(key: string): T;\n  Values(): T[];\n}\n\nexport class KeyedCollection<T> implements IKeyedCollection<T> {\n  private items: { [index: string]: T } = {};\n\n  private count: number = 0;\n\n  public ContainsKey(key: string): boolean {\n      return this.items.hasOwnProperty(key);\n  }\n\n  public Count(): number {\n      return this.count;\n  }\n\n  public Add(key: string, value: T) {\n      if(!this.items.hasOwnProperty(key))\n           this.count++;\n\n      this.items[key] = value;\n  }\n\n  public Remove(key: string): T {\n      var val = this.items[key];\n      delete this.items[key];\n      this.count--;\n      return val;\n  }\n\n  public Item(key: string): T {\n      return this.items[key];\n  }\n\n  public Keys(): string[] {\n      var keySet: string[] = [];\n\n      for (var prop in this.items) {\n          if (this.items.hasOwnProperty(prop)) {\n              keySet.push(prop);\n          }\n      }\n\n      return keySet;\n  }\n\n  public Values(): T[] {\n      var values: T[] = [];\n\n      for (var prop in this.items) {\n          if (this.items.hasOwnProperty(prop)) {\n              values.push(this.items[prop]);\n          }\n      }\n\n      return values;\n  }\n}\n\n","import { KeyedCollection } from '../util/KeyedCollection';\r\nimport { ApplicationUser } from '../context/ApplicationUserContext';\r\nimport { isPlatform }  from '@ionic/react';\r\n\r\nexport interface EnvironmentType {\r\n  key: string;\r\n  name: string;\r\n  url: string\r\n}\r\n\r\nconst envTypes: EnvironmentType[] = [\r\n  { key: 'prod', name: 'Production',  url: 'https://api.orbitalshift.com/' },\r\n  { key: 'sbx',  name: 'Sandbox',     url: 'https://sandboxapi.orbitalshift.com/'},\r\n  { key: 'loc',  name: 'Local',       url: 'http://localhost:54825/'},\r\n  { key: 'emu',  name: 'Local (Emu)', url: 'http://10.0.2.2:54825/'},\r\n  { key: 'tst',  name: 'TestServer',  url: 'http://TestServer:8000/'}\r\n];\r\n\r\nconst environments = new KeyedCollection<EnvironmentType>();\r\nenvTypes.map(et => environments.Add(et.key, et));\r\n\r\n// ------------------------------------------------------------------------------------------------\r\n// NOTE: versionName, versionCode, and revisionHash should be set to _REPLACE_XXXXX_XXX_ strings that\r\n//       get replaced when 'build' is run from the command line.\r\n//       See OSROOT/_buildenv/BuildModule/CommandLineFunctions.psm1\r\nconst settings = {\r\n  env: environments,\r\n  versionName: '2.0.0',\r\n  versionCode: '6097',\r\n  revisionHash: '8ece0a0',\r\n  appVersionString: `2.0.0.6097 (8ece0a0)`,\r\n  hasCapacitor: isPlatform('capacitor'),\r\n  platform: isPlatform('ios') ? 'ios' : isPlatform('android') ? 'android' : 'other'\r\n};\r\n\r\n// ------------------------------------------------------------------------------------------------\r\nconst getApiUrl = (user: ApplicationUser, endpoint: string): string => {\r\n  return settings.env.Item(user.environment).url + endpoint;\r\n};\r\n\r\n// ------------------------------------------------------------------------------------------------\r\nconst getUserAndEnvironmentFromInput = (input: string) : {username: string, env: EnvironmentType} => {\r\n  if (input.length < 4) {\r\n    return {username: input, env: settings.env.Item('prod')};\r\n  }\r\n\r\n  const envKey = input.toLowerCase().substring(0, 4);\r\n  const username = input.substring(4);\r\n  switch (envKey) {\r\n    case 'sbx ':\r\n      return {username, env: settings.env.Item('sbx')};\r\n    case 'loc ':\r\n      return {username, env: settings.env.Item('loc')};\r\n    case 'emu ':\r\n      return {username, env: settings.env.Item('emu')};\r\n    case 'tst ':\r\n      return {username, env: settings.env.Item('tst')};\r\n    default:\r\n      return {username: input, env: settings.env.Item('prod')};\r\n  }\r\n};\r\n\r\nexport default {\r\n  settings,\r\n  getApiUrl,\r\n  getUserAndEnvironmentFromInput\r\n}\r\n","export enum DeviceOperatingSystem\n{\n  iOS = 1,\n  Android = 2\n}\n","import { ApplicationUser } from '../context/ApplicationUserContext';\nimport env from './environment';\nimport { log } from '../util/logger';\n\n// ----------------------------------------------------------------------------------------------\nconst post = async(user: ApplicationUser, baseUrl: string, data?: any) => {\n  const url = env.getApiUrl(user, baseUrl);\n\n  try {\n    const response = await fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${user.access_token}`,\n        'AppVersion': env.settings.appVersionString\n      }\n    });\n\n    const contentType = response.headers.get(\"content-type\");\n    if (contentType && contentType.indexOf(\"application/json\") !== -1) {\n      const results = await response.json();\n      log('api_succeeded', { method: 'POST', baseUrl, username: user.username });\n      return results;\n    }\n\n    log('api_succeeded', { method: 'POST', baseUrl, username: user.username });\n  } catch (err) {\n    log('api_err', { method: 'POST', baseUrl, username: user?.username, ...data, appVersion: env.settings.appVersionString});\n    console.error('Error calling post against url, ' + baseUrl + ': ' + err);\n    throw err;\n  }\n};\n\n// ----------------------------------------------------------------------------------------------\nconst putData = async (user: ApplicationUser, baseUrl: string, data: any) => {\n  const url =  env.getApiUrl(user, baseUrl);\n\n  try {\n    console.log(\"BING\");\n    console.log(JSON.stringify(data));\n    console.log(\"BONG\");\n    const dataString = JSON.stringify(data);\n    console.log(\"GONG\");\n\n    const response = await fetch(url, {\n      method: 'PUT',\n      body: dataString,\n      headers: {\n      'Content-Type': 'application/json',\n        'Authorization': `Bearer ${user.access_token}`,\n        'AppVersion': env.settings.appVersionString\n      }\n    });\n\n    const results = await response.json();\n    log('api_succeeded', { method: 'PUT', baseUrl, username: user.username });\n    return results;\n  } catch (err) {\n    log('api_err', { method: 'PUT', baseUrl, username: user?.username, ...data, appVersion: env.settings.appVersionString})\n    console.error('Error calling putData against url, ' + baseUrl + ': ' + err);\n    throw err;\n  }\n};\n\n\n// ----------------------------------------------------------------------------------------------\nconst get = async (user: ApplicationUser, baseUrl: string, data?: any) => {\n  const url =  env.getApiUrl(user, baseUrl);\n\n  try {\n    let options = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${user.access_token}`,\n        'AppVersion': env.settings.appVersionString,\n\n      },\n      body: null as null | string\n    };\n\n    if (data) {\n      options.body = JSON.stringify(data);\n    }\n\n    const response = await fetch(url, options);\n    const results = await response.json();\n    log('api_succeeded', { method: 'GET', baseUrl, username: user.username });\n    return results;\n  } catch (err) {\n    log('api_err', { method: 'GET', baseUrl, username: user?.username, appVersion: env.settings.appVersionString})\n    console.error('Error calling get against url, ' + baseUrl + ': ' + err);\n    throw err;\n  }\n};\n\n// ----------------------------------------------------------------------------------------------\nconst put = async (user: ApplicationUser, baseUrl: string, data?: any) => {\n  const url =  env.getApiUrl(user, baseUrl);\n  let options = {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${user.access_token}`,\n      'AppVersion': env.settings.appVersionString\n    },\n  } as any;\n\n  if (data) {\n    options.body = JSON.stringify(data!);\n  }\n\n  try {\n    const response = await fetch(url, options);\n    const contentType = response.headers.get(\"content-type\");\n    if (contentType && contentType.indexOf(\"application/json\") !== -1) {\n      const results = await response.json();\n      log('api_succeeded', { method: 'PUT', baseUrl, username: user.username });\n      return results;\n    }\n\n    log('api_succeeded', { method: 'PUT', baseUrl, username: user.username });\n  } catch (err) {\n    log('api_err', { method: 'PUT', baseUrl, username: user?.username, ...data, appVersion: env.settings.appVersionString})\n    console.error('Error calling put against url, ' + baseUrl + ': ' + err);\n    throw err;\n  }\n};\n\n// ----------------------------------------------------------------------------------------------\nconst del = async (user: ApplicationUser, baseUrl: string, data?: any) => {\n  const url =  env.getApiUrl(user, baseUrl);\n  let options = {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${user.access_token}`,\n      'AppVersion': env.settings.appVersionString\n    },\n  } as any;\n\n  if (data) {\n    options.body = JSON.stringify(data!);\n  }\n\n  try {\n    const response = await fetch(url, options);\n    const contentType = response.headers.get(\"content-type\");\n    if (contentType && contentType.indexOf(\"application/json\") !== -1) {\n      log('api_succeeded', { method: 'DELETE', baseUrl, username: user.username });\n      return await response.json();\n    }\n\n    log('api_succeeded', { method: 'DELETE', baseUrl, username: user.username });\n    return;\n  } catch (err) {\n    log('api_err', { method: 'DELETE', baseUrl, username: user?.username, ...data, appVersion: env.settings.appVersionString})\n    console.error('Error calling delete against url, ' + baseUrl + ': ' + err);\n    throw err;\n  }\n};\n\nexport default {\n  get,\n  post,\n  put,\n  putData,\n  del\n}\n","import {ApplicationUser} from '../context/ApplicationUserContext';\nimport apiHelper from './OrbitalApiHelper';\nimport {DeviceOperatingSystem} from \"../enums/DeviceOperatingSystem\";\nimport {NotificationTypeModel} from \"../orbital-interfaces/NotificationTypeModel\";\nimport env from './environment';\nimport {log} from '../util/logger';\n\n// ----------------------------------------------------------------------------------------------\nconst subscribe = async(user: ApplicationUser, token: string) => {\n  const url = `api/v1/employee/notifications/subscribe`;\n  const operatingSystem = (env.settings.platform === 'ios')\n    ? DeviceOperatingSystem.iOS\n    : DeviceOperatingSystem.Android;\n\n  log('pushNotifications_subscribeCalled', { token, operatingSystem, username: user.username, access_token: user.access_token });\n\n  return await apiHelper.putData(user, url, { TokenId: token, OperatingSystem: operatingSystem });\n};\n\n// ----------------------------------------------------------------------------------------------\nconst unsubscribe = async(user: ApplicationUser, token: string) => {\n  const url = `api/v1/employee/notifications/unsubscribe`;\n  const operatingSystem = (env.settings.platform === 'ios')\n    ? DeviceOperatingSystem.iOS\n    : DeviceOperatingSystem.Android;\n\n  return await apiHelper.putData(user, url, { TokenId: token, OperatingSystem: operatingSystem});\n};\n\n// ----------------------------------------------------------------------------------------------\nconst getTypesSelectedByUser = async(user: ApplicationUser) => {\n  const url = `api/v1/employee/notifications/types`;\n  return await apiHelper.get(user, url) as NotificationTypeModel[];\n};\n\n// ----------------------------------------------------------------------------------------------\nconst putTypes = async(user: ApplicationUser, typeIds: number[]) => {\n  const url = `api/v1/employee/notifications/types`;\n  const data = {\n    ids: typeIds\n  };\n\n  return await apiHelper.put(user, url, data) as void;\n};\n\n// ----------------------------------------------------------------------------------------------\nconst listTypes = async(user: ApplicationUser) => {\n  const url = `api/v1/employee/notifications/list-types`;\n\n  // NOTE: the API no longer really uses passed-in data since the\n  // \"Communications rewrite\"\n\n  return await apiHelper.get(user, url) as NotificationTypeModel[];\n};\n\nexport default {\n  subscribe,\n  unsubscribe,\n  getTypesSelectedByUser,\n  putTypes,\n  listTypes\n}\n","import { Plugins, PushNotification, PushNotificationToken, PushNotificationActionPerformed } from '@capacitor/core';\nimport { log } from './logger';\nimport env from '../api/environment';\nimport pushApi from '../api/PushNotificationsAPI';\nimport {ApplicationUser} from \"../context/ApplicationUserContext\";\nimport { createBrowserHistory } from 'history';\n\nconst { PushNotifications } = Plugins;\n\n// ---------------------------------------------------------------------------------------------------------\nconst register = (\n  user: ApplicationUser,\n  pushEnabled: (enabled: boolean) => void,\n  showMessage: (msg: string) => void) => {\n  const history = createBrowserHistory({ forceRefresh: true});\n\n  PushNotifications.register().then(() => {\n    console.log(\"PushNotificationController: register called and returned\");\n  });\n\n  // On succcess, we should be able to receive notifications\n  PushNotifications.addListener('registration',\n    (token: PushNotificationToken) => {\n\n      pushApi.subscribe(user, token.value);\n      pushEnabled(true);\n      showMessage('Push registration success, token: ' + token.value);\n      log('pushNotifications_registered', { token: token.value, platform: env.settings.platform });\n    }\n  );\n\n  // Some issue with your setup and push will not work\n  PushNotifications.addListener('registrationError',\n    (error: any) => {\n      showMessage('Error on registration: ' + JSON.stringify(error));\n      log('pushNotifications_registrationError', { error, platform: env.settings.platform });\n    }\n  );\n\n  // Show us the notification payload if the app is open on our device\n  PushNotifications.addListener('pushNotificationReceived',\n    (notification: PushNotification) => {\n      if (notification) {\n        if (notification.data && notification.data.MessageId) {\n          showMessage(\"NOTIFICATION: \" + notification.title + \": \" + notification.body + \" id:\" + notification.data.MessageId);\n          history.push('/tabs/messages/' + notification.data.MessageId);\n          history.goForward();\n        } else {\n          showMessage(\"NOTIFICATION: \" + notification.title + \": \" + notification.body + \" (no id)\");\n        }\n\n        log('pushNotifications_receivedWhenOpen', {\n          title: notification.title,\n          body: notification.body,\n          messageId: (notification.data.MessageId) ?? -123\n        });\n\n      }\n\n      /*\n      let notif = this.state.notifications;\n      notif.push({ id: notification.id, title: notification.title, body: notification.body })\n      this.setState({\n        notifications: notif\n      })\n      */\n    }\n  );\n\n  // Method called when tapping on a notification\n  PushNotifications.addListener('pushNotificationActionPerformed',\n    (notification: PushNotificationActionPerformed) => {\n      if (notification.notification.data && notification.notification.data.MessageId) {\n        showMessage(\"TAPPED ON NOTIFICATION: \" + notification.notification.title + \": \" + notification.notification.body + \" id:\" + notification.notification.data.MessageId);\n        history.push('/tabs/messages/' + notification.notification.data.MessageId);\n        history.goForward();\n      } else {\n        showMessage(\"TAPPED ON NOTIFICATION: \" + notification.notification.title + \": \" + notification.notification.body + \" (no id)\");\n      }\n\n      log('pushNotifications_actionPerformed', {\n        title: notification.notification.title,\n        body: notification.notification.body,\n        messageId: (notification.notification.data.MessageId) ?? -123\n      });\n\n      /*\n      let notif = this.state.notifications;\n      notif.push({ id: notification.notification.data.id, title: notification.notification.data.title, body: notification.notification.data.body })\n      this.setState({\n        notifications: notif\n      })\n      */\n    }\n  );\n};\n\nexport default {\n  register\n}\n","import React, { useState, useEffect } from \"react\";\nimport db from '../data/dbStore';\n// import {Geolocation} from '@ionic-native/geolocation';\nimport {Capacitor, Geolocation} from '@capacitor/core';\nimport {log} from '../util/logger';\n\nimport PushController from '../util/push-notifications-controller';\nimport env from '../api/environment';\n\nexport interface ApplicationUser {\n  isLoggedin: boolean;\n  access_token?: string;\n  username?: string;\n  darkMode: boolean;\n  loading: boolean;\n  latitude?: number;\n  longitude?: number;\n  lastLocationUpdate?: Date;\n  environment: string;\n  isPushEnabled: boolean;\n}\n\nexport interface IApplicationUserContext {\n  user: ApplicationUser;\n  logout: () => Promise<void>;\n  userLoggedIn: (username: string, access_token: string, environment: string) => Promise<ApplicationUser>;\n  startWatchPosition: (callback: (lat: number, long: number) => void) => string;\n  clearWatchPosition: (watchId: string) => void;\n  pushEnabled: (enabled: boolean) => void;\n}\n\nconst INITIAL_APPLICATION_USER: ApplicationUser = {\n  isLoggedin: false,\n  access_token: undefined,\n  username: '',\n  darkMode: false,\n  loading: true,\n  latitude: undefined,\n  longitude: undefined,\n  lastLocationUpdate: undefined,\n  environment: 'prod',\n  isPushEnabled: false\n};\n\nconst INITIAL_APPLICATION_USER_CONTEXT = {\n  user: INITIAL_APPLICATION_USER,\n  logout: async () => {},\n  userLoggedIn: (u: string, at: string, e: string) => { return new Promise<ApplicationUser>(() => { return INITIAL_APPLICATION_USER})},\n  startWatchPosition: (callback: (lat: number, lng: number) => void) => {return ''},\n  clearWatchPosition: (s: string) => {},\n  pushEnabled: (e: boolean) => {}\n};\n\nexport const ApplicationUserContext = React.createContext<IApplicationUserContext>(INITIAL_APPLICATION_USER_CONTEXT);\n\nexport const ApplicationUserContextProvider = (props: any) => {\n  const [userState, internalSetUserState] = useState({...INITIAL_APPLICATION_USER});\n\n  // ----------------------------------------------------------------------------------------------\n  function startWatchPosition(callback: (lat: number, lng: number) => void): string {\n    if (!Capacitor.isPluginAvailable('Geolocation')) {\n      console.log(\"ApplicationUserContext.startWatchPosition: Geolocation unavailable\");\n      return '';\n    }\n\n    const watchId = Geolocation.watchPosition(\n      {\n        enableHighAccuracy: true,\n        maximumAge: 1000,\n        requireAltitude: false\n      }, (position, err) => {\n        if (!position || !position.coords) {\n          return;\n        }\n\n        let reason = \"unknown\";\n        let positionChanged: boolean;\n        if (google &&\n            google.maps &&\n            google.maps.geometry &&\n            google.maps.geometry.spherical &&\n            google.maps.geometry.spherical.computeDistanceBetween &&\n            userState.latitude &&\n            userState.longitude) {\n          const oldPos = new google.maps.LatLng(userState.latitude, userState.longitude);\n          const newPos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\n          const distance = (google.maps.geometry.spherical.computeDistanceBetween(oldPos, newPos) * 3.28084);\n          positionChanged = distance > 2.0; // we've change donly if distance is greater than 3 feet\n          reason = \"distance greater than 2 feet (\" + distance + \")\";\n        } else {\n          positionChanged = (userState.latitude !== position.coords.latitude || userState.longitude  !== position.coords.longitude);\n          reason = \"position different\";\n        }\n\n        if (positionChanged) {\n          console.log(\"Position changed, calling callback and setting user state, \" + reason);\n          const newState = { ...userState, latitude: position.coords.latitude, longitude: position.coords.longitude};\n          internalSetUserState(newState);\n          callback(position.coords.latitude, position.coords.longitude);\n        }\n      });\n\n    console.log(\"ApplicationUserContext.startWatchPosition: start \" + watchId);\n    return watchId;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  function clearWatchPosition(watchId: string) {\n    if (watchId === '') {\n      return;\n    }\n\n    Geolocation.clearWatch({ id: watchId}).then(() => {\n      console.log(\"ApplicationUserContext.stopWatchPosition: cleared \" + watchId);\n    });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  useEffect(() => {\n    let mounted = true;\n\n    Promise.all([\n      db.getUserState(),\n    ]).then(response => {\n      if (mounted)\n      {\n        const newState = response[0];\n        if (newState) {\n          internalSetUserState({ ...newState, loading: false});\n        } else {\n          internalSetUserState({...userState, loading: false});\n        }\n      }\n    });\n    return (() => { mounted = false;});\n\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    if (userState && !userState.isPushEnabled &&\n      userState.access_token &&\n      userState.access_token.length > 0 &&\n      env.settings.platform !== 'other') {\n      PushController.register(userState, pushEnabled, () => {});\n    }\n\n    // eslint-disable-next-line\n  }, [userState.isPushEnabled, userState.access_token]);\n\n  // ----------------------------------------------------------------------------------------------\n  const pushEnabled = (enabled: boolean) => {\n    internalSetUserState({ ...userState, isPushEnabled: enabled});\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  const userLoggedIn = async (username: string, access_token: string, environment: string): Promise<ApplicationUser> => {\n    const currentState = await db.getUserState();\n    try {\n      const position = await Geolocation.getCurrentPosition();\n      log(\"getCurrentPosition SUCCEEDED\", { ...position });\n      const newState = {\n        username,\n        access_token,\n        environment,\n        isLoggedin: true,\n        darkMode: currentState ? currentState.darkMode : INITIAL_APPLICATION_USER.darkMode,\n        loading: false,\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        isPushEnabled: false\n      };\n      await db.putUserState(newState);\n      internalSetUserState(newState);\n      console.log(\"ApplicationUserContextProvider: userLoggedin. \", newState.isLoggedin);\n      return newState;\n    } catch (err) {\n      log(\"getCurrentPosition FAILED\", {msg: err.message, os: env.settings.platform, user: username});\n      console.log(\"Error trying to get geolocation: \" + err.message);\n      const newState = {\n        username,\n        access_token,\n        environment,\n        isLoggedin: true,\n        darkMode: currentState ? currentState.darkMode : INITIAL_APPLICATION_USER.darkMode,\n        loading: false,\n        latitude: currentState?.latitude,\n        longitude: currentState?.longitude,\n        isPushEnabled: false\n      };\n      await db.putUserState(newState);\n      internalSetUserState(newState);\n      return newState;\n    }\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  const logout = async () => {\n    const newState = { ...userState, isLoggedin: false, access_token: undefined};\n    internalSetUserState(newState);\n    await db.putUserState(newState);\n    console.log(\"ApplicationUserContextProvider: logout. \", newState.isLoggedin);\n  };\n\n  return (\n    <ApplicationUserContext.Provider value={{\n      user: userState,\n      userLoggedIn,\n      logout,\n      startWatchPosition,\n      clearWatchPosition,\n      pushEnabled\n    }} >\n      {props.children}\n    </ApplicationUserContext.Provider>\n  )\n};\n","import { IonAlert } from '@ionic/react';\nimport React, { useState } from \"react\";\n\nfunction useDialogBox() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [alertData, setAlertData] = useState({header: \"\", message: \"\", onDismiss: () => {}});\n\n  // ------------------------------------------------------------------------------------\n  const showAlert = (header: string, message: string, onDismiss: () => void) => {\n    setAlertData({\n      header,\n      message,\n      onDismiss\n    });\n\n    setIsOpen(true);\n  };\n\n  const alertBoxJsx = (\n    <IonAlert\n          isOpen={isOpen}\n          onDidDismiss={() => { setIsOpen(false); alertData.onDismiss();}}\n          header={alertData.header}\n          message={alertData.message}\n          buttons={['OK']}\n    />\n  );\n\n  return {\n    showAlert,\n    alertBoxJsx\n  }\n}\n\nexport default useDialogBox;\n","import { ClockInRequirement } from '../enums/ClockInRequirement';\nimport { EventInformation } from './TEC';\nimport { DailyNotes } from './DailyNotes';\n\nexport interface HomePageDataGet {\n    auth: AuthorizedItems;\n    currentEvents: EventInformation[];\n    nextEvent?: EventInformation;\n    dailyNotes: DailyNotes[];\n}\n\nexport enum Role {\n  Employee = \"Employee\",\n  Admin = \"Admin\",\n  LocationAdmin = \"Location Admin\",\n  BusinessAdmin = \"Business Admin\",\n  Orbital = \"Orbital\",\n}\n\nexport const initialHomePageData: HomePageDataGet = {\n  auth: { locations: [], tags: [], payrollEvents: [], employeeId: 0, loading: false, role: Role.Employee},\n  currentEvents: [],\n  nextEvent: undefined,\n  dailyNotes: []\n};\n\nexport enum TimeFormat {\n  HoursMinutes = 0,      // 05:59\n  HoursAndDecimals = 1   // 5.99\n}\n\nexport enum ClockOutValueType {\n  Unit = 1,\n  Money = 2\n}\n\nexport enum AdminAuthorization\n{\n  None = 0,\n  CanViewWages = 1,\n  CanEditPublishedTo = 2,\n  CanEditTemplates = 4,\n  CanEditSchedules = 8,\n  CanEditEmployeeClockEvents = 16,\n  CanEditOwnClockEvents = 32,\n  CanEditUserAccounts = 64\n}\n\nexport interface AuthorizedItems {\n    employeeId: number;\n    role: Role,\n    loading: boolean;\n    locations: AuthorizedLocation[];\n    tags: AuthorizedTag[];\n    payrollEvents: AuthorizedPayrollEvent[];\n}\n\nexport interface AuthorizedLocation {\n    id: number;\n    name: string;\n    abbr: string;\n    departments: AuthorizedDepartment[];\n    settings: LocationSettings;\n}\n\nexport interface AuthorizedDepartment {\n    id: number;\n    name: string;\n    abbr: string;\n    adminAuth: AdminAuthorization;\n    positions: AuthorizedPosition[];\n}\n\nexport interface AuthorizedTag {\n    id: number;\n    name: string;\n    locId: number;\n    positionIds: number[];\n}\n\nexport interface AuthorizedPosition {\n    id: number;\n    name: string;\n    hasPosition: boolean;\n    tagsIds: number[];\n    payrollEventIds: number[];\n}\n\nexport interface AuthorizedPayrollEvent {\n    id: number;\n    name: string;\n    positionIds: number[];\n}\n\nexport enum UnscheduledBreakOptions {\n  Both = 0,\n  Unpaid = 1,\n  Paid = 2,\n  None = 3\n}\n\nexport enum BreakType {\n    UnscheduledUnpaid = 0,\n    UnscheduledPaid = 1,\n    Scheduled = 2\n}\n\nexport enum EmployeeSort {\n  FirstName = 1,\n  LastName = 2,\n  EmploymentStart = 3,\n  EarliestEventStart = 4\n}\n\nexport interface LocationSettings {\n    LocationId: number;\n    DayStartTime: any;\n    DayWeekStartsOn: string;\n    EmployeeRequestWindowStart: number;\n    EmployeeRequestWindowEnd: number;\n    EmployeeDaysToShowSchedule: number;\n    RequestPanelDisplayDays: number;\n    EmployeesShowShiftEventType: boolean;\n    ShowUnavailableEventType: boolean;\n    ShowVacationEventType: boolean;\n    ShowAbsentEventType: boolean;\n    ShowSpecialDates: boolean;\n    AllowEmployeesToDeleteUnavailableAndVacationApproved: boolean;\n    EmployeesOnlyViewOwnPositions: boolean;\n    EmployeesOnlyViewOwnDepartments: boolean;\n    EnableLegacyBreak: boolean;\n    EnableLegacyBreakStart: boolean;\n    DefaultBreakDuration: any;\n    DefaultBreakStartTime: any;\n    ShowTimeClockBreak: boolean;\n    EnableEnhancedBreakManagement: boolean;\n    TimeZoneOffset: number;\n    OtherEmployeesViewableTypeAndStatus: any;\n    NotesPanel: number;\n    ClockOutValueLabel: string;\n    ClockOutValueType: ClockOutValueType;\n    EnableEventConfirm: boolean;\n    TimeFormat: TimeFormat;\n    TimeFormatDigits: number;\n    TimeFormatDecimals: number;\n    LockDate: any;\n    HideScheduleEventsInPast: boolean;\n    NewEventDefaultStartTime: any;\n    NewEventDefaultEndTime: any;\n    EnableAutoAdjustingDateTimes: any;\n    GenericEmployeeIdName: string;\n    GenericEmployeeId2Name: string;\n    GenericEmployeeId3Name: string;\n    GenericEmployeePerPositionIdName: string;\n    GenericEmployeePerPositionId2Name: string;\n    GenericEmployeePerPositionId3Name: string;\n    GenericPositionIdName: string;\n    GenericPositionId2Name: string;\n    GenericPositionId3Name: string;\n    GenericDepartmentIdName: string;\n    GenericDepartmentId2Name: string;\n    GenericDepartmentId3Name: string;\n    GenericLocationIdName: string;\n    GenericLocationId2Name: string;\n    GenericLocationId3Name: string;\n    CalculatedSchedulePublishedTo: any;\n    RequireGeoLocation: boolean;\n    RequireIPAddress: boolean;\n    EnablePTO: boolean;\n    ClockInWithDifferentTag: boolean;\n    UnscheduledBreakOptions: UnscheduledBreakOptions;\n    ClockInRequirement: ClockInRequirement;\n    EmployeeSort: EmployeeSort;\n    EnableDirectCoverRequest: boolean;\n    EnablePositionChangeForEmployeePosition: boolean;\n}\n","import React from 'react';\nimport {IonItem, IonToggle, IonList, IonLabel } from '@ionic/react';\nimport {NotificationTypeModel} from \"../orbital-interfaces/NotificationTypeModel\";\n\ninterface ToggleListExProps {\n  list: NotificationTypeModel[] | null;\n  selected: NotificationTypeModel[] | null;\n  selectionChanged(newSelected: NotificationTypeModel[] | null): void;\n}\n\nconst ToggleListEx: React.FC<ToggleListExProps> = ({list, selected, selectionChanged}) => {\n\n  // ----------------------------------------------------------------------------------------------\n  const isItemChecked = (id: number) => {\n    if (!selected || selected.length === 0) {\n      return false;\n    }\n\n    for (let i = 0; i < selected.length; i++) {\n      if (selected[i].id === id)\n      {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  const onAllChanged = () => {\n    const checked = (list?.length !== selected?.length);\n\n    if (list?.length === selected?.length) {\n      if (checked) {\n        return;\n      }\n\n      const newSelected = [] as NotificationTypeModel[];\n      selectionChanged(newSelected);\n    } else {\n      if (!checked) {\n        return;\n      }\n\n      selectionChanged(list?.slice());\n    }\n\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  const itemToggle = (item: NotificationTypeModel) => {\n    if (selected === null) {\n      return;\n    }\n\n    const checked = !selected.map(n => n.id).includes(item.id);\n\n    if (checked) {\n      const newList =  selected.slice();\n      newList.push(item);\n      selectionChanged(newList);\n    } else {\n      const newlist = selected.filter(r => r.id !== item.id);\n      selectionChanged(newlist);\n    }\n  };\n\n  if (!list) {\n    return (\n      <div>Loading...</div>\n    )\n  }\n\n  return (\n    <IonItem>\n      <IonList>\n        <IonItem key={-1}>\n          <IonToggle\n            mode=\"md\"\n            key={-1}\n            checked={list?.length === selected?.length}\n            onClick={() => onAllChanged()}\n          />\n          <IonLabel>SELECT ALL</IonLabel>\n        </IonItem>\n        {list && list.map(toggle => (\n          <IonItem key={toggle.id}>\n            <IonToggle\n              mode=\"md\"\n              key={toggle.id}\n              onClick={() => {itemToggle(toggle)}}\n              checked={isItemChecked(toggle.id)} />\n            <IonLabel>{toggle.name}</IonLabel>\n          </IonItem>\n        ))}\n      </IonList>\n    </IonItem>\n  );\n};\n\nexport default ToggleListEx;\n","import React, {useContext, useEffect, useState} from 'react';\nimport { IonButton, IonButtons, IonIcon, IonContent, IonFooter, IonHeader, IonTitle, IonToolbar } from '@ionic/react';\nimport { arrowRoundBack } from 'ionicons/icons';\nimport ToggleListEx from '../components/ToggleListEx';\nimport pushApi from '../api/PushNotificationsAPI';\nimport {ApplicationUserContext} from \"../context/ApplicationUserContext\";\nimport {NotificationTypeModel} from \"../orbital-interfaces/NotificationTypeModel\";\n\ninterface NotificationSettingsModalProps {\n  onDismissModal: () => void;\n  isOpen: boolean;\n}\n\nconst NotificationSettingsModal: React.FC<NotificationSettingsModalProps> = ({ onDismissModal, isOpen }) => {\n  const { user } = useContext(ApplicationUserContext);\n  const [ notifications, setNotifications] = useState(null as NotificationTypeModel[] | null);\n  const [ selectedNotifications, setSelectedNotifications ] = useState(null as NotificationTypeModel[] | null);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!isOpen) {\n      setSelectedNotifications(null);\n      setNotifications(null);\n      return;\n    }\n\n    let isSubscribed = true;\n\n    Promise.all([\n      pushApi.getTypesSelectedByUser(user),\n      pushApi.listTypes(user)\n    ]).then(responses => {\n      if (!isSubscribed) {\n        return;\n      }\n\n      setSelectedNotifications(responses[0]);\n      setNotifications(responses[1]);\n    });\n\n    return () => { isSubscribed = false} ;\n  }, [isOpen, user]);\n\n\n  // --------------------------------------------------------------------------------------\n  const onCancel = () => {\n    onDismissModal();\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onSelectionChanged = (newSelected: NotificationTypeModel[]) => {\n    const ids = newSelected.map(n => n.id);\n    pushApi.putTypes(user, ids).then(() => {\n      setSelectedNotifications(newSelected);\n    });\n  };\n\n  return (\n    <>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonButton onClick={onCancel}>\n              <IonIcon icon={arrowRoundBack} mode=\"md\" slot=\"icon-only\" />\n            </IonButton>\n          </IonButtons>\n          <IonTitle>\n            Notifications\n          </IonTitle>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent class=\"outer-content\">\n        <ToggleListEx\n          list={notifications}\n          selected={selectedNotifications}\n          selectionChanged={onSelectionChanged}\n        />\n      </IonContent>\n\n      <IonFooter>\n        <IonToolbar />\n      </IonFooter>\n    </>\n  )\n};\n\nexport default NotificationSettingsModal;\n","import { IonContent, IonHeader, IonIcon, IonItem, IonLabel, IonList, IonMenu, IonModal, IonMenuToggle, IonTitle, IonToolbar, IonFooter } from '@ionic/react';\nimport { settings, notifications, mail, logOut } from 'ionicons/icons';\nimport React, { useState } from 'react';\nimport './Menu.scss';\nimport { ApplicationUserContext } from '../context/ApplicationUserContext';\nimport env from '../api/environment';\nimport useDialogBox from \"../hooks/useDialogBox\";\nimport NotificationSettingsModal from \"./NotificationSettingsModal\";\n\nconst Menu: React.FC = () => {\n  const [disableMenu] = useState(false);\n  const { user } = React.useContext(ApplicationUserContext);\n  const environment = env.settings.env.Item(user.environment);\n  const userName = environment.key !== 'prod' ? user.username!.substr(4) : user.username!;\n  const dlg = useDialogBox();\n  const [showNotificationsModal, setShowNotificationsModal] = useState(false);\n\n  /* tslint:disable:jsx-no-lambda */\n  return (\n    <IonMenu type=\"overlay\" disabled={disableMenu} contentId=\"main\">\n      <IonHeader>\n        <IonToolbar>\n          <IonTitle>Menu</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent class=\"outer-content\">\n        {environment.key !== 'prod' && (\n          <div className=\"header\">\n            {userName.toUpperCase()} ({environment.name.toUpperCase()})\n          </div>\n        )}\n        {environment.key === 'prod' && (\n          <div className=\"header\">\n            {userName}\n          </div>\n        )}\n        <IonList>\n          <IonMenuToggle auto-hide=\"false\">\n            <IonItem button={true} routerLink=\"/account\" routerDirection=\"none\">\n              <IonLabel>Settings</IonLabel>\n              <IonIcon slot=\"end\" icon={settings} />\n            </IonItem>\n          </IonMenuToggle>\n\n          <IonMenuToggle auto-hide=\"false\">\n            <IonItem button={true} onClick={() => {setShowNotificationsModal(true)}} >\n              <IonLabel>Notifications</IonLabel>\n              <IonIcon slot=\"end\" icon={notifications} />\n            </IonItem>\n          </IonMenuToggle>\n          {/* KENKEN: TODO: Add 'My Account' and 'Legend' menu items in menu\n          <IonMenuToggle auto-hide=\"false\">\n            <IonItem button={true} routerLink=\"/account\" routerDirection=\"none\">\n              <IonLabel>My Account</IonLabel>\n              <IonIcon slot=\"end\" icon={person} />\n            </IonItem>\n          </IonMenuToggle>\n          <IonMenuToggle auto-hide=\"false\">\n            <IonItem button={true} routerLink=\"/account\" routerDirection=\"none\">\n              <IonLabel>Legend</IonLabel>\n              <IonIcon slot=\"end\" icon={colorPalette} />\n            </IonItem>\n          </IonMenuToggle>\n          */}\n          <IonMenuToggle auto-hide=\"false\">\n            <IonItem button={true} routerLink=\"/account\" routerDirection=\"none\">\n              <IonLabel>Submit a Ticket</IonLabel>\n              <IonIcon slot=\"end\" icon={mail} />\n            </IonItem>\n          </IonMenuToggle>\n          <IonMenuToggle auto-hide=\"false\">\n            <IonItem button={true} routerLink=\"/logout\" routerDirection=\"none\">\n              <IonIcon slot=\"end\" icon={logOut} />\n              <IonLabel>Logout</IonLabel>\n            </IonItem>\n          </IonMenuToggle>\n        </IonList>\n        {dlg.alertBoxJsx}\n      </IonContent>\n      <IonFooter className=\"footer\">\n        <div className=\"version\">Version: {env.settings.appVersionString} </div>\n      </IonFooter>\n\n      <IonModal\n        isOpen={showNotificationsModal}\n      >\n        <NotificationSettingsModal\n          onDismissModal={() => {setShowNotificationsModal(false)}}\n          isOpen={showNotificationsModal}\n        />\n      </IonModal>\n    </IonMenu>\n  );\n};\n\nexport default Menu;\n","import { HomePageDataGet, AuthorizedItems } from '../orbital-interfaces/authorized-items';\nimport { ApplicationUser } from '../context/ApplicationUserContext';\nimport env from './environment';\nimport apiHelper from './OrbitalApiHelper';\n\ninterface AccessTokenResponse {\n  access_token: string;\n  token_type: string;\n  expires_in: number;\n  error?: string;\n  error_description?: string;\n  ['.issued']: string;\n  ['.expires']: string;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst authenticateUser = async (username: string, password: string, environment: string) => {\n  console.log(`Authenticating against ${env.settings.env.Item(environment).name} (${env.settings.env.Item(environment).url})`);\n  const url = env.settings.env.Item(environment).url + 'token';\n  const body = `grant_type=password&username=${username}&password=${password}`;\n  try {\n    const response = await fetch(url, {\n      method: 'POST',\n      body: body\n    });\n\n    const json = await response.json() as AccessTokenResponse;\n    if (json.error || json.error_description) {\n      return { loggedIn: false, error: json.error_description, access_token: ''};\n    }\n\n    return { loggedIn: true, access_token: json.access_token };\n  } catch (err) {\n    console.error('Error returned from authentication request: ' + err);\n    return { loggedIn: false, err, error: 'Error attempting to log in', access_token: ''};\n  }\n}\n\n// ----------------------------------------------------------------------------------------------\nconst getHomePageData = async (user: ApplicationUser) => {\n  return await apiHelper.get(user, 'api/v3/home/get/0') as HomePageDataGet;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst getAuthorizedItems = async (user: ApplicationUser) => {\n  const result = await apiHelper.get(user, 'api/v3/home/get-auth') as AuthorizedItems;\n  console.log(result);\n  return result;\n}\n\nexport default {\n  authenticateUser,\n  getHomePageData,\n  getAuthorizedItems\n}\n","import React, {useState, useEffect, useContext} from \"react\";\nimport {AuthorizedItems, Role} from \"../orbital-interfaces/authorized-items\";\nimport db from \"../data/dbStore\";\nimport UserAPI from \"../api/UserAPI\";\nimport {ApplicationUser, ApplicationUserContext} from \"./ApplicationUserContext\";\n\nexport interface IAuthorizedItemsContext {\n  auth: AuthorizedItems;\n  refreshAuth: (force: boolean, newUser: ApplicationUser) => Promise<AuthorizedItems | null>;\n  clearAuth: () => void;\n  authLoading: boolean;\n}\n\nconst INITIAL_AUTHORIZED_ITEMS: AuthorizedItems = {\n  employeeId: 0,\n  role: Role.Employee,\n  locations: [],\n  loading: false,\n  payrollEvents: [],\n  tags: []\n};\n\nconst INITIAL_AUTHITEMS_CONTEXT = {\n  auth: INITIAL_AUTHORIZED_ITEMS,\n  refreshAuth: (force: boolean, newUser: ApplicationUser) => {return new Promise<AuthorizedItems | null>(() => {})},\n  clearAuth: () => {},\n  authLoading: false\n};\n\nexport const AuthorizedItemsContext = React.createContext<IAuthorizedItemsContext>(INITIAL_AUTHITEMS_CONTEXT);\n\n// ----------------------------------------------------------------------------------------------\nasync function getAuthItems(currentAuth: AuthorizedItems, user: ApplicationUser, force: boolean)  {\n  if (currentAuth.employeeId !== 0 && !force) {\n    return currentAuth;\n  }\n\n  if (!force) {\n    const authFromStore = await db.getAuthItems();\n    if (authFromStore && authFromStore.locations && authFromStore.locations.length > 0) {\n      return authFromStore;\n    }\n  }\n\n  const authFromApi = await UserAPI.getAuthorizedItems(user);\n  if (authFromApi && authFromApi.locations && authFromApi.locations.length > 0) {\n    db.putAuthItems(authFromApi).then(() => console.log(\"auth items stored in indexdb\"));\n    return authFromApi;\n  } else {\n    console.log(\"got nothing from auth api\");\n    return null;\n  }\n}\n\nexport const AuthorizedItemsContextProvider = (props: any) => {\n  const [auth, internalSetAuth] = useState({...INITIAL_AUTHORIZED_ITEMS});\n  const [authLoading, setLoading] = useState(false);\n  const {user} = useContext(ApplicationUserContext);\n\n  // ----------------------------------------------------------------------------------------------\n  useEffect(() => {\n    let mounted = true;\n    setLoading(true);\n\n    if (!user || !user.isLoggedin) {\n      return;\n    }\n\n    getAuthItems(auth, user,false).then(newAuth => {\n      if (!mounted) {\n        return;\n      }\n\n      setLoading(false);\n\n      if (newAuth) {\n        internalSetAuth(newAuth);\n      }\n    });\n\n    return (() => { mounted = false;});\n  }, [user, auth]);\n\n  // ----------------------------------------------------------------------------------------------\n  const refreshAuth = async (force: boolean, newUser: ApplicationUser) => {\n    setLoading(true);\n\n    const newAuth = await getAuthItems(auth, newUser, force);\n    setLoading(false);\n    if (newAuth) {\n      internalSetAuth(newAuth);\n    }\n\n    return newAuth;\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  const clearAuth = () => {\n    internalSetAuth(INITIAL_AUTHORIZED_ITEMS);\n    db.putAuthItems(INITIAL_AUTHORIZED_ITEMS).then(res => {\n      console.log(\"Cleared Authorized Items from db\");\n    });\n  };\n\n  return (\n    <AuthorizedItemsContext.Provider value={{\n      auth,\n      refreshAuth,\n      clearAuth,\n      authLoading\n    }}>\n      {props.children}\n    </AuthorizedItemsContext.Provider>\n  );\n};\n","import React, { useState } from 'react';\nimport { IonContent, IonPage, IonRow, IonCol, IonButton, IonList, IonText, IonLoading, useIonViewWillEnter } from '@ionic/react';\nimport './Login.scss';\nimport UserAPI from '../api/UserAPI';\nimport { RouteComponentProps } from 'react-router';\nimport useDialogBox from '../hooks/useDialogBox';\nimport { ApplicationUserContext } from '../context/ApplicationUserContext';\nimport env from '../api/environment';\nimport { log } from '../util/logger';\nimport {AuthorizedItemsContext} from \"../context/AuthorizedItemsContext\";\n\ninterface LoginProps extends RouteComponentProps {}\n\nfunction validate(username: string, password: string): boolean {\n  return (\n      username.length > 0 &&\n      password.length > 5\n  );\n}\n\nconst Login: React.FC<LoginProps> = ({ history }) => {\n  const {alertBoxJsx, showAlert} = useDialogBox();\n  const {user, userLoggedIn} = React.useContext(ApplicationUserContext);\n  const {refreshAuth} = React.useContext(AuthorizedItemsContext);\n  const [showLoading, setShowLoading] = useState(false);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [usernameErrors] = useState(\"\");\n  const [passwordErrors] = useState(\"\");\n  const [loginEnabled, setLoginEnabled] = useState(false);\n\n  // ----------------------------------------------------------------------------------------------\n  const onUsernameChange = (newUsername: string) => {\n    setUsername(newUsername);\n    setLoginEnabled(validate(newUsername, password));\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  const onPasswordChange = (newPassword: string) => {\n    setPassword(newPassword);\n    setLoginEnabled(validate(username, newPassword));\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  const login = async () => {\n    if(username && password) {\n      const envUser = env.getUserAndEnvironmentFromInput(username);\n      setShowLoading(true);\n      const response = await UserAPI.authenticateUser(envUser.username, password, envUser.env.key);\n      if (response.loggedIn) {\n        const newUser = await userLoggedIn(username, response.access_token, envUser.env.key);\n        await refreshAuth(true, newUser);\n        setShowLoading(false);\n        log('login', { username: envUser.username, appVersion: env.settings.appVersionString, environment: envUser.env.name});\n        history.push('/tabs/schedule', {direction: 'none'});\n        history.goForward();\n        return;\n      } else {\n        setShowLoading(false);\n        log('login_failure', { username: envUser.username, appVersion: env.settings.appVersionString, environment: envUser.env.name});\n        const msg = response.error ? response.error : \"Could not log in\";\n        showAlert(\"Failed to log in\", msg, () => {\n          setPassword(\"\");\n          setLoginEnabled(false);\n        });\n      }\n    }\n  };\n\n  // ----------------------------------------------------------------------------------------------\n  useIonViewWillEnter(() => {\n    console.log(\"Entering login, is user logged in? \", user.isLoggedin);\n    if (user.isLoggedin) {\n      history.push('/tabs/schedule', {direction: 'forward'});\n      history.goForward();\n    }\n  });\n\n  return (\n    <IonPage id=\"login-page\">\n      <IonContent className=\"login-content\">\n\n        <div className=\"login-logo\">\n          <img className=\"logo\" src=\"assets/img/OS Logo - 4pt Rounded _ 2 Tone Orange.svg\" alt=\"Orbital Shift Logo\" />\n        </div>\n\n        <IonLoading\n        isOpen={showLoading}\n        onDidDismiss={() => setShowLoading(false)}\n        spinner=\"dots\"\n        message={'Logging in...'}\n        duration={5000}\n        />\n\n        {alertBoxJsx}\n\n          <IonList className=\"form-list\">\n\n            <div className=\"item\">\n              <div className=\"label\">User</div>\n              <div className=\"field-container\">\n                <input\n                  className=\"input\"\n                  id=\"username\"\n                  name=\"username\"\n                  type=\"text\"\n                  value={username}\n                  onChange={(e) => {onUsernameChange(e.target.value)}}\n                />\n              </div>\n            </div>\n\n            {usernameErrors.length > 0 && (\n              <IonText color=\"light\">\n                <p className=\"ion-padding-start\">\n                  {usernameErrors}\n                </p>\n              </IonText>\n            )}\n\n            <div className=\"item\">\n              <div className=\"label\">Password</div>\n              <div className=\"field-container\">\n                <input\n                  className=\"input\"\n                  id=\"password\"\n                  name=\"password\"\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => { onPasswordChange(e.target.value)}}  />\n              </div>\n            </div>\n\n            {passwordErrors.length > 0 && (\n              <IonText color=\"light\">\n              <p className=\"ion-padding-start\">\n                {passwordErrors}\n              </p>\n              </IonText>\n            )}\n          </IonList>\n\n          <IonRow>\n            <IonCol>\n              <IonButton\n                className=\"login-button\"\n                type=\"submit\"\n                onClick={login}\n                expand=\"block\"\n                disabled={!loginEnabled}\n              >\n                LOG IN\n              </IonButton>\n            </IonCol>\n          </IonRow>\n\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default Login;\n","import {EventBreak} from '../orbital-interfaces/EventBreak';\nimport {EventInformation} from '../orbital-interfaces/TEC';\nimport {ScheduleEvent} from '../orbital-interfaces/ScheduleEvent';\nimport {addDays, differenceInDays, differenceInMinutes, format, isAfter, isSameYear, isToday, parseISO} from 'date-fns';\nimport {LocationSettings, TimeFormat} from \"../orbital-interfaces/authorized-items\";\nimport {OrbitalTime} from \"../orbital-interfaces/OrbitalTime\";\n\nconst noEndTime = new Date(9000, 1,1);\n\n\n// ---------------------------------------------------------------------------------------------\nexport function getDurationFromTimeSpan(timespan: string) {\n  if (!timespan) {\n    return 0;\n  }\n\n  const tok = timespan.split(\":\");\n  let hrs: number;\n  let min: number;\n  if (tok[0].indexOf(\".\") >= 0) {\n    const hrTok = tok[0].split(\".\");\n    hrs = 24 * parseInt(hrTok[0]) + parseInt(hrTok[1]);\n    min = parseInt(tok[1]);\n  } else {\n    hrs = parseInt(tok[0]);\n    min = parseInt(tok[1]);\n  }\n\n  return (hrs*60) + min;\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function messageDateString(time: string) {\n  const date = parseISO(time);\n  const now = new Date();\n\n  if (isToday(date)) {\n    return format(date, 'h:mmaaa').replace('M', '');\n  } else if (differenceInDays(now, date) < 7) {\n    return format(date, \"EEE\").toUpperCase();\n  } else if (isSameYear(date, now)) {\n    return format(date, \"MMM d\");\n  } else {\n    return format(date, \"M/d/yyyy\");\n  }\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getTimeStringFromMinutes(locSettings: LocationSettings, min: number | null) {\n  if (locSettings.TimeFormat === TimeFormat.HoursMinutes) {\n    if (min === null) {\n      return \"00:00\";\n    }\n\n    const hours = Math.floor(min / 60);\n    const minutes = min % 60;\n\n    return `${padZeroes(hours, 2)}:${padZeroes(minutes, 2)}`;\n  } else {\n    if (min === null) {\n      return \"0\";\n    }\n\n    return formatDecimal(min / 60, locSettings.TimeFormatDigits, locSettings.TimeFormatDecimals);\n  }\n}\n\n\n// ---------------------------------------------------------------------------------------------\nexport function getTimeStringFromOrbitalTime(locSettings: LocationSettings, time: OrbitalTime) {\n  if (time.ActualTime === \"00:00:00\") {\n    return (locSettings.TimeFormat === TimeFormat.HoursMinutes)\n      ? \"00:00\"\n      : formatDecimal(0, locSettings.TimeFormatDigits, locSettings.TimeFormatDecimals);\n  }\n\n  if (locSettings.TimeFormat === TimeFormat.HoursMinutes) {\n    const tok = time.ActualTime.split(':');\n    if (tok.length !== 3) {\n      return time.ActualTime;\n    }\n\n    if (tok[0].includes('.')) {\n      const dayHourTok = tok[0].split('.');\n      const hours = (24 * parseInt(dayHourTok[0])) + parseInt(dayHourTok[1]);\n      return `${hours}:${tok[1]}`;\n    } else {\n      const hours = parseInt(tok[0]);\n      return `${hours}:${tok[1]}`;\n    }\n\n  } else {\n    return formatDecimal(time.ActualHours, locSettings.TimeFormatDigits, locSettings.TimeFormatDecimals);\n  }\n}\n\n\n// ---------------------------------------------------------------------------------------------\nexport function getMinutesFromTimeString(locSettings: LocationSettings, str: string) {\n  if (!str || str.length === 0) {\n    return 0;\n  }\n\n  if (locSettings.TimeFormat === TimeFormat.HoursMinutes) {\n    const hourMinRegEx = /^\\d*(:\\d{2})?$/;\n    if (!hourMinRegEx.test(str)) {\n      return 0;\n    }\n\n    if (str[0] === ':') {\n      return parseInt(str.substring(1));\n    }\n\n    const tok = str.split(\":\");\n    if (tok.length === 1) {\n      return parseInt(str) * 60;\n    }\n\n    return (parseInt(tok[0]) * 60) + parseInt(tok[1]);\n  } else {\n    const decimalRegex = /^\\d+(.\\d*)?$/;\n    if (!decimalRegex.test(str)) {\n      return 0;\n    }\n\n    return Math.round(parseFloat(str) * 60.0);\n  }\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getDurationStringFromTimeSpan(timespan: string) {\n  if (!timespan) {\n    return \"(0m)\";\n  }\n  const tok = timespan.split(\":\");\n  let hrs: number;\n  let min: number;\n  if (tok[0].indexOf(\".\") >= 0) {\n    const hrTok = tok[0].split(\".\");\n    hrs = 24 * parseInt(hrTok[0]) + parseInt(hrTok[1]);\n    min = parseInt(tok[1]);\n  } else {\n    hrs = parseInt(tok[0]);\n    min = parseInt(tok[1]);\n  }\n\n  return (hrs > 0)\n    ? `(${hrs}h ${min}m)`\n    : `(${min}m)`;\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getDurationString(minutes: number): string {\n  if (minutes < 60) {\n    return `(${minutes}m)`;\n  }\n\n  let str = `(${Math.floor(minutes / 60)}h`;\n  return (minutes % 60 === 0)\n    ? str + \")\"\n    : str + ` ${minutes % 60}m)`;\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getDurationFromScheduleEvent(ev: EventInformation | ScheduleEvent): number {\n  if ((ev as EventInformation).Data) {\n    return getDurationFromTimeSpan((ev as EventInformation).Data!.HourlyValue.Time.ActualTime);\n  }\n\n  const getDiff = (start: string, end?: string) => {\n    const startDate = parseISO(start);\n    let endDate = end ? parseISO(end) : new Date();\n    if (endDate > noEndTime) {\n      endDate = new Date();\n    }\n    return differenceInMinutes(endDate, startDate);\n  }\n\n  let totalMinutes = getDiff(ev.EventStart, ev.EventEnd);\n  if (ev.EventBreaks) {\n    ev.EventBreaks.map(b => totalMinutes -= getDiff(b.BreakStart, b.BreakEnd));\n  }\n\n  return totalMinutes;\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getDuration(ev: EventInformation): number {\n  const getDiff = (start: string, end?: string) => {\n    const startDate = parseISO(start);\n    let endDate = end ? parseISO(end) : new Date();\n    if (endDate > noEndTime) {\n      endDate = new Date();\n    }\n    return differenceInMinutes(endDate, startDate);\n  }\n\n  let totalMinutes = getDiff(ev.EventStart, ev.EventEnd);\n  if (ev.EventBreaks) {\n    ev.EventBreaks.map(b => totalMinutes -= getDiff(b.BreakStart, b.BreakEnd));\n  }\n\n  return totalMinutes;\n}\n\n\n// ---------------------------------------------------------------------------------------------\nexport function getTotalDuration(events: EventInformation[]) {\n  let totalMinutes = 0;\n  events.map(ev => totalMinutes += getDuration(ev));\n  return totalMinutes;\n}\n\n\n// ---------------------------------------------------------------------------------------------\nexport function getTotalDurationFromScheduleEvent(events: ScheduleEvent[]) {\n  let totalMinutes = 0;\n  events.map(ev => totalMinutes += getDurationFromScheduleEvent(ev));\n  return totalMinutes;\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getDateString(date: Date): string {\n  return format(date, 'EEE MMM d, yyyy').toUpperCase();\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getStartTime(ev: EventInformation | ScheduleEvent) {\n    return format(parseISO(ev.EventStart), 'h:mmaaa').replace('M', '');\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getMessageDeliveryTimeString(dateStr: string) {\n  return format(parseISO(dateStr), \"M/d EEE h:mmaa\").replace('M', '');\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getBreakStartTime(brk: EventBreak) {\n  return format(parseISO(brk.BreakStart), 'h:mmaaa').replace('M', '');\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getEventStartEnd(ev: EventInformation | ScheduleEvent) {\n    const start = format(parseISO(ev.EventStart), 'h:mmaaa').replace('M', '');\n    const end   = format(parseISO(ev.EventEnd), 'h:mmaaa').replace('M', '');\n\n    return `${start} - ${end}`;\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getBreakStartEnd(brk: EventBreak) {\n  const start = format(parseISO(brk.BreakStart), 'h:mmaaa').replace('M', '');\n\n  if (!brk.BreakEnd || brk.BreakEnd > noEndTime) {\n    return start;\n  }\n\n  const end   = format(parseISO(brk.BreakEnd), 'h:mmaaa').replace('M', '');\n  return `${start} - ${end}`;\n}\n// ---------------------------------------------------------------------------------------------\nexport function getEventInformationStartEnd(ev: EventInformation | ScheduleEvent) {\n  const start = format(parseISO(ev.EventStart), 'h:mmaaa').replace('M', '');\n  const end   = format(parseISO(ev.EventEnd), 'h:mmaaa').replace('M', '');\n\n  return `${start} - ${end}`;\n}\n\nexport function getEventBreakStartEndString(brk: EventBreak): string {\n  const start = format(parseISO(brk.BreakStart), 'h:mmaa').replace('M', '');\n  const end = brk.BreakEnd\n    ? format(parseISO(brk.BreakEnd), 'h:mmaa').replace('M', '')\n    : format(new Date(), 'h:mmaa').replace('M', '');\n\n  return `${start} - ${end}`;\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getWeekStart(date: Date, weekStartsOn: string, dayStart: string): Date {\n    const dayStartMinutes = (!dayStart || dayStart.indexOf(\"T\") < 0)\n      ? 0\n      : getDurationFromTimeSpan(dayStart.split(\"T\")[1]);\n\n    let newDate = date;\n    newDate.setHours(0, dayStartMinutes, 0, 0);\n\n    let counter = 0;\n    while (format(newDate, 'EEEE') !== weekStartsOn && counter < 20) {\n        newDate = addDays(newDate, -1);\n        counter++;\n    }\n\n    if (counter > 15) {\n        console.error(`Could not calculate week start based on date ${date} and weekStartsOn \"${weekStartsOn}\"`);\n    }\n\n    return newDate;\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getDayStartMinutes(dayStartLocSetting: string) {\n  const tok = dayStartLocSetting.split(\"T\");\n  return getDurationFromTimeSpan(tok[1]);\n}\n\n// ---------------------------------------------------------------------------------------------\nexport function getTimeDiff(dateStr: string, timeZoneOffset: number) {\n    const now = new Date();\n    const dateTime = parseISO(dateStr);\n    let minutes = isAfter(now, dateTime)\n        ? differenceInMinutes(now, dateTime)\n        : differenceInMinutes(dateTime, now);\n\n    const hours = parseInt('' + (minutes / 60), 10);\n    minutes = minutes - (hours * 60);\n    return `${formatDecimal(hours, 2, 0)}:${formatDecimal(minutes, 2, 0)}`;\n}\n\n// --------------------------------------------------------------------------------------------------------------------------\nexport function formatDateTimeAsMvcString(d: Date) {\n    if (!(d instanceof Date)) {\n        console.error('ERROR: passed-in object to formatDateTimeAsMvcString is not a Date: ' + d);\n        return '';\n    }\n\n    return  '' +\n            d.getFullYear() + '-' +\n            padZeroes(d.getMonth() + 1, 2) + '-' +\n            padZeroes(d.getDate(), 2)  + 'T' +\n            padZeroes(d.getHours(), 2) + ':' +\n            padZeroes(d.getMinutes(), 2) + ':00';\n}\n\n// --------------------------------------------------------------------------------------------------------------------------\nexport function formatDecimal(num: number, digits: number, decimals: number) {\n    let val = (Number(num).toFixed(decimals)).toString();\n\n    let negative = '';\n    if (val.indexOf('-') === 0) {\n        val = val.substring(1);\n        negative = '-';\n    }\n\n    const s = '0000000000' + val;\n    const decPos = val.indexOf('.');\n    if (decPos === -1) {\n        return  negative + s.substr(s.length - (Math.max(val.length, digits)));\n    } else {\n        return  negative + s.substr(s.length - (Math.max(val.length, digits + decimals + 1)));\n    }\n}\n\n// --------------------------------------------------------------------------------------------------------------------------\nfunction padZeroes(val: any, digitCount: number) {\n    const s = '0000000000' + val;\n    return s.substr(s.length - digitCount);\n}\n","enum EventType {\n  Shift = 1,\n  Unavailable = 2,\n  Vacation = 3,\n  Cover = 4,\n  Clock = 6,\n  Absent = 7\n}\n\nexport default  EventType;\n","import { ScheduleEvent } from './../orbital-interfaces/ScheduleEvent';\nimport { EditorValues } from '../components/EditEvent/EditEventModalState';\nimport { TECGetData } from '../orbital-interfaces/TEC';\nimport { EventFilter } from '../orbital-interfaces/EventFilter';\nimport { DailyNotes } from '../orbital-interfaces/DailyNotes';\nimport { DailyNotesFilter } from'../orbital-interfaces/DailyNotesFilter';\nimport { formatDateTimeAsMvcString } from '../util/time-helper';\nimport { ApplicationUser } from '../context/ApplicationUserContext';\nimport apiHelper from './OrbitalApiHelper';\nimport {RecurrenceUpdateType} from \"../enums/RecurrenceUpdateType\";\n\ninterface AccessTokenResponse {\n  access_token: string;\n  token_type: string;\n  expires_in: number;\n  error?: string;\n  error_description?: string;\n  ['.issued']: string;\n  ['.expires']: string;\n}\n\ninterface ErrorResponse {\n  error: boolean;\n  message: string;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst getScheduleEvent = async(user: ApplicationUser, scheduleEventId: number): Promise<ScheduleEvent | null> => {\n  const result = await apiHelper.get(user, 'api/v2/employee/schedule-events/get/' + scheduleEventId);\n\n  if (result.error) {\n    return null;\n  }\n\n  return result as ScheduleEvent;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst getScheduleEventsByFilter = async(user: ApplicationUser, filter: EventFilter) => {\n  const filterToSend = {\n    start: formatDateTimeAsMvcString(filter.start),\n    end: formatDateTimeAsMvcString(filter.end),\n    ...filter\n  };\n\n  return await apiHelper.post(user, 'api/v2/employee/schedule-events/filter', filterToSend) as TECGetData;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst getDailyNotesByFilter = async(user: ApplicationUser, filter: DailyNotesFilter) => {\n  const filterToSend = {\n    start: formatDateTimeAsMvcString(filter.start),\n    end: formatDateTimeAsMvcString(filter.end),\n    ...filter\n  };\n\n  return await apiHelper.post(user, 'api/v2/daily-notes/filter', filterToSend) as DailyNotes[];\n}\n\n// ----------------------------------------------------------------------------------------------\nconst updateScheduleEvent = async(user: ApplicationUser, eventValues: EditorValues, recurrenceUpdateType: RecurrenceUpdateType | null) => {\n  const data = {\n    scheduleEventId: eventValues.scheduleEventId,\n    eventType: eventValues.eventType,\n    eventStatus: eventValues.eventStatus,\n    isConfirmed: eventValues.isConfirmed,\n    positionId: eventValues.position.position.id,\n    employeeId: eventValues.employee.id,\n    eventStart: eventValues.eventStart,\n    eventEnd: eventValues.eventEnd,\n    tagId: eventValues.tag?.id,\n    eventBreaks: eventValues.eventBreaks,\n    isClockedIn: eventValues.isClockedIn,\n    breakStart: null,\n    breakDuration: null,\n    clockOutValue: eventValues.clockoutValue,\n    absentTime: eventValues.absentTimeMinutes,\n    notes: eventValues.notes,\n    sendMessage: false,\n    recurrenceId: eventValues.recurrenceId,\n    recurrenceStart: eventValues.recurrenceStart,\n    recurrenceEnd: eventValues.recurrenceEnd,\n    recurrenceType: eventValues.recurrenceType,\n    repeatInterval: eventValues.repeatInterval,\n    repeatWeekdays: eventValues.repeatWeekdays,\n    recurrenceUpdateType\n  };\n\n  return await apiHelper.post(user, 'api/v2/employee/schedule-events/update', data) as ErrorResponse;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst createScheduleEvent = async(user: ApplicationUser, eventValues: EditorValues, recurrenceUpdateType: RecurrenceUpdateType | null) => {\n  const data = {\n    sceduleEventId: 0,\n    eventType: eventValues.eventType,\n    eventStatus: eventValues.eventStatus,\n    isConfirmed: eventValues.isConfirmed,\n    positionId: eventValues.position.position.id,\n    employeeId: eventValues.employee.id,\n    eventStart: eventValues.eventStart,\n    eventEnd: eventValues.eventEnd,\n    tagId: eventValues.tag?.id,\n    eventBreaks: eventValues.eventBreaks,\n    isClockedIn: eventValues.isClockedIn,\n    breakStart: null,\n    breakDuration: null,\n    clockOutValue: eventValues.clockoutValue,\n    absentTime: eventValues.absentTimeMinutes,\n    notes: eventValues.notes,\n    sendMessage: false,\n    recurrenceId: eventValues.recurrenceId,\n    recurrenceStart: eventValues.recurrenceStart,\n    recurrenceEnd: eventValues.recurrenceEnd,\n    recurrenceType: eventValues.recurrenceType,\n    repeatInterval: eventValues.repeatInterval,\n    repeatWeekdays: eventValues.repeatWeekdays,\n    recurrenceUpdateType\n  };\n\n  return await apiHelper.post(user, 'api/v2/employee/schedule-events/create', data) as ErrorResponse;\n};\n\n// ----------------------------------------------------------------------------------------------\nconst deleteScheduleEvent = async(user: ApplicationUser, scheduleEventId: number, recurrenceUpdateType: RecurrenceUpdateType | null) => {\n  const data = {\n    scheduleEventId,\n    recurrenceUpdateType,\n    sendMessage: false\n  };\n\n  return await apiHelper.post(user, 'api/v2/employee/schedule-events/delete', data) as ErrorResponse;\n};\n\nexport default {\n  getScheduleEvent,\n  getScheduleEventsByFilter,\n  getDailyNotesByFilter,\n  updateScheduleEvent,\n  createScheduleEvent,\n  deleteScheduleEvent\n}\n","export interface EventFilter {\n  settingsLocId: number;\n  dnLocIds: number[];\n  start: Date;\n  end: Date;\n  filterByEmployee: boolean;\n  filterByPosition: boolean;\n  positionIds: number[];\n  eventTypeId: number;\n  eventStatusId: number;\n  tagId?: number;\n}\n\nexport const initialEventFilter: EventFilter = {\n  settingsLocId: 0,\n  dnLocIds: [],\n  start: new Date(),\n  end: new Date(),\n  filterByEmployee: false,\n  filterByPosition: true,\n  positionIds: [],\n  eventTypeId: -1,\n  eventStatusId: -1,\n  tagId: undefined\n};\n","import React from 'react';\r\nimport './WeekChooser.scss';\r\nimport { IonIcon, IonDatetime } from '@ionic/react';\r\nimport { arrowBack, arrowForward, arrowDropdown } from 'ionicons/icons';\r\nimport { addDays, format, isToday, parseISO } from 'date-fns'\r\n\r\ninterface WeekChooserProps {\r\n  startDate: Date,\r\n  setStartDate: (date: Date) => void\r\n}\r\n\r\n// --------------------------------------------------------------------------------------\r\nconst WeekChooser: React.FC<WeekChooserProps> = ({ startDate, setStartDate}) => {\r\n  return (\r\n    <div className=\"chooser\">\r\n      <div className=\"top\">\r\n        <button\r\n          onClick={() => setStartDate(addDays(startDate, -7))}\r\n          className=\"arrow\"\r\n          key={-1}>\r\n            <IonIcon mode=\"ios\" icon={arrowBack}/>\r\n        </button>\r\n        <div className=\"month-year-container\">\r\n          <div className=\"datetime-picker-container\">\r\n            <IonDatetime\r\n              className=\"datetime-picker\"\r\n              displayFormat=\"MMM YYYY\"\r\n              pickerFormat=\"MMM DD YYYY\"\r\n              min=\"2005-01-01\"\r\n              max=\"2030-01-01\"\r\n              value={startDate.toISOString()}\r\n              onIonChange={(e) => {setStartDate(parseISO(e.detail.value!))}}\r\n            />\r\n            <IonIcon mode=\"md\" icon={arrowDropdown} />\r\n          </div>\r\n        </div>\r\n        <button\r\n            onClick={() => setStartDate(addDays(startDate, 7))}\r\n            className=\"arrow\"\r\n            key={7}>\r\n              <IonIcon mode=\"ios\" icon={arrowForward}/>\r\n        </button>\r\n      </div>\r\n      <div className=\"weekday-list\">\r\n        {[0,1,2,3,4,5,6].map((num: number) => {\r\n          const thisDate = addDays(startDate, num);\r\n          const isTodayClass = isToday(thisDate) ? 'today' : 'not-today';\r\n\r\n          return (\r\n            <div key={num} className=\"weekday-button\">\r\n              <div className=\"weekday-abbr\">{format(thisDate, 'EEE')}</div>\r\n              <div className={isTodayClass} />\r\n              <div className=\"weekday-num\">{format(thisDate, 'd')}</div>\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WeekChooser;\r\n","\nenum EventStatus {\n  Approved = 1,\n  Request = 2,\n  RequestDenied = 4\n}\n\nexport default EventStatus;\n","import EventType from \"../../enums/EventType\";\nimport EventStatus from \"../../enums/EventStatus\";\nimport {AdminAuthorization, AuthorizedItems, Role} from \"../../orbital-interfaces/authorized-items\";\nimport {isAfter, parseISO} from \"date-fns\";\nimport authHelper, {SelectedPosition} from '../../util/authitems-helper'\n\nexport enum EventEditEnum {\n  None,\n  UndoCoverRequest,\n  CreateShiftRequest,\n  DeleteShiftRequest,\n  CreateCoverRequest,\n  Delete\n}\n\nexport interface Option {\n  value: number;\n  text: string;\n  color: string;\n}\n\nexport interface EventEditAuthorization {\n  buttonText: string;\n  enableConfirm: boolean;\n  isReadonly: boolean;\n  text: string;\n  usage: EventEditEnum;\n  eventTypeOptionList: Option[];\n  eventStatusOptionList: Option[];\n}\n\nexport const getEventNewAuthorization = (\n  auth: AuthorizedItems): EventEditAuthorization | null => {\n\n  let location = auth.locations[0];\n  let dept = auth.locations[0].departments[0];\n  let position = auth.locations[0].departments[0].positions[0];\n  let hasPositionFound = false;\n  for (let i = 0 ; i < auth.locations.length && !hasPositionFound; i++) {\n    for (let j = 0; j < auth.locations[i].departments.length && !hasPositionFound; j++) {\n      for (let k = 0; j < auth.locations[i].departments[j].positions.length && !hasPositionFound; k++) {\n        if (auth.locations[i].departments[j].positions[k].hasPosition) {\n          location = auth.locations[i];\n          dept = auth.locations[i].departments[j];\n          position = auth.locations[i].departments[j].positions[k];\n          hasPositionFound = true;\n        }\n      }\n    }\n  }\n\n  const selectedPosition = { location, position };\n\n  let initialStatus = EventStatus.Request;\n  if (auth.role === Role.BusinessAdmin || auth.role === Role.LocationAdmin)\n  {\n    initialStatus = EventStatus.Approved;\n  } else if (auth.role === Role.Admin && (dept.adminAuth & AdminAuthorization.CanEditSchedules) === AdminAuthorization.CanEditSchedules) {\n    initialStatus = EventStatus.Approved;\n  }\n\n  const eventStatusOptions = getEventStatusOptionsList(auth, selectedPosition, auth.employeeId, initialStatus, false);\n  const eventTypeOptions = getEventTypeOptionsList(auth, selectedPosition, auth.employeeId);\n\n  let retVal = {\n    buttonText: '',\n    enableConfirm: true,\n    isReadonly: false,\n    text: '',\n    usage: EventEditEnum.None,\n    eventTypeOptionList: eventTypeOptions,\n    eventStatusOptionList: eventStatusOptions\n  } as EventEditAuthorization;\n\n  return retVal;\n};\n\n\n// --------------------------------------------------------------------------------------\nexport const getEventEditAuthorization = (\n  eventType: EventType,\n  eventStatus: EventStatus,\n  eventEmployeeId: number,\n  eventStart: string,\n  eventEnd: string,\n  eventLocationId: number,\n  eventDepartmentId: number,\n  eventPositionId: number,\n  eventConfirmed: boolean,\n  auth: AuthorizedItems): EventEditAuthorization | null => {\n  const selectedPosition = authHelper.getSelectedPositionWithLocId(auth.locations, eventLocationId, eventPositionId);\n  const eventStatusOptions = getEventStatusOptionsList(auth, selectedPosition, eventEmployeeId, eventStatus, true);\n  const eventTypeOptions = getEventTypeOptionsList(auth, selectedPosition, eventEmployeeId);\n\n  let retVal = {\n    buttonText: '',\n    enableConfirm: true,\n    isReadonly: false,\n    text: '',\n    usage: EventEditEnum.None,\n    eventTypeOptionList: eventTypeOptions,\n    eventStatusOptionList: eventStatusOptions\n  } as EventEditAuthorization;\n\n  if (auth.role === Role.BusinessAdmin) {\n    return retVal;\n  }\n\n  if (auth.role === Role.LocationAdmin) {\n    if (authHelper.isPositionSpecificEvent(eventType)) {\n      if (auth.locations.filter(l => l.id === eventLocationId).length === 0) {\n        return null;\n      }\n    }\n\n    return retVal;\n  }\n\n  const endOfEvent = parseISO(eventEnd);\n  const now = new Date();\n  const afterEnd = isAfter(now, endOfEvent);\n  let employeeEvent = false;\n  const adminAuth = authHelper.getAdminAuthorizationForDepartment(auth, eventDepartmentId);\n\n  // If the user is in the Admin role\n  if (auth.role === Role.Admin) {\n    if (eventEmployeeId === auth.employeeId) {\n\n      if (eventType === EventType.Clock) {\n        if ((adminAuth & AdminAuthorization.CanEditOwnClockEvents) === AdminAuthorization.CanEditOwnClockEvents) {\n          return retVal;\n        } else {\n          return null;\n        }\n      }\n\n      if ((adminAuth & AdminAuthorization.CanEditSchedules) === AdminAuthorization.CanEditSchedules) {\n        return retVal;\n      }\n\n      employeeEvent = true;\n\n    } else {\n      // Not the user's event, someone else's\n\n      if (eventType === EventType.Clock) {\n        if ((adminAuth & AdminAuthorization.CanEditEmployeeClockEvents) === AdminAuthorization.CanEditEmployeeClockEvents) {\n          return retVal;\n        } else {\n          return null;\n        }\n      }\n\n      if (authHelper.canEditSchedules(auth, eventLocationId, eventDepartmentId)) {\n        return retVal;\n      } else {\n        // If the admin has a position in the selected department\n        if (authHelper.adminIsInDepartment(auth, eventDepartmentId)) {\n          // Treat the admin as an employee for event editing\n          employeeEvent = true;\n        } else {\n          // disable editing\n          return null;\n        }\n      }\n    }\n  }\n\n  if (auth.role === Role.Employee || employeeEvent) {\n    if (eventEmployeeId === auth.employeeId) {\n      if (afterEnd) {\n        return null;\n      }\n\n      if (eventType === EventType.Clock) {\n        return null;\n      }\n\n      if (eventType === EventType.Shift) {\n        if (eventStatus === EventStatus.Approved) {\n          return { ...retVal, buttonText: 'Create Cover-Request', isReadonly: true, usage: EventEditEnum.CreateCoverRequest}\n        }\n\n        if (eventStatus === EventStatus.Request) {\n          return { ...retVal, buttonText: 'Undo Shift-Request', enableConfirm: false, isReadonly: true, text:'Click OK to remove your Shift-Request', usage: EventEditEnum.DeleteShiftRequest};\n        }\n\n        // else Shift Request-Denied\n        return null;\n      }\n\n      if (eventType === EventType.Cover) {\n        if (eventStatus === EventStatus.Request) {\n          return { ...retVal, buttonText: 'Undo Cover-Request', enableConfirm: true, isReadonly: true, usage: EventEditEnum.UndoCoverRequest};\n        }\n\n        return null; // Cover Request-Denied\n      }\n\n      if (!authHelper.isPositionSpecificEvent(eventType) && authHelper.canEditNonPositionEvents(auth, eventDepartmentId)) {\n        return { ...retVal, buttonText: 'Delete Request', enableConfirm: false, isReadonly: true, text:'Click OK to delete this event', usage: EventEditEnum.Delete};\n      }\n\n      return null;\n    }\n\n    // This is someone else's event being viewed by an Employee\n    if (eventType === EventType.Cover && eventStatus === EventStatus.Request) {\n      return { ...retVal, buttonText: 'Make Shift-Request', enableConfirm: false, isReadonly: true, text:'', usage: EventEditEnum.CreateShiftRequest};\n    }\n\n    return null;\n  }\n\n  return null;\n};\n\n// --------------------------------------------------------------------------------------\nconst getEventTypeOptionsList = (auth: AuthorizedItems, selectedPosition: SelectedPosition, eventEmployeeId: number): Option[] => {\n  if (!auth || !auth.locations || auth.locations.length === 0 ||\n    !selectedPosition || !selectedPosition.location || !selectedPosition.location.settings) {\n    return [];\n  }\n\n  const eventTypeOptions: Option[] = [\n    {\n      value: EventType.Shift,\n      text: \"SHIFT\",\n      color: \"green\"\n    }\n  ];\n\n  const locSettings = selectedPosition.location.settings;\n  const dept = authHelper.getDepartmentFromPositionId(auth, selectedPosition.position.id);\n  const adminAuth = authHelper.getAdminAuthorizationForDepartment(auth, dept!.id);\n\n  if (auth.role === Role.BusinessAdmin || auth.role === Role.LocationAdmin)\n  {\n    eventTypeOptions.push({ value: EventType.Clock, text: \"CLOCK\", color: \"green\"});\n  } else if (auth.role === Role.Admin) {\n    if (auth.employeeId === eventEmployeeId && ((adminAuth & AdminAuthorization.CanEditOwnClockEvents) === AdminAuthorization.CanEditOwnClockEvents)) {\n      eventTypeOptions.push({ value: EventType.Clock, text: \"CLOCK\", color: \"green\"});\n    } else if (auth.employeeId !== eventEmployeeId && ((adminAuth & AdminAuthorization.CanEditEmployeeClockEvents) === AdminAuthorization.CanEditEmployeeClockEvents)) {\n      eventTypeOptions.push({ value: EventType.Clock, text: \"CLOCK\", color: \"green\"});\n    }\n  }\n\n  if (auth.role === Role.BusinessAdmin || auth.role === Role.LocationAdmin) {\n    eventTypeOptions.push({value: EventType.Cover, text: \"COVER\", color: \"red\"});\n  } else if (auth.role === Role.Admin && ((adminAuth & AdminAuthorization.CanEditSchedules) === AdminAuthorization.CanEditSchedules)) {\n    eventTypeOptions.push({value: EventType.Cover, text: \"COVER\", color: \"red\"});\n  }\n\n  if (locSettings.ShowUnavailableEventType) {\n    eventTypeOptions.push({ value: EventType.Unavailable, text: \"UNAVAILABLE\", color: \"yellow\"});\n  }\n\n  if (locSettings.ShowVacationEventType) {\n    eventTypeOptions.push({ value: EventType.Vacation, text: \"VACATION\", color: \"yellow\"});\n  }\n\n  if (locSettings.ShowAbsentEventType) {\n    const peTypes = auth.payrollEvents.filter(pe => pe.positionIds.includes(selectedPosition.position.id) && !pe.name.startsWith(\"--\")).map(pe => {\n      return { value: pe.id, text: pe.name, color: 'yellow'};\n    });\n    return eventTypeOptions.concat(peTypes);\n  }\n\n  return eventTypeOptions;\n};\n\n\n// --------------------------------------------------------------------------------------\nconst getEventStatusOptionsList = (auth: AuthorizedItems, selectedPosition: SelectedPosition, eventEmployeeId: number, eventStatusId: EventStatus, isEditingExistingEvent: boolean): Option[] => {\n  const eventStatusOptions: Option[] = [];\n  const dept = authHelper.getDepartmentFromPositionId(auth, selectedPosition.position.id);\n  const adminAuth = authHelper.getAdminAuthorizationForDepartment(auth, dept!.id);\n\n  if (auth.role === Role.LocationAdmin || auth.role === Role.BusinessAdmin) {\n    eventStatusOptions.push({ value: EventStatus.Approved, text: \"APPROVED\", color: \"black\"});\n  } else if (auth.role === Role.Admin && ((adminAuth & AdminAuthorization.CanEditSchedules) === AdminAuthorization.CanEditSchedules)) {\n    eventStatusOptions.push({ value: EventStatus.Approved, text: \"APPROVED\", color: \"black\"});\n  }\n\n  eventStatusOptions.push({ value: EventStatus.Request, text: \"REQUEST\", color: \"red\"});\n\n  if (auth.role === Role.LocationAdmin || auth.role === Role.BusinessAdmin) {\n    eventStatusOptions.push({ value: EventStatus.RequestDenied, text: \"REQUEST-DENIED\", color: \"black\"});\n  } else if (auth.role === Role.Admin && ((adminAuth & AdminAuthorization.CanEditSchedules) === AdminAuthorization.CanEditSchedules)) {\n    eventStatusOptions.push({ value: EventStatus.RequestDenied, text: \"REQUEST-DENIED\", color: \"black\"});\n  }\n\n  if (isEditingExistingEvent) {\n    if (eventStatusOptions.filter(es => es.value === eventStatusId).length === 0) {\n      switch (eventStatusId) {\n        case EventStatus.Approved:\n          eventStatusOptions.push({ value: EventStatus.Approved, text: \"APPROVED\", color: \"black\"});\n          break;\n        case EventStatus.Request:\n          eventStatusOptions.push({ value: EventStatus.Request, text: \"REQUEST\", color: \"red\"});\n          break;\n        case EventStatus.RequestDenied:\n          eventStatusOptions.push({ value: EventStatus.RequestDenied, text: \"REQUEST-DENIED\", color: \"black\"});\n          break;\n      }\n    }\n  }\n\n  return eventStatusOptions;\n};\n\n","import {\n  AdminAuthorization,\n  AuthorizedDepartment,\n  AuthorizedItems,\n  AuthorizedLocation, AuthorizedPosition,\n  Role\n} from \"../orbital-interfaces/authorized-items\";\nimport EventType from \"../enums/EventType\";\nimport EventStatus from \"../enums/EventStatus\";\n\nexport interface SelectedPosition {\n  location: AuthorizedLocation;\n  position: AuthorizedPosition;\n}\n\n// --------------------------------------------------------------------------------------\nconst getLocSettingsForLocationId = (auth: AuthorizedItems, locationId: number) => {\n  if (!auth || !auth.locations || auth.locations.length === 0) {\n    throw new Error(\"getLocSettingsForLocationId: called with invalid auth parameter\");\n  }\n\n  if (locationId === 0) {\n    return auth.locations[0].settings;\n  }\n\n  return auth.locations.filter(loc => loc.id === locationId)[0].settings;\n};\n\n// --------------------------------------------------------------------------------------\nconst getLocationFromLocationId = (auth: AuthorizedItems, locationId: number) => {\n  if (!auth || !auth.locations || auth.locations.length === 0) {\n    return null;\n  }\n\n  if (locationId <= 0) {\n    return null;\n  }\n\n  return auth.locations.filter(l => l.id === locationId)[0];\n};\n\n// ---------------------------------------------------------------------------------------------------\n// Returns true if the user can edit their own events (they have a position within one of the admin's editable departments)\nconst canEditNonPositionEvents = (auth: AuthorizedItems, departmentId: number): boolean => {\n  const dept = auth.locations.flatMap(l => l.departments.filter(d => d.id === departmentId))[0];\n  if ((dept.adminAuth & AdminAuthorization.CanEditSchedules) !== AdminAuthorization.CanEditSchedules) {\n    return false;\n  }\n\n  return dept.positions.filter(p => p.hasPosition).length > 0;\n};\n\n// ---------------------------------------------------------------------------------------------------\nconst getPositionIdsForEmployee = (auth: AuthorizedItems): number[] => {\n  return auth.locations.flatMap(\n    l => l.departments.flatMap(\n      d => d.positions.filter(p => p.hasPosition).map(p => p.id)));\n};\n\n// --------------------------------------------------------------------------------------\nconst getDepartmentFromPositionId = (auth: AuthorizedItems, positionId: number) => {\n  if (!auth || !auth.locations || auth.locations.length === 0) {\n    return null;\n  }\n\n  if (positionId <= 0) {\n    return null;\n  }\n\n  let foundDepartment = null as AuthorizedDepartment | null;\n  auth.locations.flatMap(l => l.departments.map(d => {\n    const foundPosition = d.positions.filter(p => p.id === positionId);\n    if (foundPosition.length === 1) {\n      foundDepartment = d;\n      return d;\n    }\n\n    return null;\n  }));\n\n  return foundDepartment;\n};\n\n// ---------------------------------------------------------------------------------------------------\n// Returns true if the Admin can edit schedules for the passed-in department\nconst canEditSchedules = (auth: AuthorizedItems, locationId: number, departmentId: number) => {\n  return (auth.locations\n    .filter(l => l.id === locationId)[0].departments\n    .filter(d => d.id === departmentId)[0]\n    .adminAuth & AdminAuthorization.CanEditSchedules) === AdminAuthorization.CanEditSchedules;\n};\n\n// ---------------------------------------------------------------------------------------------------\n// Returns true if the event type is a type that is associated to a position (e.g., not an unavailable)\nconst isPositionSpecificEvent = (eventType: EventType) => {\n  return (\n    eventType === EventType.Shift ||\n    eventType === EventType.Cover ||\n    eventType === EventType.Clock ||\n    eventType === EventType.Absent\n  );\n};\n\n// ---------------------------------------------------------------------------------------------------\n// Returns true if 1) the user is an Admin and 2) they have a position in the passed-in department\nconst adminIsInDepartment = (auth: AuthorizedItems, departmentId: number) => {\n  if (auth.role !== Role.Admin) {\n    return false;\n  }\n\n  const dept = auth.locations.flatMap(l => l.departments.filter(d => d.id === departmentId))[0];\n  return dept.positions.filter(p => p.hasPosition).length > 0;\n};\n\n// ---------------------------------------------------------------------------------------------------\nconst getAdminAuthorizationForDepartment = (auth: AuthorizedItems, departmentId: number) => {\n  return auth.locations.flatMap(l => l.departments.filter(d => d.id === departmentId))[0].adminAuth;\n};\n\n// ---------------------------------------------------------------------------------------------------\nconst hasPosition = (auth: AuthorizedItems, positionId: number) => {\n  return auth.locations.flatMap(l => l.departments.flatMap(d => d.positions.filter(p => p.hasPosition && p.id === positionId))).length > 0;\n};\n\n// --------------------------------------------------------------------------------------\nconst getSelectedPositionWithLocId = (loc: AuthorizedLocation[], locId: number, posId: number) => {\n  const location = loc.filter(l => l.id === locId)[0];\n  const position = location.departments.flatMap(d => d.positions.filter(p => p.id === posId))[0];\n  return { location, position };\n};\n\n// --------------------------------------------------------------------------------------\nconst getSelectedPosition = (loc: AuthorizedLocation[], posId: number) => {\n  for(let locPosId = 0; locPosId < loc.length; locPosId++) {\n    for (let depPosId = 0; depPosId < loc[locPosId].departments.length; depPosId++) {\n      for (let posPosId = 0; posPosId < loc[locPosId].departments[depPosId].positions.length; posPosId++) {\n        if (loc[locPosId].departments[depPosId].positions[posPosId].id === posId) {\n          return { location: loc[locPosId], position: loc[locPosId].departments[depPosId].positions[posPosId] };\n        }\n      }\n    }\n  }\n\n  return { location: {} as AuthorizedLocation, position: {} as AuthorizedPosition };\n};\n\n// ---------------------------------------------------------------------------------------------------\nconst isShiftTypeEvent = (eventType: EventType, eventStatus: EventStatus) => {\n  return (\n    (eventType === EventType.Shift && eventStatus === EventStatus.Approved) ||\n    (eventType === EventType.Cover && eventStatus === EventStatus.Request) ||\n    (eventType === EventType.Cover && eventStatus === EventStatus.RequestDenied)\n  );\n};\n\nexport default {\n  getLocSettingsForLocationId,\n  getLocationFromLocationId,\n  getDepartmentFromPositionId,\n  getPositionIdsForEmployee,\n  isPositionSpecificEvent,\n  canEditSchedules,\n  getAdminAuthorizationForDepartment,\n  adminIsInDepartment,\n  canEditNonPositionEvents,\n  hasPosition,\n  isShiftTypeEvent,\n  getSelectedPositionWithLocId,\n  getSelectedPosition\n}\n","enum EventGroup {\n  All = -1,\n  Scheduled = -2,\n  DontWork = -3,\n  ClockAndSched = -6,\n  Custom = 0\n}\n\nexport default EventGroup;\n","import React, {CSSProperties, useContext} from 'react';\nimport {getDurationStringFromTimeSpan, getEventInformationStartEnd} from '../../util/time-helper';\nimport './EventCard.scss';\nimport {AuthorizedLocation} from '../../orbital-interfaces/authorized-items';\nimport {format, parseISO} from 'date-fns';\nimport {EventInformation} from '../../orbital-interfaces/TEC';\nimport {time} from 'ionicons/icons';\nimport {IonIcon} from '@ionic/react';\nimport {getEventEditAuthorization, EventEditAuthorization} from '../EditEvent/EditEventAuthorization';\nimport {AuthorizedItemsContext} from \"../../context/AuthorizedItemsContext\";\n\ninterface EventCardProps {\n  event: EventInformation,\n  location: AuthorizedLocation\n  multiLocation: boolean,\n  showEmployeeName: boolean\n  onEdit: (ev: EventInformation, eventEditAuth: EventEditAuthorization) => void;\n}\n\nconst colorMap: any = {\n  1: '#9CBA6A',\n  2: '#BFBFBF',\n  3: '#FFAD00',\n  4: '#C41A26',\n  6: '#677A46',\n  7: '#FFAD00'\n};\n\nconst statusTimeColor: any = {\n  1: { color: 'black'},\n  2: { color: '#C41A26'},\n  4: { color: '#BCBCBC'}\n};\n\nconst EventCard: React.FC<EventCardProps> = ({ location, event, multiLocation, showEmployeeName, onEdit }) => {\n  const { auth } = useContext(AuthorizedItemsContext);\n  const displayNameStyle: CSSProperties = showEmployeeName\n    ? { display: \"inline-block\" }\n    : { display: \"none\" };\n\n  const eventStartDate = parseISO(event.EventStart);\n  const multiDepartment = (multiLocation)\n    ? true\n    : location.departments.filter(d => d.positions.filter(p => p.hasPosition)).length > 1;\n\n  let posDisplay = '';\n  if (multiLocation && event.AbbreviatedLocationName) {\n    posDisplay = event.AbbreviatedLocationName + '/';\n  }\n\n  if (multiDepartment && event.AbbreviatedDepartmentName) {\n    posDisplay += event.AbbreviatedDepartmentName + '/';\n  }\n\n  posDisplay += event.PositionName;\n\n  const eventTypeBorder = { borderLeft: `6px solid ${colorMap[event.EventTypeId]} `};\n  const timeColor: CSSProperties = statusTimeColor[event.EventStatusId];\n\n  const onUserClick = () => {\n    const eventEditAuth = getEventEditAuthorization(event.EventTypeId, event.EventStatusId, event.EmployeeId, event.EventStart, event.EventEnd, event.LocationId, event.DepartmentId!, event.PositionId, event.IsConfirmed, auth);\n    if (eventEditAuth === null)\n    {\n      return;\n    }\n\n    onEdit(event, eventEditAuth);\n  };\n\n  return (\n      <button\n        className=\"event\"\n        onClick={() => {onUserClick()}}\n      >\n          <div  className=\"card-first-col\">\n            <div className=\"day-name\">{format(eventStartDate, 'EEE')} </div>\n            <div className=\"day-number\">{format(eventStartDate, 'dd')}</div>\n          </div>\n          <div className=\"card-second-col\" style={eventTypeBorder}>\n            <div className=\"time-row\">\n              {event.IsClockedIn && (<IonIcon icon={time} /> )}\n              <span style={timeColor}>\n                {getEventInformationStartEnd(event)}&nbsp;&nbsp;\n              </span>\n              {getDurationStringFromTimeSpan(event.EventDuration)}\n            </div>\n            <div className=\"name-row\" style={displayNameStyle}>{event.FirstName} {event.LastName}</div>\n            <div className=\"position-row\">\n              {posDisplay}&nbsp;&nbsp;\n              {event.Tag && `~${event.Tag}`}\n            </div>\n          </div>\n      </button>\n  );\n};\n\nexport default EventCard;\n","import React from 'react';\nimport './DailyNoteCard.scss';\nimport { AuthorizedLocation } from '../../orbital-interfaces/authorized-items';\nimport { format, parseISO } from 'date-fns';\nimport { DailyNotes } from '../../orbital-interfaces/DailyNotes';\n\ninterface EventCardProps {\n  note: DailyNotes,\n  location: AuthorizedLocation\n}\n\nconst EventCard: React.FC<EventCardProps> = ({ note }) => {\n  const noteDate = parseISO(note.EventStart);\n  const deptName = note.DepartmentId === -1 ? \"All Depts\" : note.DepartmentName;\n\n  return (\n      <button className=\"daily-note\">\n          <div  className=\"card-first-col\">\n            <div className=\"day-name\">{format(noteDate, 'EEE')} </div>\n            <div className=\"day-number\">{format(noteDate, 'dd')}</div>\n          </div>\n          <div className=\"card-second-col\">\n            <div className=\"first-row\">{deptName}: {note.Notes}</div>\n          </div>\n      </button>\n  );\n};\n\nexport default EventCard;\n","import React from 'react';\nimport './EventList.scss';\nimport EventCard from './EventCard';\nimport DailyNoteCard from './DailyNoteCard';\nimport { AuthorizedLocation } from '../../orbital-interfaces/authorized-items';\nimport './EventListSection.scss'\nimport { EventInformation } from '../../orbital-interfaces/TEC';\nimport { DailyNotes } from '../../orbital-interfaces/DailyNotes';\nimport {EventEditAuthorization} from \"../EditEvent/EditEventAuthorization\";\n\ninterface EventListSectionProps {\n  locations: AuthorizedLocation[];\n  events: EventInformation[];\n  notes: DailyNotes[];\n  header: string;\n  showEmployeeNames: boolean;\n  showTotalDuration: boolean;\n  onEdit: (ev: EventInformation, eventEditAuth: EventEditAuthorization) => void;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventListSection: React.FC<EventListSectionProps> = ({ locations, header, events, notes, showEmployeeNames, onEdit  }) => {\n  const multiLocation = locations.filter(l => l.departments.filter(d => d.positions.filter(p => p.hasPosition))).length > 1;\n\n  if (events.length === 0) {\n    return <div/>\n  }\n\n  return (\n    <>\n      <div className='header'>{header}</div>\n      <div className=\"daily-notes-list\">\n        {notes.map(note => (\n          <DailyNoteCard\n            key={note.DailyNoteId}\n            note={note}\n            location={locations.filter(l => l.id === note.LocationId)[0]}\n          />\n          )\n        )}\n      </div>\n      <div className=\"event-list\">\n        {events.map(ev =>  (\n          <EventCard\n            onEdit={onEdit}\n            key={ev.ScheduleEventId}\n            event={ev}\n            location={locations.filter(l => l.id === ev.LocationId)[0]}\n            multiLocation={multiLocation}\n            showEmployeeName={showEmployeeNames} />\n          )\n        )}\n      </div>\n    </>\n  )\n};\n\nexport default EventListSection;\n","import React from 'react';\nimport './EventList.scss';\nimport { LocationSettings } from '../../orbital-interfaces/authorized-items';\nimport { parseISO, format, addDays, isBefore } from 'date-fns';\nimport { KeyedCollection } from '../../util/KeyedCollection';\nimport EventListSection from './EventListSection';\nimport { getWeekStart, getDurationFromTimeSpan, getDurationString } from '../../util/time-helper';\nimport { EventInformation, HoursList } from '../../orbital-interfaces/TEC';\nimport { DailyNotes } from '../../orbital-interfaces/DailyNotes';\nimport { AuthorizedItems } from '../../orbital-interfaces/authorized-items';\nimport {EventEditAuthorization} from \"../EditEvent/EditEventAuthorization\";\n\ninterface EventListProps {\n  events: EventInformation[];\n  notes: DailyNotes[];\n  hoursPerDay: HoursList[];\n  listType: 'my' | 'requests' | 'all';\n  auth: AuthorizedItems;\n  onEdit: (ev: EventInformation, eventEditAuth: EventEditAuthorization) => void;\n}\n\ninterface SegmentItemList {\n  events: EventInformation[];\n  notes: DailyNotes[]\n}\n\n\n// --------------------------------------------------------------------------------------\nconst getSegmentsForMy = (events: EventInformation[], notes: DailyNotes[], locationSettings: LocationSettings, hoursPerDay: HoursList[]) => {\n  let segments = new KeyedCollection<SegmentItemList>();\n  if (events.length === 0 && notes.length === 0) {\n    return segments;\n  }\n\n  let weekStart = new Date(2199,1,1);\n  if (events.length > 0) {\n    weekStart = getWeekStart(parseISO(events[0].EventStart), locationSettings.DayWeekStartsOn, locationSettings.DayStartTime);\n  }\n\n  if (notes.length > 0) {\n    const notesStart = getWeekStart(parseISO(notes[0].EventStart), locationSettings.DayWeekStartsOn, locationSettings.DayStartTime);\n    if (isBefore(notesStart, weekStart)) {\n      weekStart = notesStart;\n    }\n  }\n\n  const weekEnd = addDays(weekStart, 6);\n  const header = `${format(weekStart, \"MMM d\")} - ${format(weekEnd, \"MMM d\")}`.toUpperCase() + ' ' +\n                  getDurationString(hoursPerDay.map(h => getDurationFromTimeSpan(h.time)).reduce((prev, cur) => prev + cur, 0));\n\n  segments.Add(header, { events, notes});\n  return segments;\n};\n\n// --------------------------------------------------------------------------------------\nconst getSegmentsForRequests = (events: EventInformation[], notes: DailyNotes[], employeeId: number) => {\n  let segments = new KeyedCollection<SegmentItemList>();\n  segments.Add('MY REQUESTS', { events: events.filter(ev => ev.EmployeeId === employeeId), notes: []});\n  segments.Add('CO-WORKERS',  { events: events.filter(ev => ev.EmployeeId !== employeeId), notes: []});\n  return segments;\n};\n\n// --------------------------------------------------------------------------------------\nconst getSegmentsForAll = (events: EventInformation[], notes: DailyNotes[]) => {\n  let segments = new KeyedCollection<SegmentItemList>();\n  events.map(ev => {\n    const thisDate = format(parseISO(ev.EventStart).setHours(0,0,0,0), 'MMM dd, yyyy').toUpperCase();\n    if (!segments.ContainsKey(thisDate)) {\n      const thisDatesNotes = notes.filter(n => format(parseISO(n.EventStart).setHours(0,0,0,0), 'MMM dd, yyyy').toUpperCase() === thisDate);\n      segments.Add(thisDate, { notes: thisDatesNotes, events: []});\n    }\n\n    segments.Item(thisDate).events.push(ev);\n    return thisDate;\n  });\n\n  return segments;\n};\n\n// --------------------------------------------------------------------------------------\nconst EventList: React.FC<EventListProps> = ({ events, listType, notes, hoursPerDay, auth, onEdit }) => {\n\n  if (events.length === 0) {\n    return <div>No Events</div>\n  }\n\n  let segments: KeyedCollection<SegmentItemList> = new KeyedCollection<SegmentItemList>();\n  switch(listType) {\n    case 'requests':\n      segments = getSegmentsForRequests(events, notes, auth.employeeId);\n      break;\n    case 'my':\n      segments = getSegmentsForMy(events, notes, auth.locations[0].settings, hoursPerDay);\n      break;\n    default:\n      segments = getSegmentsForAll(events, notes);\n      break;\n  }\n\n  return (\n    <>\n    {segments.Keys().map(seg => (\n      <EventListSection\n          onEdit={onEdit}\n          key={seg}\n          header={seg}\n          locations={auth.locations}\n          events={segments.Item(seg).events}\n          notes={segments.Item(seg).notes}\n          showEmployeeNames={listType !== 'my' && seg !== 'MY REQUESTS'}\n          showTotalDuration={listType !== 'requests'}\n      />\n    ))}\n    </>\n  )\n};\n\nexport default EventList;\n","import EventGroup from '../enums/EventGroup';\nimport {EventFilter} from \"../orbital-interfaces/EventFilter\";\nimport {AuthorizedItems} from \"../orbital-interfaces/authorized-items\";\nimport EventType from \"../enums/EventType\";\n\nexport interface EventTypeOption {\n  value: number;\n  text: string;\n  color: string;\n}\n\nexport const getFilterByEventGroup = (f: EventFilter, group: EventGroup): EventFilter => {\n  return group === EventGroup.Custom\n    ? { ...f, eventTypeId: -1, eventStatusId: -1}\n    : { ...f, eventTypeId: group, eventStatusId: group };\n}\n\nexport const getEventTypeOptions = (auth: AuthorizedItems, filter?: EventFilter): EventTypeOption[] => {\n  if (!auth || !auth.locations || auth.locations.length === 0) {\n    return [];\n  }\n\n  const locSettings = auth.locations[0].settings;\n\n  const eventTypeOptions: EventTypeOption[] = [\n    {\n      value: EventType.Shift,\n      text: \"SHIFT\",\n      color: \"green\"\n    },\n    {\n      value: EventType.Cover,\n      text: \"COVER\",\n      color: \"red\",\n    },\n  ];\n\n  if (filter) {\n    eventTypeOptions.unshift({ value: -1, text: \"ALL\", color: \"black\"});\n  }\n\n  eventTypeOptions.push({ value: EventType.Clock, text: \"CLOCK\", color: \"green\"});\n\n\n  if (locSettings.ShowUnavailableEventType) {\n    eventTypeOptions.push({ value: EventType.Unavailable, text: \"UNAVAILABLE\", color: \"yellow\"});\n  }\n\n  if (locSettings.ShowVacationEventType) {\n    eventTypeOptions.push({ value: EventType.Vacation, text: \"VACATION\", color: \"yellow\"});\n  }\n\n  if (locSettings.ShowAbsentEventType) {\n    const peTypes: EventTypeOption[] = [];\n    const p2l: any = {};\n    auth.locations.flatMap(l => l.departments.flatMap(d => d.positions.map(p => p2l[p.id] = l)));\n\n    auth.payrollEvents.map(pe => {\n      if (!pe.name.startsWith(\"--\")) {\n        if (filter) {\n          if (pe.positionIds.some(id => filter.positionIds.indexOf(id) >= 0)) {\n            peTypes.push({value: pe.id, text: `${pe.name} (${p2l[pe.positionIds[0]].name})`, color: \"yellow\"});\n          };\n        } else {\n            peTypes.push({value: pe.id, text: `${pe.name} (${p2l[pe.positionIds[0]].name})`, color: \"yellow\"});\n        }\n\n        return pe;\n      } else {\n        return null;\n      }\n    });\n    peTypes.sort((p1, p2) => { return p1.text > p2.text ? 1 : -1;});\n    return eventTypeOptions.concat(peTypes);\n  }\n\n  return eventTypeOptions;\n}\n","const arrayHelper = {\n\n  // ------------------------------------------------------------------------------------\n  areEqual: <T extends {}>(a1: T[], a2: T[]): boolean => {\n    if ((!a1 && a2) || (a1 && !a2)) {\n      return false;\n    }\n\n    if (!a1 && !a2) {\n      return true;\n    }\n\n    if (a1.length !== a2.length) {\n      return false;\n    }\n\n    for (var i = 0 ; i < a1.length ; i++) {\n      if (!arrayHelper.contains(a2, a1[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n\n  // ------------------------------------------------------------------------------------\n  contains: <T extends {}>(arr: T[], val: T): boolean => {\n    for (let i = 0 ; i < arr.length; i++) {\n      if (arr[i] === val) {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  containsAny: <T extends {}>(arr1: T[], arr2: T[]): boolean => {\n    for (let i = 0 ; i < arr1.length; i++) {\n      if (arr2.includes(arr1[i]))\n      {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  // ------------------------------------------------------------------------------------\n  unique: <T extends {}>(arr: T[]): T[] => {\n    let newArr: T[] = [];\n    // eslint-disable-next-line\n    arr.map(item => {\n      if (!arrayHelper.contains(newArr, item)) {\n        newArr.push(item);\n      }\n    });\n\n    return newArr;\n  },\n\n  // ------------------------------------------------------------------------------------\n  uniqueObject: <T extends {}>(arr: T[], filt: (o: T, n: T) => boolean): T[] => {\n    let newArr: T[] = [];\n    // eslint-disable-next-line\n    arr.map(item => {\n      let found = false;\n      for (let i = 0; i < newArr.length; i++) {\n        if (filt(newArr[i], item)) {\n          found = true;\n          break;\n        }\n      }\n\n      if (!found)\n      {\n        newArr.push(item);\n      }\n    });\n\n    return newArr;\n  }\n\n}\n\nexport default arrayHelper;\n","import React, { useState, useEffect } from 'react';\nimport {IonButton, IonButtons, IonIcon, IonContent, IonFooter, IonHeader, IonItem, IonLabel, IonSelect, IonSelectOption, IonTitle, IonToolbar} from '@ionic/react';\nimport {EventFilter, initialEventFilter} from '../../orbital-interfaces/EventFilter'\nimport { arrowRoundBack } from 'ionicons/icons';\nimport './ScheduleFilterModal.scss';\nimport EventGroup from '../../enums/EventGroup';\nimport {getFilterByEventGroup, getEventTypeOptions } from '../../util/event-helper';\nimport {AuthorizedItems} from \"../../orbital-interfaces/authorized-items\";\nimport arrayHelper from '../../util/array-helper';\n\ninterface ScheduleFilterModalProps {\n  filter: EventFilter;\n  auth: AuthorizedItems;\n  onDismissModal: (f: EventFilter, filterApplied: boolean) => void;\n  onCancelModal: () => void;\n  isOpen: boolean;\n}\n\n// --------------------------------------------------------------------------------------\nconst ScheduleFilterModal: React.FC<ScheduleFilterModalProps> = ({ auth, filter, onDismissModal, onCancelModal , isOpen}) => {\n  const [myFilter, setMyFilter] = useState(filter);\n  const [showCustomEventTypes, setShowCustomEventTypes] = useState(false);\n  const [eventGroup, setEventGroup] = useState(EventGroup.ClockAndSched);\n  const [eventTypeList, setEventTypeList] = useState(getEventTypeOptions(auth, filter));\n  const [locationIds, setLocationIds] = useState(auth.locations.map(l => \"\" + l.id));\n  const [departmentIds, setDepartmentIds] = useState(auth.locations.flatMap(l => l.departments).map(d => \"\" + d.id));\n  const [positionIds, setPositionIds] = useState(auth.locations.flatMap(l => l.departments).flatMap(d => d.positions).map(p => \"\" + p.id));\n  const [isDirty, setIsDirty] = useState(false);\n\n  useEffect(() => {\n    setMyFilter(filter);\n  }, [filter]);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsDirty(false);\n    }\n  }, [isOpen]);\n\n  const getDefaultFilter = (auth: AuthorizedItems) => {\n    return {\n      ...initialEventFilter,\n      start: filter.start,\n      end: filter.end,\n      tagId: -1,\n      positionIds: auth.locations.flatMap(l => l.departments.flatMap(d =>  d.positions.map(p => p.id))),\n      dnLocIds: auth.locations.map(l => l.id),\n      settingsLocId: auth.locations[0].id\n    }\n  };\n\n  const onReset = () => {\n    setShowCustomEventTypes(false);\n    setEventGroup(EventGroup.ClockAndSched);\n    setEventTypeList(getEventTypeOptions(auth, filter));\n    setLocationIds(auth.locations.map(l => \"\" + l.id));\n    setDepartmentIds(auth.locations.flatMap(l => l.departments).map(d => \"\" + d.id));\n    setPositionIds(auth.locations.flatMap(l => l.departments).flatMap(d => d.positions).map(p => \"\" + p.id));\n    setMyFilter(getDefaultFilter(auth));\n\n    setIsDirty(true);\n  };\n\n  const onEventGroupSelect = (val: EventGroup) => {\n    setEventGroup(val);\n    setIsDirty(true);\n    setMyFilter(getFilterByEventGroup(myFilter, val));\n    setShowCustomEventTypes(val === EventGroup.Custom);\n  };\n\n  const onSetLocations = (locIds: string[]) => {\n    setLocationIds(locIds);\n    setIsDirty(true);\n    setDepartmentIds(auth.locations\n      .filter(l => locIds.indexOf(l.id.toString()) >= 0)\n      .flatMap(l => l.departments)\n      //.filter(d => departmentIds.indexOf(d.id.toString()) >=0)\n      .map(d => \"\" + d.id));\n    setEventTypeList(getEventTypeOptions(auth, myFilter));\n  };\n\n  const onSetDepartmentIds = (deptIds: string[]) => {\n    setDepartmentIds(deptIds);\n    setIsDirty(true);\n    setPositionIds(auth.locations\n      .filter(l => locationIds.indexOf(l.id.toString()) >= 0)\n      .flatMap(l => l.departments)\n      //.filter(d => deptIds.length > 0 && deptIds.indexOf(d.id.toString()) >= 0)\n      .flatMap(d => d.positions)\n      //.filter(p => positionIds.length > 0 && positionIds.indexOf(p.id.toString()) >= 0)\n      .map(p => \"\" + p.id));\n  };\n\n  const onSetPositionIds = (posIds: string[]) => {\n    setPositionIds(posIds);\n    setIsDirty(true);\n  };\n\n  const onCloseModal = () => {\n    const selectedPositionIds = positionIds.map(p => parseInt(p));\n    const defaultFilter = getDefaultFilter(auth);\n    const returnedFilter = { ...myFilter, positionIds: selectedPositionIds};\n    const filterApplied = !(\n      defaultFilter.eventTypeId === returnedFilter.eventTypeId &&\n      defaultFilter.eventStatusId === returnedFilter.eventStatusId &&\n      defaultFilter.tagId === returnedFilter.tagId &&\n      arrayHelper.areEqual(defaultFilter.positionIds, returnedFilter.positionIds));\n\n    onDismissModal(returnedFilter, filterApplied);\n  };\n\n  const onCancel = () => {\n    onCancelModal();\n  };\n\n  return (\n    <>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonButton onClick={onCancel}>\n                <IonIcon icon={arrowRoundBack} mode=\"md\" slot=\"icon-only\" />\n            </IonButton>\n          </IonButtons>\n          <IonTitle>\n            Filter\n          </IonTitle>\n          <IonButtons slot=\"end\">\n            <IonButton onClick={onReset}>\n                RESET\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent class=\"outer-content\">\n\n        <IonItem>\n          <IonLabel>Events</IonLabel>\n          <IonSelect\n            value={eventGroup}\n            onIonChange={(e) => onEventGroupSelect(e.detail.value)}\n            interface=\"action-sheet\">\n            <IonSelectOption value={EventGroup.ClockAndSched}>Clock + Sched</IonSelectOption>\n            <IonSelectOption value={EventGroup.Scheduled}>Scheduled</IonSelectOption>\n            <IonSelectOption value={EventGroup.DontWork}>Don't Work</IonSelectOption>\n            <IonSelectOption value={EventGroup.Custom}>Custom</IonSelectOption>\n            <IonSelectOption value={EventGroup.All}>All</IonSelectOption>\n          </IonSelect>\n        </IonItem>\n\n        {showCustomEventTypes && (\n          <IonItem>\n            <IonLabel>Type</IonLabel>\n            <IonSelect\n              value={myFilter.eventTypeId}\n              onIonChange={(e) => setMyFilter({...myFilter, eventTypeId: e.detail.value})}\n              interface=\"action-sheet\">\n              {eventTypeList.map((et) => (\n                <IonSelectOption key={et.value} value={et.value}>{et.text}</IonSelectOption>\n              ))}\n            </IonSelect>\n          </IonItem>\n        )}\n\n        {showCustomEventTypes && (\n          <IonItem>\n            <IonLabel>Status</IonLabel>\n            <IonSelect\n              value={myFilter.eventStatusId}\n              onIonChange={(e) => setMyFilter({...myFilter, eventStatusId: e.detail.value})}\n              interface=\"action-sheet\">\n              <IonSelectOption value={-1}>All</IonSelectOption>\n              <IonSelectOption value={1}>Approved</IonSelectOption>\n              <IonSelectOption value={2}>Request</IonSelectOption>\n              <IonSelectOption value={4}>Request Denied</IonSelectOption>\n            </IonSelect>\n          </IonItem>\n        )}\n\n        <IonItem>\n          <IonLabel>Tags</IonLabel>\n          <IonSelect\n            value={myFilter.tagId || -1}\n            onIonChange={(e) => { setMyFilter({...myFilter, tagId: e.detail.value}); setIsDirty(true);}}\n            interface=\"action-sheet\">\n              <IonSelectOption key={-1} value={-1}>ALL</IonSelectOption>\n              {auth.tags.map((tag) => (\n                <IonSelectOption key={tag.id} value={tag.id}>~{tag.name}</IonSelectOption>\n              ))}\n          </IonSelect>\n        </IonItem>\n\n        {auth.locations.length > 1 && (\n          <IonItem>\n            <IonLabel>Locations</IonLabel>\n            <IonSelect\n              multiple={true}\n              onIonChange={(e) => onSetLocations(e.detail.value)}\n              value={locationIds}\n            >\n                {auth.locations.map((loc) => (\n                  <IonSelectOption key={loc.id} value={loc.id.toString()}>{loc.name}</IonSelectOption>\n                ))}\n            </IonSelect>\n          </IonItem>\n        )}\n\n        {auth.locations.flatMap(l => l.departments).length > 1 && (\n          <IonItem>\n            <IonLabel>Departments</IonLabel>\n            <IonSelect\n              multiple={true}\n              onIonChange={(e) => onSetDepartmentIds(e.detail.value)}\n              value={departmentIds}\n            >\n                {auth.locations.filter(l => locationIds.indexOf(l.id.toString()) >= 0).map((loc) =>\n                  loc.departments.map(dept => (\n                    <IonSelectOption key={dept.id} value={dept.id.toString()}>{loc.abbr}/{dept.name}</IonSelectOption>\n                  ))\n                )}\n            </IonSelect>\n          </IonItem>\n        )}\n\n        {auth.locations.flatMap(l => l.departments).flatMap(d => d.positions).length > 1 && (\n          <IonItem>\n            <IonLabel>Positions</IonLabel>\n            <IonSelect\n              multiple={true}\n              onIonChange={(e) => onSetPositionIds(e.detail.value)}\n              value={positionIds}\n            >\n                {auth.locations\n                  .filter(l => locationIds.indexOf(l.id.toString()) >= 0)\n                  .flatMap(l => l.departments)\n                  .filter(d => departmentIds.indexOf(d.id.toString()) >= 0)\n                  .map(dept => dept.positions.map(pos => (\n                  <IonSelectOption key={pos.id} value={pos.id.toString()}>{pos.name}</IonSelectOption>\n                )))}\n            </IonSelect>\n          </IonItem>\n        )}\n\n        <IonButton\n          className=\"apply-button\"\n          expand=\"block\"\n          onClick={onCloseModal}\n          disabled={!isDirty}\n        >\n          APPLY FILTER\n        </IonButton>\n\n      </IonContent>\n\n      <IonFooter>\n        <IonToolbar />\n      </IonFooter>\n    </>\n  )\n};\n\nexport default ScheduleFilterModal;\n","import { IonRefresher, IonRefresherContent } from '@ionic/react';\nimport React, { useRef } from \"react\";\nimport { RefresherEventDetail } from '@ionic/core';\n\nfunction useIonicRefresher(doRefresh: (event: CustomEvent<RefresherEventDetail>) => void) {\n  const ionRefresherRef = useRef<HTMLIonRefresherElement>(null);\n\n  // ----------------------------------------------------------------------------------------------\n  const ionicRefresherJsx = (\n    <IonRefresher slot=\"fixed\" ref={ionRefresherRef} onIonRefresh={doRefresh}>\n      <IonRefresherContent\n        pullingText=\"Pull down to refresh\"\n        refreshingSpinner=\"dots\"\n        refreshingText=\"Refreshing...\"\n        style={{backgroundColor: 'white'}}\n      />\n    </IonRefresher>\n  );\n\n  const retVal = { ionicRefresherJsx };\n\n  return { ...retVal };\n}\n\nexport default useIonicRefresher;\n","\nexport enum RecurrenceType\n{\n  Daily = 0,\n  Weekly = 1,\n  MonthlyByDayOfMonth = 2,\n  MonthlyByDayOfWeek = 3,\n  Yearly = 4\n}\n","import React, {useEffect, useState} from 'react';\nimport {IonCol, IonInput, IonLabel, IonRow, IonSelect, IonSelectOption,} from '@ionic/react';\nimport './EventTypeStatusEditor.scss';\nimport {AuthorizedItems, LocationSettings, Role, TimeFormat} from \"../../../orbital-interfaces/authorized-items\";\nimport {getEventTypeOptions} from '../../../util/event-helper';\nimport EventType from '../../../enums/EventType';\nimport EventStatus from '../../../enums/EventStatus';\nimport {EditorReducerAction, EditorValues} from '../../EditEvent/EditEventModalState';\nimport {getMinutesFromTimeString, getTimeStringFromMinutes} from \"../../../util/time-helper\";\nimport authHelper from '../../../util/authitems-helper';\nimport {Option} from \"../EditEventAuthorization\";\n\ninterface EventTypeStatusEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n  eventTypes: Option[];\n  eventStatuses: Option[];\n}\n\n\n// --------------------------------------------------------------------------------------\nconst EventTypeStatusEditor: React.FC<EventTypeStatusEditorProps> = ({\n      auth,\n      editorValues,\n      update,\n      eventTypes,\n      eventStatuses}) => {\n  const [eventTypeList, setEventTypeList] = useState(getEventTypeOptions(auth, undefined));\n  const [selectedEventTypeId, setSelectedEventTypeId] = useState(EventType.Shift);\n  const [eventStatusList, setEventStatusList] = useState(null as Option[] | null);\n  const [selectedEventStatusId, setSelectedEventStatusId] = useState(EventStatus.Approved);\n  const [absentHoursPlaceholderText, setAbsentHoursPlaceholderText] = useState(\"Ex: 00:00\");\n  const [locSettings, setLocSettings] = useState(null as LocationSettings | null);\n  const [absentTimeString, setAbsentTimeString] = useState(null as string | null);\n\n  useEffect(() => {\n    setEventTypeList(eventTypes);\n    setEventStatusList(eventStatuses);\n\n\n    // If this is an employee and we're creating an event\n    if (auth.role === Role.Employee && editorValues.scheduleEventId <= 0 && selectedEventStatusId !== EventStatus.Request) {\n      update({\n        type: \"TYPESTATUS-UPDATED\",\n        eventType: selectedEventTypeId,\n        eventStatus: EventStatus.Request,\n        absentId: editorValues.absentId,\n        absentTimeMinutes: editorValues.absentTimeMinutes\n      });\n    }\n\n    if (editorValues.absentId) {\n      setSelectedEventTypeId(editorValues.absentId);\n    } else {\n      setSelectedEventTypeId(editorValues.eventType);\n    }\n\n    setSelectedEventStatusId(eventStatuses[0].value);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [auth, editorValues.eventType, editorValues.eventStatus, editorValues.position, editorValues.absentId, editorValues.scheduleEventId]);\n\n  useEffect(() => {\n    if (locSettings) {\n      setAbsentTimeString(editorValues.absentTimeMinutes === null\n        ? null\n        : getTimeStringFromMinutes(locSettings, editorValues.absentTimeMinutes));\n    }\n  }, [locSettings, editorValues.absentTimeMinutes]);\n\n  useEffect(() => {\n    if ((locSettings && (editorValues.locationId === locSettings.LocationId)))\n    {\n      return;\n    }\n\n    //if (!editorValues.locationId) {\n    //  return;\n    //}\n\n    if (!auth || !auth.locations || auth.locations.length === 0) {\n      return;\n    }\n\n    const newLocSettings = authHelper.getLocSettingsForLocationId(auth, editorValues.locationId);\n    setLocSettings(newLocSettings);\n    setAbsentHoursPlaceholderText((newLocSettings.TimeFormat === TimeFormat.HoursMinutes)\n      ? \"Ex: 00:00\"\n      : \"Ex: 0.0\");\n\n    // eslint-disable-next-line\n  }, [editorValues.locationId]);\n\n\n  useEffect(() => {\n    if (editorValues.scheduleEventId > 0) {\n      setSelectedEventStatusId(editorValues.eventStatus);\n    }\n  }, [editorValues.eventStatus, editorValues.scheduleEventId]);\n\n  const onEventTypeChange = (newEventType: EventType) => {\n    if (newEventType === editorValues.eventType) {\n      return;\n    }\n    setSelectedEventTypeId(newEventType);\n\n    const newAbsentMinutes = (newEventType !== EventType.Absent && newEventType < 100)\n      ? null\n      : editorValues.absentTimeMinutes;\n\n    update({\n      type: 'TYPESTATUS-UPDATED',\n      eventType: newEventType,\n      eventStatus: selectedEventStatusId,\n      absentId: (newEventType >= 100) ? newEventType : undefined,\n      absentTimeMinutes: newAbsentMinutes\n    });\n  };\n\n  const onEventStatusChange = (newEventStatus: EventStatus) => {\n    if (newEventStatus === editorValues.eventStatus) {\n      return;\n    }\n\n    setSelectedEventStatusId(newEventStatus);\n    update({\n      type: 'TYPESTATUS-UPDATED',\n      eventType: selectedEventTypeId,\n      eventStatus: newEventStatus,\n      absentId:(selectedEventTypeId >= 100) ? selectedEventTypeId : undefined,\n      absentTimeMinutes: editorValues.absentTimeMinutes\n    });\n  };\n\n  const onAbsentTimeChange = (input?: string | null) => {\n    if (input === undefined)\n    {\n      input = null;\n    }\n\n    if (input == null) {\n      update({\n        type: 'TYPESTATUS-UPDATED',\n        eventType: selectedEventTypeId,\n        eventStatus: selectedEventStatusId,\n        absentId:(selectedEventTypeId >= 100) ? selectedEventTypeId : undefined,\n        absentTimeMinutes: null\n      });\n\n      return;\n    }\n\n    const min = getMinutesFromTimeString(locSettings!, input!);\n    if (min === editorValues.absentTimeMinutes) {\n      return;\n    }\n\n    update({\n      type: 'TYPESTATUS-UPDATED',\n      eventType: selectedEventTypeId,\n      eventStatus: selectedEventStatusId,\n      absentId:(selectedEventTypeId >= 100) ? selectedEventTypeId : undefined,\n      absentTimeMinutes: min\n    });\n  };\n\n  if (locSettings === null) {\n    return (\n      <div>Loading...</div>\n    )\n  }\n\n  return (\n    <>\n        <IonRow className=\"edit-row\">\n          <IonCol size=\"3\">\n            <IonLabel className=\"label\">Type</IonLabel>\n          </IonCol>\n          <IonCol size=\"9\">\n            <IonSelect\n                className=\"select\"\n                interface=\"popover\"\n                disabled={editorValues.isReadonly}\n                value={selectedEventTypeId}\n                onIonChange={(e) => { onEventTypeChange(e.detail.value)}}\n              >\n              {eventTypeList.map((et) => (\n                <IonSelectOption key={et.value} value={et.value}>{et.text}</IonSelectOption>\n              ))}\n            </IonSelect>\n          </IonCol>\n        </IonRow>\n\n      <IonRow className=\"edit-row\">\n          <IonCol size=\"3\">\n            <IonLabel className=\"label\">Status</IonLabel>\n          </IonCol>\n          <IonCol size=\"9\">\n            <IonSelect\n                className=\"select\"\n                interface=\"popover\"\n                disabled={editorValues.isReadonly || (auth.role === Role.Employee && editorValues.scheduleEventId <= 0)}\n                value={selectedEventStatusId}\n                onIonChange={(e) => { onEventStatusChange(e.detail.value)}}\n              >\n              {eventStatusList && eventStatusList.map((es) => (\n                <IonSelectOption key={es.value} value={es.value}>{es.text}</IonSelectOption>\n              ))}\n            </IonSelect>\n          </IonCol>\n        </IonRow>\n\n        <IonRow className={selectedEventTypeId > 100 ? \"visible edit-row\" : \"invisible\"}>\n          <IonCol size=\"3\">\n            <IonLabel className=\"label\">Hours</IonLabel>\n          </IonCol>\n          <IonCol size=\"9\">\n              <IonInput\n                className=\"input-textbox\"\n                placeholder={absentHoursPlaceholderText}\n                disabled={editorValues.isReadonly}\n                value={absentTimeString}\n                onIonChange={(e) => { if (e.detail.value) { setAbsentTimeString(e.detail.value) }}}\n                onIonBlur={() => {onAbsentTimeChange(absentTimeString)}}\n              />\n          </IonCol>\n        </IonRow>\n    </>\n  );\n};\n\nexport default EventTypeStatusEditor;\n","import React, { useState, useEffect } from 'react';\nimport {IonLabel, IonSelect, IonRow, IonCol, IonSelectOption} from '@ionic/react';\nimport './EventPositionEditor';\nimport {AuthorizedItems, AuthorizedLocation, AuthorizedPosition} from \"../../../orbital-interfaces/authorized-items\";\nimport { EditorValues, EditorReducerAction } from '../EditEventModalState';\nimport authHelper from '../../../util/authitems-helper';\n\ninterface EventPositionEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\ninterface Option {\n  id: number;\n  name: string;\n}\n\n\n// --------------------------------------------------------------------------------------\nconst createPositionList = (loc: AuthorizedLocation[]): Option[] => {\n  const isMultiLoc = loc.length > 1;\n  return loc.flatMap(l => l.departments.flatMap(d => d.positions.map((p) => {\n    const isMultiDep = l.departments.length > 1;\n    let name = \"\";\n    if (isMultiLoc) {\n      name += (l.abbr ? l.abbr : l.name) + \"/\";\n    }\n\n    if (isMultiDep) {\n      name += (d.abbr ? d.abbr : d.name) + \"/\";\n    }\n\n    name += p.name;\n    return { id: p.id, name: name};\n  })));\n};\n\n// --------------------------------------------------------------------------------------\nconst EventPositionEditor: React.FC<EventPositionEditorProps> = ({ auth, editorValues, update }) => {\n  const [selectedPosition, setSelectedPosition] = useState({location: {} as AuthorizedLocation, position: {} as AuthorizedPosition});\n  const [positionList, setPositionList] = useState([] as Option[] );\n\n  useEffect(() => {\n    if (auth && auth.locations && auth.locations.length > 0) {\n      if (editorValues.position && editorValues.scheduleEventId > 0) {\n        const selPos = authHelper.getSelectedPositionWithLocId(auth.locations, editorValues.position.location.id, editorValues.position.position.id);\n        if (selPos.position.id !== selectedPosition.position.id) {\n          setSelectedPosition(selPos);\n        }\n      } else {\n        const selPos = authHelper.getSelectedPositionWithLocId(auth.locations, auth.locations[0].id, auth.locations[0].departments[0].positions[0].id);\n        setSelectedPosition(selPos);\n      }\n    }\n    // eslint-disable-next-line\n  }, [editorValues.position, auth]);\n\n  useEffect(() => {\n    if (auth && auth.locations && auth.locations.length > 0) {\n      setPositionList(createPositionList(auth.locations));\n    }\n  }, [auth]);\n\n  const updatePosition = (posId: number) => {\n    const selected = authHelper.getSelectedPosition(auth.locations, posId);\n    if (selected.position.id === editorValues.position.position.id) {\n      return;\n    }\n\n    setSelectedPosition(selected);\n    update({ type: \"POSITION-UPDATED\", selectedPosition: selected});\n  };\n\n  return (\n    <IonRow className=\"edit-row\">\n      <IonCol size=\"3\">\n        <IonLabel className=\"label\">Position</IonLabel>\n      </IonCol>\n      <IonCol size=\"9\">\n        <IonSelect\n            className=\"select\"\n            interface=\"popover\"\n            disabled={editorValues.isReadonly}\n            value={selectedPosition.position.id}\n            onIonChange={(e) => updatePosition(e.detail.value)}\n            >\n          {positionList.map(p => (\n            <IonSelectOption key={p.id} value={p.id}>{p.name}</IonSelectOption>\n          ))}\n        </IonSelect>\n      </IonCol>\n    </IonRow>\n  );\n};\n\nexport default EventPositionEditor;\n","import { EmployeeSort } from './../orbital-interfaces/authorized-items';\nimport { Employee } from '../orbital-interfaces/Employee';\nimport { ApplicationUser } from '../context/ApplicationUserContext';\nimport { formatDateTimeAsMvcString } from '../util/time-helper';\nimport apiHelper from './OrbitalApiHelper';\n\nconst getEmployeesByLocationIdPositionIdAndActiveDateRange = async (\n  user: ApplicationUser,\n  locId: number,\n  posId: number,\n  start: Date,\n  end: Date,\n  sort: EmployeeSort) => {\n\n  const data = {\n    locId,\n    posId,\n    start: formatDateTimeAsMvcString(start),\n    end: formatDateTimeAsMvcString(end),\n    sort\n  };\n\n  return await apiHelper.post(user, 'api/v2/employees/at-position', data) as Employee[];\n}\n\nexport default {\n  getEmployeesByLocationIdPositionIdAndActiveDateRange\n}\n","import React, { useState, useContext, useEffect } from 'react';\nimport { IonLabel, IonSelect, IonRow, IonCol, IonSelectOption } from '@ionic/react';\nimport './EventEmployeeEditor';\nimport {AuthorizedItems} from \"../../../orbital-interfaces/authorized-items\";\nimport { Employee } from '../../../orbital-interfaces/Employee';\nimport employeeAPI from '../../../api/EmployeesAPI';\nimport { ApplicationUserContext } from '../../../context/ApplicationUserContext';\nimport { parseISO } from 'date-fns';\nimport { EditorValues, EditorReducerAction } from '../../EditEvent/EditEventModalState';\n\ninterface EventEmployeeEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventEmployeeEditor: React.FC<EventEmployeeEditorProps> = ({ auth, editorValues, update }) => {\n  const [employeeList, setEmployeeList] = useState([] as Employee[]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [selectedEmployeeId, setSelectedEmployeeId] = useState(-1);\n  const { user } = useContext(ApplicationUserContext);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    // eslint-disable-next-line\n    if (user && user.isLoggedin && editorValues.scheduleEventId !== -1) {\n      setIsLoading(true);\n      getEmployees(editorValues);\n    }\n    // eslint-disable-next-line\n  }, [user, editorValues.position, editorValues.scheduleEventId]);\n\n  // --------------------------------------------------------------------------------------\n  const onChange = (employeeId: number) => {\n    if (employeeId === -5 || employeeId === editorValues.employee.id) {\n      return;\n    }\n\n    setSelectedEmployeeId(employeeId);\n    const emp = employeeList.filter(e => e.EmployeeId === employeeId)[0];\n    if (employeeId === -1) {\n      update({ type: \"EMPLOYEE-UPDATED\", employee: { id: -1, name: \"SELECT EMPLOYEE\"}});\n    } else {\n      update({ type: \"EMPLOYEE-UPDATED\", employee: { id: employeeId, name: emp.FullName}});\n    }\n  };\n\n  // --------------------------------------------------------------------------------------\n  const getEmployees = (ev: EditorValues) => {\n    employeeAPI.getEmployeesByLocationIdPositionIdAndActiveDateRange(\n      user,\n      editorValues.position.location.id,\n      editorValues.position.position.id,\n      parseISO(editorValues.eventStart),\n      parseISO(editorValues.eventEnd),\n      editorValues.position.location.settings.EmployeeSort).then(employees => {\n        setEmployeeList(employees);\n        const empIds = employees.map(e => e.EmployeeId);\n\n        if (editorValues.scheduleEventId === 0 && empIds.includes(auth.employeeId)) {\n          setSelectedEmployeeId(auth.employeeId);\n          const thisEmp = employees.filter(e => e.EmployeeId === auth.employeeId)[0];\n          update({ type: \"EMPLOYEE-UPDATED\", employee: { id: thisEmp.EmployeeId, name: thisEmp.FullName}});\n        } else {\n          const newSelectedEmployeeId = (empIds.includes(ev.employee.id))\n            ? ev.employee.id\n            : -1;\n\n          setSelectedEmployeeId(newSelectedEmployeeId);\n        }\n\n        setIsLoading(false);\n      });\n  };\n\n  if (isLoading || editorValues.scheduleEventId === -1 || employeeList.length === 0) {\n    return (\n      <IonRow className=\"edit-row\">\n        <IonCol size=\"3\">\n          <IonLabel className=\"label\">Employee</IonLabel>\n        </IonCol>\n        <IonCol size=\"9\">\n          <IonSelect\n              className=\"select\"\n              interface=\"popover\"\n              value={-5}\n            >\n            <IonSelectOption key=\"-5\" value=\"-5\">{editorValues.employee.name}</IonSelectOption>\n          </IonSelect>\n        </IonCol>\n      </IonRow>\n    );\n  }\n\n  return (\n\n    <IonRow className=\"edit-row\">\n      <IonCol size=\"3\">\n        <IonLabel className=\"label\">Employee</IonLabel>\n      </IonCol>\n      <IonCol size=\"9\">\n        <IonSelect\n            className=\"select\"\n            interface=\"popover\"\n            disabled={editorValues.isReadonly}\n            value={selectedEmployeeId}\n            onIonChange={(e) => { onChange(e.detail.value)}}\n          >\n          <IonSelectOption key={-1} value={-1}>Select Employee</IonSelectOption>\n          {employeeList.map(emp => (\n            <IonSelectOption\n              key={emp.EmployeeId}\n              value={emp.EmployeeId}\n            >\n              {emp.FullName}\n            </IonSelectOption>\n          ))}\n        </IonSelect>\n      </IonCol>\n    </IonRow>\n  );\n};\n\nexport default EventEmployeeEditor;\n","import React from 'react';\nimport { IonLabel, IonRow, IonCol, IonDatetime } from '@ionic/react';\nimport './EventStartEndEditor';\nimport {AuthorizedItems} from \"../../../orbital-interfaces/authorized-items\";\nimport { parseISO } from 'date-fns'\nimport { EditorValues, EditorReducerAction } from '../EditEventModalState';\n\ninterface EventStartEndEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventStartEndEditor: React.FC<EventStartEndEditorProps> = ({ auth, editorValues, update }) => {\n\n  const onStartChange = (newEventStart?: string | null) => {\n    if (!newEventStart) {\n      return;\n    }\n\n    if (parseISO(newEventStart) === parseISO(editorValues.eventStart)) {\n      return;\n    }\n\n    update({\n      type: \"START-UPDATED\",\n      eventStart: newEventStart\n    });\n  };\n\n  const onEndChange = (newEventEnd?: string | null) => {\n    if (!newEventEnd) {\n      return;\n    }\n\n    if (parseISO(newEventEnd) === parseISO(editorValues.eventEnd)) {\n      return;\n    }\n\n    update({\n      type: \"END-UPDATED\",\n      eventEnd: newEventEnd\n    });\n  };\n\n  if (!editorValues || !editorValues.eventStart) {\n    return (\n      <div>Loading</div>\n    );\n  }\n\n  return (\n    <>\n      <IonRow className=\"edit-row\">\n        <IonCol size=\"3\">\n          <IonLabel className=\"label\">Start</IonLabel>\n        </IonCol>\n        <IonCol size=\"9\">\n          <IonDatetime\n            className=\"select\"\n            displayFormat=\"M/D/YY h:mma\"\n            disabled={editorValues.isReadonly}\n            pickerFormat=\"MMM DD YYYY h:mm A\"\n            min=\"2005-01-01\"\n            max=\"2030-01-01\"\n            minuteValues=\"0,5,10,15,20,25,30,35,40,45,50,55\"\n            value={editorValues.eventStart}\n            onIonChange={(e) => {onStartChange(e.detail.value)}}\n          />\n        </IonCol>\n      </IonRow>\n\n      <IonRow className=\"edit-row\">\n        <IonCol size=\"3\">\n          <IonLabel className=\"label\">End</IonLabel>\n        </IonCol>\n        <IonCol size=\"9\">\n          <IonDatetime\n            className=\"select\"\n            displayFormat=\"M/D/YY h:mma\"\n            disabled={editorValues.isReadonly || editorValues.isClockedIn}\n            pickerFormat=\"MMM DD YYYY h:mm A\"\n            min=\"2005-01-01\"\n            max=\"2030-01-01\"\n            minuteValues=\"0,5,10,15,20,25,30,35,40,45,50,55\"\n            value={editorValues.eventEnd}\n            onIonChange={(e) => {onEndChange(e.detail.value)}}\n\n          />\n        </IonCol>\n      </IonRow>\n    </>\n\n  );\n};\n\nexport default EventStartEndEditor;\n","import React, { useState } from 'react';\nimport { IonCheckbox, IonDatetime,  IonContent, IonRow, IonCol, IonButton, IonFooter, IonGrid, IonHeader, IonTitle, IonToolbar } from '@ionic/react';\nimport './AddBreakModal.scss';\nimport { setHours, setMinutes, parseISO, isAfter, isBefore, addMinutes } from 'date-fns';\nimport useDialogBox from '../../../hooks/useDialogBox';\nimport { EventBreak } from '../../../orbital-interfaces/EventBreak';\n\ninterface AddBreakModalProps {\n  onCancel: () => void;\n  onAdd: (startDate: Date, endDate: Date, isRestricted: boolean, isPaid: boolean) => void;\n  currentBreaks: EventBreak[];\n  eventStart: string;\n  eventEnd: string;\n}\n\n// --------------------------------------------------------------------------------------\nconst hasOverlap = (start: Date, end: Date, breaks: EventBreak[]) => {\n  const startA = start;\n  const endA = end;\n  let found = false;\n  breaks.map(brk => {\n    const startB = addMinutes(parseISO(brk.BreakStart), 3);\n    const endB = (brk.BreakEnd) ? addMinutes(parseISO(brk.BreakEnd!), -3) : new Date(2200, 1, 1);\n    if (startA < endB && endA > startB) {\n      found = true;\n    }\n\n    return found;\n  })\n  return found;\n};\n\n// --------------------------------------------------------------------------------------\nconst AddBreakModal: React.FC<AddBreakModalProps> = ({onCancel, onAdd, currentBreaks, eventStart, eventEnd}) => {\n  const [startDate, setStartDate] = useState(setMinutes(setHours(new Date(), 12), 0));\n  const [endDate, setEndDate] = useState(setMinutes(setHours(new Date(), 13), 0));\n  const [isRestricted, setIsRestricted] = useState(false);\n  const [isPaid, setIsPaid] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [isValid, setIsValid] = useState(true);\n  const alert = useDialogBox();\n\n  const onAddClick = () => {\n    if (startDate > endDate) {\n      alert.showAlert(\"Invalid Start / End\", \"Start of break cannot come after end of break.\", () => {});\n    } else {\n      onAdd(startDate, endDate, isRestricted, isPaid);\n    }\n  }\n\n  const onStartUpdate = (newStart: string) => {\n    const newStartDate = parseISO(newStart);\n    setStartDate(newStartDate);\n    console.log(currentBreaks);\n    if (!isBefore(newStartDate, endDate))\n    {\n      setIsValid(false);\n      setErrorMessage(\"Start must be before End\");\n    } else if (parseISO(eventStart) > newStartDate) {\n      setIsValid(false);\n      setErrorMessage(\"Start before Event begins\");\n    } else if (hasOverlap(newStartDate, endDate, currentBreaks)) {\n      setIsValid(false);\n      setErrorMessage(\"Pre-existing break overlaps\");\n    } else {\n      setIsValid(true);\n      setErrorMessage(\"\");\n    }\n  }\n\n  const onEndUpdate = (newEnd: string) => {\n    const newEndDate = parseISO(newEnd);\n    setEndDate(newEndDate);\n\n    if (!isAfter(newEndDate, startDate)) {\n      setIsValid(false);\n      setErrorMessage(\"End must be after Start\");\n    } else if (newEndDate > parseISO(eventEnd)) {\n      setIsValid(false);\n      setErrorMessage(\"End after Event ends\");\n    } else if (hasOverlap(startDate, newEndDate, currentBreaks)) {\n      setIsValid(false);\n      setErrorMessage(\"Pre-existing break overlaps\");\n    } else {\n      setIsValid(true);\n      setErrorMessage(\"\");\n    }\n  }\n\n  return (\n    <>\n    <IonContent>\n      <IonHeader mode=\"ios\">\n        <IonToolbar>\n          <IonTitle>Add Break</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonGrid>\n        <IonRow>\n          <IonCol className=\"label\" size=\"3\">Start</IonCol>\n          <IonCol size=\"9\">\n            <IonDatetime\n              className=\"select\"\n              displayFormat=\"h:mm a\"\n              pickerFormat=\"h:mm A\"\n              min=\"2005-01-01\"\n              max=\"2030-01-01\"\n              minuteValues=\"0,5,10,15,20,25,30,35,40,45,50,55\"\n              value={startDate.toISOString()}\n              onIonChange={(e) => onStartUpdate(e.detail.value!)}\n            />\n          </IonCol>\n        </IonRow>\n        <IonRow>\n          <IonCol className=\"label\" size=\"3\">End</IonCol>\n          <IonCol size=\"9\">\n            <IonDatetime\n                className=\"select\"\n                displayFormat=\"h:mm a\"\n                pickerFormat=\"h:mm A\"\n                min=\"2005-01-01\"\n                max=\"2030-01-01\"\n                minuteValues=\"0,5,10,15,20,25,30,35,40,45,50,55\"\n                value={endDate.toISOString()}\n                onIonChange={(e) => onEndUpdate(e.detail.value!)}\n                />\n          </IonCol>\n        </IonRow>\n\n        <IonRow>\n          <IonCol className=\"label\" size=\"3\" />\n          <IonCol size=\"9\" className=\"error-message\">\n            {errorMessage}\n          </IonCol>\n        </IonRow>\n\n\n\n        <IonRow>\n          <IonCol size=\"12\">\n            <div style={{width: \"100%\", borderBottom: \"1px solid #AAA\"}} />\n          </IonCol>\n        </IonRow>\n        <IonRow>\n          <IonCol size=\"3\">\n            <IonCheckbox\n              className=\"checkbox\"\n              checked={isRestricted}\n              onIonChange={(e) => {setIsRestricted(e.detail.checked)}}\n            />\n          </IonCol>\n          <IonCol className=\"label\" size=\"9\">Restricted Break</IonCol>\n        </IonRow>\n        <IonRow>\n          <IonCol size=\"3\">\n            <IonCheckbox\n              className=\"checkbox\"\n              onIonChange={(e) => {setIsPaid(e.detail.checked)}}\n            />\n          </IonCol>\n          <IonCol className=\"label\" size=\"9\">Paid Break</IonCol>\n        </IonRow>\n      </IonGrid>\n    </IonContent>\n    <IonFooter>\n      <IonButton\n        expand=\"block\"\n        color=\"secondary\"\n        onClick={onAddClick}\n        disabled={!isValid}\n      >\n        ADD\n      </IonButton>\n\n      <IonButton\n        expand=\"block\"\n        onClick={onCancel}\n      >\n        CANCEL\n      </IonButton>\n    </IonFooter>\n    {alert.alertBoxJsx}\n    </>\n  );\n}\n\nexport default AddBreakModal;\n","import React, { useState, useEffect } from 'react';\nimport {IonModal, IonRow, IonCol, IonButton, IonIcon } from '@ionic/react';\nimport './EventBreakEditor.scss';\nimport { add, trash, lock, logoUsd } from 'ionicons/icons';\nimport {AuthorizedItems} from \"../../../orbital-interfaces/authorized-items\";\nimport { EventBreak } from '../../../orbital-interfaces/EventBreak';\nimport { getBreakStartEnd, formatDateTimeAsMvcString } from '../../../util/time-helper';\nimport AddBreakModal from './AddBreakModal';\nimport { EditorValues, EditorReducerAction } from '../EditEventModalState';\nimport EventType from \"../../../enums/EventType\";\nimport authHelper from '../../../util/authitems-helper';\n\ninterface EventBreakEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventBreakEditor: React.FC<EventBreakEditorProps> = ({ auth, editorValues, update }) => {\n  const [breakList, setBreakList] = useState([] as EventBreak[]);\n  const [showBreakModal, setShowBreakModal] = useState(false);\n\n  useEffect(() => {\n      setBreakList(editorValues.eventBreaks);\n  }, [editorValues.eventBreaks]);\n\n  const showRestricted = (b: EventBreak) => {\n    return b.IsRestricted ? (\n      <IonIcon className=\"restricted-icon\" icon={lock}  />\n    ) : (\n      <span />\n    );\n  };\n\n  const showPaid = (b: EventBreak) => {\n    return b.IsPaidBreak ? (\n      <IonIcon className=\"paid-icon\" icon={logoUsd}  />\n    ) : (\n      <span />\n    );\n  };\n\n  const onAddBreakModalCancel = () => {\n    setShowBreakModal(false);\n  };\n\n  const onAddBreakModalApply = (startDate: Date, endDate: Date, isRestricted: boolean, isPaid: boolean) => {\n    setShowBreakModal(false);\n    const brk: EventBreak = {\n      BreakStart: formatDateTimeAsMvcString(startDate),\n      BreakEnd: formatDateTimeAsMvcString(endDate),\n      IsRestricted: isRestricted,\n      IsPaidBreak: isPaid,\n      ScheduleEventId: editorValues.scheduleEventId\n    };\n\n    const newBreakList = [...breakList, brk];\n    setBreakList(newBreakList);\n    update({ type: 'EVENTBREAKS-UPDATED', breaks: newBreakList});\n  };\n\n  const onDeleteBreak = (breakStart: string) => {\n    const newBreakList = breakList.filter(b => b.BreakStart !== breakStart);\n    setBreakList(newBreakList);\n    update({ type: 'EVENTBREAKS-UPDATED', breaks: newBreakList});\n  };\n\n  if (editorValues.eventType !== EventType.Clock && !authHelper.isShiftTypeEvent(editorValues.eventType, editorValues.eventStatus)) {\n    return (\n      <div />\n    )\n  }\n\n\n  return (\n    <>\n      <IonRow className=\"edit-row\" style={{marginBottom: \"20px\"}}>\n        <IonCol size=\"3\">\n          <IonButton\n            color=\"light\"\n            disabled={editorValues.isReadonly}\n            onClick={() => {setShowBreakModal(true)}}\n          >\n            <IonIcon slot=\"icon-only\" icon={add} color=\"dark\" />\n          </IonButton>\n        </IonCol>\n        <IonCol size=\"9\">\n\n          {(!breakList || breakList.length === 0) && (\n            <div className=\"break-div\">(B) NONE</div>\n          )}\n\n          {breakList && breakList.map(brk => (\n            <div key={brk.BreakStart} className=\"break-div\">\n              (B) {getBreakStartEnd(brk)}\n              {showPaid(brk)}\n              {showRestricted(brk)}\n              <button\n                disabled={editorValues.isReadonly}\n                onClick={() => { onDeleteBreak(brk.BreakStart)}}\n              >\n                <IonIcon slot=\"icon-only\" mode=\"ios\" icon={trash} color=\"gray\" />\n              </button>\n            </div>\n          ))}\n\n        </IonCol>\n      </IonRow>\n\n      <IonModal\n        isOpen={showBreakModal}\n        cssClass=\"add-break-modal\"\n        onDidDismiss={() => setShowBreakModal(false)}\n      >\n        <AddBreakModal\n          onCancel={onAddBreakModalCancel}\n          onAdd={onAddBreakModalApply}\n          currentBreaks={breakList}\n          eventStart={editorValues.eventStart}\n          eventEnd={editorValues.eventEnd}\n        />\n      </IonModal>\n    </>\n  );\n};\n\nexport default EventBreakEditor;\n","import React, { useState, useEffect } from 'react';\nimport { IonLabel, IonSelect, IonRow, IonCol, IonSelectOption } from '@ionic/react';\nimport './EventTagEditor';\nimport {AuthorizedItems} from \"../../../orbital-interfaces/authorized-items\";\nimport { EditorValues, EditorReducerAction } from '../EditEventModalState';\n\ninterface EventTagEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\ninterface TagList {\n  id: number;\n  name: string;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventTagEditor: React.FC<EventTagEditorProps> = ({ auth, editorValues, update }) => {\n  const [selectedTagId, setSelectedTagId] = useState(-1);\n  const [tagList, setTagList] = useState([] as TagList[]);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (auth && auth.locations && auth.locations.length > 0) {\n      const tags = auth.tags.filter(t => t.positionIds.includes(editorValues.position.position.id)).map(t => {\n         return { id: t.id, name: t.name};\n      });\n      setTagList(tags);\n\n      const tagIds = tags.map(t => t.id);\n      if (!tagIds.includes(selectedTagId)) {\n        if (editorValues.tag && editorValues.tag.id && tagIds.includes(editorValues.tag.id)) {\n          setSelectedTagId(editorValues.tag.id);\n        } else {\n          setSelectedTagId(-1);\n        }\n      }\n    }\n\n    // eslint-disable-next-line\n  }, [auth, editorValues.position]);\n\n  const onUpdateTag = (tagId: number) => {\n    setSelectedTagId(tagId);\n\n    if (tagId === editorValues.tag.id) {\n      return;\n    }\n\n    if (tagId === -1) {\n      update({ type: 'TAG-UPDATED', tag: { id: -1, name: 'NONE'}});\n    } else {\n      const tag = tagList.filter(t => t.id === tagId)[0];\n      update({ type: 'TAG-UPDATED', tag});\n    }\n  };\n\n  return (\n    <IonRow className=\"edit-row\">\n      <IonCol size=\"3\">\n        <IonLabel className=\"label\">Tag</IonLabel>\n      </IonCol>\n      <IonCol size=\"9\">\n        <IonSelect\n            className=\"select\"\n            interface=\"popover\"\n            disabled={editorValues.isReadonly}\n            value={selectedTagId}\n            onIonChange={(e) => {onUpdateTag(e.detail.value)}}\n          >\n          <IonSelectOption value={-1}>NONE</IonSelectOption>\n\n          {tagList.map(tag => (\n            <IonSelectOption\n              key={tag.id}\n              value={tag.id}>\n              {tag.name}\n            </IonSelectOption>\n\n          ))}\n\n        </IonSelect>\n      </IonCol>\n    </IonRow>\n\n  );\n};\n\nexport default EventTagEditor;\n","import React, { useEffect, useState } from 'react';\nimport { IonLabel,  IonCheckbox, IonCol } from '@ionic/react';\nimport './EventStartEndEditor';\nimport {AuthorizedItems} from \"../../../orbital-interfaces/authorized-items\";\nimport { EditorValues, EditorReducerAction } from '../../EditEvent/EditEventModalState';\nimport EventType from '../../../enums/EventType';\nimport EventStatus from '../../../enums/EventStatus';\n\ninterface EventConfirmEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventConfirmEditor: React.FC<EventConfirmEditorProps> = ({ auth, editorValues, update }) => {\n  const [isConfirmed, setIsConfirmed] = useState(false);\n  const [showConfirmed, setShowConfirmed] = useState(false);\n\n  useEffect(() => {\n    if (auth && auth.locations && auth.locations.length > 0) {\n      setIsConfirmed(editorValues.isConfirmed);\n    }\n\n    // eslint-disable-next-line\n  }, [auth, editorValues.eventStart, editorValues.eventEnd, editorValues.isClockedIn]);\n\n  useEffect(() => {\n    const isConfirmable = (editorValues.eventType === EventType.Shift && editorValues.eventStatus === EventStatus.Approved) ||\n      (\n        editorValues.eventType === EventType.Cover &&\n        (\n          editorValues.eventStatus === EventStatus.Request ||\n          editorValues.eventStatus === EventStatus.RequestDenied\n        )\n      );\n    setShowConfirmed(isConfirmable);\n  }, [editorValues.eventType, editorValues.eventStatus]);\n\n  const onCheckChange = (checked: boolean) => {\n    if (checked === isConfirmed || !showConfirmed)\n    {\n      return;\n    }\n\n    setIsConfirmed(checked);\n    update({\n      type: \"CONFIRM-UPDATED\",\n      isConfirmed: checked\n    });\n  }\n\n  if (!showConfirmed)\n  {\n    return (\n      <>\n        <IonCol size=\"1\">\n          <span/>\n        </IonCol>\n        <IonCol size=\"2\">\n          <span/>\n        </IonCol>\n      </>\n    )\n  }\n\n  return (\n    <>\n      <IonCol size=\"1\">\n        <IonCheckbox\n          checked={isConfirmed}\n          onIonChange={(e) => {onCheckChange(e.detail.checked)}}\n        />\n      </IonCol>\n      <IonCol size=\"2\">\n        <IonLabel className=\"label\">Confirm</IonLabel>\n      </IonCol>\n    </>\n  );\n}\n\nexport default EventConfirmEditor;\n","import React, { useEffect, useState } from 'react';\nimport { IonLabel,  IonCheckbox, IonCol, IonIcon } from '@ionic/react';\nimport './EventStartEndEditor';\nimport {AuthorizedItems} from \"../../../orbital-interfaces/authorized-items\";\nimport { EditorValues, EditorReducerAction } from '../EditEventModalState';\nimport EventType from '../../../enums/EventType';\nimport { time } from 'ionicons/icons';\n\ninterface EventIsClockedInEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventIsClockedInEditor: React.FC<EventIsClockedInEditorProps> = ({ auth, editorValues, update }) => {\n  const [isClockedIn, setIsClockedIn] = useState(false);\n  const [showIsClockedIn, setShowIsClockedIn] = useState(false);\n\n  useEffect(() => {\n    if (auth && auth.locations && auth.locations.length > 0) {\n      setIsClockedIn(editorValues.isClockedIn);\n    }\n\n    // eslint-disable-next-line\n  }, [auth, editorValues.eventStart, editorValues.eventEnd, editorValues.isClockedIn]);\n\n  useEffect(() => {\n    setShowIsClockedIn(editorValues.eventType === EventType.Clock);\n  }, [editorValues.eventType, editorValues.eventStatus]);\n\n  const onCheckChange = (checked: boolean) => {\n    if (checked === isClockedIn || !showIsClockedIn)\n    {\n      return;\n    }\n\n    setIsClockedIn(checked);\n    update({\n      type: \"ISCLOCKEDIN-UPDATED\",\n      isClockedIn: checked\n    });\n  }\n\n  if (!showIsClockedIn)\n  {\n    return (\n      <>\n        <IonCol size=\"1\">\n          <span/>\n        </IonCol>\n        <IonCol size=\"4\">\n          <span/>\n        </IonCol>\n      </>\n    )\n  }\n\n  return (\n    <>\n      <IonCol size=\"1\">\n        <IonCheckbox\n          checked={isClockedIn}\n          onIonChange={(e) => {onCheckChange(e.detail.checked)}}\n        />\n      </IonCol>\n      <IonCol size=\"4\">\n        <IonLabel className=\"label\">\n          <IonIcon icon={time} style={{paddingRight: \"5px\", marginLeft: \"-5px\"}} />\n          Clocked In\n        </IonLabel>\n      </IonCol>\n    </>\n  );\n}\n\nexport default EventIsClockedInEditor;\n","import {ScheduleEvent} from '../../orbital-interfaces/ScheduleEvent';\nimport {SelectedPosition} from '../../util/authitems-helper'\nimport {EventBreak} from '../../orbital-interfaces/EventBreak';\nimport {isAfter, isBefore, isEqual, parseISO, setHours, setMinutes} from 'date-fns';\nimport {formatDateTimeAsMvcString} from '../../util/time-helper';\nimport EventType from '../../enums/EventType';\nimport EventStatus from '../../enums/EventStatus';\nimport {AuthorizedItems, AuthorizedLocation, AuthorizedPosition, LocationSettings } from \"../../orbital-interfaces/authorized-items\";\nimport {EventEditAuthorization} from './EditEventAuthorization';\nimport {RecurrenceType} from '../../enums/RecurrenceType';\n\nconst getLocationById = (auth: AuthorizedItems, locId: number) => {\n  return auth.locations.filter(l => l.id === locId)[0];\n};\n\nconst getPositionById = (auth: AuthorizedItems, posId: number) => {\n  return auth.locations.flatMap(l => l.departments.flatMap(d => d.positions.filter(p => p.id === posId)))[0];\n};\n\nconst getValidStartEnd = (startStr: string, endStr: string) => {\n  const start = parseISO(startStr);\n  const end = parseISO(endStr);\n\n  if (isEqual(start, end)) {\n    return true;\n  }\n\n  return isAfter(end, start);\n};\n\nexport interface IdName {\n  id: number;\n  name: string;\n}\n\nexport interface EditorValues {\n  scheduleEventId: number;\n  locationId: number;\n  isUpdating: boolean;\n  eventType: EventType;\n  eventStatus: EventStatus;\n  isConfirmed: boolean;\n  position: SelectedPosition;\n  employee: IdName;\n  eventStart: string;\n  eventEnd: string;\n  tag: IdName;\n  eventBreaks: EventBreak[],\n  isClockedIn: boolean;\n  isDirty: boolean;\n  valid: boolean;\n  validEventStartEnd: boolean;\n  validEmployee: boolean;\n  validTag: boolean;\n  validEventTypeStatus: boolean;\n  validClockoutValue: boolean;\n  validRecurrenceStartEnd: boolean;\n  validRepeatInterval: boolean;\n  validRepeatWeekdays: boolean;\n  absentId?: number;\n  absentName?: string;\n  absentTimeMinutes: number | null;\n  notes: string;\n  clockoutValue?: string;\n  isReadonly: boolean;\n  recurrenceId?: number;\n  recurrenceStart?: string;\n  recurrenceEnd?: string;\n  recurrenceType?: RecurrenceType;\n  repeatInterval?: number;\n  repeatWeekdays?: string;\n}\n\nconst isClockoutValueValid = (state: EditorValues, locSettings: LocationSettings, val?: string) => {\n  if (!val) {\n    return true;\n  }\n\n  // clockout values are not enabled\n  if (!locSettings.ClockOutValueLabel || locSettings.ClockOutValueLabel.length === 0) {\n    return false;\n  }\n\n  const regEx = /^\\d*(\\.\\d{0,2})?$/;\n  return regEx.test(val);\n};\n\nconst isAllValid = (v: EditorValues): boolean => {\n  return v.validEventStartEnd &&\n         v.validEmployee &&\n         v.validTag &&\n         v.validEventTypeStatus &&\n         v.validClockoutValue &&\n         v.validRecurrenceStartEnd &&\n         v.validRepeatInterval &&\n         v.validRepeatWeekdays;\n};\n\nexport const INITIAL_EDITOR_VAUES: EditorValues = {\n  scheduleEventId: -1,\n  locationId: 0,\n  isUpdating: false,\n  eventType: EventType.Shift,\n  eventStatus: EventStatus.Approved,\n  isConfirmed: false,\n  position: { location: {} as AuthorizedLocation, position: {} as AuthorizedPosition},\n  employee: { id: -1, name: \"SELECT EMPLOYEE\"},\n  eventStart: formatDateTimeAsMvcString(setHours(setMinutes(new Date(), 0), 8)),\n  eventEnd: formatDateTimeAsMvcString(setHours(setMinutes(new Date(), 0), 17)),\n  tag: {id: -1, name: \"SELECT TAG\"},\n  eventBreaks: [] as EventBreak[],\n  isClockedIn: false,\n  isDirty: false,\n  valid: true,\n  validEventStartEnd: true,\n  validEmployee: true,\n  validTag: true,\n  validEventTypeStatus: true,\n  validClockoutValue: true,\n  validRecurrenceStartEnd: true,\n  validRepeatInterval: true,\n  validRepeatWeekdays: true,\n  absentId: undefined,\n  absentName: undefined,\n  absentTimeMinutes: null,\n  notes: \"\",\n  clockoutValue: undefined,\n  isReadonly: false\n};\n\nexport type EditorReducerAction =\n | { type: 'LOADING', data: \"we're loading \"}\n | { type: 'BEGIN-UPDATE', auth: AuthorizedItems, ev: ScheduleEvent, eventEditAuth: EventEditAuthorization}\n | { type: 'CANCEL'}\n | { type: 'CREATE-EVENT', auth: AuthorizedItems}\n | { type: 'TYPESTATUS-UPDATED', eventType: EventType, eventStatus: EventStatus, absentId?: number, absentTimeMinutes: number | null}\n | { type: 'POSITION-UPDATED', selectedPosition: SelectedPosition}\n | { type: 'EMPLOYEE-UPDATED', employee: IdName}\n | { type: 'START-UPDATED', eventStart: string}\n | { type: 'END-UPDATED', eventEnd: string}\n | { type: 'EVENTBREAKS-UPDATED', breaks: EventBreak[]}\n | { type: 'TAG-UPDATED', tag: IdName }\n | { type: 'CONFIRM-UPDATED', isConfirmed: boolean}\n | { type: 'ISCLOCKEDIN-UPDATED', isClockedIn: boolean}\n | { type: 'NOTES-UPDATED', notes: string}\n | { type: 'CLOCKOUTVALUE-UPDATED', clockoutValue?: string, locSettings: LocationSettings}\n | { type: 'SET-READONLY', isReadonly: boolean }\n | { type: 'REPEATING-UPDATED', recurrenceStart?: string, recurrenceEnd?: string, recurrenceType?: RecurrenceType, repeatInterval?: number, repeatWeekDays?: string}\n\nconst getIsClockedIn = (ev: ScheduleEvent) => {\n  const end = parseISO(ev.EventEnd);\n  return (end > new Date(2199, 1,1));\n};\n\n// ------------------------------------------------------------------------------------------------\nexport const editorValueReducer = (currentState: EditorValues, action: EditorReducerAction): EditorValues => {\n  console.log(\"REDUCER: ACTION =\", action.type, \"   Current State Emp =\", currentState.employee.id);\n  switch (action.type) {\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'BEGIN-UPDATE':\n      const { ev, auth } = action;\n      const isClockedIn = getIsClockedIn(ev);\n      return {\n        scheduleEventId: ev.ScheduleEventId,\n        locationId: ev.LocationId,\n        isUpdating: false,\n        eventType: ev.EventTypeId,\n        eventStatus: ev.EventStatusId,\n        isConfirmed: ev.ConfirmedBy !== undefined && ev.ConfirmedBy !== null,\n        position: {\n          location: getLocationById(auth, ev.LocationId),\n          position: getPositionById(auth, ev.PositionId)\n        },\n        employee: { id: ev.EmployeeId, name: ev.FirstName + \" \" + ev.LastName},\n        eventStart: ev.EventStart,\n        eventEnd: (isClockedIn) ? formatDateTimeAsMvcString(new Date()) : ev.EventEnd,\n        tag: {id: (ev.TagId) ? ev!.TagId : -1, name: \"\"},\n        eventBreaks: ev.EventBreaks,\n        isClockedIn: isClockedIn,\n        isDirty: false,\n        valid: true,\n        validEventStartEnd: true,\n        validEmployee: true,\n        validTag: true,\n        validEventTypeStatus: true,\n        validClockoutValue: true,\n        absentName: ev.AbsentName,\n        absentId: ev.AbsentId,\n        absentTimeMinutes: (ev.AbsentTimeMinutes) ? ev.AbsentTimeMinutes : null,\n        notes: ev.Notes,\n        clockoutValue: ev.ClockOutValue,\n        isReadonly: action.eventEditAuth.isReadonly,\n        recurrenceId: ev.EventRecurrenceId,\n        recurrenceStart: ev.EventRecurrenceStart,\n        recurrenceEnd: ev.EventRecurrenceEnd,\n        recurrenceType: ev.RepeatType,\n        repeatInterval: ev.RepeatInterval,\n        repeatWeekdays: ev.RepeatWeekdays,\n        validRecurrenceStartEnd: true,\n        validRepeatInterval: true,\n        validRepeatWeekdays: true\n      };\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'CANCEL':\n      return INITIAL_EDITOR_VAUES;\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'POSITION-UPDATED':\n      const { selectedPosition } = action;\n      return {\n        ...currentState,\n        position: selectedPosition,\n        isDirty: true\n      };\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'CREATE-EVENT':\n      const loc = action.auth.locations[0];\n      return {\n        ...INITIAL_EDITOR_VAUES,\n        position: {\n          location: loc,\n          position: loc.departments[0].positions[0]\n        },\n        scheduleEventId: 0,\n        isDirty: true\n      };\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'SET-READONLY':\n      return {\n        ...currentState,\n        isReadonly: action.isReadonly\n      };\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'TYPESTATUS-UPDATED':\n      const newTypeStatusState = {\n        ...currentState,\n        eventType: action.eventType,\n        eventStatus: action.eventStatus,\n        absentId: action.absentId,\n        absentTimeMinutes: action.absentTimeMinutes,\n        isDirty: true,\n        validEventTypeStatus: !(action.absentId  && action.absentTimeMinutes === null)\n      };\n\n      newTypeStatusState.valid = isAllValid(newTypeStatusState);\n      return newTypeStatusState;\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'CLOCKOUTVALUE-UPDATED':\n      const newClockoutValueState = {\n        ...currentState,\n        clockoutValue: action.clockoutValue,\n        validClockoutValue: isClockoutValueValid(currentState, action.locSettings, action.clockoutValue),\n        isDirty: true\n      };\n\n      newClockoutValueState.valid = isAllValid(newClockoutValueState);\n      return newClockoutValueState;\n\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'EMPLOYEE-UPDATED':\n      const newState = {\n        ...currentState,\n        employee: action.employee,\n        isDirty: true,\n        validEmployee: action.employee.id > 0\n      };\n\n      newState.valid = isAllValid(newState);\n      return newState;\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'START-UPDATED':\n      const newStartState = {\n        ...currentState,\n        eventStart: action.eventStart,\n        isDirty: true,\n        validEventStartEnd: getValidStartEnd(action.eventStart, currentState.eventEnd)\n      };\n\n      newStartState.valid = isAllValid(newStartState);\n      return newStartState;\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'END-UPDATED':\n      const newEndState = {\n        ...currentState,\n        eventEnd: action.eventEnd,\n        isDirty: true,\n        validEventStartEnd: getValidStartEnd(currentState.eventStart, action.eventEnd)\n      };\n\n      newEndState.valid = isAllValid(newEndState);\n      return newEndState;\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'EVENTBREAKS-UPDATED':\n      return {\n        ...currentState,\n        eventBreaks: action.breaks,\n        isDirty: true\n      };\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    case 'TAG-UPDATED':\n      const newTagState = {\n        ...currentState,\n        tag: action.tag,\n        isDirty: true,\n        validTag: true\n      };\n\n      newTagState.valid = isAllValid(newTagState);\n      return newTagState;\n\n    case 'CONFIRM-UPDATED':\n      const newConfirmState = {\n        ...currentState,\n        isConfirmed: action.isConfirmed,\n        isDirty: true\n      };\n\n      newConfirmState.valid = isAllValid(newConfirmState);\n      return newConfirmState;\n\n    case 'NOTES-UPDATED':\n      return {\n        ...currentState,\n        notes: action.notes,\n        isDirty: true\n      };\n\n    case 'ISCLOCKEDIN-UPDATED':\n      const newClockedInState = {\n        ...currentState,\n        isClockedIn: action.isClockedIn,\n        isDirty: true\n      };\n\n      if (action.isClockedIn) {\n        const now = formatDateTimeAsMvcString(new Date());\n        newClockedInState.eventStart = now;\n        newClockedInState.eventEnd = now;\n      }\n\n      newClockedInState.valid = isAllValid(newClockedInState);\n      return newClockedInState;\n\n    case 'REPEATING-UPDATED':\n      const newRepeatState = {\n        ...currentState,\n        recurrenceStart: action.recurrenceStart,\n        recurrenceEnd: action.recurrenceEnd,\n        recurrenceType: action.recurrenceType,\n        repeatInterval: action.repeatInterval,\n        repeatWeekdays: action.repeatWeekDays,\n        isDirty: true\n      };\n\n      if (newRepeatState.recurrenceStart) {\n        if (newRepeatState.repeatInterval === RecurrenceType.Weekly) {\n          newRepeatState.validRepeatWeekdays = (newRepeatState.repeatWeekdays !== null && newRepeatState.repeatWeekdays !== undefined && newRepeatState.repeatWeekdays.length > 0);\n        } else {\n          newRepeatState.repeatWeekdays = undefined;\n          newRepeatState.validRepeatWeekdays = true;\n        }\n\n        if (!newRepeatState.recurrenceEnd) {\n          newRepeatState.validRecurrenceStartEnd = false;\n        } else {\n          newRepeatState.validRecurrenceStartEnd = isBefore(parseISO(newRepeatState.recurrenceStart), parseISO(newRepeatState.recurrenceEnd));\n        }\n\n        newRepeatState.validRepeatInterval = (newRepeatState.repeatInterval !== null && newRepeatState.repeatInterval !== undefined && newRepeatState.repeatInterval > 0);\n      }\n\n      newRepeatState.valid = isAllValid(newRepeatState);\n      return newRepeatState;\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    default:\n      console.error(\"ERROR in editorValueReducer, could not find action for \" + action.type);\n      return currentState;\n  }\n};\n","export enum RecurrenceUpdateType {\n  UpdateSingleEvent,\n  UpdateEntireSeries,\n  UpdateSeriesForward\n};\n","import React, { useEffect } from 'react';\nimport {IonLabel, IonTextarea, IonCol, IonRow } from '@ionic/react';\nimport './EventStartEndEditor';\nimport {AuthorizedItems} from \"../../../orbital-interfaces/authorized-items\";\nimport { EditorValues, EditorReducerAction } from '../EditEventModalState';\n\ninterface EventNotesEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventNotesEditor: React.FC<EventNotesEditorProps> = ({ auth, editorValues, update }) => {\n\n  useEffect(() => {\n    // eslint-disable-next-line\n  });\n\n  const onNotesUpdate = (newNote?: string | null) => {\n    if (!newNote) {\n      newNote = \"\";\n    }\n\n    if (newNote !== editorValues.notes) {\n      update({ type: \"NOTES-UPDATED\", notes: newNote});\n    }\n  }\n\n  return (\n    <IonRow className=\"edit-row\">\n      <IonCol size=\"3\">\n        <IonLabel className=\"label\">Notes</IonLabel>\n      </IonCol>\n      <IonCol size=\"9\">\n        <IonTextarea className=\"textarea\"\n          maxlength={200}\n          rows={4}\n          value={editorValues.notes}\n          disabled={editorValues.isReadonly}\n          onIonChange={(e) => onNotesUpdate(e.detail.value)}\n        />\n      </IonCol>\n    </IonRow>\n  );\n}\n\nexport default EventNotesEditor;\n","import React, { useEffect, useState } from 'react';\nimport {IonLabel, IonCol, IonRow, IonInput} from '@ionic/react';\nimport './EventStartEndEditor';\nimport {AuthorizedItems, LocationSettings } from \"../../../orbital-interfaces/authorized-items\";\nimport { EditorValues, EditorReducerAction } from '../EditEventModalState';\nimport authHelper from \"../../../util/authitems-helper\";\nimport {EventType} from \"../../../orbital-interfaces\";\n\ninterface EventClockoutValueEditorProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventClockoutValueEditor: React.FC<EventClockoutValueEditorProps> = ({ auth, editorValues, update }) => {\n  const [isVisible, setIsVisible] = useState(false);\n  const [locSettings, setLocSettings] = useState(null as LocationSettings | null);\n\n  useEffect(() => {\n    if (editorValues.locationId === 0 || (locSettings && (editorValues.locationId === locSettings.LocationId)))\n    {\n      return;\n    }\n\n    if (!auth || !auth.locations || auth.locations.length === 0) {\n      return;\n    }\n\n    if (!editorValues.locationId) {\n      return;\n    }\n\n    const newLocSettings = authHelper.getLocSettingsForLocationId(auth, editorValues.locationId);\n    setLocSettings(newLocSettings);\n\n    // eslint-disable-next-line\n  }, [editorValues.locationId, auth]);\n\n  useEffect(() => {\n    if (!locSettings) {\n      return;\n    }\n\n    setIsVisible(\n      (locSettings!.ClockOutValueLabel !== undefined) &&\n      (locSettings!.ClockOutValueLabel !== null) &&\n      (locSettings!.ClockOutValueLabel.length > 0) &&\n      editorValues.eventType === EventType.Clock &&\n      !editorValues.isClockedIn\n    );\n\n    // eslint-disable-next-line\n  }, [editorValues.eventType, editorValues.isClockedIn, locSettings]);\n\n  const onClockoutValueUpdated = (newValue?: string | null) => {\n    if (newValue === null) {\n      newValue = undefined;\n    }\n\n    if (newValue === editorValues.clockoutValue) {\n      return;\n    }\n\n    update({type: 'CLOCKOUTVALUE-UPDATED', locSettings: locSettings!, clockoutValue: newValue});\n  };\n\n  if (!isVisible || locSettings === null) {\n    return (\n      <div />\n    )\n  }\n\n  return (\n    <IonRow className=\"edit-row\">\n      <IonCol size=\"3\">\n        <IonLabel className=\"label\">{locSettings.ClockOutValueLabel}</IonLabel>\n      </IonCol>\n      <IonCol size=\"9\">\n        <IonInput\n          className=\"input-textbox\"\n          value={editorValues.clockoutValue}\n          onIonChange={(e) => onClockoutValueUpdated(e.detail.value)}\n        />\n      </IonCol>\n    </IonRow>\n  );\n}\n\nexport default EventClockoutValueEditor;\n","import { ApplicationUser } from '../context/ApplicationUserContext';\nimport apiHelper from './OrbitalApiHelper';\nimport EventType from \"../enums/EventType\";\nimport EventStatus from \"../enums/EventStatus\";\nimport {RecurrenceUpdateType} from \"../enums/RecurrenceUpdateType\";\n\ninterface CoverRequestModel {\n  ScheduleEventId: number;\n  LocationId: number;\n  BusinessId: number;\n  BroadcastCoverRequestMessage: boolean;\n  CoverMessage: string;\n}\n\ninterface DeleteEventModel {\n  LocationId: number;\n  ScheduleEventId: number;\n  EventTypeId: EventType;\n  EventStatusId: EventStatus;\n  RecUpdateType?: RecurrenceUpdateType\n}\n\nexport interface ErrorResponse {\n  error: boolean;\n  message: string;\n}\n\nexport interface CoverListItem {\n  value: number;\n  text: string;\n  disabled: boolean;\n  style: string | null;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst undoCoverRequest = async(user: ApplicationUser, scheduleEventId: number) => {\n  const url = `api/v1/employee/schedule-events/cover-request/undo?scheduleEventId=${scheduleEventId}`;\n  return await apiHelper.put(user, url);\n};\n\n// ----------------------------------------------------------------------------------------------\nconst createCoverRequest = async(\n  user: ApplicationUser,\n  scheduleEventId: number,\n  locationId: number,\n  businessId: number,\n  broadCastMessage: boolean,\n  coverMessage: string,\n  toEmployeeId: number | null) => {\n  const url = 'api/v1/employee/schedule-events/cover-request/submit';\n\n  const data = {\n    ScheduleEventId: scheduleEventId,\n    LocationId: locationId,\n    BusinessId: businessId,\n    BroadcastCoverRequestMessage: broadCastMessage,\n    CoverMessage: coverMessage,\n    DirectToEmployeeId: toEmployeeId\n  } as CoverRequestModel;\n\n  return await apiHelper.put(user, url, data);\n};\n\n// ----------------------------------------------------------------------------------------------\nconst makeShiftRequest = async(\n  user: ApplicationUser,\n  scheduleEventId: number,\n  locationId: number,\n  businessId: number,\n  broadCastMessage: boolean,\n  coverMessage: string) => {\n  const url = 'api/v2/requests/shift-request/submit';\n\n  const data = {\n    ScheduleEventId: scheduleEventId,\n    LocationId: locationId,\n    BusinessId: businessId,\n    BroadcastCoverRequestMessage: broadCastMessage,\n    CoverMessage: coverMessage\n  } as CoverRequestModel;\n\n  return await apiHelper.put(user, url, data) as ErrorResponse;\n};\n\n// ----------------------------------------------------------------------------------------------\nconst removeShiftRequest = async(\n  user: ApplicationUser,\n  locationId: number,\n  scheduleEventId: number,\n  eventType: EventType,\n  eventStatus: EventStatus,\n  recUpdateType?: RecurrenceUpdateType) => {\n  const url = 'api/v1/employee/schedule-events/delete';\n\n  const data = {\n    LocationId: locationId,\n    ScheduleEventId: scheduleEventId,\n    EventTypeId: eventType,\n    EventStatusId: eventStatus,\n    RecUpdateType: recUpdateType\n  } as DeleteEventModel;\n\n  return await apiHelper.post(user, url, data);\n};\n\n// ----------------------------------------------------------------------------------------------\nconst deleteEvent = async(\n  user: ApplicationUser,\n  locationId: number,\n  scheduleEventId: number,\n  eventType: EventType,\n  eventStatus: EventStatus,\n  recUpdateType?: RecurrenceUpdateType) => {\n  const url = 'api/v1/employee/schedule-events/delete';\n\n  const data = {\n    LocationId: locationId,\n    ScheduleEventId: scheduleEventId,\n    EventTypeId: eventType,\n    EventStatusId: eventStatus,\n    RecUpdateType: recUpdateType\n  } as DeleteEventModel;\n\n  return await apiHelper.post(user, url, data);\n};\n\n// ----------------------------------------------------------------------------------------------\nconst getCoverRequestListItems = async (user: ApplicationUser, scheduleEventId: number, isDirectCoverList: boolean) => {\n  const url = 'api/v2/requests/transfers/to-list';\n\n  const data = {\n    scheduleEventId,\n    directCoverList: isDirectCoverList\n  };\n\n  return await apiHelper.post(user, url, data) as CoverListItem[];\n};\n\nexport default {\n  undoCoverRequest,\n  createCoverRequest,\n  makeShiftRequest,\n  removeShiftRequest,\n  deleteEvent,\n  getCoverRequestListItems\n}\n","import React, {useContext, useEffect, useState} from 'react';\nimport { IonButton, IonCol, IonContent, IonFooter, IonGrid, IonHeader, IonRow, IonSelect, IonSelectOption, IonTextarea, IonTitle, IonToolbar} from '@ionic/react';\nimport './EventRequestModal.scss';\nimport {AuthorizedItems, LocationSettings} from \"../../../orbital-interfaces/authorized-items\";\nimport {EventEditAuthorization, EventEditEnum} from \"../../EditEvent/EditEventAuthorization\";\nimport requestAPI, {CoverListItem} from \"../../../api/RequestsAPI\";\nimport {ApplicationUserContext} from \"../../../context/ApplicationUserContext\";\n\ninterface EventRequestModalProps {\n  onCancel: () => void;\n  onOk: (employeeId: number | null, notes: string, sendMessage: boolean) => void;\n  auth: AuthorizedItems;\n  eventEditAuth: EventEditAuthorization;\n  locSettings: LocationSettings;\n  scheduleEventId: number;\n}\n\n// --------------------------------------------------------------------------------------\nconst EventRequestModal: React.FC<EventRequestModalProps> = ({onCancel, onOk, eventEditAuth, locSettings, scheduleEventId}) => {\n  const {user} = useContext(ApplicationUserContext);\n  const [notes, setNotes] = useState(\"\" as string | null | undefined);\n  const [selectedEmployeeId, setSelectedEmployeeId] = useState(null as number | null);\n  const [coverList, setCoverList] = useState(null as CoverListItem[] | null);\n\n// --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (eventEditAuth.usage === EventEditEnum.CreateCoverRequest && scheduleEventId > 0) {\n      requestAPI.getCoverRequestListItems(user, scheduleEventId, true).then(results => {\n        setCoverList(results);\n        if (results && results.length > 0) {\n          setSelectedEmployeeId(results[0].value);\n        }\n      });\n    }\n\n    // eslint-disable-next-line\n  }, [scheduleEventId, eventEditAuth.usage]);\n\n// --------------------------------------------------------------------------------------\n  const onOkClick = () => {\n      const newNotes = (notes) ?? \"\";\n      onOk(selectedEmployeeId, newNotes, false);\n  };\n\n\n  if (eventEditAuth.usage === EventEditEnum.None) {\n    return (\n        <div />\n    )\n  }\n\n  return (\n    <>\n      <IonContent>\n        <IonHeader mode=\"ios\">\n          <IonToolbar>\n            <IonTitle>{eventEditAuth.buttonText}</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        <IonGrid>\n          <IonRow\n            hidden={!locSettings.EnableDirectCoverRequest || eventEditAuth.usage !== EventEditEnum.CreateCoverRequest}\n          >\n            <IonCol className=\"label\" size=\"3\">To</IonCol>\n            <IonCol size=\"9\">\n              <IonSelect\n                className=\"select\"\n                value={selectedEmployeeId}\n                onIonChange={(e) => { setSelectedEmployeeId(parseInt(e.detail.value));}}\n              >\n                {coverList && coverList.map(cover => (\n                    <IonSelectOption\n                      key={cover.value}\n                      value={cover.value}\n                      disabled={cover.disabled}\n                    >\n                      {cover.text}\n                    </IonSelectOption>\n                ))}\n              </IonSelect>\n            </IonCol>\n          </IonRow>\n\n          <IonRow\n            hidden={eventEditAuth.usage === EventEditEnum.CreateCoverRequest}\n          >\n            <IonCol size=\"12\">\n              <div className=\"usage-message\">\n                {(eventEditAuth.text)}\n              </div>\n            </IonCol>\n          </IonRow>\n\n          <IonRow\n            hidden={eventEditAuth.usage !== EventEditEnum.CreateCoverRequest}\n          >\n            <IonCol className=\"label\" size=\"3\">Notes</IonCol>\n            <IonCol size=\"9\">\n              <IonTextarea\n                className=\"select\"\n                maxlength={200}\n                rows={4}\n                value={notes}\n                onIonChange={(e) => {setNotes(e.detail.value)}}\n              />\n            </IonCol>\n          </IonRow>\n\n          <IonRow>\n            <IonCol className=\"label\" size=\"3\" />\n            <IonCol size=\"9\" className=\"error-message\">\n              <div/>\n            </IonCol>\n          </IonRow>\n        </IonGrid>\n      </IonContent>\n      <IonFooter>\n        <IonButton\n          expand=\"block\"\n          color=\"secondary\"\n          onClick={onOkClick}\n        >\n          OK\n        </IonButton>\n\n        <IonButton\n          expand=\"block\"\n          onClick={onCancel}\n        >\n          CANCEL\n        </IonButton>\n      </IonFooter>\n    </>\n  );\n};\n\nexport default EventRequestModal;\n","import React, {useContext, useState} from 'react';\nimport {IonButton, IonModal} from '@ionic/react';\nimport './EventRequestEditor.scss';\nimport {AuthorizedItems} from \"../../../orbital-interfaces/authorized-items\";\nimport {EditorReducerAction} from '../EditEventModalState';\nimport EventRequestModal from \"./EventRequestModal\";\nimport authHelper from '../../../util/authitems-helper';\nimport reqApi from \"../../../api/RequestsAPI\";\nimport {ApplicationUserContext} from \"../../../context/ApplicationUserContext\";\nimport EventType from \"../../../enums/EventType\";\nimport EventStatus from \"../../../enums/EventStatus\";\nimport useDialogBox from \"../../../hooks/useDialogBox\";\nimport {EventEditAuthorization, EventEditEnum} from '../EditEventAuthorization';\n\ninterface EventRequestEditorProps {\n  auth: AuthorizedItems;\n  update: React.Dispatch<EditorReducerAction>;\n  cancelEditModal: (message: string) => void;\n  setUsageText: ((usageText: string) => void);\n  eventEnd: string;\n  eventType: EventType;\n  eventStatus: EventStatus;\n  eventEmployeeId: number;\n  eventPositionId: number;\n  scheduleEventId: number;\n  locationId: number;\n  eventEditAuth: EventEditAuthorization | null;\n}\n\n\n// --------------------------------------------------------------------------------------\nconst EventRequestEditor: React.FC<EventRequestEditorProps> = (\n  { auth, update, cancelEditModal, eventEnd, eventType, eventStatus, eventEmployeeId, scheduleEventId, eventPositionId, locationId, setUsageText, eventEditAuth }) => {\n  const { user } = useContext(ApplicationUserContext);\n  const [showRequestModal, setShowRequestModal] = useState(false);\n  const dlg = useDialogBox();\n\n  const onComplete = (message: string) => {\n    setShowRequestModal(false);\n    cancelEditModal(message);\n  };\n\n  const onApply = (employeeId: number | null, notes: string, sendMessage: boolean) => {\n    switch (eventEditAuth!.usage) {\n      case EventEditEnum.CreateCoverRequest:\n        reqApi.createCoverRequest(\n          user,\n          scheduleEventId,\n          locationId,\n          0,\n          sendMessage,\n          notes,\n          employeeId)\n        .then(() => { onComplete(\"Cover-Request Created\");});\n        break;\n\n      case EventEditEnum.CreateShiftRequest:\n        reqApi.makeShiftRequest(\n          user,\n          scheduleEventId,\n          locationId,\n          0,\n          sendMessage,\n          notes)\n        .then((results) => {\n          if (results.error) {\n            dlg.showAlert(\"Shift-Request Failed\", results.message, () => {});\n          } else {\n            onComplete(results.message); // \"Shift-Request Created\"\n          }\n\n        });\n        break;\n\n      case EventEditEnum.DeleteShiftRequest:\n        reqApi.removeShiftRequest(\n          user,\n          locationId,\n          scheduleEventId,\n          eventType,\n          eventStatus,\n          undefined)\n        .then(() => { onComplete(\"Shift-Request Removed\");});\n        break;\n\n      case EventEditEnum.UndoCoverRequest:\n        reqApi.undoCoverRequest(user, scheduleEventId)\n        .then(() => { onComplete(\"Removed Cover-Request\");});\n        break;\n\n      case EventEditEnum.Delete:\n        reqApi.deleteEvent(\n          user,\n          locationId,\n          scheduleEventId,\n          eventType,\n          eventStatus,\n          undefined)\n          .then(() => { onComplete(\"Deleted\")});\n        break;\n    }\n  };\n\n  if (!eventEditAuth ||\n      !auth ||\n      !auth.locations ||\n       auth.locations.length === 0 ||\n       eventEditAuth.usage === EventEditEnum.None ||\n       scheduleEventId <= 0) {\n    return (\n      <div/>\n    )\n  }\n\n  return (\n    <>\n      <IonButton\n        className=\"apply-button\"\n        expand=\"block\"\n        onClick={() => { setShowRequestModal(true)}}\n      >\n        {eventEditAuth.buttonText}\n      </IonButton>\n\n\n      <IonModal\n        isOpen={showRequestModal}\n        cssClass=\"event-request-modal\"\n        onDidDismiss={() => setShowRequestModal(false)}\n      >\n        <EventRequestModal\n          onCancel={() => {setShowRequestModal(false)}}\n          onOk={onApply}\n          auth={auth}\n          eventEditAuth={eventEditAuth}\n          scheduleEventId={scheduleEventId}\n          locSettings={authHelper.getLocSettingsForLocationId(auth, locationId)}\n        />\n        {dlg.alertBoxJsx}\n      </IonModal>\n    </>\n  );\n};\n\nexport default EventRequestEditor;\n","import React, {useEffect, useState} from 'react';\nimport { IonCheckbox } from '@ionic/react';\nimport './WeekdayList.scss';\nimport {LocationSettings} from \"../../../orbital-interfaces/authorized-items\";\nimport {getWeekStart} from \"../../../util/time-helper\";\nimport {addDays, format, getDay} from \"date-fns\";\nimport {EditorReducerAction, EditorValues} from \"../EditEventModalState\";\n\ninterface WeekdayListProps {\n  locSettings: LocationSettings | null;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst WeekdayList: React.FC<WeekdayListProps> = ({ locSettings, editorValues, update }) => {\n  const [checkList, setCheckList] = useState([false,false,false,false,false,false,false]);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!editorValues.repeatWeekdays) {\n      setCheckList([false,false,false,false,false,false,false]);\n    } else {\n      const newState = [false,false,false,false,false,false,false];\n      for(let i = 0; i < editorValues.repeatWeekdays.length; i++) {\n        newState[parseInt(editorValues.repeatWeekdays[i])] = true;\n      }\n\n      setCheckList(newState);\n    }\n  }, [editorValues.repeatWeekdays]);\n\n  if (locSettings === null) {\n    return (\n      <div />\n    )\n  }\n\n  const weekStart = getWeekStart(new Date(), locSettings.DayWeekStartsOn, locSettings.DayStartTime);\n\n  // --------------------------------------------------------------------------------------\n  function onCheckboxChecked(dayOfWeek: number) {\n    const newCheckState = checkList.slice();\n    const isChecked = !checkList[dayOfWeek];\n\n    newCheckState[dayOfWeek] = isChecked;\n    setCheckList(newCheckState);\n\n    let repeatWeekdays = '';\n    for (let i = 0; i < newCheckState.length; i++ ) {\n      if (newCheckState[i]) {\n        repeatWeekdays += i;\n      }\n    }\n\n    update({\n      type: \"REPEATING-UPDATED\",\n      repeatWeekDays: repeatWeekdays,\n      repeatInterval: editorValues.repeatInterval,\n      recurrenceType: editorValues.recurrenceType,\n      recurrenceEnd: editorValues.recurrenceEnd,\n      recurrenceStart: editorValues.recurrenceStart\n    });\n  }\n\n\n  return (\n    <div className=\"weeklist-container\">\n      {[0,1,2,3,4,5,6].map((num: number) => {\n        const thisDate = addDays(weekStart, num);\n        const dayOfWeek = getDay(thisDate);\n\n        return (\n          <span key={num} className=\"day\">\n            <IonCheckbox\n              className=\"day-checkbox\"\n              disabled={editorValues.isReadonly}\n              onClick={() => onCheckboxChecked(dayOfWeek)}\n              checked={checkList[dayOfWeek]}\n            />\n            <span className=\"day-abbr\" >{format(thisDate, 'EE').substr(0, 2)}</span>\n          </span>\n        )\n      })}\n    </div>\n  );\n};\n\nexport default WeekdayList;\n","import React, {useEffect, useState} from 'react';\nimport { IonCheckbox, IonCol, IonDatetime, IonIcon, IonInput, IonLabel, IonRow, IonSelect, IonSelectOption} from '@ionic/react';\nimport './RecurringEventSection.scss';\nimport {calendar, refresh} from 'ionicons/icons';\nimport {AuthorizedItems, LocationSettings} from \"../../../orbital-interfaces/authorized-items\";\nimport EventType from \"../../../enums/EventType\";\nimport authHelper from '../../../util/authitems-helper';\nimport WeekdayList from \"./WeekdayList\";\nimport {EditorReducerAction, EditorValues} from \"../EditEventModalState\";\nimport {RecurrenceType} from \"../../../enums/RecurrenceType\";\nimport {formatDateTimeAsMvcString} from \"../../../util/time-helper\";\n\ninterface RecurringEventSectionProps {\n  auth: AuthorizedItems;\n  editorValues: EditorValues;\n  update: React.Dispatch<EditorReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst RecurringEventSection: React.FC<RecurringEventSectionProps> = ({ auth, editorValues, update }) => {\n  const [locSettings, setLocSettings] = useState(null as LocationSettings | null);\n  const [isVisible, setIsVisible] = useState(false);\n  const [isChecked, setIsChecked] = useState(false);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (editorValues.locationId > 0) {\n      setLocSettings(authHelper.getLocSettingsForLocationId(auth, editorValues.locationId));\n    } else if (editorValues.locationId === 0) {\n      setLocSettings(auth.locations[0].settings);\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editorValues.locationId]);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    setIsVisible(\n      editorValues.eventType === EventType.Shift ||\n      editorValues.eventType === EventType.Unavailable\n    );\n  }, [editorValues.eventType]);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!isVisible) {\n      return;\n    }\n\n    if (editorValues.recurrenceStart) {\n      setIsChecked(true);\n    } else {\n      if (isChecked) {\n\n      } else {\n      }\n    }\n\n  }, [isChecked, isVisible, editorValues.recurrenceStart]);\n\n  // --------------------------------------------------------------------------------------\n  function onRepeatingChecked() {\n    if (!isChecked) {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: undefined,\n        repeatInterval: 1,\n        recurrenceType: RecurrenceType.Weekly,\n        recurrenceEnd: undefined,\n        recurrenceStart: formatDateTimeAsMvcString(new Date())\n      });\n    } else {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: undefined,\n        repeatInterval: undefined,\n        recurrenceType: undefined,\n        recurrenceEnd: undefined,\n        recurrenceStart: undefined\n      });\n    }\n\n    setIsChecked(!isChecked);\n  }\n\n  // --------------------------------------------------------------------------------------\n  function onRecurrenceStartChanged(newValue: string | null | undefined) {\n    if (!newValue) {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: undefined\n      });\n    } else {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: newValue\n      });\n    }\n  }\n\n  // --------------------------------------------------------------------------------------\n  function onRecurrenceEndChanged(newValue: string | null | undefined) {\n    if (!newValue) {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: undefined,\n        recurrenceStart: editorValues.recurrenceStart\n      });\n    } else {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: newValue,\n        recurrenceStart: editorValues.recurrenceStart\n      });\n    }\n  }\n\n  // --------------------------------------------------------------------------------------\n  function onRecurrenceTypeChanged(newValue: string | null | undefined) {\n    if (!newValue) {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: undefined,\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: editorValues.recurrenceStart\n      });\n    } else {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: editorValues.repeatInterval,\n        recurrenceType: parseInt(newValue),\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: editorValues.recurrenceStart\n      });\n    }\n  }\n\n  // --------------------------------------------------------------------------------------\n  function onRepeatIntervalChanged(newValue: string | null | undefined) {\n    if (!newValue) {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: undefined,\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: editorValues.recurrenceStart\n      });\n    } else {\n      update({\n        type: \"REPEATING-UPDATED\",\n        repeatWeekDays: editorValues.repeatWeekdays,\n        repeatInterval: parseInt(newValue),\n        recurrenceType: editorValues.recurrenceType,\n        recurrenceEnd: editorValues.recurrenceEnd,\n        recurrenceStart: editorValues.recurrenceStart\n      });\n    }\n  }\n\n\n  if (!isVisible) {\n    return (\n      <span />\n    )\n  }\n\n  return (\n    <>\n      <IonRow>\n        <IonCol size=\"4\">\n          <IonCheckbox\n            checked={isChecked}\n            onClick={onRepeatingChecked}\n            disabled={editorValues.isReadonly}\n          />\n          <IonLabel className=\"label\" style={{paddingLeft: \"10px\"}}>\n            (R)epeating\n          </IonLabel>\n        </IonCol>\n        {(isChecked) && (\n          <IonCol size=\"8\">\n            <div style={{borderBottom: \"1px solid gray\", height: \"12px\"}}  />\n          </IonCol>\n        )}\n      </IonRow>\n\n      {(isChecked) && (\n        <>\n        <IonRow className=\"edit-row\" >\n          <IonCol size=\"2\" />\n          <IonCol size=\"1\">\n            <IonIcon icon={calendar} mode=\"md\" />\n          </IonCol>\n          <IonCol size=\"4\">\n            <IonDatetime\n              value={editorValues.recurrenceStart}\n              className=\"select\"\n              displayFormat=\"M/D/YY\"\n              pickerFormat=\"MMM DD YYYY\"\n              disabled={editorValues.isReadonly}\n              min=\"2005-01-01\"\n              max=\"2030-01-01\"\n              onIonChange={(e) => {onRecurrenceStartChanged(e.detail.value)}}\n            />\n          </IonCol>\n          <IonCol size=\"1\">\n            <IonIcon icon={calendar} mode=\"md\" style={{textAlign: \"right\"}} />\n          </IonCol>\n          <IonCol size=\"4\">\n            <IonDatetime\n              value={editorValues.recurrenceEnd}\n              className=\"select\"\n              displayFormat=\"M/D/YY\"\n              pickerFormat=\"MMM DD YYYY\"\n              disabled={editorValues.isReadonly}\n              min=\"2005-01-01\"\n              max=\"2030-01-01\"\n              onIonChange={(e) => {onRecurrenceEndChanged(e.detail.value)}}\n            />\n          </IonCol>\n        </IonRow>\n        <IonRow className=\"edit-row\">\n          <IonCol size=\"2\" />\n          <IonCol size=\"1\">\n            <IonIcon icon={refresh} mode=\"md\" />\n          </IonCol>\n          <IonCol size=\"4\">\n            <IonSelect\n              className=\"select\"\n              value={editorValues.recurrenceType}\n              disabled={editorValues.isReadonly}\n              onIonChange={(e) => {onRecurrenceTypeChanged(e.detail.value)}}\n            >\n              <IonSelectOption value={RecurrenceType.Weekly}>Weekly</IonSelectOption>\n              <IonSelectOption value={RecurrenceType.MonthlyByDayOfMonth}>Monthly (Day of Month)</IonSelectOption>\n              <IonSelectOption value={RecurrenceType.MonthlyByDayOfWeek}>Monthly (Day of Week)</IonSelectOption>\n            </IonSelect>\n          </IonCol>\n          <IonCol size=\"1\">\n            #\n          </IonCol>\n          <IonCol size=\"4\">\n            <IonInput\n              className=\"input-textbox\"\n              disabled={editorValues.isReadonly}\n              value={(editorValues.repeatInterval) ? editorValues.repeatInterval.toString() : undefined}\n              onIonChange={(e) => onRepeatIntervalChanged(e.detail.value)}\n            />\n          </IonCol>\n        </IonRow>\n        <IonRow>\n          <IonCol size=\"3\" />\n          <IonCol size=\"9\">\n            <WeekdayList\n              locSettings={locSettings}\n              editorValues={editorValues}\n              update={update}\n            />\n          </IonCol>\n\n        </IonRow>\n        <IonRow className=\"edit-row\">\n          <IonCol size=\"12\">\n            <div style={{borderTop: \"1px solid gray\", width: \"100%\"}} />\n          </IonCol>\n        </IonRow>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default RecurringEventSection;\n","import React from 'react';\nimport {IonButton, IonCol, IonContent, IonGrid, IonHeader, IonRow, IonTitle, IonToolbar} from '@ionic/react';\nimport {RecurrenceUpdateType} from \"../../enums/RecurrenceUpdateType\";\nimport './RecurrenceUpdateTypeSelector.scss';\n\ninterface RecurrenceUpdateTypeSelectorProps {\n  onSelect: (selection: RecurrenceUpdateType | null) => void;\n  updateType: 'NO' | 'UPDATE' | 'DELETE';\n}\n\n// --------------------------------------------------------------------------------------\nconst RecurrenceUpdateTypeSelector: React.FC<RecurrenceUpdateTypeSelectorProps> = ({onSelect, updateType}) => {\n\n  if (updateType === 'NO') {\n    return (\n      <div />\n    );\n  }\n\n  const onButtonClick = (choice: RecurrenceUpdateType | null) => {\n    onSelect(choice);\n  };\n\n  const titleText = updateType === 'UPDATE'\n    ? 'Update Recurring Events'\n    : 'Delete Recurring Events';\n\n  return (\n    <>\n      <IonContent>\n        <IonHeader mode=\"ios\">\n          <IonToolbar>\n            <IonTitle>{titleText}</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        <IonGrid>\n          <IonRow>\n            <IonCol size=\"12\">\n              <IonButton\n                expand=\"block\"\n                color=\"danger\"\n                className=\"apply-button\"\n                onClick={() => onButtonClick(RecurrenceUpdateType.UpdateSingleEvent)}\n              >\n                This event\n              </IonButton>\n            </IonCol>\n          </IonRow>\n          <IonRow>\n            <IonCol size=\"12\">\n              <IonButton\n                expand=\"block\"\n                color=\"danger\"\n                className=\"apply-button\"\n                onClick={() => onButtonClick(RecurrenceUpdateType.UpdateEntireSeries)}\n              >\n                Entire series\n              </IonButton>\n            </IonCol>\n          </IonRow>\n          <IonRow>\n            <IonCol size=\"12\">\n              <IonButton\n                expand=\"block\"\n                color=\"danger\"\n                className=\"apply-button\"\n                onClick={() => onButtonClick(RecurrenceUpdateType.UpdateSeriesForward)}\n              >\n                This event forward\n              </IonButton>\n            </IonCol>\n          </IonRow>\n          <IonRow>\n            <IonCol size=\"12\">\n              <IonButton\n                expand=\"block\"\n                className=\"cancel-btn\"\n                onClick={() => onButtonClick(null)}\n              >\n                Cancel\n              </IonButton>\n            </IonCol>\n          </IonRow>\n        </IonGrid>\n      </IonContent>\n    </>\n  );\n}\n\nexport default RecurrenceUpdateTypeSelector;\n","import {\n  IonButton,\n  IonCol,\n  IonContent,\n  IonGrid,\n  IonHeader,\n  IonModal,\n  IonRow,\n  IonTitle,\n  IonToolbar\n} from '@ionic/react';\nimport React, { useState } from \"react\";\nimport \"./useOrbitalDialogBox.scss\";\n\nexport interface DialogOptions {\n  value: number;\n  text: string;\n  color: string;\n}\n\n\nfunction useOrbitalDialogBox() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [dialogData, setDialogData] = useState({header: \"\", message: \"\", options: [] as DialogOptions[],  onDismiss: (selection: number | null) => {}});\n\n// --------------------------------------------------------------------------------------\n  const showDialog = (header: string, message: string, dialogOptions: DialogOptions[], onDismiss: (selection: number | null) => void) => {\n    setDialogData({\n      header,\n      message,\n      options: dialogOptions,\n      onDismiss\n    });\n\n    setIsOpen(true);\n  };\n\n// --------------------------------------------------------------------------------------\n  const onButtonClick = (selection: number | null) => {\n    setIsOpen(false);\n    dialogData.onDismiss(selection);\n  };\n\n  const dialogBoxJsx = (\n      <IonModal\n        isOpen={isOpen}\n        cssClass=\"orbital-dialog-modal\"\n        onDidDismiss={() => onButtonClick(null)}\n      >\n        <IonContent className=\"modal-content\">\n          <IonHeader mode=\"ios\">\n            <IonToolbar>\n              <IonTitle>{dialogData.header}</IonTitle>\n            </IonToolbar>\n          </IonHeader>\n          <IonGrid>\n            {dialogData.options.map(opt => (\n              <IonRow key={opt.value}>\n                <IonCol size=\"12\">\n                  <IonButton\n                    expand=\"block\"\n                    color={opt.color}\n                    className=\"apply-button\"\n                    onClick={() => onButtonClick(opt.value)}\n                  >\n                    {opt.text}\n                  </IonButton>\n                </IonCol>\n              </IonRow>\n            ))}\n            <IonRow>\n              <IonCol size=\"12\">\n                <IonButton\n                  expand=\"block\"\n                  className=\"cancel-btn\"\n                  onClick={() => onButtonClick(null)}\n                >\n                  Cancel\n                </IonButton>\n              </IonCol>\n            </IonRow>\n          </IonGrid>\n        </IonContent>\n      </IonModal>\n  );\n\n  return {\n    showDialog,\n    dialogBoxJsx\n  }\n}\n\nexport default useOrbitalDialogBox;\n","import React, { useEffect, useReducer, useState } from 'react';\nimport { IonButton, IonButtons, IonIcon, IonContent, IonFooter, IonHeader, IonGrid, IonRow, IonCol, IonTitle,  IonToolbar,  IonModal} from '@ionic/react';\nimport { arrowRoundBack } from 'ionicons/icons';\nimport './EditEventModal.scss';\nimport {AuthorizedItems } from \"../../orbital-interfaces/authorized-items\";\nimport EventTypeStatusEditor from './editor/EventTypeStatusEditor';\nimport EventPositionEditor from './editor/EventPositionEditor';\nimport EventEmployeeEditor from './editor/EventEmployeeEditor';\nimport EventStartEndEditor from './editor/EventStartEndEditor';\nimport EventBreakEditor from './editor/EventBreakEditor';\nimport EventTagEditor from './editor/EventTagEditor';\nimport EventConfirmEditor from './editor/EventConfirmEditor';\nimport EventIsClockedInEditor from './editor/EventIsClockedInEditor';\nimport {editorValueReducer, INITIAL_EDITOR_VAUES} from './EditEventModalState';\nimport scheduleEventApi from '../../api/ScheduleEventsAPI';\nimport { ApplicationUserContext } from '../../context/ApplicationUserContext';\nimport useDialogBox from '../../hooks/useDialogBox';\nimport { ScheduleEvent } from '../../orbital-interfaces/ScheduleEvent';\nimport EventNotesEditor from \"./editor/EventNotesEditor\";\nimport EventClockoutValueEditor from \"./editor/EventClockoutValueEditor\";\nimport EventReqeustEditor from \"./editor/EventRequestEditor\";\nimport { createBrowserHistory } from 'history';\nimport {EventEditAuthorization} from \"./EditEventAuthorization\";\nimport RecurringEventSection from \"./editor/RecurringEventSection\";\nimport {RecurrenceUpdateType} from \"../../enums/RecurrenceUpdateType\";\nimport RecurrenceUpdateTypeSelector from \"./RecurrenceUpdateTypeSelector\";\nimport useOrbitalDialogBox from '../../hooks/useOrbitalDialogBox';\n\ninterface ScheduleFilterModalProps {\n  scheduleEventId: number | null;\n  auth: AuthorizedItems;\n  onDismissModal: (toastMessage?: string) => void;\n  onCancelModal: () => void;\n  isOpen: boolean;\n  eventEditAuth: EventEditAuthorization;\n}\n\n// --------------------------------------------------------------------------------------\nconst EditEventModal: React.FC<ScheduleFilterModalProps> = (\n  { auth, scheduleEventId, onDismissModal, onCancelModal, isOpen, eventEditAuth }) => {\n  const dlg = useDialogBox();\n  const { user } = React.useContext(ApplicationUserContext);\n  const [ editorValues, updateEditorValues] = useReducer(editorValueReducer, INITIAL_EDITOR_VAUES);\n  const [ scheduleEvent, setScheduleEvent] = useState(null as ScheduleEvent | null);\n  const [ recurrenceUpdateType, setRecurrenceUpdateType] = useState(null as RecurrenceUpdateType | null);\n  const [ showRecurrenceUpdateTypeSelector, setShowRecurrenceUpdateTypeSelector] = useState('NO' as 'NO' | 'UPDATE' | 'DELETE');\n  const [ buttonClicked, setButtonClicked ] = useState('NONE' as 'NONE' | 'CREATEUPDATE' | 'DELETE');\n  const isEditing = scheduleEventId !== null;\n  const dialog = useOrbitalDialogBox();\n  let title = \"New Event\";\n  let buttonText = \"CREATE\";\n\n  if (isEditing) {\n    title = \"Edit Event\";\n    buttonText = \"UPDATE\"\n  }\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!isOpen) {\n      return;\n    }\n\n    if (!auth || !auth.locations || auth.locations.length === 0) {\n      return;\n    }\n\n    if (scheduleEventId) {\n      scheduleEventApi.getScheduleEvent(user, scheduleEventId).then((scheduleEvent) => {\n        if (!scheduleEvent) {\n          dlg.showAlert(\n            \"No Event\",\n            \"The event may have been removed or you no longer have access\",\n            onCancel);\n          return;\n        }\n\n        setScheduleEvent(scheduleEvent);\n        updateEditorValues({ type: 'BEGIN-UPDATE', ev: scheduleEvent, auth, eventEditAuth});\n      });\n    } else {\n      if (scheduleEvent !== null) {\n        setScheduleEvent(null);\n      }\n\n      updateEditorValues({ type: 'CREATE-EVENT', auth});\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [scheduleEventId, user, isOpen, auth]);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (recurrenceUpdateType !== null && buttonClicked !== 'NONE') {\n      if (buttonClicked === 'CREATEUPDATE') {\n        createOrUpdate();\n      } else {\n        deleteEvent(editorValues.recurrenceId !== null && editorValues.recurrenceId !== undefined);\n      }\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [recurrenceUpdateType, buttonClicked]);\n\n  // --------------------------------------------------------------------------------------\n  const createOrUpdate = () => {\n    const apiCall = editorValues.scheduleEventId === 0 ? scheduleEventApi.createScheduleEvent : scheduleEventApi.updateScheduleEvent;\n    apiCall(user, editorValues, recurrenceUpdateType).then((result) => {\n      if (result.error) {\n        dlg.showAlert(\"Cannot update\", result.message, () => {\n          onDismissModal(\"Could not update event\");\n        });\n      } else {\n        onDismissModal(\"Event Updated\");\n      }\n    });\n  };\n\n  // --------------------------------------------------------------------------------------\n  const deleteEvent = (skipPrompt: boolean) => {\n    const goDelete = () => {\n      scheduleEventApi.deleteScheduleEvent(user, editorValues.scheduleEventId, recurrenceUpdateType).then(result => {\n        if (result.error) {\n          dlg.showAlert(\"Cannot delete\", result.message, () => {\n            onDismissModal(\"Could not delete event\");\n          });\n        } else {\n          onDismissModal(\"Deleted Event\");\n        }\n      });\n    };\n\n    if (skipPrompt) {\n      goDelete();\n    } else {\n      dialog.showDialog(\n        \"Delete event?\",\n        \"\",\n        [{ text: \"Delete\", color: \"danger\", value: 1}],\n        selection => {\n          if (selection === 1) {\n            goDelete();\n          }\n        }\n      );\n    }\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onCreateOrUpdateClick = () => {\n    setButtonClicked('CREATEUPDATE');\n    if (editorValues.recurrenceId) {\n      if (recurrenceUpdateType !== null) {\n        createOrUpdate();\n      } else {\n        setShowRecurrenceUpdateTypeSelector('UPDATE');\n      }\n    } else {\n      createOrUpdate();\n    }\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onRecurrenceUpdateTypeSelect = (selection: RecurrenceUpdateType | null) => {\n    setShowRecurrenceUpdateTypeSelector('NO');\n    setRecurrenceUpdateType(selection);\n    if (selection === null) {\n      setButtonClicked('NONE');\n    }\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onDeleteClick = () => {\n    setButtonClicked('DELETE');\n    if (editorValues.recurrenceId) {\n      if (recurrenceUpdateType !== null) {\n        deleteEvent(editorValues.recurrenceId !== null && editorValues.recurrenceId !== undefined);\n      } else {\n        setShowRecurrenceUpdateTypeSelector('DELETE');\n      }\n    } else {\n      deleteEvent(editorValues.recurrenceId !== null && editorValues.recurrenceId !== undefined);\n    }\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onCancel = () => {\n    updateEditorValues({type: 'CANCEL'});\n    const history = createBrowserHistory();\n    history.push('/tabs/schedule');\n    onCancelModal();\n  };\n\n  if (!isOpen || !auth || !auth.locations || auth.locations.length === 0 || editorValues.scheduleEventId === -1) {\n    return (\n      <>\n        <div>Loading</div>\n        {dlg.alertBoxJsx}\n      </>\n    )\n  } else {\n    return (\n      <>\n        <IonHeader>\n          <IonToolbar>\n            <IonButtons slot=\"start\">\n              <IonButton onClick={onCancel}>\n                  <IonIcon icon={arrowRoundBack} mode=\"md\" slot=\"icon-only\" />\n              </IonButton>\n            </IonButtons>\n            <IonTitle>\n              {title}\n            </IonTitle>\n          </IonToolbar>\n        </IonHeader>\n\n        <IonContent class=\"outer-content\">\n          <IonGrid>\n            <EventTypeStatusEditor\n              editorValues={editorValues}\n              update={updateEditorValues}\n              auth={auth}\n              eventTypes={eventEditAuth.eventTypeOptionList}\n              eventStatuses={eventEditAuth.eventStatusOptionList}\n            />\n\n            <IonRow className=\"edit-row\">\n              <EventConfirmEditor\n                auth={auth}\n                editorValues={editorValues}\n                update={updateEditorValues}\n              />\n              <EventIsClockedInEditor\n                auth={auth}\n                editorValues={editorValues}\n                update={updateEditorValues}\n              />\n            </IonRow>\n\n            <IonRow className=\"edit-row\">\n              <IonCol size=\"12\">\n                <div style={{width: \"100%\", borderBottom: \"1px solid #AAA\"}} />\n              </IonCol>\n            </IonRow>\n\n            <EventPositionEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventEmployeeEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventStartEndEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <RecurringEventSection\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventBreakEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventTagEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventClockoutValueEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n            <EventNotesEditor\n              auth={auth}\n              editorValues={editorValues}\n              update={updateEditorValues}\n            />\n\n\n          </IonGrid>\n\n          {dlg.alertBoxJsx}\n          {dialog.dialogBoxJsx}\n\n          <IonModal\n            isOpen={showRecurrenceUpdateTypeSelector !== 'NO'}\n            onDidDismiss={() => {onRecurrenceUpdateTypeSelect(null)}}\n            cssClass=\"recurrence-update-modal\"\n          >\n            <RecurrenceUpdateTypeSelector\n              onSelect={onRecurrenceUpdateTypeSelect}\n              updateType={showRecurrenceUpdateTypeSelector}\n            />\n          </IonModal>\n\n        </IonContent>\n\n        <IonFooter className=\"outer-content footer\">\n          <EventReqeustEditor\n            auth={auth}\n            eventType={editorValues.eventType}\n            eventEnd={editorValues.eventEnd}\n            eventStatus={editorValues.eventStatus}\n            eventEmployeeId={editorValues.employee.id}\n            eventPositionId={editorValues.position.position.id}\n            scheduleEventId={editorValues.scheduleEventId}\n            locationId={editorValues.locationId}\n            eventEditAuth={eventEditAuth}\n            update={updateEditorValues}\n            cancelEditModal={(message) => onDismissModal(message)}\n            setUsageText={() => {}}\n          />\n          <IonButton\n              className=\"apply-button\"\n              expand=\"block\"\n              onClick={onCreateOrUpdateClick}\n              disabled={!editorValues.isDirty || !editorValues.valid}\n              hidden={editorValues.isReadonly}\n            >\n              {buttonText}\n          </IonButton>\n          <IonButton\n            className=\"delete-button\"\n            expand=\"block\"\n            onClick={onDeleteClick}\n            hidden={editorValues.isReadonly || editorValues.scheduleEventId <= 0}\n          >\n            DELETE\n          </IonButton>\n        </IonFooter>\n      </>\n    );\n\n  }\n};\n\nexport default EditEventModal;\n","import { IonToast } from '@ionic/react';\nimport React, { useState } from \"react\";\n\nfunction useSimpleToast() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [toastData, setToastData] = useState({message: \"\"});\n\n  const showToast = (message: string) => {\n    setToastData({\n      message,\n    });\n\n    setIsOpen(true);\n  };\n\n  const simpleToastJsx = (\n    <IonToast\n      isOpen={isOpen}\n      onDidDismiss={() => setIsOpen(false)}\n      position=\"top\"\n      message={toastData.message}\n      duration={500}\n    />\n  );\n\n  return {\n    showToast,\n    simpleToastJsx\n  }\n}\n\nexport default useSimpleToast;\n","export enum ClockInRequirement {\n  MatchingShift = 1,\n  AnyShift = 2,\n  NoShift = 3\n}\n","import React from 'react';\nimport './EventCard.scss';\nimport Skeleton from \"react-loading-skeleton\";\n\ninterface EventCardSkeletonProps {\n  threeRows?: boolean;\n}\n\nconst EventCardSkeleton: React.FC<EventCardSkeletonProps> = ({threeRows}) => {\n  return (\n    <button\n      className=\"event\"\n    >\n      <div  className=\"card-first-col\">\n        <div className=\"day-name\"><Skeleton /> </div>\n        <div className=\"day-number\"><Skeleton /></div>\n      </div>\n      <div style={{padding: \"3px\"}}>\n        <Skeleton width={5} height={45} />\n      </div>\n      <div className=\"card-second-col\" >\n        <div className=\"time-row\">\n          <span >\n                <Skeleton width={150} height={9} />&nbsp;&nbsp;\n              </span>\n          <Skeleton />\n        </div>\n        {threeRows && (\n          <div ><Skeleton width={80} height={10} /></div>\n        )}\n        <div className=\"position-row\">\n          <Skeleton width={150} height={10} />&nbsp;&nbsp;\n        </div>\n      </div>\n    </button>\n  );\n};\n\nexport default EventCardSkeleton;\n","import React from 'react';\nimport './NoEventsToShow.scss';\n\n// --------------------------------------------------------------------------------------\nconst NoEventsToShow: React.FC = () => {\n\n  return (\n    <div className=\"no-events-wrapper\">\n      <span className=\"no-events-span\">No Events</span>\n    </div>\n  )\n};\n\nexport default NoEventsToShow;\n","import React, { useState, useEffect } from 'react';\nimport { IonTitle, IonToolbar, IonContent, IonPage, IonModal, IonButtons, IonMenuButton, IonSegment, IonSegmentButton, IonButton, IonIcon, IonHeader} from '@ionic/react';\nimport { funnel, add } from 'ionicons/icons';\nimport './SchedulePage.scss';\nimport { getWeekStart } from '../util/time-helper';\nimport { addDays, startOfDay } from 'date-fns';\nimport { AuthorizedLocation } from '../orbital-interfaces/authorized-items';\nimport ScheduleEventsAPI from '../api/ScheduleEventsAPI';\nimport { DailyNotes } from '../orbital-interfaces/DailyNotes';\nimport { RefresherEventDetail } from '@ionic/core';\nimport { EventInformation, HoursList } from '../orbital-interfaces/TEC';\nimport { EventFilter, initialEventFilter } from '../orbital-interfaces/EventFilter'\nimport WeekChooser  from '../components/SchedulePageComponents/WeekChooser';\nimport EventList from '../components/SchedulePageComponents/EventList';\nimport ScheduleFilterModal from \"../components/SchedulePageComponents/ScheduleFilterModal\";\nimport useIonicRefresher from '../hooks/useIonicRefresher';\nimport EditEventModal from '../components/EditEvent/EditEventModal';\nimport useSimpleToast from \"../hooks/useSimpleToast\";\nimport {AuthorizedItemsContext} from \"../context/AuthorizedItemsContext\";\nimport { ApplicationUserContext } from '../context/ApplicationUserContext';\nimport {RouteComponentProps} from \"react-router\";\nimport Skeleton from \"react-loading-skeleton\";\nimport EventCardSkeleton from \"../components/SchedulePageComponents/EventCardSkeleton\";\nimport {EventEditAuthorization, getEventNewAuthorization} from \"../components/EditEvent/EditEventAuthorization\";\nimport NoEventsToShow from \"../components/SchedulePageComponents/NoEventsToShow\";\n\nconst initialEvents: EventInformation[] = [];\nconst initialDailyNotes: DailyNotes[] = [];\n\ninterface SchedulePageProps extends RouteComponentProps<{\n  scheduleEventId?: string\n}> {}\n\nconst SchedulePage: React.FC<SchedulePageProps> = ({match}) => {\n  // ------------------------------------------------------------------------------------\n  const { user } = React.useContext(ApplicationUserContext);\n  const { auth, refreshAuth } = React.useContext(AuthorizedItemsContext);\n  const toast = useSimpleToast();\n\n  const doRefresh = (e: CustomEvent<RefresherEventDetail>) => {\n    setRefreshing(true);\n    refreshAuth(true, user).then((newAuth) => {\n      console.log(\"yo\");\n      if (newAuth) {\n        getScheduleEvents(newAuth.locations, filter, segment, e);\n      }\n    });\n  };\n\n  const [ filterAppliedClass, setFilterAppliedClass ] = useState(\"filter-not-applied\");\n  const refresher = useIonicRefresher(doRefresh);\n  const startDate = (auth && auth.locations && auth.locations.length > 0)\n    ? getWeekStart(startOfDay(new Date()), auth.locations[0].settings.DayWeekStartsOn, auth.locations[0].settings.DayStartTime)\n    : getWeekStart(startOfDay(new Date()), \"Monday\", \"\");\n\n  const [myScheduleEvents, setMyScheduleEvents] = useState(initialEvents);\n  const [myDailyNotes, setMyDailyNotes] = useState(initialDailyNotes);\n  const [myHoursPerDay, setMyHoursPerDay] = useState([] as HoursList[]);\n  const [requestScheduleEvents, setRequestScheduleEvents] = useState(initialEvents);\n  const [requestDailyNotes, setRequestDailyNotes] = useState(initialDailyNotes);\n  const [requestHoursPerDay, setRequestHoursPerDay] = useState([] as HoursList[]);\n  const [allScheduleEvents, setAllScheduleEvents] = useState(initialEvents);\n  const [allDailyNotes, setAllDailyNotes] = useState(initialDailyNotes);\n  const [allHoursPerDay, setAllHoursPerDay] = useState([] as HoursList[]);\n\n  const [showLoading, setShowLoading] = useState(true);\n  const [segment, setSegment] = useState<'my' | 'requests' | 'all'>('my');\n  const [showFilterModal, setShowFilterModal] = useState(false);\n  const [refreshing, setRefreshing] = useState(true);\n  const [showEventModal, setShowEventModal] = useState(false);\n  const [editEventId, setEditEventId] = useState(null as number | null);\n  const [eventEditAuth, setEventEditAuth] = useState(null as EventEditAuthorization | null);\n  const [filter, setFilter] = useState( {\n    ...initialEventFilter,\n    start: startDate,\n    end: addDays(startDate, 6),\n    positionIds: auth.locations.flatMap(l => l.departments.flatMap(d =>  d.positions.map(p => p.id))),\n    filterByEmployee: true\n  });\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (auth && auth.locations && auth.locations.length > 0) {\n      const newFilter = {\n        ...filter,\n        positionIds: auth.locations.flatMap(l => l.departments.flatMap(d =>  d.positions.map(p => p.id))),\n        dnLocIds: auth.locations.map(l => l.id),\n        settingsLocId: auth.locations[0].id\n      };\n\n      setFilter(newFilter);\n\n      if (\n        (segment === 'my' && myScheduleEvents.length === 0) ||\n        (segment === 'requests' && requestScheduleEvents.length === 0) ||\n        (segment === 'all' && allScheduleEvents.length === 0)\n      ) {\n        setShowLoading(true);\n      }\n\n      if (myScheduleEvents.length === 0){\n        getScheduleEvents(auth.locations, newFilter, 'my', undefined);\n      }\n\n      if (requestScheduleEvents.length === 0) {\n        getScheduleEvents(auth.locations, newFilter, 'requests', undefined);\n      }\n\n      if (allScheduleEvents.length === 0) {\n        getScheduleEvents(auth.locations, newFilter, 'all', undefined);\n      }\n    } else if (auth && auth.employeeId === 0) {\n      setMyScheduleEvents([]);\n      setRequestScheduleEvents([]);\n      setAllScheduleEvents([]);\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [auth]);\n\n  useEffect(() => {\n    if (match.params.scheduleEventId) {\n      setEditEventId(parseInt(match.params.scheduleEventId));\n      setShowEventModal(true);\n    }\n  }, [match.params.scheduleEventId]);\n\n  // ------------------------------------------------------------------------------------\n  const getScheduleEvents = (locations: AuthorizedLocation[], f: EventFilter, curSegment: 'my' | 'requests' | 'all',  e?: CustomEvent<RefresherEventDetail>) => {\n      const actualFilter1 = {\n        ...f,\n        filterByEmployee: curSegment === 'my',\n        eventTypeId: curSegment === 'requests' ? -1 : f.eventTypeId,\n        eventStatusId: curSegment === 'requests' ? 2 : f.eventStatusId\n      };\n      getScheduleEventsByFilterInternal(actualFilter1, curSegment, e);\n\n      setMyScheduleEvents([]);\n      setRequestScheduleEvents([]);\n      setAllScheduleEvents([]);\n\n      if (curSegment === 'my') {\n        const actualFilter2 = {\n          ...f,\n          filterByEmployee: false,\n          eventTypeId: -1,\n          eventStatusId: 2\n        };\n        getScheduleEventsByFilterInternal(actualFilter2, 'requests', e);\n\n        const actualFilter3 = {\n          ...f,\n          filterByEmployee: false,\n        };\n        getScheduleEventsByFilterInternal(actualFilter3, 'all', e);\n      } else if (curSegment === 'requests') {\n        const actualFilter4 = {\n          ...f,\n          filterByEmployee: true\n        };\n        getScheduleEventsByFilterInternal(actualFilter4, 'my', e);\n\n        const actualFilter5 = {\n          ...f,\n          filterByEmployee: false\n        };\n        getScheduleEventsByFilterInternal(actualFilter5, 'all', e);\n      } else if (curSegment === 'all') {\n        const actualFilter6 = {\n          ...f,\n          filterByEmployee: true\n        };\n        getScheduleEventsByFilterInternal(actualFilter6, 'my', e);\n\n        const actualFilter7 = {\n          ...f,\n          filterByEmployee: false,\n          eventTypeId: -1,\n          eventStatusId: 2\n        };\n        getScheduleEventsByFilterInternal(actualFilter7, 'requests', e);\n      }\n  };\n\n  // ------------------------------------------------------------------------------------\n  const getScheduleEventsByFilterInternal = (f: EventFilter, curSegment: 'my' | 'requests' | 'all', e?: CustomEvent<RefresherEventDetail>) => {\n    if (f.settingsLocId === 0) {\n      setShowLoading(false);\n      setRefreshing(false);\n      if (e) {\n        e.detail.complete();\n      }\n\n      return;\n    }\n\n    ScheduleEventsAPI.getScheduleEventsByFilter(user, f).then(res => {\n      if (e) {\n        e.detail.complete();\n      }\n\n      switch(curSegment) {\n        case 'my':\n          setMyScheduleEvents(res.events);\n          setMyDailyNotes(res.dailyNotes);\n          setMyHoursPerDay(res.hoursPerDay);\n        break;\n        case 'requests':\n          setRequestScheduleEvents(res.events);\n          setRequestDailyNotes(res.dailyNotes);\n          setRequestHoursPerDay(res.hoursPerDay);\n        break;\n        case 'all':\n          setAllScheduleEvents(res.events);\n          setAllDailyNotes(res.dailyNotes);\n          setAllHoursPerDay(res.hoursPerDay);\n        break;\n      }\n\n      setShowLoading(false);\n      setRefreshing(false);\n    });\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onEventClick = (ev: EventInformation, newEventEditAuth: EventEditAuthorization) => {\n    setEditEventId(ev.ScheduleEventId);\n    setEventEditAuth(newEventEditAuth);\n    setShowEventModal(true);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onEventUpdated = (toastMessage?: string) => {\n    if (toastMessage) {\n      toast.showToast(toastMessage!);\n    }\n\n    getScheduleEvents(auth.locations, filter, segment, undefined);\n    setShowEventModal(false);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const setStartDate = (date: Date) => {\n    const newFilter = {\n      ...filter,\n      start: date,\n      end: addDays(date, 6)\n    };\n\n    setFilter(newFilter);\n    getScheduleEvents(auth.locations, newFilter, segment,undefined);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onDismissFilterModal = (f: EventFilter, filterApplied: boolean) => {\n    setFilter(f);\n    console.log(\"Filter applied? \", filterApplied);\n    setFilterAppliedClass((filterApplied) ? \"filter-applied\" : \"filter-not-applied\");\n    setShowFilterModal(false);\n    getScheduleEvents(auth.locations, f, segment, undefined);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onSegmentChange = (segmentName: 'my' | 'requests' | 'all') => {\n    setSegment(segmentName);\n\n    if (\n          (segmentName === 'my' && myScheduleEvents.length === 0) ||\n          (segmentName === 'requests' && requestScheduleEvents.length === 0) ||\n          (segmentName === 'all' && allScheduleEvents.length === 0)\n    ) {\n      setShowLoading(true);\n      getScheduleEvents(auth.locations, filter, segmentName, undefined);\n    }\n\n  };\n\n  if (!auth || !auth.locations || auth.locations.length === 0) {\n    return <div>-</div>\n  }\n\n  return (\n    <IonPage id=\"schedule-page\">\n      <IonHeader>\n        <IonToolbar mode=\"md\">\n          <IonButtons slot=\"start\">\n            <IonMenuButton />\n          </IonButtons>\n          <IonTitle slot=\"start\">Schedule</IonTitle>\n          <IonButtons slot=\"end\">\n            <IonButton onClick={() => {\n              setEditEventId(null);\n              setEventEditAuth(getEventNewAuthorization(auth));\n              setShowEventModal(true);\n            }}>\n              <IonIcon icon={add} mode=\"md\" slot=\"icon-only\" />\n            </IonButton>\n            <IonButton onClick={() => setShowFilterModal(true)}>\n              <div className={filterAppliedClass} >&#183;</div>\n              <IonIcon icon={funnel} mode=\"ios\" slot=\"icon-only\" />\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonSegment\n        mode=\"md\"\n        value={segment}\n      >\n        <IonSegmentButton\n          mode=\"md\"\n          value=\"my\"\n          onClick={() => onSegmentChange('my')}\n          checked={segment === 'my'}\n        >\n          MY\n        </IonSegmentButton>\n        <IonSegmentButton\n          mode=\"md\"\n          value=\"requests\"\n          onClick={() => onSegmentChange('requests')}\n          checked={segment === 'requests'}\n        >\n          REQUESTS\n        </IonSegmentButton>\n        <IonSegmentButton\n          mode=\"md\"\n          value=\"all\"\n          onClick={() => onSegmentChange('all')}\n          checked={segment === 'all'}\n        >\n          ALL\n        </IonSegmentButton>\n      </IonSegment>\n        <WeekChooser startDate={getWeekStart(filter.start, auth.locations[0].settings.DayWeekStartsOn, auth.locations[0].settings.DayStartTime)} setStartDate={setStartDate} />\n        <IonContent>\n        {refresher.ionicRefresherJsx}\n\n        {!showLoading && !refreshing && segment === 'my' && myScheduleEvents.length === 0 && (\n          <NoEventsToShow />\n        )}\n\n        {!(showLoading || refreshing) && segment === 'my' && myScheduleEvents.length > 0 && (\n          <EventList\n            events={myScheduleEvents}\n            listType={segment}\n            notes={myDailyNotes}\n            hoursPerDay={myHoursPerDay}\n            auth={auth}\n            onEdit={onEventClick} />\n        )}\n\n\n        {!showLoading && !refreshing && segment === 'requests' && requestScheduleEvents.length === 0 && (\n          <NoEventsToShow />\n        )}\n\n        {!(showLoading || refreshing) && segment === 'requests' && requestScheduleEvents.length > 0 && (\n          <EventList\n            events={requestScheduleEvents}\n            listType={segment}\n            notes={requestDailyNotes}\n            hoursPerDay={requestHoursPerDay}\n            auth={auth}\n            onEdit={onEventClick} />\n        )}\n\n\n        {!showLoading && !refreshing && segment === 'all' && allScheduleEvents.length === 0 && (\n          <NoEventsToShow />\n        )}\n\n        {!(showLoading || refreshing) && segment === 'all' && allScheduleEvents.length > 0 && (\n          <EventList\n            events={allScheduleEvents}\n            listType={segment}\n            notes={allDailyNotes}\n            hoursPerDay={allHoursPerDay}\n            auth={auth}\n            onEdit={onEventClick} />\n        )}\n\n        {(showLoading || refreshing) && (\n          <>\n            <div style={{marginTop: \"10px\"}} />\n            <Skeleton height={24} width={220} /><br/>\n            <EventCardSkeleton threeRows={segment !== 'my'}/>\n            <EventCardSkeleton threeRows={segment !== 'my'}/>\n            <EventCardSkeleton threeRows={segment !== 'my'}/>\n          </>\n        )}\n\n      </IonContent>\n\n      {toast.simpleToastJsx}\n\n      <IonModal\n        isOpen={showFilterModal}\n        onDidDismiss={() => setShowFilterModal(false)}>\n        <ScheduleFilterModal\n          filter={filter}\n          auth={auth}\n          onDismissModal={onDismissFilterModal}\n          isOpen={showFilterModal}\n          onCancelModal={() => setShowFilterModal(false)}\n        />\n      </IonModal>\n\n      <IonModal\n        isOpen={showEventModal}\n        onDidDismiss={() => setShowEventModal(false)}\n      >\n        <EditEventModal\n          isOpen={showEventModal}\n          auth={auth}\n          onCancelModal={() => setShowEventModal(false)}\n          onDismissModal={(toastMessage) => onEventUpdated(toastMessage)}\n          scheduleEventId={editEventId}\n          eventEditAuth={eventEditAuth!}\n        />\n      </IonModal>\n    </IonPage>\n  );\n};\n\nexport default SchedulePage;\n","import React, {useEffect, useState} from 'react';\nimport {IonButton, IonButtons, IonIcon, IonContent, IonFooter, IonHeader, IonTitle, IonToolbar} from '@ionic/react';\nimport { arrowRoundBack } from 'ionicons/icons';\nimport '../SchedulePageComponents/ScheduleFilterModal.scss';\nimport {AuthorizedItems, UnscheduledBreakOptions, BreakType} from \"../../orbital-interfaces/authorized-items\";\nimport { TimeClockSettingsData } from '../../orbital-interfaces/TimeClockSettingsData';\nimport { getEventBreakStartEndString } from '../../util/time-helper';\n\ninterface ScheduleFilterModalProps {\n  auth: AuthorizedItems;\n  tcData: TimeClockSettingsData;\n  onDismissModal: (selection: BreakItem) => void;\n}\n\nexport interface BreakItem {\n  key: string;\n  name: string;\n  breakType: BreakType;\n}\n\n// --------------------------------------------------------------------------------------\nconst BreakSelectionModal: React.FC<ScheduleFilterModalProps> = ({ auth, onDismissModal, tcData}) => {\n  const [breakList, setBreakList] = useState([] as BreakItem[]);\n  const cancelOption = { key: \"Cancel\", name: \"\", breakType: BreakType.UnscheduledUnpaid};\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (auth.locations.length === 0 || !tcData.ClockedInScheduleEvent) {\n      return;\n    }\n\n    const locSettings = auth.locations.filter(l => l.id === tcData.ClockedInScheduleEvent!.LocationId)[0].settings;\n    const breaks: BreakItem[] = [];\n\n    if (tcData.ScheduleEventsForClockIn.length > 0) {\n      tcData.ScheduleEventsForClockIn[0].EventBreaks.map(b => {\n        return breaks.push({\n          key: b.BreakStart,\n          name: getEventBreakStartEndString(b),\n          breakType: BreakType.Scheduled\n        });\n      });\n    }\n\n    switch (locSettings.UnscheduledBreakOptions) {\n      case UnscheduledBreakOptions.Both:\n        breaks.push({ key: \"UnScheduledUnpaid\", name: \"Unscheduled\", breakType: BreakType.UnscheduledUnpaid });\n        breaks.push({ key: \"UnScheduledPaid\", name: \"Unscheduled $\", breakType: BreakType.UnscheduledPaid});\n        break;\n\n      case UnscheduledBreakOptions.Paid:\n          breaks.push({ key: \"UnScheduledPaid\", name: \"Unscheduled $\", breakType: BreakType.UnscheduledPaid});\n          break;\n\n      case UnscheduledBreakOptions.Unpaid:\n          breaks.push({ key: \"UnScheduledUnpaid\", name: \"Unscheduled\", breakType: BreakType.UnscheduledUnpaid });\n          break;\n\n      default:\n        break;\n    }\n\n    setBreakList(breaks);\n  }, [tcData, auth]);\n\n  return (\n    <>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonButton onClick={() => onDismissModal(cancelOption)}>\n                <IonIcon icon={arrowRoundBack} mode=\"md\" slot=\"icon-only\" />\n            </IonButton>\n          </IonButtons>\n          <IonTitle>\n            Choose Break\n          </IonTitle>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent class=\"outer-content\">\n\n        {breakList.map(brk => (\n          <IonButton\n            className=\"apply-button\"\n            expand=\"block\"\n            key={brk.key}\n            color=\"secondary\"\n            onClick={() => {onDismissModal(brk)}}\n          >\n            {brk.name}\n          </IonButton>\n        ))}\n\n      </IonContent>\n\n      <IonFooter>\n        <IonButton\n          className=\"cancel-button\"\n          expand=\"block\"\n          color=\"tertiary\"\n          onClick={() => onDismissModal(cancelOption)}>\n          CANCEL\n        </IonButton>\n      </IonFooter>\n    </>\n  )\n};\n\nexport default BreakSelectionModal;\n","export enum StartBreakResponseCode\n{\n    Success,\n    BreakAlreadyExists,\n    AlreadyOnBreak,\n    ErrorInsertingBreak,\n    UserNotAtSpecifiedLocation,\n    EventDoesNotMatchCurrentUser,\n    InvalidUnscheduledBreak\n}\n","export enum EndBreakResponseCode\n{\n    Success,\n    CannotEndRestrictedBreakEarly,\n    ErrorUpdatingEventBreak,\n    UserNotAtSpecifiedLocation,\n    EventDoesNotMatchCurrentUser,\n    BreakNoLongerExists\n}\n","import { EndBreakResponse } from '../orbital-interfaces/EndBreakResponse';\nimport { StartBreakResponse } from '../orbital-interfaces/StartBreakResponse';\nimport { BreakType } from '../orbital-interfaces/authorized-items';\nimport { ScheduleEvent } from '../orbital-interfaces/ScheduleEvent';\nimport { ClockOutResponse } from '../orbital-interfaces/ClockOutResponse';\nimport { ClockInResponse } from '../orbital-interfaces/ClockInResponse';\nimport { SwitchPositionOrTagResponse } from '../orbital-interfaces/SwitchPositionOrTagResponse';\nimport { TimeClockSettingsData } from '../orbital-interfaces/TimeClockSettingsData';\nimport { ApplicationUser } from '../context/ApplicationUserContext';\nimport apiHelper from './OrbitalApiHelper';\nimport {ClockInGeoLocations} from \"../orbital-interfaces/ClockInGeoLocations\";\n\n// ----------------------------------------------------------------------------------------------\nconst getTimeClockSettings = async(user: ApplicationUser, lat: number | undefined, lng: number | undefined) => {\n  const latitude = lat ?? user.latitude;\n  const longitude = lng ?? user.longitude;\n\n  console.log(`API: getting timeclock settings, lat=${latitude}, lng=${longitude}\\` `)\n  return await apiHelper.get(user,  `api/v1/employee/timeclock/?lat=${latitude}&lng=${longitude}`) as TimeClockSettingsData;\n};\n\n// ----------------------------------------------------------------------------------------------\nconst clockIn = async(user: ApplicationUser, positionId: number, tagId: number | null) => {\n  const baseUrl = `/api/v2/employee/timeclock/clockin/${positionId}/${tagId}?lat=${user.latitude}&lng=${user.longitude}`\n  return await apiHelper.post(user, baseUrl, {}) as ClockInResponse;\n};\n\n// ----------------------------------------------------------------------------------------------\nconst clockOut = async(user: ApplicationUser, clockOutValue?: number) => {\n  const clockoutDataModel = {\n    ClockOutValue: clockOutValue,\n    TimeClockBreak: null,\n    BreakStart: null\n  };\n\n  return await apiHelper.post(\n    user,\n    `/api/v2/employee/timeclock/clockout?lat=${user.latitude}&lng=${user.longitude}`,\n    clockoutDataModel) as ClockOutResponse;\n};\n\n// ----------------------------------------------------------------------------------------------\nconst switchPositionOrTag = async(user: ApplicationUser, positionId: number, tagId: number | null, clockOutValue?: number) => {\n  const baseUrl = `/api/v2/employee/timeclock/switch/${positionId}/${tagId}?lat=${user.latitude}&lng=${user.longitude}`;\n  const clockoutDataModel = {\n    ClockOutValue: clockOutValue,\n    TimeClockBreak: null,\n    BreakStart: null\n  };\n\n  return await apiHelper.post(user, baseUrl, clockoutDataModel) as SwitchPositionOrTagResponse;\n};\n\n// ----------------------------------------------------------------------------------------------\nconst startBreak = async(user: ApplicationUser, clockEvent: ScheduleEvent, shiftEvent: ScheduleEvent | null, breakType: BreakType, breakStart?: string) => {\n  const baseUrl = `/api/v2/employee/timeclock/startbreak?lat=${user.latitude}&lng=${user.longitude}`;\n  const breakStartOptions = {\n    clockEventId: clockEvent.ScheduleEventId,\n    shiftEventId: shiftEvent ? shiftEvent!.ScheduleEventId : null,\n    shiftBreakStart: breakStart,\n    breakType\n  };\n\n  return await apiHelper.post(user, baseUrl, breakStartOptions) as StartBreakResponse;\n};\n\n// ----------------------------------------------------------------------------------------------\nconst endBreak = async(user: ApplicationUser, clockEvent: ScheduleEvent, shiftEvent: ScheduleEvent | null) => {\n  const shiftEventId = (shiftEvent) ? shiftEvent.ScheduleEventId : '';\n  const baseUrl = `/api/v2/employee/timeclock/endbreak/${clockEvent.ScheduleEventId}/${shiftEventId}?lat=${user.latitude}&lng=${user.longitude}`;\n\n  return await apiHelper.post(user, baseUrl, {}) as EndBreakResponse;\n};\n\nconst getGeoLocations = async(user: ApplicationUser) => {\n  const baseUrl = '/api/v2/employee/timeclock/geolocations';\n  return await apiHelper.get(user, baseUrl) as ClockInGeoLocations[];\n};\n\nexport default {\n  getTimeClockSettings,\n  clockIn,\n  clockOut,\n  switchPositionOrTag,\n  startBreak,\n  endBreak,\n  getGeoLocations\n}\n","import React, {useState} from 'react';\nimport { IonButton, IonCol, IonContent, IonFooter, IonInput, IonGrid, IonHeader, IonRow, IonTitle, IonToolbar} from '@ionic/react';\nimport './ClockoutModal.scss';\nimport {LocationSettings} from \"../../orbital-interfaces/authorized-items\";\n\ninterface ClockoutModalProps {\n  onCancel: () => void;\n  onOk: (clockoutValue?: number) => void;\n  locSettings: LocationSettings;\n}\n\n// --------------------------------------------------------------------------------------\nconst ClockoutModal: React.FC<ClockoutModalProps> = ({onCancel, onOk, locSettings }) => {\n  const [clockoutValue, setClockoutValue] = useState(undefined as number | undefined);\n\n  // --------------------------------------------------------------------------------------\n  const onOkClick = () => {\n    onOk(clockoutValue);\n  };\n\n  // --------------------------------------------------------------------------------------\n  function onClockoutValueUpdate(val: string | undefined | null) {\n    if (!val) {\n      if (clockoutValue !== undefined) {\n        setClockoutValue(undefined);\n      }\n\n      return;\n    }\n\n    setClockoutValue(parseFloat(val));\n  }\n\n  return (\n    <>\n      <IonContent>\n        <IonHeader mode=\"ios\">\n          <IonToolbar>\n            <IonTitle>Clock Out</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        <IonGrid>\n          <IonRow>\n            <IonCol className=\"label\" size=\"12\">{locSettings.ClockOutValueLabel}</IonCol>\n          </IonRow>\n          <IonRow>\n            <IonCol size=\"2\"/>\n            <IonCol size=\"8\">\n              <IonInput\n                placeholder=\"Enter value\"\n                type=\"number\"\n                className=\"input\"\n                autoCorrect=\"off\"\n                clearInput={true}\n                value={clockoutValue?.toString()}\n                onIonChange={(e) => {onClockoutValueUpdate(e.detail.value)}}\n\n              />\n\n            </IonCol>\n            <IonCol size=\"2\"/>\n          </IonRow>\n        </IonGrid>\n      </IonContent>\n      <IonFooter>\n        <IonButton\n          expand=\"block\"\n          onClick={onOkClick}\n          className=\"clockout-button\"\n        >\n          CLOCK OUT\n        </IonButton>\n\n        <IonButton\n          expand=\"block\"\n          className=\"cancel-button\"\n          onClick={onCancel}\n        >\n          CANCEL\n        </IonButton>\n      </IonFooter>\n    </>\n  );\n};\n\nexport default ClockoutModal;\n","import React, { useState, useEffect } from 'react';\nimport './ClockPanel.scss';\nimport {IonButton} from \"@ionic/react\";\nimport {LocationSettings} from \"../../orbital-interfaces/authorized-items\";\nimport {TimeClockSettingsData} from \"../../orbital-interfaces/TimeClockSettingsData\";\n\ninterface SwitchPositionOrTagButtonProps {\n  tcData: TimeClockSettingsData;\n  locSettings: LocationSettings;\n  selectedPosId: number;\n  selectedTagId: number | null;\n  onSwitch: () => void;\n}\n\nconst SwitchPositionOrTagButton: React.FC<SwitchPositionOrTagButtonProps> = ({tcData, locSettings, selectedPosId, selectedTagId, onSwitch}) => {\n  const [disabled, setDisabled] = useState(true);\n\n  const hiddenJsx = (\n    <span/>\n  );\n\n  useEffect(() => {\n    if (tcData.UserClockedIn) {\n      const curPosId = tcData.ClockedInScheduleEvent!.PositionId;\n      let curTagId = tcData.ClockedInScheduleEvent!.TagId;\n      if (!curTagId) {\n        curTagId = -1;\n      }\n\n      if (curPosId !== selectedPosId)\n      {\n        setDisabled(false);\n      } else if (curTagId !== selectedTagId) {\n        setDisabled(false);\n      } else {\n        setDisabled(true);\n      }\n\n    }\n  }, [tcData.UserClockedIn, tcData.ClockedInScheduleEvent, selectedPosId, selectedTagId]);\n\n  if (!locSettings.ClockInWithDifferentTag &&\n    !locSettings.EnablePositionChangeForEmployeePosition)  {\n    return hiddenJsx;\n  }\n\n  if (!tcData.UserClockedIn) {\n    return hiddenJsx;\n  }\n\n  return (\n    <div className=\"switch-button-container\">\n      <IonButton\n        className=\"switch-button\"\n        disabled={disabled}\n        color=\"secondary\"\n        expand=\"block\"\n        onClick={onSwitch}\n      >\n        SWITCH\n      </IonButton>\n    </div>\n  );\n};\n\nexport default SwitchPositionOrTagButton;\n","import React, {useRef, useEffect, useState} from 'react';\nimport './Map.scss';\nimport {ApplicationUserContext} from \"../../context/ApplicationUserContext\";\nimport timeclockApi from '../../api/TimeClockAPI';\nimport {ClockInGeoLocations} from \"../../orbital-interfaces/ClockInGeoLocations\";\nimport {IonButton, IonIcon} from \"@ionic/react\";\nimport {arrowRoundUp, arrowRoundDown } from 'ionicons/icons';\n\n\nconst Map: React.FC = () => {\n  const mapEle = useRef<HTMLDivElement | null>(null);\n  const map = useRef<google.maps.Map>();\n  const userCircle = useRef<google.maps.Circle>();\n  const { user } = React.useContext(ApplicationUserContext);\n  const [message, setMessage] = useState(\"\");\n  const [geoLocations, setGeoLocations] = useState([] as ClockInGeoLocations[]);\n  const [showMap, setShowMap] = useState(false);\n\n  // -----------------------------------------------------------------------------------------------------\n  function calculateNearestLocationMessage(\n    lat: number | undefined,\n    lng: number | undefined,\n    locations: ClockInGeoLocations[]): string {\n\n    if (!lat || !lng || locations.length === 0) {\n      return \"\";\n    }\n\n    if (!google ||\n        !google.maps ||\n        !google.maps.geometry ||\n        !google.maps.geometry.spherical ||\n        !google.maps.geometry.spherical.computeDistanceBetween) {\n      return \"\";\n    }\n\n    const userPos = new google.maps.LatLng(lat, lng);\n    const MAX_DISTANCE = 999999999;\n    let closestLocation = null as ClockInGeoLocations | null;\n    let minDistance = MAX_DISTANCE;\n    for (let i = 0; i < locations.length; i++) {\n      const curLoc = locations[i];\n      if (!curLoc.lat || !curLoc.lng) {\n        continue;\n      }\n      const locPos = new google.maps.LatLng(curLoc.lat, curLoc.lng);\n      const distance = (google.maps.geometry.spherical.computeDistanceBetween(userPos, locPos) * 3.28084)\n        - curLoc.proximity;\n      if (distance < minDistance) {\n        minDistance = distance;\n        closestLocation = curLoc;\n      }\n    }\n\n    if (minDistance === MAX_DISTANCE) {\n      return \"\";\n    }\n\n    if (minDistance < 0) {\n      return \"At \" + closestLocation!.locationName;\n    }\n\n    const miles = minDistance * 0.000189394;\n    if (miles > 0.1) {\n      return `${Math.round((miles + Number.EPSILON) * 10) / 10} mi to ${closestLocation!.locationName}`;\n    }\n\n    return `${Math.round(minDistance)} ft to ${closestLocation!.locationName}`;\n  }\n\n  // -----------------------------------------------------------------------------------------------------\n  function onShowMapButtonClick() {\n    const newShowMap = !showMap;\n    setShowMap(newShowMap);\n    setMessage(calculateNearestLocationMessage(user.latitude, user.longitude, geoLocations));\n  }\n\n  // -----------------------------------------------------------------------------------------------------\n  useEffect(() => {\n    console.log(\"MAP: useEffect running\");\n    if (mapEle.current === null || !user.latitude || !user.longitude ) {\n      return;\n    }\n\n    if (map.current !== undefined) {\n      if (map.current && user.latitude && user.longitude) {\n        const userPos = new google.maps.LatLng(user.latitude, user.longitude);\n        map.current.setCenter(userPos);\n        if (userCircle.current) {\n          userCircle.current.setMap(null);\n        }\n\n        userCircle.current = new google.maps.Circle({\n          strokeColor: '#FF0000',\n          strokeOpacity: 0.8,\n          strokeWeight: 2,\n          fillColor: '#FF0000',\n          fillOpacity: 0.25,\n          radius: 6.5,\n          center: userPos,\n          map: map.current\n        });\n      }\n\n      setMessage(calculateNearestLocationMessage(user.latitude, user.longitude, geoLocations));\n\n      return;\n    }\n\n    map.current = new google.maps.Map(mapEle.current, {\n      center: {\n        lat: user.latitude,\n        lng: user.longitude\n      },\n      zoom: 16,\n      disableDefaultUI: true,\n      fullscreenControl: false,\n    });\n\n    addMarkers();\n\n    google.maps.event.addListenerOnce(map.current, 'idle', () => {\n      if (mapEle.current) {\n        mapEle.current.classList.add('show-map');\n      }\n    });\n\n    function addMarkers() {\n      if (user.latitude && user.longitude) {\n        userCircle.current = new google.maps.Circle({\n          strokeColor: '#FF0000',\n          strokeOpacity: 0.8,\n          strokeWeight: 2,\n          fillColor: '#FF0000',\n          fillOpacity: 0.25,\n          radius: 6.5,\n          center: { lat: user!.latitude, lng: user!.longitude},\n          map: map.current\n        });\n      }\n\n      timeclockApi.getGeoLocations(user).then(clockLocations => {\n        setGeoLocations(clockLocations);\n        clockLocations.forEach((markerData) => {\n          let infoWindow = new google.maps.InfoWindow({\n            content: `<h5>${markerData.addr}</h5>`\n          });\n\n          if (markerData.lat && markerData.lng) {\n            const position = new google.maps.LatLng(markerData!.lat, markerData!.lng);\n            let marker = new google.maps.Marker({\n              position,\n              map: map.current!,\n              title: markerData.addr\n            });\n\n            new google.maps.Circle({\n              strokeColor: '#FF0000',\n              strokeOpacity: 0.5,\n              strokeWeight: 1,\n              fillColor: '#DD0000',\n              fillOpacity: 0.2,\n              radius: markerData.proximity * 0.3048, // feet to meters\n              center: position,\n              map: map.current\n            });\n            marker.addListener('click', () => {\n              infoWindow.open(map.current!, marker);\n            });\n          }\n        });\n\n        setMessage(calculateNearestLocationMessage(user.latitude, user.longitude, clockLocations));\n\n      });\n    }\n\n    // eslint-disable-next-line\n  }, [user, user.latitude, user.longitude]);\n\n  return (\n    <>\n    <IonButton\n      style={{display: \"block\"}}\n      onClick={onShowMapButtonClick}\n    >\n      {message}\n      <IonIcon id=\"show-map-button\" icon={showMap ? arrowRoundDown : arrowRoundUp} />\n    </IonButton>\n    <div id=\"map-container\" hidden={!showMap}>\n      <div\n        ref={mapEle}\n        className=\"map-canvas\" />\n    </div>\n    </>\n  );\n};\n\nexport default Map;\n","import React, { useState, useEffect } from 'react';\nimport { IonAlert, IonToast, IonLoading, IonSelect, IonModal, IonItem, IonLabel, IonSelectOption, IonIcon, IonButton,  useIonViewWillEnter, useIonViewWillLeave } from '@ionic/react';\nimport './ClockPanel.scss';\nimport { UnscheduledBreakOptions, LocationSettings, BreakType } from '../../orbital-interfaces/authorized-items';\nimport { TimeClockSettingsData } from '../../orbital-interfaces/TimeClockSettingsData';\nimport {time, cafe} from 'ionicons/icons';\nimport { ClockInRequirement } from '../../enums/ClockInRequirement';\nimport BreakSelectorModal, { BreakItem } from './BreakSelectorModal';\nimport arrayHelper from '../../util/array-helper';\nimport timeClockApi from '../../api/TimeClockAPI';\nimport { format, parseISO } from 'date-fns';\nimport { StartBreakResponseCode } from '../../enums/StartBreakResponseCode';\nimport { EndBreakResponseCode } from '../../enums/EndBreakResponseCode';\nimport { ApplicationUserContext } from '../../context/ApplicationUserContext';\nimport {AuthorizedItemsContext} from \"../../context/AuthorizedItemsContext\";\nimport ClockoutModal from './ClockoutModal';\nimport SwitchPositionOrTagButton from \"./SwitchPositionOrTagButton\";\nimport {log} from \"../../util/logger\";\nimport {useInterval} from \"../../hooks/useInterval\";\nimport Map from \"./Map\";\n\ninterface ClockPanelProps {\n  onUpdate: () => void;\n  refreshToggle: boolean;\n}\n\ninterface List {\n  id: number,\n  name: string;\n}\n\nconst ClockPanel: React.FC<ClockPanelProps> = ({onUpdate, refreshToggle }) => {\n  const { user, startWatchPosition, clearWatchPosition } = React.useContext(ApplicationUserContext);\n  const { auth } = React.useContext(AuthorizedItemsContext);\n  const [posList, setPosList] = useState([] as List[]);\n  const [selectedPosId, setSelectedPosId] = useState(0);\n  const [tagSwitchingEnabled, setTagSwitchingEnabled] = useState(false);\n  const [tagList, setTagList] = useState([] as List[]);\n  const [selectedTagId, setSelectedTagId] = useState(null as number | null);\n  const [breakSetting, setBreakSetting] = useState<\"START BREAK\" | \"END BREAK\" | \"NONE\">(\"START BREAK\");\n  const [locSettings, setLocSettings] = useState({} as LocationSettings);\n  const [showBreakSelectorModal, setShowBreakSelectorModal] = useState(false);\n  const [showLoading, setShowLoading] = useState(false);\n  const [loadingMessage, setLoadingMessage] = useState(\"Please wait...\");\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [showToast, setShowToast] = useState(false);\n  const [showAlertData, setShowAlertData] = useState({show: false, header: \"Alert\", message: \"\"});\n  const [tcData, setTCData] = useState(null as TimeClockSettingsData | null);\n  const [showClockoutModal, setShowClockoutModal] = useState(false);\n\n  const [refresh, setRefresh] = useState(false);\n  let watchPositionId = \"\";\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n\n    return(() => {\n      console.log(\"ClockTodayTab.useEffect: clearing watch position\");\n    });\n\n    // eslint-disable-next-line\n  }, []);\n\n  useIonViewWillEnter(() => {\n    watchPositionId = startWatchPosition((lat, lng) => {\n      log(\"geolocation_updated\", { user: user.username, });\n      console.log(\"refreshed geolocation in callback\");\n      setTimeout(() => {updateTimeClockData(lat, lng);}, 150);\n    });\n\n  });\n\n  useIonViewWillLeave(() => {\n    if (watchPositionId !== \"\") {\n      clearWatchPosition(watchPositionId);\n    }\n  });\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    console.log(\"ClockPanel: useEffect, refreshtoggle\", refreshToggle, \"refresh\", refresh, \"lat\", user.latitude, \"lng\", user.longitude);\n    if (refresh !== refreshToggle) {\n      setRefresh(refreshToggle);\n    }\n\n    updateTimeClockData();\n\n    // eslint-disable-next-line\n  }, [auth, refreshToggle]);\n\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!tcData || !auth || !auth.locations || auth.locations.length === 0) {\n      return;\n    }\n\n    if (tcData.ShowTimeClock) {\n      const uniqueLocationIds = arrayHelper.unique(tcData.PositionsToClockInto.map(p => p.LocationId));\n      const uniqueDeptIds = arrayHelper.unique(tcData.PositionsToClockInto.map(p => p.DepartmentId));\n      let plist: List[];\n      if (uniqueLocationIds.length > 1) {\n        plist = tcData.PositionsToClockInto.map(p => {return { id: p.PositionId, name: p.PositionNameWithLocAndDeptAbbreviation}});\n      } else if (uniqueDeptIds.length > 1) {\n        plist = tcData.PositionsToClockInto.map(p => {return {id: p.PositionId, name: p.PositionNameWithDeptAbbreviation}});\n      } else {\n        plist = tcData.PositionsToClockInto.map(p => {return {id: p.PositionId, name: p.PositionName}});\n      }\n\n      let curPosId: number;\n      if (tcData.UserClockedIn) {\n        curPosId = tcData.ClockedInScheduleEvent!.PositionId;\n        setSelectedPosId(curPosId);\n      } else if (plist.length > 0) {\n        curPosId = plist[0].id;\n        setSelectedPosId(curPosId);\n      } else {\n        curPosId = 0;\n      }\n\n      const curLocId = (tcData.UserClockedIn)\n        ? tcData.ClockedInScheduleEvent!.LocationId\n        : curPosId !== 0\n            ? auth.locations.filter(l => l.departments.flatMap(d => d.positions.flatMap(p => p.id === curPosId)))[0].id\n            : auth.locations[0].id;\n\n      const locSettings = auth.locations.filter(l => l.id === curLocId)[0].settings;\n      setLocSettings(locSettings);\n\n      if (locSettings.EnableEnhancedBreakManagement &&\n          (locSettings.UnscheduledBreakOptions !== UnscheduledBreakOptions.None ||\n          (tcData.ClockedInScheduleEvent!.EventBreaks && tcData.ClockedInScheduleEvent!.EventBreaks.length > 0))) {\n        setBreakSetting(tcData.UserClockedIn && tcData.CurrentEventBreak\n          ? \"END BREAK\"\n          : \"START BREAK\");\n      } else {\n        setBreakSetting(\"NONE\");\n      }\n\n      setPosList(plist);\n      setTags(curPosId);\n    }\n    // eslint-disable-next-line\n  }, [auth, tcData]);\n\n  // ------------------------------------------------------------------------------------\n  useInterval(() => {\n    updateTimeClockData();\n  }, 15000);\n\n  // ------------------------------------------------------------------------------------\n  const updateTimeClockData = (lat?: number | undefined, lng?: number | undefined) => {\n    timeClockApi.getTimeClockSettings(user, lat, lng).then(results => {\n      setTCData(results);\n    });\n  };\n\n // ------------------------------------------------------------------------------------\n const setTags = (currentPositionId: number): number => {\n    if (!tcData) {\n      return -1;\n    }\n\n    const curLocId = (tcData.UserClockedIn)\n      ? tcData.ClockedInScheduleEvent!.LocationId\n      : auth.locations.filter(l => l.departments.flatMap(d => d.positions.flatMap(p => p.id === currentPositionId)))[0].id;\n    const locSettings = auth.locations.filter(l => l.id === curLocId)[0].settings;\n\n\n    if (locSettings.ClockInWithDifferentTag &&\n        tcData.TagsPerPosition[currentPositionId] &&\n        tcData.TagsPerPosition[currentPositionId].length > 1) {\n      setTagSwitchingEnabled(true);\n      let tagList = tcData.TagsPerPosition[currentPositionId].map(t => {return { id: t.TagId, name: t.TagName}});\n      tagList.unshift({id: -1, name: \"NONE\"});\n      setTagList(tagList);\n\n    } else {\n      setTagSwitchingEnabled(false);\n    }\n\n    let tagId = -1;\n    if (tcData.UserClockedIn) {\n      if (tcData.ClockedInScheduleEvent!.TagId) {\n        tagId = tcData.ClockedInScheduleEvent!.TagId;\n      } else if (tcData.ClockedInScheduleEvent!.TagId === null) {\n        tagId = -1;\n      } else {\n        tagId = -1;\n      }\n    } else if (tcData.TagsPerPosition[currentPositionId] && tcData.TagsPerPosition[currentPositionId].length > 0) {\n\n      if (tcData.ScheduleEventsForClockIn && tcData.ScheduleEventsForClockIn[0] && tcData.ScheduleEventsForClockIn[0].TagId) {\n        tagId = tcData.ScheduleEventsForClockIn[0].TagId;\n      } else {\n        tagId = -1;\n      }\n    }\n\n    setSelectedTagId(tagId);\n    return tagId;\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onPositionChange = (newVal: number) => {\n    setSelectedPosId(newVal);\n    setTags(newVal);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onTagChange = (newVal: number) => {\n    setSelectedTagId(newVal);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const showAlert = (header: string, message: string) => {\n    setShowAlertData({show: true, header, message});\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onBreakSelectorModalClose = (brk: BreakItem) => {\n    if (!tcData) {\n      return;\n    }\n\n    setShowBreakSelectorModal(false);\n    if (brk.key === \"Cancel\") {\n      return;\n    }\n\n    setLoadingMessage(\"Starting Break...\");\n    setShowLoading(true);\n\n    timeClockApi.startBreak(\n      user,\n      tcData.ClockedInScheduleEvent!,\n      tcData.ScheduleEventsForClockIn[0],\n      brk.breakType,\n      brk.breakType === BreakType.Scheduled ? brk.key : undefined).then(response => {\n        setShowLoading(false);\n        if (response.StartBreakResponseCode === StartBreakResponseCode.Success) {\n          setToastMessage(\"Break started at \" + format(parseISO(response.BreakStart), 'h:mmaaa'));\n          setShowToast(true);\n          onUpdate();\n          updateTimeClockData();\n        } else {\n          showAlert(\"Could not start break\", `Unable to start break, ${response.Message}`);\n        }\n      });\n  };\n\n  // ------------------------------------------------------------------------------------\n  const clockout = (clockOutValue?: number) => {\n    if (showClockoutModal) {\n      setShowClockoutModal(false);\n    }\n\n    setLoadingMessage(\"Clocking Out...\");\n    setShowLoading(true);\n\n    timeClockApi.clockOut(user, clockOutValue).then(response => {\n      setShowLoading(false);\n      if (response.ClockOutResponseCode === 0) {\n        setToastMessage(\"Clocked out at \" + format(parseISO(response.ClockOutEvent.EventEnd), 'h:mmaaa'));\n        setShowToast(true);\n        onUpdate();\n        updateTimeClockData();\n      } else {\n        showAlert(\"Could not Clock Out\", `Unable to Clock out, ${response.Message}`);\n      }\n    });\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onClockOutClick = () => {\n    if (locSettings.ClockOutValueLabel)\n    {\n      setShowClockoutModal(true);\n    } else {\n      clockout();\n    }\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onClockInClick = () => {\n    setLoadingMessage(\"Clocking in...\");\n    setShowLoading(true);\n\n    timeClockApi.clockIn(user, selectedPosId, selectedTagId).then(response => {\n      setShowLoading(false);\n      if (response.ClockInResponseCode === 0) {\n        setToastMessage(\"Clocked in at \" + format(parseISO(response.ClockInEvent.EventStart), 'h:mmaaa'));\n        setShowToast(true);\n        onUpdate();\n        updateTimeClockData();\n      } else {\n        showAlert(\"Could not Clock In\", `Unable to Clock in, ${response.Message}`);\n      }\n    });\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onBreakButtonClick = () => {\n    if (breakSetting === \"NONE\" || !tcData) {\n      return;\n    }\n\n    if (breakSetting === \"END BREAK\") {\n      setLoadingMessage(\"Ending Break...\");\n      setShowLoading(true);\n\n      timeClockApi.endBreak(\n        user,\n        tcData.ClockedInScheduleEvent!,\n        tcData.ScheduleEventsForClockIn.length > 0 ? tcData.ScheduleEventsForClockIn[0] : null).then(response => {\n          setShowLoading(false);\n          if (response.EndBreakResponseCode === EndBreakResponseCode.Success) {\n            setToastMessage(\"Ended break at \" + format(parseISO(response.BreakEnd), 'h:mmaaa'));\n            setShowToast(true);\n            onUpdate();\n            updateTimeClockData();\n          } else {\n            showAlert(\"Did not come off break\", response.Message);\n          }\n      });\n\n      return;\n    }\n\n    if (locSettings.UnscheduledBreakOptions !== UnscheduledBreakOptions.None ||\n        (tcData.ClockedInScheduleEvent!.EventBreaks && tcData.ClockedInScheduleEvent!.EventBreaks.length > 0)) {\n      setShowBreakSelectorModal(true);\n    } else {\n      showAlert(\"No implemented\", \"Not implemented in ClockPanel.tsx for this scenario\");\n    }\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onSwitchClick = () => {\n    setLoadingMessage(\"Switching...\");\n    setShowLoading(true);\n\n    timeClockApi.switchPositionOrTag(user, selectedPosId, selectedTagId).then(response => {\n      setShowLoading(false);\n      if (response.AllowedToSwitchPositions || response.AllowedToSwitchTags) {\n        setToastMessage(\"Switched\");\n        setShowToast(true);\n        onUpdate();\n        updateTimeClockData();\n      } else {\n        showAlert(\"Could not switch\", `${response.ClockInMessage} ${response.ClockOutMessage}`);\n      }\n    });\n  };\n\n  if (!auth || !tcData) {\n    return <div>Loading...</div>\n  }\n\n  return (\n    <>\n      <IonLoading\n        isOpen={showLoading}\n        onDidDismiss={() => setShowLoading(false)}\n        spinner=\"dots\"\n        message={loadingMessage}\n      />\n\n      <div className=\"clock-controls\">\n\n          <Map />\n\n        {tcData.PositionsToClockInto && tcData.PositionsToClockInto.length > 1 && (\n          <IonItem>\n            <IonLabel>Position</IonLabel>\n            <IonSelect\n              interface=\"action-sheet\"\n              onIonChange={(e) => onPositionChange(e.detail.value)}\n              disabled={!( ((tcData.UserClockedIn && tcData.UserMayClockOut) || (!tcData.UserClockedIn && tcData.UserMayClockIn)) && locSettings.ClockInRequirement !== ClockInRequirement.MatchingShift)}\n              value={selectedPosId}\n            >\n                {posList.map(pos => (\n                  <IonSelectOption key={pos.id} value={pos.id}>{pos.name}</IonSelectOption>\n                ))}\n            </IonSelect>\n          </IonItem>\n        )}\n\n        {tagSwitchingEnabled && (\n          <IonItem>\n            <IonLabel>~Tag</IonLabel>\n            <IonSelect\n              interface=\"action-sheet\"\n              onIonChange={(e) => onTagChange(e.detail.value)}\n              disabled={!( ((tcData.UserClockedIn && tcData.UserMayClockOut) || (!tcData.UserClockedIn && tcData.UserMayClockIn)) && locSettings.ClockInRequirement !== ClockInRequirement.MatchingShift)}\n              value={selectedTagId}\n            >\n              {tagList.map(t => (\n                <IonSelectOption key={t.id} value={t.id}>{t.name}</IonSelectOption>\n              ))}\n            </IonSelect>\n          </IonItem>\n        )}\n\n        <SwitchPositionOrTagButton\n          tcData={tcData}\n          locSettings={locSettings}\n          selectedPosId={selectedPosId}\n          selectedTagId={selectedTagId}\n          onSwitch={onSwitchClick}\n        />\n        {!tcData.UserClockedIn && (\n          <div className=\"clockin-button-container\">\n            <IonButton\n              className=\"clockin-button\"\n              onClick={onClockInClick}\n              disabled={!tcData.UserMayClockIn}\n            >\n              <IonIcon mode=\"md\" style={{paddingRight: \"5px\"}} icon={time}/> CLOCK IN\n            </IonButton>\n          </div>\n        )}\n        {tcData.UserClockedIn && (\n          <div className=\"clockout-button-container\">\n            <IonButton\n              className=\"clockout-button\"\n              disabled={!tcData.UserMayClockOut}\n              expand=\"block\"\n              onClick={onClockOutClick}\n            >\n              CLOCK OUT <IonIcon mode=\"md\" style={{paddingLeft: \"5px\"}} icon={time}/>\n            </IonButton>\n\n            {breakSetting !== \"NONE\" && (\n              <IonButton\n                onClick={onBreakButtonClick}\n                expand=\"block\"\n                className=\"break-button\"\n                disabled={!tcData.UserMayClockOut}\n              >\n                <IonIcon icon={cafe} />\n                {breakSetting}\n              </IonButton>\n            )}\n\n          </div>\n        )}\n      </div>\n\n      <IonToast\n            isOpen={showToast}\n            message={toastMessage}\n            duration={2000}\n            onDidDismiss={() => setShowToast(false)}\n      />\n\n      <IonModal\n        isOpen={showBreakSelectorModal}\n        cssClass=\"break-selector-modal\"\n      >\n        <BreakSelectorModal\n          auth={auth}\n          tcData={tcData}\n          onDismissModal={(selection) => onBreakSelectorModalClose(selection)}\n        />\n      </IonModal>\n\n      <IonModal\n        cssClass=\"clockout-modal\"\n        isOpen={showClockoutModal}\n        onDidDismiss={() => {setShowClockoutModal(false);}}\n      >\n        <ClockoutModal\n          onCancel={() => {setShowClockoutModal(false);}}\n          onOk={clockout}\n          locSettings={locSettings}\n        />\n      </IonModal>\n\n      <IonAlert\n        isOpen={showAlertData.show}\n        onDidDismiss={() => setShowAlertData({...showAlertData, show: false})}\n        header={showAlertData.header}\n        message={showAlertData.message}\n        buttons={['OK']}\n      />\n\n    </>\n  );\n};\n\nexport default ClockPanel;\n","import { useEffect, useRef } from 'react';\n\nexport function useInterval( callback: () => void, delay: number) {\n  const savedProps = useRef<() => void>();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedProps.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      if (savedProps.current) {\n        savedProps.current();\n      }\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n","import React from 'react';\nimport './PayrollPeriodChooser.scss';\nimport { IonIcon } from '@ionic/react';\nimport { arrowBack, arrowForward, arrowDropdown } from 'ionicons/icons';\nimport {addDays, format} from \"date-fns\";\n\ninterface PayrollPeriodChooserProps {\n  startDate: Date | null;\n  endDate: Date | null;\n  onNextPayPeriod: () => void;\n  onPrevPayPeriod: () => void;\n}\n\nfunction getPayPeriodDateText(start: Date | null, end: Date | null) {\n  if (!start || !end) {\n    return \" \";\n  }\n\n  if (start.getMonth() !== end.getMonth()) {\n    return format(start, \"MMM d\").toUpperCase() + \" - \" + format(addDays(end, -1), \"MMM d\").toUpperCase();\n  }\n\n  return format(start, \"MMM d\").toUpperCase() + \" - \" + format(addDays(end, -1), \"d\");\n}\n\n// --------------------------------------------------------------------------------------\nconst PayrollPeriodChooser: React.FC<PayrollPeriodChooserProps> = ({ startDate, endDate, onNextPayPeriod, onPrevPayPeriod}) => {\n  const isLoading = startDate === null || endDate === null;\n  const payPeriodDateText = (isLoading) ? \"\" : getPayPeriodDateText(startDate, endDate);\n\n  return (\n    <div className=\"chooser\">\n      <div className=\"top\">\n        <button\n          onClick={onPrevPayPeriod}\n          className=\"arrow\"\n          key={-1}>\n          <IonIcon mode=\"ios\" icon={arrowBack}/>\n        </button>\n        <div className=\"month-year-container\">\n          <div className=\"datetime-picker-container\">\n            <div className=\"datetime-picker\" >{payPeriodDateText}</div>\n            <IonIcon\n              mode=\"md\"\n              icon={arrowDropdown}\n              hidden={isLoading}\n            />\n          </div>\n        </div>\n        <button\n          onClick={onNextPayPeriod}\n          className=\"arrow\"\n          key={7}>\n          <IonIcon\n            mode=\"ios\"\n            icon={arrowForward}\n          />\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default PayrollPeriodChooser;\n","import { ApplicationUser } from '../context/ApplicationUserContext';\nimport apiHelper from './OrbitalApiHelper';\nimport {formatDateTimeAsMvcString} from \"../util/time-helper\";\nimport {OrbitalTime} from \"../orbital-interfaces/OrbitalTime\";\n\nexport interface PayrollPeriodHoursPerAbsent {\n  absentId: number;\n  time: OrbitalTime;\n}\n\nexport interface PayrollPeriodDateItem {\n  date: string;\n  regular: OrbitalTime;\n  dailyOvertime: OrbitalTime;\n  weeklyOvertime: OrbitalTime;\n  special: OrbitalTime;\n  absent: OrbitalTime;\n  timePerAbsent: PayrollPeriodHoursPerAbsent[];\n}\n\nexport interface PayrollPeriodData {\n  start: string;\n  end: string;\n  list: PayrollPeriodDateItem[];\n  error: boolean;\n  message: string;\n  totalRegular: OrbitalTime;\n  totalWeeklyOvertime: OrbitalTime;\n  totalDailyOvertime: OrbitalTime;\n  totalAbsent: OrbitalTime;\n  totalSpecial: OrbitalTime;\n}\n\n// ----------------------------------------------------------------------------------------------\nconst getPayPeriodDateForEmployee = async (user: ApplicationUser, locationId: number, date: Date) => {\n  const dateStr = formatDateTimeAsMvcString(date);\n  return await apiHelper.get(user, 'api/v2/payroll/get/' + locationId + '/' + dateStr) as PayrollPeriodData;\n};\n\n\nexport default {\n  getPayPeriodDateForEmployee\n}\n","import React from 'react';\nimport {OrbitalTime} from \"../../orbital-interfaces/OrbitalTime\";\nimport {LocationSettings} from \"../../orbital-interfaces/authorized-items\";\nimport { getTimeStringFromOrbitalTime } from '../../util/time-helper';\ninterface PayrollDetailListProps {\n  time: OrbitalTime | null;\n  locSettings: LocationSettings;\n  fontColor: string;\n}\n\nfunction getHoursString(locsettings: LocationSettings, time: OrbitalTime) {\n  return getTimeStringFromOrbitalTime(locsettings, time);\n}\n\n// --------------------------------------------------------------------------------------\nconst PayrollOrbitalTimeItem: React.FC<PayrollDetailListProps> = ({ time, locSettings, fontColor }) => {\n\n  if (time  === null) {\n    return <span> -- </span>\n  }\n\n  const displayColor = (time.ActualHours === 0.0) ? \"lightgray\" : fontColor;\n\n  return (\n    <span style={{color: displayColor}}>{getHoursString(locSettings, time)}</span>\n  );\n};\n\nexport default PayrollOrbitalTimeItem;\n","import React, {useContext} from 'react';\nimport { IonContent, IonRow, IonCol, IonButton, IonFooter, IonGrid, IonHeader, IonTitle, IonToolbar } from '@ionic/react';\nimport './PayrollDetailModal.scss';\nimport { parseISO,  } from 'date-fns';\nimport {PayrollPeriodDateItem} from \"../../api/PayrollPeriodAPI\";\nimport { getDateString } from '../../util/time-helper';\nimport {AuthorizedItems, LocationSettings} from \"../../orbital-interfaces/authorized-items\";\nimport PayrollOrbitalTimeItem from \"./PayrollOrbitalTimeItem\";\nimport {AuthorizedItemsContext} from \"../../context/AuthorizedItemsContext\";\n\ninterface AddBreakModalProps {\n  onClose: () => void;\n  data: PayrollPeriodDateItem;\n  locSettings: LocationSettings;\n}\n\nfunction getAbsentName(auth: AuthorizedItems, id: number) {\n  return auth.payrollEvents.filter(pe => pe.id === id)[0].name;\n}\n\n// --------------------------------------------------------------------------------------\nconst PayrollDetailModal: React.FC<AddBreakModalProps> = ({onClose, data, locSettings}) => {\n  const {auth} = useContext(AuthorizedItemsContext);\n\n  if (!data) {\n    return (\n      <div>loading</div>\n    )\n  }\n\n  return (\n    <>\n      <IonContent>\n        <IonHeader mode=\"ios\">\n          <IonToolbar>\n            <IonTitle>{getDateString(parseISO(data.date))}</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        <IonGrid>\n          {data.regular.ActualHours > 0.0 && (\n            <IonRow>\n              <IonCol size=\"7\">\n                Regular\n              </IonCol>\n              <IonCol size=\"5\">\n                <PayrollOrbitalTimeItem time={data.regular} locSettings={locSettings} fontColor=\"black\" />\n              </IonCol>\n            </IonRow>\n          )}\n\n          {data.dailyOvertime.ActualHours > 0.0 && (\n            <IonRow>\n              <IonCol size=\"7\">\n                Daily Overtime\n              </IonCol>\n              <IonCol size=\"5\">\n                <PayrollOrbitalTimeItem time={data.dailyOvertime} locSettings={locSettings} fontColor=\"red\" />\n              </IonCol>\n            </IonRow>\n          )}\n\n          {data.weeklyOvertime.ActualHours > 0.0 && (\n            <IonRow>\n              <IonCol size=\"7\">\n                Weekly Overtime\n              </IonCol>\n              <IonCol size=\"5\">\n                <PayrollOrbitalTimeItem time={data.weeklyOvertime} locSettings={locSettings} fontColor=\"red\" />\n              </IonCol>\n            </IonRow>\n          )}\n\n          {data.special.ActualHours > 0.0 && (\n            <IonRow>\n              <IonCol size=\"7\">\n                Special Dates\n              </IonCol>\n              <IonCol size=\"5\">\n                <PayrollOrbitalTimeItem time={data.special} locSettings={locSettings} fontColor=\"black\" />\n              </IonCol>\n            </IonRow>\n          )}\n\n          {data.timePerAbsent && data.timePerAbsent.map(hpa => {\n            return (\n              <IonRow key={hpa.absentId}>\n                <IonCol size=\"7\">\n                  {getAbsentName(auth, hpa.absentId)}\n                </IonCol>\n                <IonCol size=\"5\">\n                  <PayrollOrbitalTimeItem time={hpa.time} locSettings={locSettings} fontColor=\"#AD850C\" />\n                </IonCol>\n              </IonRow>\n            )\n          })}\n\n        </IonGrid>\n      </IonContent>\n      <IonFooter>\n        <IonButton\n          expand=\"block\"\n          onClick={onClose}\n        >\n          CLOSE\n        </IonButton>\n      </IonFooter>\n    </>\n  );\n};\n\nexport default PayrollDetailModal;\n","import React, {useContext, useState} from 'react';\nimport {IonRow, IonCol, IonModal} from '@ionic/react';\nimport {format, parseISO} from \"date-fns\";\nimport {PayrollPeriodDateItem} from \"../../api/PayrollPeriodAPI\";\nimport PayrollOrbitalTimeItem from \"./PayrollOrbitalTimeItem\";\nimport {AuthorizedItemsContext} from \"../../context/AuthorizedItemsContext\";\nimport authHelper from '../../util/authitems-helper';\nimport {ColumnEnum} from \"./PayrollDetailList\";\nimport PayrollDetailModal from \"./PayrollDetailModal\";\nimport Skeleton from \"react-loading-skeleton\";\n\ninterface PayrollDetailListProps {\n  payrollRow: PayrollPeriodDateItem | null;\n  colsToDisplay: ColumnEnum;\n  colSize: string;\n}\n\nfunction formatDateString(d: string) {\n  return format(parseISO(d), \"EEE d\").toUpperCase();\n}\n\n// --------------------------------------------------------------------------------------\nconst PayrollDetailRow: React.FC<PayrollDetailListProps> = ({ payrollRow, colsToDisplay, colSize }) => {\n  const {auth} = useContext(AuthorizedItemsContext);\n  const locSettings = authHelper.getLocSettingsForLocationId(auth, auth.locations[0].id);\n  const [showDetailModal, setShowDetailModal] = useState(false);\n\n  if (payrollRow === null) {\n    return (\n      <IonRow>\n        <IonCol size=\"3\"><Skeleton width={50} /></IonCol>\n        <IonCol size=\"3\"><Skeleton width={50} /></IonCol>\n        <IonCol size=\"3\"><Skeleton width={50} /></IonCol>\n        <IonCol size=\"3\"><Skeleton width={50} /></IonCol>\n      </IonRow>\n    )\n  }\n\n  return (\n      <>\n        <IonRow>\n          <IonCol size={colSize}>\n            <button\n              style={{fontSize: \"16px\", backgroundColor: \"white\", border: \"none\", outline: \"none\"}}\n              onClick={() => setShowDetailModal(true)}\n            >\n            {formatDateString(payrollRow!.date)}\n            </button>\n          </IonCol>\n\n          <IonCol\n            size={colSize}\n            color=\"secondary\"\n            hidden={(colsToDisplay & ColumnEnum.Regular) !== ColumnEnum.Regular}\n          >\n            <PayrollOrbitalTimeItem\n              time={payrollRow?.regular}\n              locSettings={locSettings}\n              fontColor=\"black\"\n            />\n          </IonCol>\n\n          <IonCol\n            size={colSize}\n            hidden={(colsToDisplay & ColumnEnum.DailyOvertime) !== ColumnEnum.DailyOvertime}\n          >\n            <PayrollOrbitalTimeItem\n              time={payrollRow?.dailyOvertime}\n              locSettings={locSettings}\n              fontColor=\"red\"\n            />\n          </IonCol>\n\n          <IonCol\n            size={colSize}\n            hidden={(colsToDisplay & ColumnEnum.WeeklyOvertime) !== ColumnEnum.WeeklyOvertime}\n          >\n            <PayrollOrbitalTimeItem\n              time={payrollRow?.weeklyOvertime}\n              locSettings={locSettings}\n              fontColor=\"red\"\n            />\n          </IonCol>\n\n          <IonCol\n            size={colSize}\n            hidden={(colsToDisplay & ColumnEnum.Special) !== ColumnEnum.Special}\n          >\n            <PayrollOrbitalTimeItem\n              time={payrollRow?.special}\n              locSettings={locSettings}\n              fontColor=\"black\"\n            />\n          </IonCol>\n\n          <IonCol\n            size={colSize}\n            hidden={(colsToDisplay & ColumnEnum.Absent) !== ColumnEnum.Absent}\n          >\n            <PayrollOrbitalTimeItem\n              time={payrollRow?.absent}\n              locSettings={locSettings}\n              fontColor=\"black\"\n            />\n          </IonCol>\n        </IonRow>\n\n        <IonModal\n          cssClass=\"detail-modal\"\n          isOpen={showDetailModal}\n          onDidDismiss={() => setShowDetailModal(false)}\n        >\n          <PayrollDetailModal\n            onClose={() => setShowDetailModal(false)}\n            locSettings={locSettings}\n            data={payrollRow!}\n            />\n        </IonModal>\n      </>\n  );\n};\n\nexport default PayrollDetailRow;\n","import React, {useContext, useEffect, useState} from 'react';\nimport {IonGrid, IonRow, IonCol} from '@ionic/react';\nimport {PayrollPeriodData } from \"../../api/PayrollPeriodAPI\";\nimport './PayrollDetailList.scss';\nimport PayrollDetailRow from \"./PayrollDetailRow\";\nimport {AuthorizedItemsContext} from \"../../context/AuthorizedItemsContext\";\nimport authHelper from \"../../util/authitems-helper\";\nimport PayrollOrbitalTimeItem from \"./PayrollOrbitalTimeItem\";\nimport Skeleton from \"react-loading-skeleton\";\n\ninterface PayrollDetailListProps {\n  payrollData: PayrollPeriodData | null;\n}\n\nexport enum ColumnEnum {\n  None = 0,\n  Regular = 1        << 0,\n  DailyOvertime  = 1 << 1,\n  WeeklyOvertime = 1 << 2,\n  Special        = 1 << 3,\n  Absent         = 1 << 4,\n  All       = ~(~0 << 5)\n}\n\nfunction getColumnsToDisplay(payrollData : PayrollPeriodData) : { count: number, cols: ColumnEnum} {\n  let cols = ColumnEnum.Regular;\n  let count = 2;\n\n  if (payrollData.totalDailyOvertime.ActualHours > 0.0) {\n    cols |= ColumnEnum.DailyOvertime;\n    count++;\n  }\n\n  if (payrollData.totalWeeklyOvertime.ActualHours > 0.0) {\n    cols |= ColumnEnum.WeeklyOvertime;\n    count++;\n  }\n\n  if (payrollData.totalSpecial.ActualHours > 0.0) {\n    cols |= ColumnEnum.Special;\n    count++;\n  }\n\n  if (payrollData.totalAbsent.ActualHours > 0.0) {\n    cols |= ColumnEnum.Absent;\n    count++;\n  }\n\n  return { cols, count};\n}\n// --------------------------------------------------------------------------------------\nconst PayrollDetailList: React.FC<PayrollDetailListProps> = ({ payrollData }) => {\n  const {auth} = useContext(AuthorizedItemsContext);\n  const locSettings = authHelper.getLocSettingsForLocationId(auth, auth.locations[0].id);\n  const [colsToDisplay, setColsToDisplay] = useState(ColumnEnum.None);\n  const [colSize, setColSize] = useState(\"3\");\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!payrollData) {\n      return;\n    }\n\n    const { count, cols } = getColumnsToDisplay(payrollData);\n    setColsToDisplay(cols);\n    setColSize((count >= 5) ? \"2\" : \"3\");\n  }, [payrollData]);\n\n  if (payrollData === null) {\n    return (\n      <div className=\"grid-container\">\n        <IonGrid class=\"ion-text-end\" >\n          <IonRow className=\"list-header\" class=\"ion-text-center\">\n            <IonCol size=\"3\"><Skeleton width={60} /></IonCol>\n            <IonCol size=\"3\"><Skeleton width={60} /></IonCol>\n            <IonCol size=\"3\"><Skeleton width={60} /></IonCol>\n            <IonCol size=\"3\"><Skeleton width={60} /></IonCol>\n          </IonRow>\n          {[1,2,3,4,5,6,7,8,9,10].map(x => {\n            return (\n              <PayrollDetailRow\n                payrollRow={null}\n                colSize=\"3\"\n                colsToDisplay={ColumnEnum.None}\n                key={x}\n              />\n            )\n          })}\n        </IonGrid>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"grid-container\">\n    <IonGrid class=\"ion-text-end\" >\n      <IonRow className=\"list-header\" class=\"ion-text-center\">\n        <IonCol\n          size={colSize}\n        >DATE</IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.Regular) !== ColumnEnum.Regular}\n        >\n          REG\n        </IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.DailyOvertime) !== ColumnEnum.DailyOvertime}\n        >\n          DAILY OT\n        </IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.WeeklyOvertime) !== ColumnEnum.WeeklyOvertime}\n        >\n          WKLY OT\n        </IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.Special) !== ColumnEnum.Special}\n        >\n          SPECIAL\n        </IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.Absent) !== ColumnEnum.Absent}\n        >\n          ABSENT\n        </IonCol>\n      </IonRow>\n      {payrollData?.list.map(row => (\n        <PayrollDetailRow\n          key={row.date}\n          payrollRow={row}\n          colsToDisplay={colsToDisplay}\n          colSize={colSize}\n        />\n      ))}\n      <IonRow style={{fontWeight: \"bold\"}}>\n        <IonCol size={colSize}>TOTAL</IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.Regular) !== ColumnEnum.Regular}\n        >\n          <PayrollOrbitalTimeItem\n            time={payrollData?.totalRegular}\n            locSettings={locSettings}\n            fontColor=\"black\"\n          />\n        </IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.DailyOvertime) !== ColumnEnum.DailyOvertime}\n        >\n          <PayrollOrbitalTimeItem\n            time={payrollData?.totalDailyOvertime}\n            locSettings={locSettings}\n            fontColor=\"red\"\n          />\n        </IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.WeeklyOvertime) !== ColumnEnum.WeeklyOvertime}\n        >\n          <PayrollOrbitalTimeItem\n            time={payrollData?.totalWeeklyOvertime}\n            locSettings={locSettings}\n            fontColor=\"red\"\n          />\n        </IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.Special) !== ColumnEnum.Special}\n        >\n          <PayrollOrbitalTimeItem\n            time={payrollData?.totalSpecial}\n            locSettings={locSettings}\n            fontColor=\"black\"\n          />\n        </IonCol>\n        <IonCol\n          size={colSize}\n          hidden={(colsToDisplay & ColumnEnum.Absent) !== ColumnEnum.Absent}\n        >\n          <PayrollOrbitalTimeItem\n            time={payrollData?.totalAbsent}\n            locSettings={locSettings}\n            fontColor=\"black\"\n          />\n        </IonCol>\n      </IonRow>\n    </IonGrid>\n    </div>\n  );\n};\n\nexport default PayrollDetailList;\n","import React, { useState, useEffect } from 'react';\nimport './ClockPanel.scss';\nimport {addDays, parseISO} from 'date-fns';\nimport { ApplicationUserContext } from '../../context/ApplicationUserContext';\nimport {AuthorizedItemsContext} from \"../../context/AuthorizedItemsContext\";\nimport PayrollPeriodChooser from \"./PayrollPeriodChooser\";\nimport PayrollPeriodAPI, {PayrollPeriodData} from \"../../api/PayrollPeriodAPI\";\nimport useDialogBox from \"../../hooks/useDialogBox\";\nimport PayrollDetailList from \"./PayrollDetailList\";\nimport {RefresherEventDetail} from \"@ionic/core\";\nimport useIonicRefresher from \"../../hooks/useIonicRefresher\";\n\ninterface PayrollPeriodsTabProps {\n  date: Date | null;\n}\n\nconst PayrollPeriodsTab: React.FC<PayrollPeriodsTabProps> = ({ date }) => {\n  const { user } = React.useContext(ApplicationUserContext);\n  const { auth } = React.useContext(AuthorizedItemsContext);\n  const [ currentDate, setCurrentDate ] = useState(null as Date | null);\n  const [ startDate, setStartDate ] = useState(null as Date | null);\n  const [ endDate, setEndDate ] = useState(null as Date | null);\n  const [ payrollData, setPayrollData] = useState(null as PayrollPeriodData | null);\n  const dlg = useDialogBox();\n\n  // ------------------------------------------------------------------------------------\n  const doRefresh = (e: CustomEvent<RefresherEventDetail>) => {\n    getData(e);\n  };\n\n  const refresher = useIonicRefresher(doRefresh);\n\n  // --------------------------------------------------------------------------------------------------------\n  useEffect(() => {\n    let newStartDate = date;\n    if (date === null) {\n      newStartDate = new Date();\n    }\n\n    setCurrentDate(newStartDate);\n\n  }, [date]);\n\n  // --------------------------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (currentDate == null) {\n      return;\n    }\n\n    getData();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentDate]);\n\n  // --------------------------------------------------------------------------------------------------------\n  function getData(e?: CustomEvent<RefresherEventDetail>) {\n    PayrollPeriodAPI.getPayPeriodDateForEmployee(user, auth.locations[0].id, currentDate!).then((data) => {\n      if (data.error) {\n        dlg.showAlert(\"Error\", \"Could not retrieve Payroll data: \" + data.message, () => {});\n        return;\n      }\n\n      setStartDate(parseISO(data.start));\n      setEndDate(parseISO(data.end));\n      setPayrollData(data);\n      if (e) {\n        e.detail.complete();\n      }\n    });\n  }\n\n  // --------------------------------------------------------------------------------------------------------\n  const onNextPayPeriod = () => {\n    setCurrentDate(addDays(endDate!, 1));\n  };\n\n  // --------------------------------------------------------------------------------------------------------\n  const onPrevPayPeriod = () => {\n    setCurrentDate(addDays(startDate!, -1));\n  };\n\n  return (\n    <>\n      <PayrollPeriodChooser\n        startDate={startDate}\n        endDate={endDate}\n        onNextPayPeriod={onNextPayPeriod}\n        onPrevPayPeriod={onPrevPayPeriod}\n      />\n      <PayrollDetailList\n        payrollData={payrollData}\n      />\n      {dlg.alertBoxJsx}\n      {refresher.ionicRefresherJsx}\n    </>\n\n  );\n};\n\nexport default PayrollPeriodsTab;\n","import React from 'react';\nimport { DailyNotes } from '../orbital-interfaces/DailyNotes';\nimport './TodayDailyNoteCard.scss';\nimport { AuthorizedItems } from '../orbital-interfaces/authorized-items';\n\ninterface TodayNoteCardProps {\n  oneLine: boolean,\n  dailyNote?: DailyNotes,\n  authItems: AuthorizedItems\n}\n\n// ---------------------------------------------------------------------------------\nconst getDeptName = (note: DailyNotes, authItems: AuthorizedItems) => {\n  let dept = '';\n  if (authItems.locations.length >= 1) {\n    dept = authItems.locations.filter(l => l.id === note.LocationId)[0].abbr + '/';\n  }\n\n  return (note.DepartmentId === -1)\n    ? dept + 'All Departments'\n    : dept + note.DepartmentName;\n};\n\n// ==============================================================================\nconst TodayNoteCard: React.FC<TodayNoteCardProps> = ({ authItems, oneLine, dailyNote }) => {\n  if (!dailyNote) {\n    return <div />\n  }\n\n  return (\n    <button className=\"daily-note\">\n      <div className=\"event-color-col\" />\n      <div className=\"card-second-col\">\n        <div className=\"dept-row\">{getDeptName(dailyNote, authItems)}</div>\n        <div className={oneLine ? 'note-text-row-oneline' : 'note-text-row'}>\n          {dailyNote.Notes}\n        </div>\n      </div>\n    </button>\n  );\n};\n\nexport default TodayNoteCard;\n","import React, {CSSProperties, useContext} from 'react';\nimport {IonIcon} from '@ionic/react';\nimport './TodayEventCard.scss';\nimport {getBreakStartEnd, getDurationStringFromTimeSpan, getEventStartEnd, getStartTime} from '../util/time-helper';\nimport {AuthorizedLocation} from '../orbital-interfaces/authorized-items';\nimport EventType from '../enums/EventType';\nimport EventStatus from '../enums/EventStatus';\nimport {cafe, time} from 'ionicons/icons';\nimport {EventInformation} from '../orbital-interfaces/TEC';\nimport {getEventEditAuthorization, EventEditAuthorization} from './EditEvent/EditEventAuthorization';\nimport {AuthorizedItemsContext} from \"../context/AuthorizedItemsContext\";\n\ninterface TodayEventCardProps {\n  event?: EventInformation;\n  locations: AuthorizedLocation[];\n  onEdit: (ev: EventInformation, eventEditAuth: EventEditAuthorization) => void;\n}\n\nconst colorMap: any = {\n  1: '#9CBA6A',\n  2: '#BFBFBF',\n  3: '#FFAD00',\n  4: '#C41A26',\n  6: '#677A46',\n  7: '#FFAD00'\n};\n\nconst statusTimeColor: any = {\n  1: { color: 'black'},\n  2: { color: '#C41A26'},\n  4: { color: '#BCBCBC'}\n};\n\n// --------------------------------------------------------------------------------------\nfunction getPosition(locations: AuthorizedLocation[], ev: any) {\n    const thisLocation = locations.filter(loc => loc.id === ev.LocationId)[0];\n    const multiLocation = locations.filter(l => l.departments.filter(d => d.positions.filter(p => p.hasPosition))).length > 1;\n    const multiDepartment = (multiLocation)\n      ? true\n      : thisLocation.departments.filter(d => d.positions.filter(p => p.hasPosition)).length > 1;\n\n\n    let posDisplay = '';\n    if (multiLocation) {\n      if (ev.AbbreviatedLocationName) {\n        posDisplay = ev.AbbreviatedLocationName + '/';\n      } else if (ev.LocationAbbreviation) {\n        posDisplay = ev.LocationAbbreviation + '/';\n      }\n    }\n\n    if (multiDepartment) {\n      if (ev.AbbreviatedDepartmentName) {\n        posDisplay += ev.AbbreviatedDepartmentName + '/';\n      } else if (ev.DepartmentAbbreviation) {\n        posDisplay += ev.DepartmentAbbreviation + '/';\n      }\n    }\n\n    posDisplay += ev.PositionName;\n\n    return posDisplay;\n}\n\n// --------------------------------------------------------------------------------------\nconst TodayEventCard: React.FC<TodayEventCardProps> = ({ event, locations, onEdit }) => {\n  const { auth } = useContext(AuthorizedItemsContext);\n\n  if (!event || !auth || !auth.locations || auth.locations.length === 0) {\n    return <div />\n  }\n\n  const noEndTime = new Date(9000, 1,1);\n  const onClock = event.EventTypeId === EventType.Clock &&\n                  event.EventStatusId === EventStatus.Approved &&\n                  event.IsClockedIn;\n  const onBreak = event.EventTypeId === EventType.Clock &&\n                  event.EventStatusId === EventStatus.Approved &&\n                  event.EventBreaks.filter(b => !b.BreakEnd || b.BreakEnd > noEndTime).length > 0;\n  const timeColor: CSSProperties = statusTimeColor[event.EventStatusId];\n\n\n  const displayIcon = (onClock && onBreak) ? cafe : time;\n  const rangeDisplay = (onClock) ? (\n    <div className=\"time-row\"><IonIcon icon={displayIcon} /><span style={timeColor}>{getStartTime(event)}</span> {getDurationStringFromTimeSpan(event.EventDuration)} </div>\n  ) : (\n    <div className=\"time-row\"><span style={timeColor}>{getEventStartEnd(event)}</span> {getDurationStringFromTimeSpan(event.EventDuration)} </div>\n  );\n\n  // ------------------------------------------------------------------------------------\n  const onButtonClick = () => {\n    const eventEditAuth = getEventEditAuthorization(event.EventTypeId, event.EventStatusId, event.EmployeeId, event.EventStart, event.EventEnd, event.LocationId, event.DepartmentId!, event.PositionId, event.IsConfirmed, auth);\n    if (eventEditAuth === null) {\n      return;\n    }\n\n    onEdit(event, eventEditAuth);\n  };\n\n  const tag = event.Tag ? \" ~\" + event.Tag : \"\";\n\n  const eventTypeBorder = { borderLeft: `5px solid ${colorMap[event.EventTypeId]} `};\n  return (\n    <button\n      onClick={onButtonClick}\n      className=\"event\"\n    >\n      <div className=\"card-second-col\" style={eventTypeBorder}>\n        {rangeDisplay}\n        <div className=\"position-row\">\n          {getPosition(locations, event)} {tag}\n        </div>\n        {event.EventBreaks && event.EventBreaks.map(brk => (\n          <div key={brk.BreakStart} className=\"break-div\">\n            (B) {getBreakStartEnd(brk)}\n          </div>\n        ))}\n      </div>\n    </button>\n  );\n};\n\nexport default TodayEventCard;\n","import React from 'react';\nimport './TodayEventCard.scss';\nimport Skeleton from \"react-loading-skeleton\";\n\ninterface TodayEventCardProps {\n}\n\n// --------------------------------------------------------------------------------------\nconst TodayEventCardSkeleton: React.FC<TodayEventCardProps> = () => {\n  return (\n    <button\n      className=\"event\"\n    >\n      <div style={{paddingLeft: \"20px\", paddingRight: \"2px\"}}>\n        <Skeleton width={5} height={40} />\n      </div>\n      <div className=\"card-second-col\">\n        <Skeleton width={150} />\n        <div className=\"position-row\">\n          <Skeleton width={150} />\n        </div>\n      </div>\n    </button>\n  );\n};\n\nexport default TodayEventCardSkeleton;\n","import React, { useState, useEffect } from 'react';\nimport './ClockPanel.scss';\nimport { ApplicationUserContext } from '../../context/ApplicationUserContext';\nimport useDialogBox from \"../../hooks/useDialogBox\";\nimport { IonItem, IonLabel, IonList, IonListHeader, IonModal, IonSpinner } from \"@ionic/react\";\nimport {getDateString} from \"../../util/time-helper\";\nimport TodayDailyNoteCard from \"../TodayDailyNoteCard\";\nimport TodayEventCard from \"../TodayEventCard\";\nimport {EventInformation} from \"../../orbital-interfaces/TEC\";\nimport EditEventModal from \"../EditEvent/EditEventModal\";\nimport {RefresherEventDetail} from \"@ionic/core\";\nimport UserAPI from \"../../api/UserAPI\";\nimport useIonicRefresher from \"../../hooks/useIonicRefresher\";\nimport {initialHomePageData} from \"../../orbital-interfaces/authorized-items\";\nimport TodayEventCardSkeleton from \"../TodayEventCardSkeleton\";\nimport {EventEditAuthorization} from \"../EditEvent/EditEventAuthorization\";\n\ninterface ClockTodayTabProps {\n  refreshToggle: boolean;\n  onUpdate: () => void;\n}\n\nconst ClockTodayTab: React.FC<ClockTodayTabProps> = ({refreshToggle, onUpdate}) => {\n  const doRefresh = (e: CustomEvent<RefresherEventDetail>) => {\n    getData(e);\n  };\n\n  const [homePageData, setHomePageData] = useState(initialHomePageData);\n  const refresher = useIonicRefresher(doRefresh);\n  const { user } = React.useContext(ApplicationUserContext);\n  const dlg = useDialogBox();\n  const [showEventModal, setShowEventModal] = useState(false);\n  const [editEventId, setEditEventId] = useState(null as number | null);\n  const [eventEditAuth, setEventEditAuth] = useState(null as EventEditAuthorization | null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // ------------------------------------------------------------------------------------\n  const onEventClick = (ev: EventInformation, newEventEditAuth: EventEditAuthorization | null) => {\n    setEditEventId(ev.ScheduleEventId);\n    setEventEditAuth(newEventEditAuth);\n    setShowEventModal(true);\n  };\n\n  // ------------------------------------------------------------------------------------\n  function getData(e?: CustomEvent<RefresherEventDetail>) {\n    try\n    {\n      UserAPI.getHomePageData(user).then(response => {\n        console.log(\"ClockTodayTab.getData: got homepage data\");\n        setHomePageData(response);\n        setIsLoading(false);\n        if (e) {\n          e.detail.complete();\n          onUpdate();\n        }\n      });\n    }\n    catch (e)\n    {\n      console.log(\"Error in ClockTodayTab.getData: \" + e.message);\n    }\n  }\n\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    // eslint-disable-next-line\n    if (user && user.isLoggedin) {\n      setIsLoading(true);\n      getData(undefined);\n    }\n\n    // eslint-disable-next-line\n  }, [refreshToggle]);\n\n\n  // ------------------------------------------------------------------------------------\n  const onEventUpdated = () => {\n    getData(undefined);\n    setShowEventModal(false);\n  };\n\n  return (\n    <>\n      <IonList className=\"todaylist\" lines=\"none\">\n        <IonListHeader mode=\"ios\">\n          <IonLabel className=\"label\"  mode=\"ios\">{getDateString(new Date())}</IonLabel>\n        </IonListHeader>\n        {isLoading && ( (homePageData.dailyNotes && homePageData.dailyNotes.length > 0) || (homePageData.currentEvents && homePageData.currentEvents.length > 0)) && (\n          <IonSpinner className=\"center\" name=\"dots\" />\n        )}\n\n        {isLoading && ( (!homePageData.dailyNotes || homePageData.dailyNotes.length === 0) || (!homePageData.currentEvents || homePageData.currentEvents.length === 0)) && (\n          <>\n            <TodayEventCardSkeleton/>\n            <TodayEventCardSkeleton/>\n          </>\n        )}\n\n\n        {homePageData.dailyNotes && homePageData.dailyNotes.map(note => (\n          <IonItem key={note.DailyNoteId} >\n            <TodayDailyNoteCard authItems={homePageData.auth}  oneLine={false} dailyNote={note} />\n          </IonItem>\n        ))}\n        {homePageData.currentEvents.map( ev => (\n          <IonItem key={ev.ScheduleEventId}>\n            <TodayEventCard onEdit={onEventClick} locations={homePageData.auth.locations} event={ev} />\n          </IonItem>\n        ))}\n\n        <IonItem style={{width: \"100%\", height: \"200px\"}}>\n        </IonItem>\n      </IonList>\n\n      <IonModal\n        isOpen={showEventModal}\n        onDidDismiss={() => setShowEventModal(false)}\n      >\n        <EditEventModal\n          isOpen={showEventModal}\n          auth={homePageData.auth}\n          onCancelModal={() => setShowEventModal(false)}\n          onDismissModal={() => onEventUpdated()}\n          scheduleEventId={editEventId}\n          eventEditAuth={eventEditAuth!}\n        />\n      </IonModal>\n\n\n      {dlg.alertBoxJsx}\n      {refresher.ionicRefresherJsx}\n    </>\n\n  );\n};\n\nexport default ClockTodayTab;\n","import React, { useState } from 'react';\nimport { IonFooter, IonSegment, IonSegmentButton, IonHeader, IonToolbar, IonTitle, IonContent, IonPage, IonButtons, IonMenuButton } from '@ionic/react';\nimport './ClockPage.scss';\nimport ClockPanel from '../components/ClockPageComponents/ClockPanel';\nimport PayrollPeriodsTab from \"../components/ClockPageComponents/PayrollPeriodsTab\";\nimport ClockTodayTab from \"../components/ClockPageComponents/ClockTodayTab\";\n\nconst ClockPage: React.FC = () => {\n  const [segment, setSegment] = useState<'today' | 'pay-periods'>('today');\n  const [refreshToggle, setRefreshToggle] = useState(false);\n  const [refreshTimeClockToggle, setRefreshTimeClockToggle] = useState(false);\n\n  // ------------------------------------------------------------------------------------\n  const onClockPanelUpdate = () => {\n    setRefreshToggle(!refreshToggle);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onTodayPanelUpdate = () => {\n    console.log(\"onTodayPanelUpdate\");\n    setRefreshTimeClockToggle(!refreshTimeClockToggle);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onSegmentChange = (segmentName: any) => {\n    setSegment(segmentName);\n  };\n\n  return (\n    <IonPage id=\"clock-page\" >\n      <IonHeader mode=\"ios\">\n        <IonToolbar  mode=\"md\">\n          <IonButtons slot=\"start\">\n            <IonMenuButton />\n          </IonButtons>\n          <IonTitle slot=\"start\">Clock</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonSegment mode=\"md\" onIonChange={(e) => onSegmentChange(e.detail.value)}>\n        <IonSegmentButton mode=\"md\" value=\"today\" checked={segment === 'today'}>\n          TODAY\n        </IonSegmentButton>\n        <IonSegmentButton\n          mode=\"md\"\n          value=\"pay-periods\"\n          checked={segment === 'pay-periods'}\n        >\n          PAY PERIOD\n        </IonSegmentButton>\n      </IonSegment>\n\n      <IonContent className=\"outer-content\">\n\n        {segment === \"today\" && (\n          <ClockTodayTab\n            refreshToggle={refreshToggle}\n            onUpdate={onTodayPanelUpdate}\n          />\n        )}\n\n        {segment === 'pay-periods' && (\n          <PayrollPeriodsTab\n            date={null}\n          />\n        )}\n\n      </IonContent>\n\n      <IonFooter className=\"footer\">\n        {segment === \"today\" && (\n          <ClockPanel\n            refreshToggle={refreshTimeClockToggle}\n            onUpdate={onClockPanelUpdate}\n          />\n        )}\n      </IonFooter>\n\n    </IonPage>\n  );\n};\n\nexport default ClockPage;\n","import React from 'react';\nimport { Message } from '../../orbital-interfaces/Message';\nimport { messageDateString } from '../../util/time-helper';\nimport './MessageItem.scss';\nimport {bookmark} from 'ionicons/icons';\nimport {IonIcon} from \"@ionic/react\";\n\ninterface MessageItemProps {\n  message: Message;\n  onMessageClick: () => void;\n}\n\n// ==============================================================================\nconst MessageItem: React.FC<MessageItemProps> = ({ message, onMessageClick }) => {\n  if (!message) {\n    return <div />\n  }\n\n  const fontWeightForSubject = (message.isViewed) ? \"normal\" : \"bold\";\n\n  return (\n    <button\n      className=\"message\"\n      onClick={onMessageClick}\n    >\n      <div className=\"top-line\">\n        <span className=\"subject\" style={{fontWeight: fontWeightForSubject}}>\n          {(message.isPinned) && (\n            <IonIcon icon={bookmark} style={{color: \"gray\"}} />\n          )}\n          {message.subject}\n        </span>\n        <span className=\"time\">{messageDateString(message.deliveryDateTime)} </span>\n      </div>\n      <div className=\"bottom-line\">\n        {message.previewLine}\n      </div>\n    </button>\n  );\n};\n\nexport default MessageItem;\n","import React, {useState} from 'react';\nimport {IonButton, IonButtons, IonIcon, IonContent, IonFooter, IonHeader, IonItem, IonLabel, IonSelect, IonSelectOption, IonTitle, IonToolbar} from '@ionic/react';\nimport { arrowRoundBack } from 'ionicons/icons';\nimport '../SchedulePageComponents/ScheduleFilterModal.scss';\nimport ToggleListEx from \"../ToggleListEx\";\nimport {NotificationTypeModel} from \"../../orbital-interfaces/NotificationTypeModel\";\n\nexport interface FilterData {\n  msgTypes: { messageTypeId: number, name: string}[];\n  employees: { employeeId: number, name: string}[];\n}\n\nexport interface FilterResult {\n  msgTypeIds: number[];\n  employeeId: number;\n}\n\ninterface MessagesFilterModalProps {\n  onDismissModal: (result: FilterResult) => void;\n  onCancelModal: () => void;\n  filterData: FilterData;\n}\n\nconst MessagesFilterModal: React.FC<MessagesFilterModalProps> = ({ onDismissModal, onCancelModal, filterData}) => {\n  const [filterResult, setFilterResult] = useState({\n    msgTypeIds: filterData.msgTypes ? filterData.msgTypes.map(mt => mt.messageTypeId) : [] as number[],\n    employeeId: -1\n  } as FilterResult);\n\n  // --------------------------------------------------------------------------------------\n  const onCloseModal = () => {\n    onDismissModal(filterResult);\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onCancel = () => {\n    onCancelModal();\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onResetAll = () => {\n    setFilterResult({msgTypeIds: filterData.msgTypes.map(mt => mt.messageTypeId), employeeId: -1});\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onMessageTypeChange = (newSelection: NotificationTypeModel[]) => {\n    setFilterResult({ ...filterResult, msgTypeIds: newSelection.map(mt => mt.id)});\n  };\n\n  return (\n    <>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonButton onClick={onCancel}>\n                <IonIcon icon={arrowRoundBack} mode=\"md\" slot=\"icon-only\" />\n            </IonButton>\n          </IonButtons>\n          <IonTitle>\n            Filter\n          </IonTitle>\n          <IonButtons slot=\"end\">\n            <IonButton onClick={onResetAll}>\n              RESET ALL\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent class=\"outer-content\">\n        <IonItem>\n          <IonLabel>From</IonLabel>\n          <IonSelect\n            value={filterResult.employeeId}\n            onIonChange={(e) => setFilterResult({...filterResult, employeeId: e.detail.value})}\n            interface=\"action-sheet\">\n            <IonSelectOption key={-1} value={-1}>EVERYONE</IonSelectOption>\n            {filterData && filterData.employees && filterData.employees.map(emp => (\n              <IonSelectOption\n                key={emp.employeeId}\n                value={emp.employeeId}>\n                {emp.name}\n              </IonSelectOption>\n            ))}\n          </IonSelect>\n        </IonItem>\n        <IonItem>\n          <IonLabel>Message Types</IonLabel>\n        </IonItem>\n        {(filterData.msgTypes) && (\n          <ToggleListEx\n            list={filterData.msgTypes.map(mt => { return { id: mt.messageTypeId, name: mt.name, description: \"\"}})}\n            selected={filterData.msgTypes.filter(mt => filterResult.msgTypeIds.includes(mt.messageTypeId)).map(mt => { return { id: mt.messageTypeId, name: mt.name, description: \"\"}})}\n            selectionChanged={onMessageTypeChange}\n          />\n        )}\n\n      </IonContent>\n\n      <IonFooter className=\"outer-content footer\">\n          <IonButton\n            className=\"apply-button\"\n            expand=\"block\"\n            onClick={onCloseModal}>\n            APPLY FILTER\n          </IonButton>\n          <IonButton\n            className=\"apply-button\"\n            expand=\"block\"\n            onClick={onCancel}\n            color=\"tertiary\"\n          >\n            BACK\n          </IonButton>\n\n      </IonFooter>\n    </>\n  )\n};\n\nexport default MessagesFilterModal;\n","import { KeyedCollection } from './../util/KeyedCollection';\n\nexport interface MessageType {\n  id: number;\n  typeName: string;\n  description: string;\n}\n\nconst types: MessageType[] = [\n  { id: 1, typeName: \"CoverRequestMessage\", description: \"Cover-Request\"},\n  { id: 2, typeName: \"CoverApprovedMessage\", description: \"Cover-Approved\"},\n  { id: 3, typeName: \"DirectCoverRequestMessage\", description: \"Direct Cover-Request\"},\n  { id: 5, typeName: \"ShiftRequestMessage\", description: \"Shift-Request\"},\n  { id: 6, typeName: \"ShiftRequestDeniedMessage\", description: \"Shift-Denied\"},\n  { id: 10, typeName: \"ShiftRequestReceivedMessage\", description: \"Shift-Request Received\"},\n  { id: 20, typeName: \"NoClockInAlertMessage\", description: \"No Clock In Alert\"},\n  { id: 21, typeName: \"NoClockOutAlertMessage\", description: \"No Clock Out Alert\"},\n  { id: 22, typeName: \"LateClockInMessage\", description: \"Late Clock In Alert\"},\n  { id: 23, typeName: \"EarlyClockOutAlertMessage\", description: \"Early Clock Out Alert\"},\n  { id: 50, typeName: \"ScheduleEventUpdatedMessage\", description: \"Schedule Event Updated\"},\n  { id: 60, typeName: \"PublishedScheduleUpdatedMessage\", description: \"Published Schedule Updated\"},\n  { id: 80, typeName: \"PasswordRecoveryMessage\", description: \"Password Recovery\"},\n  { id: 81, typeName: \"VerifyCellPhoneMessage\", description: \"Verify Cell Phone\"},\n  { id: 82, typeName: \"VerifyCellPhoneCompleteMessage\", description: \"Verify Cell Phone Completed\"},\n  { id: 83, typeName: \"VerifyEmailMessage\", description: \"Verify Email\"},\n  { id: 100, typeName: \"CustomMessage\", description: \"Custom Messages\"},\n  { id: 101, typeName: \"WeeklyScheduleForEmployeeMessage\", description: \"Employee Weekly Schedule\"},\n  { id: 555, typeName: \"WelcomeMessage\", description: \"Welcome\"},\n  { id: 603, typeName: \"UpdatePaymentInformationMessage\", description: \"Update Payment Information\"},\n  { id: 700, typeName: \"UpgradeSubscriptionMessage\", description: \"Upgrade Subscription (to Orbital)\"},\n  { id: 701, typeName: \"FailedSignupMessage\", description: \"Failed Signup\"},\n  { id: 702, typeName: \"GenericErrorMessage\", description: \"Error Message\"},\n  { id: 704, typeName: \"SignupMessage\", description: \"Signup Completed\"},\n  { id: 705, typeName: \"DatesOutOfSyncMessage\", description: \"Dates Out of Sync\"},\n  { id: 708, typeName: \"CancelSubscriptionMessage\", description: \"Canceled Subscription  \"}\n];\n\nexport const messageTypes = new KeyedCollection<MessageType>();\n\ntypes.map(t => messageTypes.Add(\"\" + t.id, t));\n\n","import { Message } from '../orbital-interfaces/Message';\nimport { ApplicationUser } from '../context/ApplicationUserContext';\nimport apiHelper from './OrbitalApiHelper';\n\n\n// ----------------------------------------------------------------------------------------------\nconst getUserMessage = async (user: ApplicationUser, msgId: number) => {\n  return await apiHelper.get(user, 'api/v2/employee/messages/' + msgId) as Message;\n};\n\n\n// ----------------------------------------------------------------------------------------------\nconst getUserMessages = async (user: ApplicationUser) => {\n  return await apiHelper.get(user, 'api/v2/employee/messages') as Message[];\n};\n\n// ----------------------------------------------------------------------------------------------\nconst getReadCount = async (user: ApplicationUser, msgId: number) => {\n  return await apiHelper.get(user, 'api/v1/employee/messages/' + msgId + '/readCount') as number;\n};\n\n// ----------------------------------------------------------------------------------------------\nconst setIsPinned = async(user: ApplicationUser, msgId: number, isPinned: boolean) => {\n  return await apiHelper.post(\n    user,\n    'api/v1/employee/messages/' + msgId + '/togglePin',\n    {isPinned}\n  );\n};\n\n// ----------------------------------------------------------------------------------------------\nconst setIsViewed = async(user: ApplicationUser, msgId: number, isViewed: boolean) => {\n  return await apiHelper.post(user,'api/v1/employee/messages/' + msgId + '/toggleView',{isViewed});\n};\n\n// ----------------------------------------------------------------------------------------------\nconst deleteMessage = async(user: ApplicationUser, msgId: number) => {\n  return await apiHelper.del(user, 'api/v1/employee/messages/' + msgId);\n};\n\nexport default {\n  getUserMessage,\n  getUserMessages,\n  getReadCount,\n  setIsPinned,\n  setIsViewed,\n  deleteMessage\n}\n","import { IonAlert } from '@ionic/react';\nimport React, { useState } from \"react\";\n\nfunction useYesOrCancelDialogBox() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [alertData, setAlertData] = useState({message: \"\", onCancel: () => {}, onYes: () => {}});\n\n  const showDialog = (message: string, onYes: () => void, onCancel: () => void) => {\n    setAlertData({\n      message,\n      onYes,\n      onCancel\n    });\n\n    setIsOpen(true);\n  };\n\n  const dialogJsx = (\n    <IonAlert\n      isOpen={isOpen}\n      onDidDismiss={() => { setIsOpen(false); alertData.onCancel();}}\n      message={alertData.message}\n      buttons={[\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: alertData.onCancel\n        },\n\n        {\n          text: 'Yes',\n          handler: alertData.onYes\n        }\n      ]}\n    />\n  );\n\n  return {\n    showDialog,\n    dialogJsx\n  }\n}\n\nexport default useYesOrCancelDialogBox;\n","import React, {useEffect, useState} from 'react';\nimport { IonButton, IonButtons, IonIcon, IonContent, IonFooter, IonHeader, IonGrid, IonRow, IonCol, IonToolbar, } from '@ionic/react';\nimport { arrowRoundBack, bookmark, trash } from 'ionicons/icons';\nimport '../EditEvent/EditEventModal.scss';\nimport { ApplicationUserContext } from '../../context/ApplicationUserContext';\nimport useDialogBox from '../../hooks/useDialogBox';\nimport {Message} from \"../../orbital-interfaces/Message\";\nimport {AuthorizedItemsContext} from \"../../context/AuthorizedItemsContext\";\nimport {getMessageDeliveryTimeString} from '../../util/time-helper';\nimport scheduleEventAPI from '../../api/ScheduleEventsAPI';\nimport messageAPI from '../../api/MessageAPI';\nimport {ScheduleEvent} from \"../../orbital-interfaces/ScheduleEvent\";\nimport EventReqeustEditor from '../EditEvent/editor/EventRequestEditor';\nimport './ViewMessageModal.scss';\nimport { MessagesReducerAction } from '../../pages/MessagesPage';\nimport useYesOrCancelDialogBox from '../../hooks/useYesOrCancelDialogBox';\nimport {getEventEditAuthorization, EventEditAuthorization} from '../EditEvent/EditEventAuthorization';\n\ninterface ViewMessageModalProps {\n  message: Message | null;\n  onCloseModal: (msg: string | null) => void;\n  updateMessages: React.Dispatch<MessagesReducerAction>;\n}\n\n// --------------------------------------------------------------------------------------\nconst ViewMessagetModal: React.FC<ViewMessageModalProps> = ({ message, onCloseModal, updateMessages }) => {\n  const dlg = useDialogBox();\n  const yesCancelDlg = useYesOrCancelDialogBox();\n  const { user } = React.useContext(ApplicationUserContext);\n  const { auth } = React.useContext(AuthorizedItemsContext);\n  const [ scheduleEvent, setScheduleEvent ] = useState(null as ScheduleEvent | null);\n  const [ eventEditAuth, setEventEditAuth] = useState(null as EventEditAuthorization | null);\n  const [ readCount, setReadCount] = useState(null as number | null);\n  const [ usageText, setUsageText] = useState(null as string | null);\n  const [ pinned, setPinned] = useState(false);\n\n  // --------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (!message) {\n      return;\n    }\n\n    if (message.scheduleEventId) {\n      scheduleEventAPI.getScheduleEvent(user, message.scheduleEventId).then(event => {\n        if (event) {\n          setScheduleEvent(event);\n          const newEventEditAuth = getEventEditAuthorization(\n            event.EventTypeId,\n            event.EventStatusId,\n            event.EmployeeId,\n            event.EventStart,\n            event.EventEnd,\n            event.LocationId,\n            event.DepartmentId,\n            event.PositionId,\n            (event.ConfirmedBy !== null && event.ConfirmedBy !== undefined && event.ConfirmedBy !== ''),\n            auth);\n          setEventEditAuth(newEventEditAuth);\n        }\n      });\n    } else {\n      if (scheduleEvent) {\n        setScheduleEvent(null);\n        setUsageText(null);\n      }\n    }\n\n    messageAPI.getReadCount(user, message.messageId).then(newReadCount => {\n      setReadCount(newReadCount);\n    });\n\n    if (!message.isViewed) {\n      messageAPI.setIsViewed(user, message.messageId, true).then(() => {\n        updateMessages({type: \"UPDATE-VIEWED\", msgId: message.messageId, isViewed: true});\n      });\n    }\n\n    setPinned(message.isPinned);\n\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [message?.messageId]);\n\n  // --------------------------------------------------------------------------------------\n  const onPinnedClick = () => {\n    const newPinValue = !pinned;\n    messageAPI.setIsPinned(user, message!.messageId, newPinValue).then(() => {\n      setPinned(newPinValue);\n      updateMessages({ type: 'UPDATE-PINNED', msgId: message!.messageId, isPinned: newPinValue});\n    });\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onDeleteClick = () => {\n    yesCancelDlg.showDialog(\"Delete this message?\", () => {\n      messageAPI.deleteMessage(user, message!.messageId).then(() => {\n        updateMessages({ type: 'DELETE', msgId: message!.messageId});\n        onCancel(\"Message Deleted\");\n      });\n    }, () => {});\n  };\n\n  // --------------------------------------------------------------------------------------\n  const onCancel = (msg: string | null) => {\n    onCloseModal(msg);\n  };\n\n  if (!message || !auth || !auth.locations || auth.locations.length === 0) {\n    return (\n      <>\n        <div>Loading</div>\n        {dlg.alertBoxJsx}\n      </>\n    )\n  } else {\n    return (\n      <>\n        <IonHeader>\n          <IonToolbar>\n            <IonButtons slot=\"start\">\n              <IonButton onClick={() => { onCancel(null)}}>\n                <IonIcon icon={arrowRoundBack} mode=\"md\" slot=\"icon-only\" />\n              </IonButton>\n            </IonButtons>\n            <IonButtons slot=\"end\">\n              <IonButton\n                onClick={() => { onPinnedClick()}}\n              >\n                <IonIcon\n                  icon={bookmark}\n                  style={pinned ? { color: \"black\"} : { color: \"lightgray\"}}\n                />\n              </IonButton>\n              <IonButton\n                onClick={() => { onDeleteClick() }}\n              >\n                <IonIcon icon={trash} />\n              </IonButton>\n            </IonButtons>\n          </IonToolbar>\n        </IonHeader>\n\n        <IonContent class=\"outer-content\">\n          <IonGrid>\n            <IonRow>\n              <IonCol size=\"12\">\n                {message!.subject}<br/>\n                From: {message!.fromEmployeeFirstName} {message!.fromEmployeeLastName}\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol size=\"9\" style={{paddingLeft: \"15px\", color: \"lightgray\"}}>{getMessageDeliveryTimeString(message!.deliveryDateTime)}</IonCol>\n              <IonCol size=\"3\" style={{color: \"lightgray\"}}>\n                {(readCount !== null) && (\n                  <span>{readCount} Read</span>\n                )}\n              </IonCol>\n            </IonRow>\n            <IonRow>\n              <IonCol size=\"1\" />\n              <IonCol size=\"9\">\n                 <div dangerouslySetInnerHTML={{ __html: message?.messageText}} />\n              </IonCol>\n            </IonRow>\n\n            {(usageText !== null) && (\n              <IonRow>\n                <IonCol size=\"12\">\n                  {usageText}\n                </IonCol>\n              </IonRow>\n            )}\n\n          </IonGrid>\n\n          {dlg.alertBoxJsx}\n          {yesCancelDlg.dialogJsx}\n\n        </IonContent>\n\n        <IonFooter className=\"outer-content footer\">\n          {(scheduleEvent !== null) && (\n            <EventReqeustEditor\n              auth={auth}\n              eventEnd={scheduleEvent.EventEnd}\n              eventType={scheduleEvent.EventTypeId}\n              eventStatus={scheduleEvent.EventStatusId}\n              eventEmployeeId={scheduleEvent.EmployeeId}\n              eventPositionId={scheduleEvent.PositionId}\n              scheduleEventId={scheduleEvent.ScheduleEventId}\n              locationId={scheduleEvent.LocationId}\n              update={() => {}}\n              cancelEditModal={onCancel}\n              eventEditAuth={eventEditAuth}\n              setUsageText={setUsageText}\n            />\n          )}\n          <IonButton\n            className=\"apply-button\"\n            expand=\"block\"\n            onClick={() => { onCancel(null)}}\n            color=\"tertiary\"\n          >\n            BACK\n          </IonButton>\n        </IonFooter>\n      </>\n    );\n\n  }\n};\n\nexport default ViewMessagetModal;\n","import React, {useState, useEffect, useReducer} from 'react';\nimport { IonModal, IonHeader, IonButton, IonIcon, IonToolbar, IonTitle, IonContent, IonPage, IonButtons, IonMenuButton } from '@ionic/react';\nimport './MessagesPage.scss';\nimport { funnel, add } from 'ionicons/icons';\nimport useIonicRefresher from '../hooks/useIonicRefresher';\nimport { Message } from '../orbital-interfaces/Message';\nimport MessageItem from '../components/MessagesPageComponents/MessageItem';\nimport MessagesFilterModal, { FilterData, FilterResult } from \"../components/MessagesPageComponents/MessagesFilterModal\";\nimport { messageTypes } from '../orbital-interfaces/MessageTypes';\nimport arrayHelper from '../util/array-helper';\nimport messageApi from '../api/MessageAPI';\nimport { ApplicationUserContext } from '../context/ApplicationUserContext';\nimport { RefresherEventDetail } from '@ionic/core';\nimport ViewMessagetModal from \"../components/MessagesPageComponents/ViewMessageModal\";\nimport useSimpleToast from \"../hooks/useSimpleToast\";\nimport {RouteComponentProps} from \"react-router\";\nimport Skeleton from \"react-loading-skeleton\";\n\nconst initialMessages: Message[] = [];\n\nexport type MessagesReducerAction =\n  | { type: 'LOADED-FROM-API', data: Message[]}\n  | { type: 'CLEAR'}\n  | { type: 'UPDATE-PINNED', msgId: number, isPinned: boolean }\n  | { type: 'UPDATE-VIEWED', msgId: number, isViewed: boolean }\n  | { type: 'DELETE', msgId: number }\n\n\n// ------------------------------------------------------------------------------------------------\nexport const messagesReducer = (currentState: Message[], action: MessagesReducerAction): Message[] => {\n  console.log(\"REDUCER: ACTION =\", action.type);\n\n  switch (action.type) {\n    case 'LOADED-FROM-API':\n      return action.data;\n    case 'CLEAR':\n      return [] as Message[];\n    case 'UPDATE-PINNED':\n      return currentState.map(m =>\n        (m.messageId === action.msgId)\n          ? { ...m, isPinned: action.isPinned }\n          : m\n      );\n    case 'UPDATE-VIEWED':\n      return currentState.map(m => {\n        return (m.messageId === action.msgId)\n          ? { ...m, isViewed: action.isViewed }\n          : m;\n      });\n    case 'DELETE':\n      return currentState.filter(m => m.messageId !== action.msgId);\n  }\n};\n\n\ninterface MessagesPageProps extends RouteComponentProps<{\n  messageId?: string\n}> {}\n\n\nconst MessagesPage: React.FC<MessagesPageProps> = ({match, history}) => {\n  const { user } = React.useContext(ApplicationUserContext);\n\n  // ------------------------------------------------------------------------------------\n  const doRefresh = (e: CustomEvent<RefresherEventDetail>) => {\n    updateMessages({ type: 'CLEAR'});\n    refreshMessages(e);\n  };\n\n  const refresher = useIonicRefresher(doRefresh);\n  const [showFilterModal, setShowFilterModal] = useState(false);\n  const [isLoadingMessages, setIsLoadingMessages] = useState(true);\n  const [messages, updateMessages] = useReducer(messagesReducer, []);\n  const [filteredMessages, setFilteredMessages] = useState(initialMessages);\n  const [filterData, setFilterData] = useState({} as FilterData);\n  const [filterResult, setFilterResult] = useState({} as FilterResult);\n  const [viewMessage, setViewMessage] = useState(null as Message | null);\n  const toast = useSimpleToast();\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    if (user && user.isLoggedin) {\n      return refreshMessages(undefined);\n    }\n\n    // eslint-disable-next-line\n  }, [user]);\n\n  // ------------------------------------------------------------------------------------\n  useEffect(() => {\n    filterMessages(filterResult, messages);\n\n    // eslint-disable-next-line\n  }, [messages]);\n\n  useEffect(() => {\n    if (match.params.messageId && viewMessage === null) {\n      messageApi.getUserMessage(user, parseInt(match.params.messageId)).then(msg => {\n        if (!msg) {\n          toast.showToast(\"The requested message has been removed\");\n          history.push('/tabs/messages/');\n        }\n\n        setViewMessage(msg);\n      });\n    }\n\n    // eslint-disable-next-line\n  }, [match.params.messageId]);\n\n  // ------------------------------------------------------------------------------------\n  const refreshMessages = (e?: CustomEvent<RefresherEventDetail>) => {\n    let isSubscribed = true;\n    setIsLoadingMessages(true);\n    messageApi.getUserMessages(user).then(msgs => {\n      if (!isSubscribed) {\n        return;\n      }\n\n      updateMessages({ type: 'LOADED-FROM-API', data: msgs  });\n      filterMessages(filterResult, msgs);\n      setIsLoadingMessages(false);\n\n      if (e) {\n        e.detail.complete();\n      }\n    });\n\n    return () => { isSubscribed = false };\n  };\n\n  // ------------------------------------------------------------------------------------\n  const filterClose = (updatedFilter: FilterResult) => {\n    setFilterResult(updatedFilter);\n    filterMessages(updatedFilter, messages);\n    setShowFilterModal(false);\n  };\n\n  // ------------------------------------------------------------------------------------\n  const filterMessages = (f: FilterResult, msgs: Message[]) => {\n    if (!f || !f.msgTypeIds) {\n      setFilteredMessages(msgs);\n      return;\n    }\n\n    if (f.employeeId !== -1) {\n      if (f.msgTypeIds.length > 0) {\n        setFilteredMessages(msgs.filter(m =>\n          m.fromEmployeeId === f.employeeId &&\n          arrayHelper.contains(f.msgTypeIds, m.messageTypeId)\n        ));\n      } else {\n        setFilteredMessages(msgs.filter(m => m.fromEmployeeId === f.employeeId));\n      }\n    } else if (f.msgTypeIds.length > 0) {\n      console.log(f.msgTypeIds);\n      setFilteredMessages(msgs.filter(m => arrayHelper.contains(f.msgTypeIds, m.messageTypeId)));\n    } else {\n      setFilteredMessages(msgs);\n    }\n  };\n\n  // ------------------------------------------------------------------------------------\n  const onCloseMessageModal = (msg: string | null) => {\n    setViewMessage(null);\n    if (msg) {\n      toast.showToast(msg);\n    }\n  };\n\n  // ------------------------------------------------------------------------------------\n  const showFilter = () => {\n    const employees = arrayHelper.uniqueObject(\n      messages.map(msg => { return { employeeId: msg.fromEmployeeId, name: msg.fromEmployeeFirstName + \" \" + msg.fromEmployeeLastName}}),\n      (x,y) => {return x.employeeId === y.employeeId});\n    const msgTypes =  arrayHelper.uniqueObject(\n      messages.map(msg => { return { messageTypeId: msg.messageTypeId, name: messageTypes.Item(String(msg.messageTypeId)).description }}),\n      (x,y) => { return x.messageTypeId === y.messageTypeId} );\n\n    setFilterData({ msgTypes, employees});\n\n    setShowFilterModal(true);\n  };\n\n  return (\n    <IonPage id=\"clock-page\" >\n      <IonHeader mode=\"ios\">\n        <IonToolbar  mode=\"md\">\n          <IonButtons slot=\"start\">\n            <IonMenuButton />\n          </IonButtons>\n          <IonTitle slot=\"start\">Messages</IonTitle>\n          <IonButtons slot=\"end\">\n            <IonButton>\n              <IonIcon icon={add} mode=\"md\" slot=\"icon-only\" />\n            </IonButton>\n            <IonButton onClick={showFilter}>\n              <IonIcon icon={funnel} mode=\"ios\" slot=\"icon-only\" />\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n\n      <IonContent className=\"outer-content\">\n        {refresher.ionicRefresherJsx}\n        {isLoadingMessages && (\n          <>\n          {[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map(x => {\n            return (\n              <div key={x} style={{margin: \"10px 8px\"}}>\n                <Skeleton width={360} height={45}  />\n              </div>\n            )\n          })}\n          </>\n        )}\n        {!isLoadingMessages && filteredMessages.length === 0 && (\n          <div>\n            No Messages to show\n          </div>\n        )}\n        <div className=\"message-list\">\n          {!isLoadingMessages && filteredMessages.length > 0 && filteredMessages.filter(m => m.isPinned).map(msg => (\n            <MessageItem key={msg.messageId} message={msg} onMessageClick={() => setViewMessage(msg)} />\n          ))}\n        </div>\n        <div style={{height: \"1px\", borderTop: \"1px solid lightgray\", width: \"100%\"}} />\n        <div className=\"message-list\">\n          {!isLoadingMessages && filteredMessages.length > 0 && filteredMessages.filter(m => !m.isPinned).map(msg => (\n            <MessageItem key={msg.messageId} message={msg} onMessageClick={() => setViewMessage(msg)} />\n          ))}\n        </div>\n      </IonContent>\n\n      <IonModal\n        isOpen={showFilterModal}\n        >\n        <MessagesFilterModal\n          filterData={filterData}\n          onDismissModal={filterClose}\n          onCancelModal={() => setShowFilterModal(false)}\n        />\n      </IonModal>\n\n      <IonModal\n        isOpen={viewMessage !== null}\n      >\n        <ViewMessagetModal\n          message={viewMessage}\n          updateMessages={updateMessages}\n          onCloseModal={onCloseMessageModal}\n        />\n      </IonModal>\n\n      {toast.simpleToastJsx}\n\n    </IonPage>\n  );\n};\n\nexport default MessagesPage;\n","import React  from 'react';\nimport { IonTabs, IonRouterOutlet, IonTabBar, IonTabButton, IonIcon, IonLabel } from '@ionic/react';\nimport { Route, Redirect } from 'react-router';\nimport { calendar, chatboxes, clock } from 'ionicons/icons';\nimport SchedulePage from './SchedulePage';\nimport ClockPage from './ClockPage';\nimport MessagesPage from './MessagesPage';\n\ninterface MainTabsProps { }\n\nconst MainTabs: React.FC<MainTabsProps> = () => {\n  return (\n    <IonTabs>\n      <IonRouterOutlet>\n        <Redirect exact={true} path=\"/tabs\" to=\"/tabs/schedule\" />\n\n        {/* KENKEN: TODO: Bring the dashboard back in.\n        <Route path=\"/tabs/dashboard\" render={() => <Dashboard />} exact={true} />\n        */}\n\n        <Route path=\"/tabs/schedule/:scheduleEventId\" render={(routeProps) => (\n          <SchedulePage {...routeProps} />\n        )} />\n\n        <Route path=\"/tabs/schedule\" render={(routeProps) => (\n          <SchedulePage {...routeProps} />\n        )} exact={true} />\n\n        <Route path=\"/tabs/messages/:messageId\" render={(routeProps) => (\n          <MessagesPage {...routeProps} />\n        )} />\n\n        <Route path=\"/tabs/messages\" render={(routeProps) => (\n          <MessagesPage {...routeProps} />\n        )} exact={true} />\n\n\n        <Route path=\"/tabs/clock\" render={() => <ClockPage />} exact={true} />\n      </IonRouterOutlet>\n      <IonTabBar slot=\"bottom\">\n        {/*\n        <IonTabButton tab=\"dashboard\" href=\"/tabs/dashboard\">\n          <IonIcon src=\"assets/img/OS Symbol - 8pt Rounded Black.svg\" />\n          <IonLabel>Dashboard</IonLabel>\n        </IonTabButton>\n        */}\n        <IonTabButton tab=\"schedule\" href=\"/tabs/schedule\">\n          <IonIcon icon={calendar} />\n          <IonLabel>Schedule</IonLabel>\n        </IonTabButton>\n        <IonTabButton tab=\"clock\" href=\"/tabs/clock\">\n          <IonIcon icon={clock} />\n          <IonLabel>Clock</IonLabel>\n        </IonTabButton>\n        <IonTabButton tab=\"map\" href=\"/tabs/messages\">\n          <IonIcon icon={chatboxes} />\n          <IonLabel>Messages</IonLabel>\n        </IonTabButton>\n      </IonTabBar>\n    </IonTabs>\n  );\n};\n\nexport default MainTabs;\n","import React from 'react';\nimport { Redirect } from 'react-router';\nimport MainTabs from './../pages/MainTabs';\nimport { ApplicationUserContext } from '../context/ApplicationUserContext';\n\ninterface StateProps {\n}\n\nconst AuthGate: React.FC<StateProps> = () => {\n  const { user } = React.useContext(ApplicationUserContext);\n\n  if (user.loading) {\n    return (\n      <div>Loading user info</div>\n    );\n  }\n\n  if (user.isLoggedin) {\n    return (\n      <MainTabs />\n    );\n  }\n\n  return (\n    <Redirect to=\"/login\" />\n  );\n};\n\nexport default AuthGate;\n","import React from 'react';\nimport { IonContent, IonPage, useIonViewDidEnter } from '@ionic/react';\nimport { RouteComponentProps } from 'react-router';\nimport { ApplicationUserContext } from '../context/ApplicationUserContext';\nimport './Logout.scss';\nimport { log } from '../util/logger';\nimport {AuthorizedItemsContext} from \"../context/AuthorizedItemsContext\";\n\ninterface LogoutProps extends RouteComponentProps {}\n\nconst Logout: React.FC<LogoutProps> = ({history}) => {\n  const {user, logout } = React.useContext(ApplicationUserContext);\n  const {clearAuth} = React.useContext(AuthorizedItemsContext);\n\n  useIonViewDidEnter(() => {\n    log('logout', { user: user.username});\n    clearAuth();\n    logout().then(() => {\n      setTimeout(() => {\n        history.push('/login', {direction: 'none'});\n        history.goForward();\n      }, 1500);\n    });\n  });\n\n  return (\n    <IonPage id=\"logout-page\">\n      <IonContent className=\"logout-content\">\n\n        <div className=\"login-logo\">\n            <img className=\"logo\" src=\"assets/img/OS Logo - 4pt Rounded _ 2 Tone Orange.svg\" alt=\"Orbital Shift Logo\" />\n        </div>\n\n        <div className=\"label\">You were logged out</div>\n\n      </IonContent>\n\n    </IonPage>\n  );\n};\n\nexport default Logout;\n","import React, {useEffect} from 'react';\nimport { Route, BrowserRouter, Redirect } from 'react-router-dom';\nimport { IonApp, IonRouterOutlet, IonSplitPane } from '@ionic/react';\nimport { IonReactRouter } from '@ionic/react-router';\nimport Menu from './components/Menu';\nimport { initialize, log } from './util/logger';\n\n/* Core CSS required for Ionic components to work properly */\nimport '@ionic/react/css/core.css';\n\n/* Basic CSS for apps built with Ionic */\nimport '@ionic/react/css/normalize.css';\nimport '@ionic/react/css/structure.css';\nimport '@ionic/react/css/typography.css';\n\n/* Optional CSS utils that can be commented out */\nimport '@ionic/react/css/padding.css';\nimport '@ionic/react/css/float-elements.css';\nimport '@ionic/react/css/text-alignment.css';\nimport '@ionic/react/css/text-transformation.css';\nimport '@ionic/react/css/flex-utils.css';\nimport '@ionic/react/css/display.css';\n\n/* Theme variables */\nimport './theme/variables.css';\nimport Login from './pages/Login';\nimport AuthGate from './components/AuthGate';\n\nimport {ApplicationUserContextProvider} from './context/ApplicationUserContext';\nimport Logout from './pages/Logout';\nimport {AuthorizedItemsContextProvider} from \"./context/AuthorizedItemsContext\";\nimport env from \"./api/environment\";\nimport {ScreenOrientation} from \"@ionic-native/screen-orientation\";\n\n\nconst MyApp: React.FC = () => {\n\n  useEffect(() => {\n    if (env.settings.hasCapacitor) {\n      ScreenOrientation.lock(ScreenOrientation.ORIENTATIONS.PORTRAIT).then(() => {\n        console.log(\"screen locked to portrait\");\n      });\n    }\n\n    initialize();\n    log('app_render', { vers: env.settings.appVersionString, platform: env.settings.platform});\n  }, []);\n\n  return (\n    <IonApp>\n      <IonReactRouter>\n        <IonReactRouter>\n          <IonSplitPane contentId=\"main\">\n            <Menu />\n            <IonRouterOutlet id=\"main\">\n\n              <Route path=\"/login\" render={(routeProps) => (\n                <Login {...routeProps} />\n              )} />\n\n              <Route path=\"/logout\" render={(routeProps) => (\n                <Logout {...routeProps} />\n              )} />\n\n              <Route path=\"/tabs\" render={(routeProps) => (\n                <AuthGate {...routeProps} />\n              )}  />\n\n              <Route path=\"/\" exact={true}  >\n                <Redirect to=\"/tabs/schedule\" />\n              </Route>\n\n            </IonRouterOutlet>\n          </IonSplitPane>\n        </IonReactRouter>\n      </IonReactRouter>\n    </IonApp>\n  )\n}\n\nconst App: React.FC = () => {\n  return (\n    <BrowserRouter>\n      <ApplicationUserContextProvider>\n        <AuthorizedItemsContextProvider>\n          <MyApp />\n        </AuthorizedItemsContextProvider>\n      </ApplicationUserContextProvider>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}